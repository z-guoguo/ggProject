{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { hasClass } from './class';\nlet idCounter = 0;\nexport function uniqueId() {\n  idCounter += 1;\n  return `v${idCounter}`;\n}\nexport function ensureId(elem) {\n  if (elem.id == null || elem.id === '') {\n    elem.id = uniqueId();\n  }\n\n  return elem.id;\n}\n/**\n * Returns true if object is an instance of SVGGraphicsElement.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement\n */\n\nexport function isSVGGraphicsElement(elem) {\n  if (elem == null) {\n    return false;\n  }\n\n  return typeof elem.getScreenCTM === 'function' && elem instanceof SVGElement;\n}\nexport const ns = {\n  svg: 'http://www.w3.org/2000/svg',\n  xmlns: 'http://www.w3.org/2000/xmlns/',\n  xml: 'http://www.w3.org/XML/1998/namespace',\n  xlink: 'http://www.w3.org/1999/xlink',\n  xhtml: 'http://www.w3.org/1999/xhtml'\n};\nexport const svgVersion = '1.1';\nexport function createElement(tagName, doc = document) {\n  return doc.createElement(tagName);\n}\nexport function createElementNS(tagName, namespaceURI = ns.xhtml, doc = document) {\n  return doc.createElementNS(namespaceURI, tagName);\n}\nexport function createSvgElement(tagName, doc = document) {\n  return createElementNS(tagName, ns.svg, doc);\n}\nexport function createSvgDocument(content) {\n  if (content) {\n    const xml = `<svg xmlns=\"${ns.svg}\" xmlns:xlink=\"${ns.xlink}\" version=\"${svgVersion}\">${content}</svg>`; // lgtm[js/html-constructed-from-input]\n\n    const {\n      documentElement\n    } = parseXML(xml, {\n      async: false\n    });\n    return documentElement;\n  }\n\n  const svg = document.createElementNS(ns.svg, 'svg');\n  svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);\n  svg.setAttribute('version', svgVersion);\n  return svg;\n}\nexport function parseXML(data, options = {}) {\n  let xml;\n\n  try {\n    const parser = new DOMParser();\n\n    if (options.async != null) {\n      const instance = parser;\n      instance.async = options.async;\n    }\n\n    xml = parser.parseFromString(data, options.mimeType || 'text/xml');\n  } catch (error) {\n    xml = undefined;\n  }\n\n  if (!xml || xml.getElementsByTagName('parsererror').length) {\n    throw new Error(`Invalid XML: ${data}`);\n  }\n\n  return xml;\n}\nexport function tagName(node, lowercase = true) {\n  const nodeName = node.nodeName;\n  return lowercase ? nodeName.toLowerCase() : nodeName.toUpperCase();\n}\nexport function index(elem) {\n  let index = 0;\n  let node = elem.previousSibling;\n\n  while (node) {\n    if (node.nodeType === 1) {\n      index += 1;\n    }\n\n    node = node.previousSibling;\n  }\n\n  return index;\n}\nexport function find(elem, selector) {\n  return elem.querySelectorAll(selector);\n}\nexport function findOne(elem, selector) {\n  return elem.querySelector(selector);\n}\nexport function findParentByClass(elem, className, terminator) {\n  const ownerSVGElement = elem.ownerSVGElement;\n  let node = elem.parentNode;\n\n  while (node && node !== terminator && node !== ownerSVGElement) {\n    if (hasClass(node, className)) {\n      return node;\n    }\n\n    node = node.parentNode;\n  }\n\n  return null;\n}\nexport function contains(parent, child) {\n  const bup = child && child.parentNode;\n  return parent === bup || !!(bup && bup.nodeType === 1 && parent.compareDocumentPosition(bup) & 16) // eslint-disable-line no-bitwise\n  ;\n}\nexport function remove(elem) {\n  if (elem.parentNode) {\n    elem.parentNode.removeChild(elem);\n  }\n}\nexport function empty(elem) {\n  while (elem.firstChild) {\n    elem.removeChild(elem.firstChild);\n  }\n}\nexport function append(elem, elems) {\n  const arr = Array.isArray(elems) ? elems : [elems];\n  arr.forEach(child => {\n    if (child != null) {\n      elem.appendChild(child);\n    }\n  });\n}\nexport function prepend(elem, elems) {\n  const child = elem.firstChild;\n  return child ? before(child, elems) : append(elem, elems);\n}\nexport function before(elem, elems) {\n  const parent = elem.parentNode;\n\n  if (parent) {\n    const arr = Array.isArray(elems) ? elems : [elems];\n    arr.forEach(child => {\n      if (child != null) {\n        parent.insertBefore(child, elem);\n      }\n    });\n  }\n}\nexport function appendTo(elem, target) {\n  if (target != null) {\n    target.appendChild(elem);\n  }\n} // Determines whether a node is an HTML node\n\nexport function isHTMLElement(elem) {\n  try {\n    // Using W3 DOM2 (works for FF, Opera and Chrome)\n    return elem instanceof HTMLElement;\n  } catch (e) {\n    // Browsers not supporting W3 DOM2 don't have HTMLElement and\n    // an exception is thrown and we end up here. Testing some\n    // properties that all elements have (works on IE7)\n    return typeof elem === 'object' && elem.nodeType === 1 && typeof elem.style === 'object' && typeof elem.ownerDocument === 'object';\n  }\n}","map":{"version":3,"mappings":"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","names":["hasClass","idCounter","uniqueId","ensureId","elem","id","isSVGGraphicsElement","getScreenCTM","SVGElement","ns","svg","xmlns","xml","xlink","xhtml","svgVersion","createElement","tagName","doc","document","createElementNS","namespaceURI","createSvgElement","createSvgDocument","content","documentElement","parseXML","async","setAttributeNS","setAttribute","data","options","parser","DOMParser","instance","parseFromString","mimeType","error","undefined","getElementsByTagName","length","Error","node","lowercase","nodeName","toLowerCase","toUpperCase","index","previousSibling","nodeType","find","selector","querySelectorAll","findOne","querySelector","findParentByClass","className","terminator","ownerSVGElement","parentNode","contains","parent","child","bup","compareDocumentPosition","remove","removeChild","empty","firstChild","append","elems","arr","Array","isArray","forEach","appendChild","prepend","before","insertBefore","appendTo","target","isHTMLElement","HTMLElement","e","style","ownerDocument"],"sourceRoot":"","sources":["../../../src/util/dom/elem.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}