{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { each, isNumber } from '@antv/util';\nimport { timeFormat, toTimeStamp } from '../util/time';\nimport Category from './base';\n/**\n * 时间分类度量\n * @class\n */\n\nvar TimeCat =\n/** @class */\nfunction (_super) {\n  __extends(TimeCat, _super);\n\n  function TimeCat() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'timeCat';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimeCat.prototype.translate = function (value) {\n    value = toTimeStamp(value);\n    var index = this.values.indexOf(value);\n\n    if (index === -1) {\n      if (isNumber(value) && value < this.values.length) {\n        index = value;\n      } else {\n        index = NaN;\n      }\n    }\n\n    return index;\n  };\n  /**\n   * 由于时间类型数据需要转换一下，所以复写 getText\n   * @override\n   */\n\n\n  TimeCat.prototype.getText = function (value, tickIndex) {\n    var index = this.translate(value);\n\n    if (index > -1) {\n      var result = this.values[index];\n      var formatter = this.formatter;\n      result = formatter ? formatter(result, tickIndex) : timeFormat(result, this.mask);\n      return result;\n    }\n\n    return value;\n  };\n\n  TimeCat.prototype.initCfg = function () {\n    this.tickMethod = 'time-cat';\n    this.mask = 'YYYY-MM-DD';\n    this.tickCount = 7; // 一般时间数据会显示 7， 14， 30 天的数字\n  };\n\n  TimeCat.prototype.setDomain = function () {\n    var values = this.values; // 针对时间分类类型，会将时间统一转换为时间戳\n\n    each(values, function (v, i) {\n      values[i] = toTimeStamp(v);\n    });\n    values.sort(function (v1, v2) {\n      return v1 - v2;\n    });\n\n    _super.prototype.setDomain.call(this);\n  };\n\n  return TimeCat;\n}(Category);\n\nexport default TimeCat;","map":{"version":3,"mappings":";AAAA,SAASA,IAAT,EAAeC,QAAf,QAA+B,YAA/B;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,cAAxC;AACA,OAAOC,QAAP,MAAqB,QAArB;AAEA;;;;;AAIA;AAAA;AAAA;EAAsBC;;EAAtB;IAAA;;IACkBC,aAAe,SAAf;;EAiDjB;EA/CC;;;;;EAGOC,8BAAP,UAAiBC,KAAjB,EAAsB;IACpBA,KAAK,GAAGL,WAAW,CAACK,KAAD,CAAnB;IACA,IAAIC,KAAK,GAAG,KAAKC,MAAL,CAAYC,OAAZ,CAAoBH,KAApB,CAAZ;;IACA,IAAIC,KAAK,KAAK,CAAC,CAAf,EAAkB;MAChB,IAAIR,QAAQ,CAACO,KAAD,CAAR,IAAmBA,KAAK,GAAG,KAAKE,MAAL,CAAYE,MAA3C,EAAmD;QACjDH,KAAK,GAAGD,KAAR;MACD,CAFD,MAEO;QACLC,KAAK,GAAGI,GAAR;MACD;IACF;;IACD,OAAOJ,KAAP;EACD,CAXM;EAaP;;;;;;EAIOF,4BAAP,UAAeC,KAAf,EAAuCM,SAAvC,EAAyD;IACvD,IAAML,KAAK,GAAG,KAAKM,SAAL,CAAeP,KAAf,CAAd;;IACA,IAAIC,KAAK,GAAG,CAAC,CAAb,EAAgB;MACd,IAAIO,MAAM,GAAG,KAAKN,MAAL,CAAYD,KAAZ,CAAb;MACA,IAAMQ,SAAS,GAAG,KAAKA,SAAvB;MACAD,MAAM,GAAGC,SAAS,GAAGA,SAAS,CAACD,MAAD,EAASF,SAAT,CAAZ,GAAkCZ,UAAU,CAACc,MAAD,EAAS,KAAKE,IAAd,CAA9D;MACA,OAAOF,MAAP;IACD;;IACD,OAAOR,KAAP;EACD,CATM;;EAUGD,4BAAV;IACE,KAAKY,UAAL,GAAkB,UAAlB;IACA,KAAKD,IAAL,GAAY,YAAZ;IACA,KAAKE,SAAL,GAAiB,CAAjB,CAHF,CAGsB;EACrB,CAJS;;EAMAb,8BAAV;IACE,IAAMG,MAAM,GAAG,KAAKA,MAApB,CADF,CAEE;;IACAV,IAAI,CAACU,MAAD,EAAS,UAACW,CAAD,EAAIC,CAAJ,EAAK;MAChBZ,MAAM,CAACY,CAAD,CAAN,GAAYnB,WAAW,CAACkB,CAAD,CAAvB;IACD,CAFG,CAAJ;IAGAX,MAAM,CAACa,IAAP,CAAY,UAACC,EAAD,EAAKC,EAAL,EAAO;MACjB,OAAOD,EAAE,GAAGC,EAAZ;IACD,CAFD;;IAGAC,iBAAMC,SAAN,CAAeC,IAAf,CAAe,IAAf;EACD,CAVS;;EAWZ;AAAC,CAlDD,CAAsBxB,QAAtB;;AAoDA,eAAeG,OAAf","names":["each","isNumber","timeFormat","toTimeStamp","Category","__extends","_this","TimeCat","value","index","values","indexOf","length","NaN","tickIndex","translate","result","formatter","mask","tickMethod","tickCount","v","i","sort","v1","v2","_super","setDomain","call"],"sourceRoot":"","sources":["../../src/category/time.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}