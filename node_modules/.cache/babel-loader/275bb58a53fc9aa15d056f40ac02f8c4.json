{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport * as WebGPUConstants from '@webgpu/types/dist/constants';\nimport WebGPUBuffer from './WebGPUBuffer';\n\nvar WebGPUElements = /*#__PURE__*/function () {\n  function WebGPUElements(engine, options) {\n    _classCallCheck(this, WebGPUElements);\n\n    this.engine = engine;\n    this.options = options;\n    this.indexCount = void 0;\n    this.buffer = void 0;\n    var _options = options,\n        data = _options.data,\n        usage = _options.usage,\n        type = _options.type,\n        count = _options.count;\n    this.indexCount = count || 0;\n    this.buffer = new WebGPUBuffer(engine, {\n      // @ts-ignore\n      data: data instanceof Array ? new Uint16Array(data) : data,\n      usage: WebGPUConstants.BufferUsage.Index | WebGPUConstants.BufferUsage.CopyDst\n    });\n  }\n\n  _createClass(WebGPUElements, [{\n    key: \"get\",\n    value: function get() {\n      return this.buffer;\n    }\n  }, {\n    key: \"subData\",\n    value: function subData(options) {\n      this.buffer.subData(options);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.buffer.destroy();\n    }\n  }]);\n\n  return WebGPUElements;\n}();\n\nexport { WebGPUElements as default };","map":{"version":3,"mappings":";;;;;;AAMA,OAAO,KAAKA,eAAZ,MAAiC,8BAAjC;AAEA,OAAOC,YAAP,MAAyB,gBAAzB;;IAEqBC,c;EAInB,wBACUC,MADV,EAEUC,OAFV,EAGE;IAAAC;;IAAA,KAFQF,MAER,GAFQA,MAER;IAAA,KADQC,OACR,GADQA,OACR;IAAA,KANKE,UAML;IAAA,KALMC,MAKN;IAAA,eACqCH,OADrC;IAAA,IACQI,IADR,YACQA,IADR;IAAA,IACcC,KADd,YACcA,KADd;IAAA,IACqBC,IADrB,YACqBA,IADrB;IAAA,IAC2BC,KAD3B,YAC2BA,KAD3B;IAEA,KAAKL,UAAL,GAAkBK,KAAK,IAAI,CAA3B;IAEA,KAAKJ,MAAL,GAAc,IAAIN,YAAJ,CAAiBE,MAAjB,EAAyB;MACrC;MACAK,IAAI,EAAEA,IAAI,YAAYI,KAAhBJ,GAAwB,IAAIK,WAAJ,CAAgBL,IAAhB,CAAxBA,GAAgDA,IAFjB;MAGrCC,KAAK,EACHT,eAAe,CAACc,WAAhBd,CAA4Be,KAA5Bf,GAAoCA,eAAe,CAACc,WAAhBd,CAA4BgB;IAJ7B,CAAzB,CAAd;EAMD;;;;0BAEY;MACX,OAAO,KAAKT,MAAZ;IACD;;;4BAEcH,SAKZ;MACD,KAAKG,MAAL,CAAYU,OAAZ,CAAoBb,OAApB;IACD;;;8BAEgB;MACf,KAAKG,MAAL,CAAYW,OAAZ;IACD;;;;;;SAlCkBhB,c","names":["WebGPUConstants","WebGPUBuffer","WebGPUElements","engine","options","_classCallCheck","indexCount","buffer","data","usage","type","count","Array","Uint16Array","BufferUsage","Index","CopyDst","subData","destroy"],"sources":["../../src/webgpu/WebGPUElements.ts"],"sourcesContent":["import {\n  BufferData,\n  IBuffer,\n  IElements,\n  IElementsInitializationOptions,\n} from '@antv/g-webgpu-core';\nimport * as WebGPUConstants from '@webgpu/types/dist/constants';\nimport { WebGPUEngine } from '.';\nimport WebGPUBuffer from './WebGPUBuffer';\n\nexport default class WebGPUElements implements IElements {\n  public indexCount: number;\n  private buffer: IBuffer;\n\n  constructor(\n    private engine: WebGPUEngine,\n    private options: IElementsInitializationOptions,\n  ) {\n    const { data, usage, type, count } = options;\n    this.indexCount = count || 0;\n\n    this.buffer = new WebGPUBuffer(engine, {\n      // @ts-ignore\n      data: data instanceof Array ? new Uint16Array(data) : data,\n      usage:\n        WebGPUConstants.BufferUsage.Index | WebGPUConstants.BufferUsage.CopyDst,\n    });\n  }\n\n  public get() {\n    return this.buffer;\n  }\n\n  public subData(options: {\n    // 用于替换的数据\n    data: BufferData;\n    // 原 Buffer 替换位置，单位为 byte\n    offset: number;\n  }) {\n    this.buffer.subData(options);\n  }\n\n  public destroy() {\n    this.buffer.destroy();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}