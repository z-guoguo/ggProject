{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport { VirtualResource } from './VirtualResource';\nexport var ResourceEntry = /*#__PURE__*/function (_VirtualResource) {\n  _inherits(ResourceEntry, _VirtualResource);\n\n  var _super = _createSuper(ResourceEntry);\n\n  function ResourceEntry() {\n    var _this;\n\n    _classCallCheck(this, ResourceEntry);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.version = 0;\n    _this.refs = 0;\n    _this.name = void 0;\n    _this.imported = void 0;\n    _this.priority = void 0;\n    _this.discardStart = true;\n    _this.discardEnd = false;\n    _this.descriptor = void 0;\n    _this.resource = void 0;\n    return _this;\n  }\n\n  _createClass(ResourceEntry, [{\n    key: \"preExecuteDestroy\",\n\n    /**\n     * Lifecycles in FG's execute\n     */\n    value: function preExecuteDestroy() {\n      this.discardEnd = true;\n    }\n  }, {\n    key: \"postExecuteDestroy\",\n    value: function postExecuteDestroy() {\n      if (!this.imported) {// TODO: 不需要每一帧结束后都销毁资源，可以增加临时资源标志\n        // this.resource.destroy();\n      }\n    }\n  }, {\n    key: \"postExecuteDevirtualize\",\n    value: function postExecuteDevirtualize() {\n      this.discardStart = false;\n    }\n  }, {\n    key: \"preExecuteDevirtualize\",\n    value: function preExecuteDevirtualize() {\n      if (!this.imported) {//\n      }\n    }\n  }]);\n\n  return ResourceEntry;\n}(VirtualResource);","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,SAASA,eAAT,QAAgC,mBAAhC;AAEA,WAAaC,aAAb;EAAAC;;EAAA;;EAAA;IAAA;;IAAAC;;IAAA;MAAAC;IAAA;;IAAAC;IAAAA,MACSC,OADT,GAC2B,CAD3B;IAAAD,MAGSE,IAHT,GAGwB,CAHxB;IAAAF,MAKSG,IALT;IAAAH,MAOSI,QAPT;IAAAJ,MASSK,QATT;IAAAL,MAWSM,YAXT,GAWwB,IAXxB;IAAAN,MAaSO,UAbT,GAasB,KAbtB;IAAAP,MAeSQ,UAfT;IAAAR,MAiBSS,QAjBT;IAAA;EAAA;;EAAAC;IAAAC;;IAmBE;AACF;AACA;IArBAC,oCAsBmC;MAC/B,KAAKL,UAAL,GAAkB,IAAlB;IACD;EAxBH;IAAAI;IAAAC,qCA0BoC;MAChC,IAAI,CAAC,KAAKR,QAAV,EAAoB,CAClB;QACA;MACD;IACF;EA/BH;IAAAO;IAAAC,0CAiCyC;MACrC,KAAKN,YAAL,GAAoB,KAApB;IACD;EAnCH;IAAAK;IAAAC,yCAqCkC;MAC9B,IAAI,CAAC,KAAKR,QAAV,EAAoB,CAClB;MACD;IACF;EAzCH;;EAAA;AAAA,EAAmCT,eAAnC","names":["VirtualResource","ResourceEntry","_inherits","_classCallCheck","args","_this","version","refs","name","imported","priority","discardStart","discardEnd","descriptor","resource","_createClass","key","value"],"sources":["../../../src/components/framegraph/ResourceEntry.ts"],"sourcesContent":["import { IFramebuffer, ITexture2D } from '../..';\nimport { TextureDescriptor } from './FrameGraphHandle';\nimport { VirtualResource } from './VirtualResource';\n\nexport class ResourceEntry extends VirtualResource {\n  public version: number = 0;\n\n  public refs: number = 0;\n\n  public name: string;\n\n  public imported: boolean;\n\n  public priority: number;\n\n  public discardStart = true;\n\n  public discardEnd = false;\n\n  public descriptor: TextureDescriptor;\n\n  public resource: IFramebuffer;\n\n  /**\n   * Lifecycles in FG's execute\n   */\n  public preExecuteDestroy(): void {\n    this.discardEnd = true;\n  }\n\n  public postExecuteDestroy(): void {\n    if (!this.imported) {\n      // TODO: 不需要每一帧结束后都销毁资源，可以增加临时资源标志\n      // this.resource.destroy();\n    }\n  }\n\n  public postExecuteDevirtualize(): void {\n    this.discardStart = false;\n  }\n\n  public preExecuteDevirtualize() {\n    if (!this.imported) {\n      //\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}