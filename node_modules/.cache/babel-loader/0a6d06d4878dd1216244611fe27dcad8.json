{"ast":null,"code":"import { Angle } from '../../geometry';\nexport const watermark = function (img, options) {\n  const width = img.width;\n  const height = img.height;\n  const canvas = document.createElement('canvas');\n  canvas.width = width * 3;\n  canvas.height = height * 3;\n  const ctx = canvas.getContext('2d');\n  const angle = options.angle != null ? -options.angle : -20;\n  const radians = Angle.toRad(angle);\n  const stepX = canvas.width / 4;\n  const stepY = canvas.height / 4;\n\n  for (let i = 0; i < 4; i += 1) {\n    for (let j = 0; j < 4; j += 1) {\n      if ((i + j) % 2 > 0) {\n        ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n        ctx.rotate(radians);\n        ctx.drawImage(img, -width / 2, -height / 2, width, height);\n      }\n    }\n  }\n\n  return canvas;\n};","map":{"version":3,"mappings":"AACA,SAASA,KAAT,QAAsB,gBAAtB;AAMA,OAAO,MAAMC,SAAS,GAA4C,UAChEC,GADgE,EAEhEC,OAFgE,EAEzD;EAEP,MAAMC,KAAK,GAAGF,GAAG,CAACE,KAAlB;EACA,MAAMC,MAAM,GAAGH,GAAG,CAACG,MAAnB;EACA,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;EAEAF,MAAM,CAACF,KAAP,GAAeA,KAAK,GAAG,CAAvB;EACAE,MAAM,CAACD,MAAP,GAAgBA,MAAM,GAAG,CAAzB;EAEA,MAAMI,GAAG,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAZ;EACA,MAAMC,KAAK,GAAGR,OAAO,CAACQ,KAAR,IAAiB,IAAjB,GAAwB,CAACR,OAAO,CAACQ,KAAjC,GAAyC,CAAC,EAAxD;EACA,MAAMC,OAAO,GAAGZ,KAAK,CAACa,KAAN,CAAYF,KAAZ,CAAhB;EACA,MAAMG,KAAK,GAAGR,MAAM,CAACF,KAAP,GAAe,CAA7B;EACA,MAAMW,KAAK,GAAGT,MAAM,CAACD,MAAP,GAAgB,CAA9B;;EAEA,KAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,IAAI,CAA5B,EAA+B;IAC7B,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,IAAI,CAA5B,EAA+B;MAC7B,IAAI,CAACD,CAAC,GAAGC,CAAL,IAAU,CAAV,GAAc,CAAlB,EAAqB;QACnBR,GAAG,CAACS,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAAC,IAAIF,CAAJ,GAAQ,CAAT,IAAcF,KAA3C,EAAkD,CAAC,IAAIG,CAAJ,GAAQ,CAAT,IAAcF,KAAhE;QACAN,GAAG,CAACU,MAAJ,CAAWP,OAAX;QACAH,GAAG,CAACW,SAAJ,CAAclB,GAAd,EAAmB,CAACE,KAAD,GAAS,CAA5B,EAA+B,CAACC,MAAD,GAAU,CAAzC,EAA4CD,KAA5C,EAAmDC,MAAnD;MACD;IACF;EACF;;EAED,OAAOC,MAAP;AACD,CA5BM","names":["Angle","watermark","img","options","width","height","canvas","document","createElement","ctx","getContext","angle","radians","toRad","stepX","stepY","i","j","setTransform","rotate","drawImage"],"sourceRoot":"","sources":["../../../src/registry/background/watermark.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}