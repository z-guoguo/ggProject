{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { __assign } from \"tslib\";\nimport { isArray, isNil, mix } from '@antv/util';\nimport { formatPadding } from '../util/base';\nimport Global from '../global';\nimport Shape from './shape';\nimport { shapeBase } from './shapeBase';\nimport { truncateLabelByLength } from '../util/graphic';\nvar singleNode = {\n  itemType: 'node',\n  // 单个图形的类型\n  shapeType: 'single-node',\n\n  /**\n   * 文本相对图形的位置，默认以中心点\n   * 位置包括： top, bottom, left, right, center\n   * @type {String}\n   */\n  labelPosition: 'center',\n\n  /**\n   * 文本相对偏移，当 labelPosition 不为 center 时有效\n   * @type {Number}\n   */\n  offset: Global.nodeLabel.offset,\n\n  /**\n   * 获取节点宽高\n   * @internal 返回节点的大小，以 [width, height] 的方式维护\n   * @param  {Object} cfg 节点的配置项\n   * @return {Array} 宽高\n   */\n  getSize: function getSize(cfg) {\n    var _a;\n\n    var size = ((_a = this.mergeStyle) === null || _a === void 0 ? void 0 : _a.size) || cfg.size || this.getOptions({}).size || Global.defaultNode.size; // Global.defaultNode.size; //  \n    // size 是数组，但长度为1，则补长度为2\n\n    if (isArray(size) && size.length === 1) {\n      size = [size[0], size[0]];\n    } // size 为数字，则转换为数组\n\n\n    if (!isArray(size)) {\n      size = [size, size];\n    }\n\n    return size;\n  },\n  // 私有方法，不希望扩展的节点复写这个方法\n  getLabelStyleByPosition: function getLabelStyleByPosition(cfg, labelCfg) {\n    var labelMaxLength = labelCfg.maxLength;\n    var text = cfg.label;\n\n    if (labelMaxLength) {\n      text = truncateLabelByLength(text, labelMaxLength);\n    }\n\n    var labelPosition = labelCfg.position || this.labelPosition; // 默认的位置（最可能的情形），所以放在最上面\n\n    if (labelPosition === 'center') {\n      return {\n        x: 0,\n        y: 0,\n        text: text,\n        textBaseline: 'middle',\n        textAlign: 'center'\n      };\n    }\n\n    var offset = labelCfg.offset;\n\n    if (isNil(offset)) {\n      // 考虑 offset = 0 的场景，不用用 labelCfg.offset || Global.nodeLabel.offset\n      offset = this.offset; // 不居中时的偏移量\n    }\n\n    var size = this.getSize(cfg);\n    var style;\n\n    switch (labelPosition) {\n      case 'top':\n        style = {\n          x: 0,\n          y: -size[1] / 2 - offset,\n          textBaseline: 'bottom',\n          textAlign: 'center'\n        };\n        break;\n\n      case 'bottom':\n        style = {\n          x: 0,\n          y: size[1] / 2 + offset,\n          textBaseline: 'top',\n          textAlign: 'center'\n        };\n        break;\n\n      case 'left':\n        style = {\n          x: -size[0] / 2 - offset,\n          y: 0,\n          textBaseline: 'middle',\n          textAlign: 'right'\n        };\n        break;\n\n      default:\n        style = {\n          x: size[0] / 2 + offset,\n          y: 0,\n          textBaseline: 'middle',\n          textAlign: 'left'\n        };\n        break;\n    }\n\n    style.text = text;\n    return style;\n  },\n  getLabelBgStyleByPosition: function getLabelBgStyleByPosition(label, labelCfg) {\n    var _a;\n\n    if (!label) return {};\n    var backgroundStyle = (_a = labelCfg.style) === null || _a === void 0 ? void 0 : _a.background;\n    if (!backgroundStyle) return {};\n    var bbox = label.getBBox();\n    var padding = formatPadding(backgroundStyle.padding);\n    var backgroundWidth = bbox.width + padding[1] + padding[3];\n    var backgroundHeight = bbox.height + padding[0] + padding[2];\n    return __assign(__assign({\n      x: bbox.minX - padding[3],\n      y: bbox.minY - padding[0]\n    }, backgroundStyle), {\n      width: backgroundWidth,\n      height: backgroundHeight\n    });\n  },\n  drawShape: function drawShape(cfg, group) {\n    var shapeType = this.shapeType; // || this.type，都已经加了 shapeType\n\n    var style = this.getShapeStyle(cfg);\n    var shape = group.addShape(shapeType, {\n      attrs: style,\n      draggable: true,\n      name: 'node-shape'\n    });\n    group['shapeMap']['node-shape'] = shape;\n    return shape;\n  },\n\n  /**\n   * 更新linkPoints\n   * @param {Object} cfg 节点数据配置项\n   * @param {Group} group Item所在的group\n   */\n  updateLinkPoints: function updateLinkPoints(cfg, group) {\n    var defaultLinkPoints = (this.mergeStyle || this.getOptions(cfg)).linkPoints;\n    var markLeft = group['shapeMap']['link-point-left'] || group.find(function (element) {\n      return element.get('className') === 'link-point-left';\n    });\n    var markRight = group['shapeMap']['link-point-right'] || group.find(function (element) {\n      return element.get('className') === 'link-point-right';\n    });\n    var markTop = group['shapeMap']['link-point-top'] || group.find(function (element) {\n      return element.get('className') === 'link-point-top';\n    });\n    var markBottom = group['shapeMap']['link-point-bottom'] || group.find(function (element) {\n      return element.get('className') === 'link-point-bottom';\n    });\n    var currentLinkPoints;\n\n    if (markLeft) {\n      currentLinkPoints = markLeft.attr();\n    }\n\n    if (markRight && !currentLinkPoints) {\n      currentLinkPoints = markRight.attr();\n    }\n\n    if (markTop && !currentLinkPoints) {\n      currentLinkPoints = markTop.attr();\n    }\n\n    if (markBottom && !currentLinkPoints) {\n      currentLinkPoints = markBottom.attr();\n    }\n\n    if (!currentLinkPoints) currentLinkPoints = defaultLinkPoints;\n    var linkPoints = mix({}, currentLinkPoints, cfg.linkPoints);\n    var markFill = linkPoints.fill,\n        markStroke = linkPoints.stroke,\n        borderWidth = linkPoints.lineWidth;\n    var markSize = linkPoints.size / 2;\n    if (!markSize) markSize = linkPoints.r;\n\n    var _a = cfg.linkPoints ? cfg.linkPoints : {\n      left: undefined,\n      right: undefined,\n      top: undefined,\n      bottom: undefined\n    },\n        left = _a.left,\n        right = _a.right,\n        top = _a.top,\n        bottom = _a.bottom;\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n    var styles = {\n      r: markSize,\n      fill: markFill,\n      stroke: markStroke,\n      lineWidth: borderWidth\n    };\n\n    if (markLeft) {\n      if (!left && left !== undefined) {\n        markLeft.remove();\n        delete group['shapeMap']['link-point-left'];\n      } else {\n        markLeft.attr(__assign(__assign({}, styles), {\n          x: -width / 2,\n          y: 0\n        }));\n      }\n    } else if (left) {\n      var name_1 = 'link-point-left';\n      group['shapeMap'][name_1] = group.addShape('circle', {\n        attrs: __assign(__assign({}, styles), {\n          x: -width / 2,\n          y: 0\n        }),\n        className: name_1,\n        name: name_1,\n        isAnchorPoint: true\n      });\n    }\n\n    if (markRight) {\n      if (!right && right !== undefined) {\n        markRight.remove();\n        delete group['shapeMap']['link-point-right'];\n      }\n\n      markRight.attr(__assign(__assign({}, styles), {\n        x: width / 2,\n        y: 0\n      }));\n    } else if (right) {\n      var name_2 = 'link-point-right';\n      group['shapeMap'][name_2] = group.addShape('circle', {\n        attrs: __assign(__assign({}, styles), {\n          x: width / 2,\n          y: 0\n        }),\n        className: name_2,\n        name: name_2,\n        isAnchorPoint: true\n      });\n    }\n\n    if (markTop) {\n      if (!top && top !== undefined) {\n        markTop.remove();\n        delete group['shapeMap']['link-point-top'];\n      }\n\n      markTop.attr(__assign(__assign({}, styles), {\n        x: 0,\n        y: -height / 2\n      }));\n    } else if (top) {\n      var name_3 = 'link-point-top';\n      group['shapeMap'][name_3] = group.addShape('circle', {\n        attrs: __assign(__assign({}, styles), {\n          x: 0,\n          y: -height / 2\n        }),\n        className: name_3,\n        name: name_3,\n        isAnchorPoint: true\n      });\n    }\n\n    if (markBottom) {\n      if (!bottom && bottom !== undefined) {\n        markBottom.remove();\n        delete group['shapeMap']['link-point-bottom'];\n      } else {\n        markBottom.attr(__assign(__assign({}, styles), {\n          x: 0,\n          y: height / 2\n        }));\n      }\n    } else if (bottom) {\n      var name_4 = 'link-point-bottom';\n      group['shapeMap'][name_4] = group.addShape('circle', {\n        attrs: __assign(__assign({}, styles), {\n          x: 0,\n          y: height / 2\n        }),\n        className: name_4,\n        name: name_4,\n        isAnchorPoint: true\n      });\n    }\n  },\n  updateShape: function updateShape(cfg, item, keyShapeStyle, hasIcon, updateType) {\n    var keyShape = item.get('keyShape');\n    keyShape.attr(__assign({}, keyShapeStyle));\n\n    if (!undefined || (updateType === null || updateType === void 0 ? void 0 : updateType.includes('label'))) {\n      this.updateLabel(cfg, item, updateType);\n    }\n\n    if (hasIcon) {\n      this.updateIcon(cfg, item);\n    }\n  },\n  updateIcon: function updateIcon(cfg, item) {\n    var _this = this;\n\n    var group = item.getContainer();\n    var icon = (this.mergeStyle || this.getOptions(cfg)).icon;\n\n    var _a = cfg.icon ? cfg.icon : {\n      show: undefined,\n      text: undefined\n    },\n        show = _a.show,\n        text = _a.text;\n\n    var iconShape = group['shapeMap'][\"\".concat(this.type, \"-icon\")] || group.find(function (ele) {\n      return ele.get('name') === \"\".concat(_this.type, \"-icon\");\n    });\n\n    if (iconShape) {\n      // 若原先存在 icon\n      if (show || show === undefined) {\n        // 若传入 show: true, 或没有设置，则更新原有的 icon 样式\n        var iconConfig = mix({}, iconShape.attr(), icon);\n        var _b = iconConfig.width,\n            w = _b === void 0 ? 20 : _b,\n            _c = iconConfig.height,\n            h = _c === void 0 ? 20 : _c;\n\n        if (iconConfig.fontFamily === 'iconfont' || iconConfig.hasOwnProperty('text')) {\n          w = 0;\n          h = 0;\n        }\n\n        iconShape.attr(__assign(__assign({}, iconConfig), {\n          x: -w / 2,\n          y: -h / 2\n        }));\n      } else {\n        // 若传入了 show: false 则删除原先的 icon\n        iconShape.remove();\n        delete group['shapeMap'][\"\".concat(this.type, \"-icon\")];\n      }\n    } else if (show) {\n      // 如果原先不存在 icon，但传入了 show: true，则新增 icon\n      var name_5 = \"\".concat(this.type, \"-icon\");\n\n      if (text) {\n        group['shapeMap'][name_5] = group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, icon),\n          className: name_5,\n          name: name_5\n        });\n      } else {\n        var w = icon.width,\n            h = icon.height;\n        group['shapeMap'][name_5] = group.addShape('image', {\n          attrs: __assign(__assign({}, icon), {\n            x: -w / 2,\n            y: -h / 2\n          }),\n          className: name_5,\n          name: name_5\n        });\n      } // to ensure the label is on the top of all the shapes\n\n\n      var labelShape = group['shapeMap']['node-label'] || group.find(function (ele) {\n        return ele.get('name') === 'node-label';\n      });\n\n      if (labelShape) {\n        labelShape.toFront();\n      }\n    }\n  }\n};\n\nvar singleNodeDef = __assign(__assign({}, shapeBase), singleNode);\n\nShape.registerNode('single-node', singleNodeDef);","map":{"version":3,"names":["__assign","isArray","isNil","mix","formatPadding","Global","Shape","shapeBase","truncateLabelByLength","singleNode","itemType","shapeType","labelPosition","offset","nodeLabel","getSize","cfg","_a","size","mergeStyle","getOptions","defaultNode","length","getLabelStyleByPosition","labelCfg","labelMaxLength","maxLength","text","label","position","x","y","textBaseline","textAlign","style","getLabelBgStyleByPosition","backgroundStyle","background","bbox","getBBox","padding","backgroundWidth","width","backgroundHeight","height","minX","minY","drawShape","group","getShapeStyle","shape","addShape","attrs","draggable","name","updateLinkPoints","defaultLinkPoints","linkPoints","markLeft","find","element","get","markRight","markTop","markBottom","currentLinkPoints","attr","markFill","fill","markStroke","stroke","borderWidth","lineWidth","markSize","r","left","undefined","right","top","bottom","styles","remove","name_1","className","isAnchorPoint","name_2","name_3","name_4","updateShape","item","keyShapeStyle","hasIcon","updateType","keyShape","includes","updateLabel","updateIcon","_this","getContainer","icon","show","iconShape","concat","type","ele","iconConfig","_b","w","_c","h","fontFamily","hasOwnProperty","name_5","fontSize","labelShape","toFront","singleNodeDef","registerNode"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-core/es/element/node.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport { isArray, isNil, mix } from '@antv/util';\nimport { formatPadding } from '../util/base';\nimport Global from '../global';\nimport Shape from './shape';\nimport { shapeBase } from './shapeBase';\nimport { truncateLabelByLength } from '../util/graphic';\nvar singleNode = {\n  itemType: 'node',\n  // 单个图形的类型\n  shapeType: 'single-node',\n\n  /**\n   * 文本相对图形的位置，默认以中心点\n   * 位置包括： top, bottom, left, right, center\n   * @type {String}\n   */\n  labelPosition: 'center',\n\n  /**\n   * 文本相对偏移，当 labelPosition 不为 center 时有效\n   * @type {Number}\n   */\n  offset: Global.nodeLabel.offset,\n\n  /**\n   * 获取节点宽高\n   * @internal 返回节点的大小，以 [width, height] 的方式维护\n   * @param  {Object} cfg 节点的配置项\n   * @return {Array} 宽高\n   */\n  getSize: function getSize(cfg) {\n    var _a;\n\n    var size = ((_a = this.mergeStyle) === null || _a === void 0 ? void 0 : _a.size) || cfg.size || this.getOptions({}).size || Global.defaultNode.size; // Global.defaultNode.size; //  \n    // size 是数组，但长度为1，则补长度为2\n\n    if (isArray(size) && size.length === 1) {\n      size = [size[0], size[0]];\n    } // size 为数字，则转换为数组\n\n\n    if (!isArray(size)) {\n      size = [size, size];\n    }\n\n    return size;\n  },\n  // 私有方法，不希望扩展的节点复写这个方法\n  getLabelStyleByPosition: function getLabelStyleByPosition(cfg, labelCfg) {\n    var labelMaxLength = labelCfg.maxLength;\n    var text = cfg.label;\n\n    if (labelMaxLength) {\n      text = truncateLabelByLength(text, labelMaxLength);\n    }\n\n    var labelPosition = labelCfg.position || this.labelPosition; // 默认的位置（最可能的情形），所以放在最上面\n\n    if (labelPosition === 'center') {\n      return {\n        x: 0,\n        y: 0,\n        text: text,\n        textBaseline: 'middle',\n        textAlign: 'center'\n      };\n    }\n\n    var offset = labelCfg.offset;\n\n    if (isNil(offset)) {\n      // 考虑 offset = 0 的场景，不用用 labelCfg.offset || Global.nodeLabel.offset\n      offset = this.offset; // 不居中时的偏移量\n    }\n\n    var size = this.getSize(cfg);\n    var style;\n\n    switch (labelPosition) {\n      case 'top':\n        style = {\n          x: 0,\n          y: -size[1] / 2 - offset,\n          textBaseline: 'bottom',\n          textAlign: 'center'\n        };\n        break;\n\n      case 'bottom':\n        style = {\n          x: 0,\n          y: size[1] / 2 + offset,\n          textBaseline: 'top',\n          textAlign: 'center'\n        };\n        break;\n\n      case 'left':\n        style = {\n          x: -size[0] / 2 - offset,\n          y: 0,\n          textBaseline: 'middle',\n          textAlign: 'right'\n        };\n        break;\n\n      default:\n        style = {\n          x: size[0] / 2 + offset,\n          y: 0,\n          textBaseline: 'middle',\n          textAlign: 'left'\n        };\n        break;\n    }\n\n    style.text = text;\n    return style;\n  },\n  getLabelBgStyleByPosition: function getLabelBgStyleByPosition(label, labelCfg) {\n    var _a;\n\n    if (!label) return {};\n    var backgroundStyle = (_a = labelCfg.style) === null || _a === void 0 ? void 0 : _a.background;\n    if (!backgroundStyle) return {};\n    var bbox = label.getBBox();\n    var padding = formatPadding(backgroundStyle.padding);\n    var backgroundWidth = bbox.width + padding[1] + padding[3];\n    var backgroundHeight = bbox.height + padding[0] + padding[2];\n    return __assign(__assign({\n      x: bbox.minX - padding[3],\n      y: bbox.minY - padding[0]\n    }, backgroundStyle), {\n      width: backgroundWidth,\n      height: backgroundHeight\n    });\n  },\n  drawShape: function drawShape(cfg, group) {\n    var shapeType = this.shapeType; // || this.type，都已经加了 shapeType\n\n    var style = this.getShapeStyle(cfg);\n    var shape = group.addShape(shapeType, {\n      attrs: style,\n      draggable: true,\n      name: 'node-shape'\n    });\n    group['shapeMap']['node-shape'] = shape;\n    return shape;\n  },\n\n  /**\n   * 更新linkPoints\n   * @param {Object} cfg 节点数据配置项\n   * @param {Group} group Item所在的group\n   */\n  updateLinkPoints: function updateLinkPoints(cfg, group) {\n    var defaultLinkPoints = (this.mergeStyle || this.getOptions(cfg)).linkPoints;\n    var markLeft = group['shapeMap']['link-point-left'] || group.find(function (element) {\n      return element.get('className') === 'link-point-left';\n    });\n    var markRight = group['shapeMap']['link-point-right'] || group.find(function (element) {\n      return element.get('className') === 'link-point-right';\n    });\n    var markTop = group['shapeMap']['link-point-top'] || group.find(function (element) {\n      return element.get('className') === 'link-point-top';\n    });\n    var markBottom = group['shapeMap']['link-point-bottom'] || group.find(function (element) {\n      return element.get('className') === 'link-point-bottom';\n    });\n    var currentLinkPoints;\n\n    if (markLeft) {\n      currentLinkPoints = markLeft.attr();\n    }\n\n    if (markRight && !currentLinkPoints) {\n      currentLinkPoints = markRight.attr();\n    }\n\n    if (markTop && !currentLinkPoints) {\n      currentLinkPoints = markTop.attr();\n    }\n\n    if (markBottom && !currentLinkPoints) {\n      currentLinkPoints = markBottom.attr();\n    }\n\n    if (!currentLinkPoints) currentLinkPoints = defaultLinkPoints;\n    var linkPoints = mix({}, currentLinkPoints, cfg.linkPoints);\n    var markFill = linkPoints.fill,\n        markStroke = linkPoints.stroke,\n        borderWidth = linkPoints.lineWidth;\n    var markSize = linkPoints.size / 2;\n    if (!markSize) markSize = linkPoints.r;\n\n    var _a = cfg.linkPoints ? cfg.linkPoints : {\n      left: undefined,\n      right: undefined,\n      top: undefined,\n      bottom: undefined\n    },\n        left = _a.left,\n        right = _a.right,\n        top = _a.top,\n        bottom = _a.bottom;\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n    var styles = {\n      r: markSize,\n      fill: markFill,\n      stroke: markStroke,\n      lineWidth: borderWidth\n    };\n\n    if (markLeft) {\n      if (!left && left !== undefined) {\n        markLeft.remove();\n        delete group['shapeMap']['link-point-left'];\n      } else {\n        markLeft.attr(__assign(__assign({}, styles), {\n          x: -width / 2,\n          y: 0\n        }));\n      }\n    } else if (left) {\n      var name_1 = 'link-point-left';\n      group['shapeMap'][name_1] = group.addShape('circle', {\n        attrs: __assign(__assign({}, styles), {\n          x: -width / 2,\n          y: 0\n        }),\n        className: name_1,\n        name: name_1,\n        isAnchorPoint: true\n      });\n    }\n\n    if (markRight) {\n      if (!right && right !== undefined) {\n        markRight.remove();\n        delete group['shapeMap']['link-point-right'];\n      }\n\n      markRight.attr(__assign(__assign({}, styles), {\n        x: width / 2,\n        y: 0\n      }));\n    } else if (right) {\n      var name_2 = 'link-point-right';\n      group['shapeMap'][name_2] = group.addShape('circle', {\n        attrs: __assign(__assign({}, styles), {\n          x: width / 2,\n          y: 0\n        }),\n        className: name_2,\n        name: name_2,\n        isAnchorPoint: true\n      });\n    }\n\n    if (markTop) {\n      if (!top && top !== undefined) {\n        markTop.remove();\n        delete group['shapeMap']['link-point-top'];\n      }\n\n      markTop.attr(__assign(__assign({}, styles), {\n        x: 0,\n        y: -height / 2\n      }));\n    } else if (top) {\n      var name_3 = 'link-point-top';\n      group['shapeMap'][name_3] = group.addShape('circle', {\n        attrs: __assign(__assign({}, styles), {\n          x: 0,\n          y: -height / 2\n        }),\n        className: name_3,\n        name: name_3,\n        isAnchorPoint: true\n      });\n    }\n\n    if (markBottom) {\n      if (!bottom && bottom !== undefined) {\n        markBottom.remove();\n        delete group['shapeMap']['link-point-bottom'];\n      } else {\n        markBottom.attr(__assign(__assign({}, styles), {\n          x: 0,\n          y: height / 2\n        }));\n      }\n    } else if (bottom) {\n      var name_4 = 'link-point-bottom';\n      group['shapeMap'][name_4] = group.addShape('circle', {\n        attrs: __assign(__assign({}, styles), {\n          x: 0,\n          y: height / 2\n        }),\n        className: name_4,\n        name: name_4,\n        isAnchorPoint: true\n      });\n    }\n  },\n  updateShape: function updateShape(cfg, item, keyShapeStyle, hasIcon, updateType) {\n    var keyShape = item.get('keyShape');\n    keyShape.attr(__assign({}, keyShapeStyle));\n\n    if (!undefined || (updateType === null || updateType === void 0 ? void 0 : updateType.includes('label'))) {\n      this.updateLabel(cfg, item, updateType);\n    }\n\n    if (hasIcon) {\n      this.updateIcon(cfg, item);\n    }\n  },\n  updateIcon: function updateIcon(cfg, item) {\n    var _this = this;\n\n    var group = item.getContainer();\n    var icon = (this.mergeStyle || this.getOptions(cfg)).icon;\n\n    var _a = cfg.icon ? cfg.icon : {\n      show: undefined,\n      text: undefined\n    },\n        show = _a.show,\n        text = _a.text;\n\n    var iconShape = group['shapeMap'][\"\".concat(this.type, \"-icon\")] || group.find(function (ele) {\n      return ele.get('name') === \"\".concat(_this.type, \"-icon\");\n    });\n\n    if (iconShape) {\n      // 若原先存在 icon\n      if (show || show === undefined) {\n        // 若传入 show: true, 或没有设置，则更新原有的 icon 样式\n        var iconConfig = mix({}, iconShape.attr(), icon);\n        var _b = iconConfig.width,\n            w = _b === void 0 ? 20 : _b,\n            _c = iconConfig.height,\n            h = _c === void 0 ? 20 : _c;\n\n        if (iconConfig.fontFamily === 'iconfont' || iconConfig.hasOwnProperty('text')) {\n          w = 0;\n          h = 0;\n        }\n\n        iconShape.attr(__assign(__assign({}, iconConfig), {\n          x: -w / 2,\n          y: -h / 2\n        }));\n      } else {\n        // 若传入了 show: false 则删除原先的 icon\n        iconShape.remove();\n        delete group['shapeMap'][\"\".concat(this.type, \"-icon\")];\n      }\n    } else if (show) {\n      // 如果原先不存在 icon，但传入了 show: true，则新增 icon\n      var name_5 = \"\".concat(this.type, \"-icon\");\n\n      if (text) {\n        group['shapeMap'][name_5] = group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, icon),\n          className: name_5,\n          name: name_5\n        });\n      } else {\n        var w = icon.width,\n            h = icon.height;\n        group['shapeMap'][name_5] = group.addShape('image', {\n          attrs: __assign(__assign({}, icon), {\n            x: -w / 2,\n            y: -h / 2\n          }),\n          className: name_5,\n          name: name_5\n        });\n      } // to ensure the label is on the top of all the shapes\n\n\n      var labelShape = group['shapeMap']['node-label'] || group.find(function (ele) {\n        return ele.get('name') === 'node-label';\n      });\n\n      if (labelShape) {\n        labelShape.toFront();\n      }\n    }\n  }\n};\n\nvar singleNodeDef = __assign(__assign({}, shapeBase), singleNode);\n\nShape.registerNode('single-node', singleNodeDef);"],"mappings":"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"},"metadata":{},"sourceType":"module"}