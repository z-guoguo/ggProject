{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nvar WebGPUFramebuffer = /*#__PURE__*/function () {\n  function WebGPUFramebuffer(engine, options) {\n    _classCallCheck(this, WebGPUFramebuffer);\n\n    this.engine = engine;\n    this.options = options;\n    this.colorTexture = void 0;\n    this.depthTexture = void 0;\n    this.width = 0;\n    this.height = 0;\n    var _options = options,\n        width = _options.width,\n        height = _options.height,\n        color = _options.color,\n        colors = _options.colors,\n        depth = _options.depth,\n        stencil = _options.stencil;\n\n    if (color) {\n      this.colorTexture = color;\n    }\n\n    if (depth) {\n      this.depthTexture = depth;\n    } // TODO: depth & stencil\n\n  }\n\n  _createClass(WebGPUFramebuffer, [{\n    key: \"get\",\n    value: function get() {\n      var _this$colorTexture, _this$depthTexture;\n\n      return {\n        color: (_this$colorTexture = this.colorTexture) === null || _this$colorTexture === void 0 ? void 0 : _this$colorTexture.get(),\n        depth: (_this$depthTexture = this.depthTexture) === null || _this$depthTexture === void 0 ? void 0 : _this$depthTexture.get()\n      };\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this$colorTexture2, _this$depthTexture2;\n\n      (_this$colorTexture2 = this.colorTexture) === null || _this$colorTexture2 === void 0 ? void 0 : _this$colorTexture2.destroy();\n      (_this$depthTexture2 = this.depthTexture) === null || _this$depthTexture2 === void 0 ? void 0 : _this$depthTexture2.destroy();\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref) {\n      var width = _ref.width,\n          height = _ref.height;\n\n      if (width !== this.width || height !== this.height) {\n        var _this$colorTexture3, _this$depthTexture3;\n\n        (_this$colorTexture3 = this.colorTexture) === null || _this$colorTexture3 === void 0 ? void 0 : _this$colorTexture3.resize({\n          width: width,\n          height: height\n        });\n        (_this$depthTexture3 = this.depthTexture) === null || _this$depthTexture3 === void 0 ? void 0 : _this$depthTexture3.resize({\n          width: width,\n          height: height\n        });\n      }\n\n      this.width = width;\n      this.height = height;\n    }\n  }]);\n\n  return WebGPUFramebuffer;\n}();\n\nexport { WebGPUFramebuffer as default };","map":{"version":3,"mappings":";;;IAUqBA,iB;EAMnB,2BACUC,MADV,EAEUC,OAFV,EAGE;IAAAC;;IAAA,KAFQF,MAER,GAFQA,MAER;IAAA,KADQC,OACR,GADQA,OACR;IAAA,KARME,YAQN;IAAA,KAPMC,YAON;IAAA,KANMC,KAMN,GANsB,CAMtB;IAAA,KALMC,MAKN,GALuB,CAKvB;IAAA,eACyDL,OADzD;IAAA,IACQI,KADR,YACQA,KADR;IAAA,IACeC,MADf,YACeA,MADf;IAAA,IACuBC,KADvB,YACuBA,KADvB;IAAA,IAC8BC,MAD9B,YAC8BA,MAD9B;IAAA,IACsCC,KADtC,YACsCA,KADtC;IAAA,IAC6CC,OAD7C,YAC6CA,OAD7C;;IAEA,IAAIH,KAAJ,EAAW;MACT,KAAKJ,YAAL,GAAoBI,KAApB;IACD;;IACD,IAAIE,KAAJ,EAAW;MACT,KAAKL,YAAL,GAAoBK,KAApB;IANF,EAQA;;EACD;;;;0BAEY;MAAA;;MACX,OAAO;QACLF,KAAK,wBAAE,KAAKJ,YAAP,uDAAEQ,mBAAmBC,GAAnB,EADF;QAELH,KAAK,wBAAE,KAAKL,YAAP,uDAAES,mBAAmBD,GAAnB;MAFF,CAAP;IAID;;;8BAEgB;MAAA;;MACf,4BAAKT,YAAL,4EAAmBW,OAAnB;MACA,4BAAKV,YAAL,4EAAmBU,OAAnB;IACD;;;iCAEmE;MAAA,IAApDT,KAAoD,QAApDA,KAAoD;MAAA,IAA7CC,MAA6C,QAA7CA,MAA6C;;MAClE,IAAID,KAAK,KAAK,KAAKA,KAAfA,IAAwBC,MAAM,KAAK,KAAKA,MAA5C,EAAoD;QAAA;;QAClD,4BAAKH,YAAL,4EAAmBY,MAAnB,CAA0B;UAAEV,KAAK,EAALA,KAAF;UAASC,MAAM,EAANA;QAAT,CAA1B;QACA,4BAAKF,YAAL,4EAAmBW,MAAnB,CAA0B;UAAEV,KAAK,EAALA,KAAF;UAASC,MAAM,EAANA;QAAT,CAA1B;MACD;;MACD,KAAKD,KAAL,GAAaA,KAAb;MACA,KAAKC,MAAL,GAAcA,MAAd;IACD;;;;;;SAvCkBP,iB","names":["WebGPUFramebuffer","engine","options","_classCallCheck","colorTexture","depthTexture","width","height","color","colors","depth","stencil","_this$colorTexture","get","_this$depthTexture","destroy","resize"],"sources":["../../src/webgpu/WebGPUFramebuffer.ts"],"sourcesContent":["import {\n  gl,\n  IFramebuffer,\n  IFramebufferInitializationOptions,\n  IRenderbuffer,\n  ITexture2D,\n} from '@antv/g-webgpu-core';\nimport { WebGPUEngine } from '.';\nimport WebGPUTexture2D from './WebGPUTexture2D';\n\nexport default class WebGPUFramebuffer implements IFramebuffer {\n  private colorTexture: WebGPUTexture2D | null;\n  private depthTexture: WebGPUTexture2D | null;\n  private width: number = 0;\n  private height: number = 0;\n\n  constructor(\n    private engine: WebGPUEngine,\n    private options: IFramebufferInitializationOptions,\n  ) {\n    const { width, height, color, colors, depth, stencil } = options;\n    if (color) {\n      this.colorTexture = color as WebGPUTexture2D;\n    }\n    if (depth) {\n      this.depthTexture = depth as WebGPUTexture2D;\n    }\n    // TODO: depth & stencil\n  }\n\n  public get() {\n    return {\n      color: this.colorTexture?.get(),\n      depth: this.depthTexture?.get(),\n    };\n  }\n\n  public destroy() {\n    this.colorTexture?.destroy();\n    this.depthTexture?.destroy();\n  }\n\n  public resize({ width, height }: { width: number; height: number }) {\n    if (width !== this.width || height !== this.height) {\n      this.colorTexture?.resize({ width, height });\n      this.depthTexture?.resize({ width, height });\n    }\n    this.width = width;\n    this.height = height;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}