{"ast":null,"code":"import JQuery from 'jquery';\nimport { Platform } from '../platform';\nexport class MouseWheelHandle {\n  constructor(target, onWheelCallback, onWheelGuard) {\n    this.animationFrameId = 0;\n    this.deltaX = 0;\n    this.deltaY = 0;\n    this.eventName = Platform.isEventSupported('wheel') ? 'wheel' : 'mousewheel';\n    this.target = target;\n    this.onWheelCallback = onWheelCallback;\n    this.onWheelGuard = onWheelGuard;\n    this.onWheel = this.onWheel.bind(this);\n    this.didWheel = this.didWheel.bind(this);\n  }\n\n  enable() {\n    if (Platform.SUPPORT_PASSIVE) {\n      this.target.addEventListener(this.eventName, this.onWheel, {\n        passive: false\n      });\n    } else {\n      JQuery(this.target).on('mousewheel', this.onWheel);\n    }\n  }\n\n  disable() {\n    if (Platform.SUPPORT_PASSIVE) {\n      this.target.removeEventListener(this.eventName, this.onWheel);\n    } else {\n      JQuery(this.target).off('mousewheel');\n    }\n  }\n\n  onWheel(e) {\n    if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n      return;\n    }\n\n    this.deltaX += e.deltaX;\n    this.deltaY += e.deltaY;\n    e.preventDefault();\n    let changed;\n\n    if (this.deltaX !== 0 || this.deltaY !== 0) {\n      e.stopPropagation();\n      changed = true;\n    }\n\n    if (changed === true && this.animationFrameId === 0) {\n      this.animationFrameId = requestAnimationFrame(() => {\n        this.didWheel(e);\n      });\n    }\n  }\n\n  didWheel(e) {\n    this.animationFrameId = 0;\n    this.onWheelCallback(e, this.deltaX, this.deltaY);\n    this.deltaX = 0;\n    this.deltaY = 0;\n  }\n\n}","map":{"version":3,"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAASC,QAAT,QAAyB,aAAzB;AAEA,OAAM,MAAOC,gBAAP,CAAuB;EAW3BC,YACEC,MADF,EAEEC,eAFF,EAGEC,YAHF,EAG8C;IAVtC,wBAAmB,CAAnB;IACA,cAAS,CAAT;IACA,cAAS,CAAT;IACA,iBAAYL,QAAQ,CAACM,gBAAT,CAA0B,OAA1B,IAChB,OADgB,GAEhB,YAFI;IASN,KAAKH,MAAL,GAAcA,MAAd;IACA,KAAKC,eAAL,GAAuBA,eAAvB;IACA,KAAKC,YAAL,GAAoBA,YAApB;IACA,KAAKE,OAAL,GAAe,KAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAf;IACA,KAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAhB;EACD;;EAEME,MAAM;IACX,IAAIV,QAAQ,CAACW,eAAb,EAA8B;MAC5B,KAAKR,MAAL,CAAYS,gBAAZ,CAA6B,KAAKC,SAAlC,EAA6C,KAAKN,OAAlD,EAA2D;QACzDO,OAAO,EAAE;MADgD,CAA3D;IAGD,CAJD,MAIO;MACLf,MAAM,CAAC,KAAKI,MAAN,CAAN,CAAoBY,EAApB,CAAuB,YAAvB,EAAqC,KAAKR,OAA1C;IACD;EACF;;EAEMS,OAAO;IACZ,IAAIhB,QAAQ,CAACW,eAAb,EAA8B;MAC5B,KAAKR,MAAL,CAAYc,mBAAZ,CAAgC,KAAKJ,SAArC,EAAgD,KAAKN,OAArD;IACD,CAFD,MAEO;MACLR,MAAM,CAAC,KAAKI,MAAN,CAAN,CAAoBe,GAApB,CAAwB,YAAxB;IACD;EACF;;EAEOX,OAAO,CAACY,CAAD,EAAgD;IAC7D,IAAI,KAAKd,YAAL,IAAqB,IAArB,IAA6B,CAAC,KAAKA,YAAL,CAAkBc,CAAlB,CAAlC,EAAwD;MACtD;IACD;;IAED,KAAKC,MAAL,IAAeD,CAAC,CAACC,MAAjB;IACA,KAAKC,MAAL,IAAeF,CAAC,CAACE,MAAjB;IACAF,CAAC,CAACG,cAAF;IAEA,IAAIC,OAAJ;;IACA,IAAI,KAAKH,MAAL,KAAgB,CAAhB,IAAqB,KAAKC,MAAL,KAAgB,CAAzC,EAA4C;MAC1CF,CAAC,CAACK,eAAF;MACAD,OAAO,GAAG,IAAV;IACD;;IAED,IAAIA,OAAO,KAAK,IAAZ,IAAoB,KAAKE,gBAAL,KAA0B,CAAlD,EAAqD;MACnD,KAAKA,gBAAL,GAAwBC,qBAAqB,CAAC,MAAK;QACjD,KAAKjB,QAAL,CAAcU,CAAd;MACD,CAF4C,CAA7C;IAGD;EACF;;EAEOV,QAAQ,CAACU,CAAD,EAAgD;IAC9D,KAAKM,gBAAL,GAAwB,CAAxB;IACA,KAAKrB,eAAL,CAAqBe,CAArB,EAAwB,KAAKC,MAA7B,EAAqC,KAAKC,MAA1C;IACA,KAAKD,MAAL,GAAc,CAAd;IACA,KAAKC,MAAL,GAAc,CAAd;EACD;;AApE0B","names":["JQuery","Platform","MouseWheelHandle","constructor","target","onWheelCallback","onWheelGuard","isEventSupported","onWheel","bind","didWheel","enable","SUPPORT_PASSIVE","addEventListener","eventName","passive","on","disable","removeEventListener","off","e","deltaX","deltaY","preventDefault","changed","stopPropagation","animationFrameId","requestAnimationFrame"],"sourceRoot":"","sources":["../../../src/util/dom/mousewheel.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}