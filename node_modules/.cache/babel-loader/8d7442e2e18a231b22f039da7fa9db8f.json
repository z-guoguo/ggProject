{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { __extends } from \"tslib\";\nimport { isString, isPlainObject, isNil, mix } from '@antv/util';\nimport Item from './item';\nvar END_MAP = {\n  source: 'start',\n  target: 'end'\n};\nvar ITEM_NAME_SUFFIX = 'Node'; // 端点的后缀，如 sourceNode, targetNode\n\nvar POINT_NAME_SUFFIX = 'Point'; // 起点或者结束点的后缀，如 startPoint, endPoint\n\nvar ANCHOR_NAME_SUFFIX = 'Anchor';\n\nvar Edge =\n/** @class */\nfunction (_super) {\n  __extends(Edge, _super);\n\n  function Edge() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Edge.prototype.getDefaultCfg = function () {\n    return {\n      type: 'edge',\n      sourceNode: null,\n      targetNode: null,\n      startPoint: null,\n      endPoint: null,\n      linkCenter: false\n    };\n  };\n\n  Edge.prototype.setEnd = function (name, value) {\n    var pointName = END_MAP[name] + POINT_NAME_SUFFIX;\n    var itemName = name + ITEM_NAME_SUFFIX;\n    var preItem = this.get(itemName);\n\n    if (preItem && !preItem.destroyed) {\n      // 如果之前存在节点，则移除掉边\n      preItem.removeEdge(this);\n    }\n\n    if (isPlainObject(value)) {\n      // 如果设置成具体的点，则清理节点\n      this.set(pointName, value);\n      this.set(itemName, null);\n    } else if (value) {\n      value.addEdge(this);\n      this.set(itemName, value);\n      this.set(pointName, null);\n    }\n  };\n  /**\n   * 获取连接点的坐标\n   * @param name source | target\n   * @param model 边的数据模型\n   * @param controlPoints 控制点\n   */\n\n\n  Edge.prototype.getLinkPoint = function (name, model, controlPoints) {\n    var pointName = END_MAP[name] + POINT_NAME_SUFFIX;\n    var itemName = name + ITEM_NAME_SUFFIX;\n    var point = this.get(pointName);\n\n    if (!point) {\n      var item = this.get(itemName);\n      var anchorName = name + ANCHOR_NAME_SUFFIX;\n      var prePoint = this.getPrePoint(name, controlPoints);\n      var anchorIndex = model[anchorName];\n\n      if (!isNil(anchorIndex)) {\n        // 如果有锚点，则使用锚点索引获取连接点\n        point = item.getLinkPointByAnchor(anchorIndex);\n      } // 如果锚点没有对应的点或者没有锚点，则直接计算连接点\n\n\n      point = point || item.getLinkPoint(prePoint);\n\n      if (!isNil(point.index)) {\n        this.set(\"\".concat(name, \"AnchorIndex\"), point.index);\n      }\n    }\n\n    return point;\n  };\n  /**\n   * 获取同端点进行连接的点，计算交汇点\n   * @param name\n   * @param controlPoints\n   */\n\n\n  Edge.prototype.getPrePoint = function (name, controlPoints) {\n    if (controlPoints && controlPoints.length) {\n      var index = name === 'source' ? 0 : controlPoints.length - 1;\n      return controlPoints[index];\n    }\n\n    var oppositeName = name === 'source' ? 'target' : 'source'; // 取另一个节点的位置\n\n    return this.getEndPoint(oppositeName);\n  };\n  /**\n   * 获取端点的位置\n   * @param name\n   */\n\n\n  Edge.prototype.getEndPoint = function (name) {\n    var itemName = name + ITEM_NAME_SUFFIX;\n    var pointName = END_MAP[name] + POINT_NAME_SUFFIX;\n    var item = this.get(itemName); // 如果有端点，直接使用 model\n\n    if (item) {\n      return item.get('model');\n    } // 否则直接使用点\n\n\n    return this.get(pointName);\n  };\n  /**\n   * 通过端点的中心获取控制点\n   * @param model\n   */\n\n\n  Edge.prototype.getControlPointsByCenter = function (model) {\n    var sourcePoint = this.getEndPoint('source');\n    var targetPoint = this.getEndPoint('target');\n    var shapeFactory = this.get('shapeFactory');\n    var type = model.type;\n    return shapeFactory.getControlPoints(type, {\n      startPoint: sourcePoint,\n      endPoint: targetPoint\n    });\n  };\n\n  Edge.prototype.getEndCenter = function (name) {\n    var itemName = name + ITEM_NAME_SUFFIX;\n    var pointName = END_MAP[name] + POINT_NAME_SUFFIX;\n    var item = this.get(itemName); // 如果有端点，直接使用 model\n\n    if (item) {\n      var bbox = item.getBBox();\n      return {\n        x: bbox.centerX,\n        y: bbox.centerY\n      };\n    } // 否则直接使用点\n\n\n    return this.get(pointName);\n  };\n\n  Edge.prototype.init = function () {\n    _super.prototype.init.call(this); // 初始化两个端点\n\n\n    this.setSource(this.get('source'));\n    this.setTarget(this.get('target'));\n  };\n\n  Edge.prototype.getShapeCfg = function (model, updateType) {\n    var self = this;\n    var linkCenter = self.get('linkCenter'); // 如果连接到中心，忽视锚点、忽视控制点\n\n    var cfg = (updateType === null || updateType === void 0 ? void 0 : updateType.includes('move')) ? model : _super.prototype.getShapeCfg.call(this, model);\n\n    if (linkCenter) {\n      cfg.startPoint = self.getEndCenter('source');\n      cfg.endPoint = self.getEndCenter('target');\n    } else {\n      var controlPoints = cfg.controlPoints || self.getControlPointsByCenter(cfg);\n      cfg.startPoint = self.getLinkPoint('source', model, controlPoints);\n      cfg.endPoint = self.getLinkPoint('target', model, controlPoints);\n    }\n\n    cfg.sourceNode = self.get('sourceNode');\n    cfg.targetNode = self.get('targetNode');\n    return cfg;\n  };\n  /**\n   * 获取边的数据模型\n   */\n\n\n  Edge.prototype.getModel = function () {\n    var out = this.get('model');\n    var sourceItem = this.get(\"source\".concat(ITEM_NAME_SUFFIX));\n    var targetItem = this.get(\"target\".concat(ITEM_NAME_SUFFIX));\n\n    if (sourceItem) {\n      delete out[\"source\".concat(ITEM_NAME_SUFFIX)];\n    } else {\n      out.source = this.get(\"start\".concat(POINT_NAME_SUFFIX));\n    }\n\n    if (targetItem) {\n      delete out[\"target\".concat(ITEM_NAME_SUFFIX)];\n    } else {\n      out.target = this.get(\"end\".concat(POINT_NAME_SUFFIX));\n    }\n\n    if (!isString(out.source) && !isPlainObject(out.source)) {\n      out.source = out.source.getID();\n    }\n\n    if (!isString(out.target) && !isPlainObject(out.target)) {\n      out.target = out.target.getID();\n    }\n\n    return out;\n  };\n\n  Edge.prototype.setSource = function (source) {\n    this.setEnd('source', source);\n    this.set('source', source);\n  };\n\n  Edge.prototype.setTarget = function (target) {\n    this.setEnd('target', target);\n    this.set('target', target);\n  };\n\n  Edge.prototype.getSource = function () {\n    return this.get('source');\n  };\n\n  Edge.prototype.getTarget = function () {\n    return this.get('target');\n  };\n\n  Edge.prototype.updatePosition = function () {\n    return false;\n  };\n  /**\n   * 边不需要重计算容器位置，直接重新计算 path 位置\n   * @param {object} cfg 待更新数据\n   */\n\n\n  Edge.prototype.update = function (cfg, updateType) {\n    if (updateType === void 0) {\n      updateType = undefined;\n    }\n\n    var model = this.get('model');\n    var oriVisible = model.visible;\n    var cfgVisible = cfg.visible;\n    if (oriVisible !== cfgVisible && cfgVisible !== undefined) this.changeVisibility(cfgVisible);\n    var styles = this.get('styles');\n\n    if (cfg.stateStyles) {\n      // 更新 item 时更新 this.get('styles') 中的值\n      var stateStyles = cfg.stateStyles;\n      mix(styles, stateStyles);\n      delete cfg.stateStyles;\n    }\n\n    Object.assign(model, cfg);\n    this.updateShape(updateType);\n    this.afterUpdate();\n    this.clearCache();\n  };\n\n  Edge.prototype.destroy = function () {\n    var sourceItem = this.get(\"source\".concat(ITEM_NAME_SUFFIX));\n    var targetItem = this.get(\"target\".concat(ITEM_NAME_SUFFIX));\n\n    if (sourceItem && !sourceItem.destroyed) {\n      sourceItem.removeEdge(this);\n    }\n\n    if (targetItem && !targetItem.destroyed) {\n      targetItem.removeEdge(this);\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return Edge;\n}(Item);\n\nexport default Edge;","map":{"version":3,"names":["__extends","isString","isPlainObject","isNil","mix","Item","END_MAP","source","target","ITEM_NAME_SUFFIX","POINT_NAME_SUFFIX","ANCHOR_NAME_SUFFIX","Edge","_super","apply","arguments","prototype","getDefaultCfg","type","sourceNode","targetNode","startPoint","endPoint","linkCenter","setEnd","name","value","pointName","itemName","preItem","get","destroyed","removeEdge","set","addEdge","getLinkPoint","model","controlPoints","point","item","anchorName","prePoint","getPrePoint","anchorIndex","getLinkPointByAnchor","index","concat","length","oppositeName","getEndPoint","getControlPointsByCenter","sourcePoint","targetPoint","shapeFactory","getControlPoints","getEndCenter","bbox","getBBox","x","centerX","y","centerY","init","call","setSource","setTarget","getShapeCfg","updateType","self","cfg","includes","getModel","out","sourceItem","targetItem","getID","getSource","getTarget","updatePosition","update","undefined","oriVisible","visible","cfgVisible","changeVisibility","styles","stateStyles","Object","assign","updateShape","afterUpdate","clearCache","destroy"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-core/es/item/edge.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport { isString, isPlainObject, isNil, mix } from '@antv/util';\nimport Item from './item';\nvar END_MAP = {\n  source: 'start',\n  target: 'end'\n};\nvar ITEM_NAME_SUFFIX = 'Node'; // 端点的后缀，如 sourceNode, targetNode\n\nvar POINT_NAME_SUFFIX = 'Point'; // 起点或者结束点的后缀，如 startPoint, endPoint\n\nvar ANCHOR_NAME_SUFFIX = 'Anchor';\n\nvar Edge =\n/** @class */\nfunction (_super) {\n  __extends(Edge, _super);\n\n  function Edge() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Edge.prototype.getDefaultCfg = function () {\n    return {\n      type: 'edge',\n      sourceNode: null,\n      targetNode: null,\n      startPoint: null,\n      endPoint: null,\n      linkCenter: false\n    };\n  };\n\n  Edge.prototype.setEnd = function (name, value) {\n    var pointName = END_MAP[name] + POINT_NAME_SUFFIX;\n    var itemName = name + ITEM_NAME_SUFFIX;\n    var preItem = this.get(itemName);\n\n    if (preItem && !preItem.destroyed) {\n      // 如果之前存在节点，则移除掉边\n      preItem.removeEdge(this);\n    }\n\n    if (isPlainObject(value)) {\n      // 如果设置成具体的点，则清理节点\n      this.set(pointName, value);\n      this.set(itemName, null);\n    } else if (value) {\n      value.addEdge(this);\n      this.set(itemName, value);\n      this.set(pointName, null);\n    }\n  };\n  /**\n   * 获取连接点的坐标\n   * @param name source | target\n   * @param model 边的数据模型\n   * @param controlPoints 控制点\n   */\n\n\n  Edge.prototype.getLinkPoint = function (name, model, controlPoints) {\n    var pointName = END_MAP[name] + POINT_NAME_SUFFIX;\n    var itemName = name + ITEM_NAME_SUFFIX;\n    var point = this.get(pointName);\n\n    if (!point) {\n      var item = this.get(itemName);\n      var anchorName = name + ANCHOR_NAME_SUFFIX;\n      var prePoint = this.getPrePoint(name, controlPoints);\n      var anchorIndex = model[anchorName];\n\n      if (!isNil(anchorIndex)) {\n        // 如果有锚点，则使用锚点索引获取连接点\n        point = item.getLinkPointByAnchor(anchorIndex);\n      } // 如果锚点没有对应的点或者没有锚点，则直接计算连接点\n\n\n      point = point || item.getLinkPoint(prePoint);\n\n      if (!isNil(point.index)) {\n        this.set(\"\".concat(name, \"AnchorIndex\"), point.index);\n      }\n    }\n\n    return point;\n  };\n  /**\n   * 获取同端点进行连接的点，计算交汇点\n   * @param name\n   * @param controlPoints\n   */\n\n\n  Edge.prototype.getPrePoint = function (name, controlPoints) {\n    if (controlPoints && controlPoints.length) {\n      var index = name === 'source' ? 0 : controlPoints.length - 1;\n      return controlPoints[index];\n    }\n\n    var oppositeName = name === 'source' ? 'target' : 'source'; // 取另一个节点的位置\n\n    return this.getEndPoint(oppositeName);\n  };\n  /**\n   * 获取端点的位置\n   * @param name\n   */\n\n\n  Edge.prototype.getEndPoint = function (name) {\n    var itemName = name + ITEM_NAME_SUFFIX;\n    var pointName = END_MAP[name] + POINT_NAME_SUFFIX;\n    var item = this.get(itemName); // 如果有端点，直接使用 model\n\n    if (item) {\n      return item.get('model');\n    } // 否则直接使用点\n\n\n    return this.get(pointName);\n  };\n  /**\n   * 通过端点的中心获取控制点\n   * @param model\n   */\n\n\n  Edge.prototype.getControlPointsByCenter = function (model) {\n    var sourcePoint = this.getEndPoint('source');\n    var targetPoint = this.getEndPoint('target');\n    var shapeFactory = this.get('shapeFactory');\n    var type = model.type;\n    return shapeFactory.getControlPoints(type, {\n      startPoint: sourcePoint,\n      endPoint: targetPoint\n    });\n  };\n\n  Edge.prototype.getEndCenter = function (name) {\n    var itemName = name + ITEM_NAME_SUFFIX;\n    var pointName = END_MAP[name] + POINT_NAME_SUFFIX;\n    var item = this.get(itemName); // 如果有端点，直接使用 model\n\n    if (item) {\n      var bbox = item.getBBox();\n      return {\n        x: bbox.centerX,\n        y: bbox.centerY\n      };\n    } // 否则直接使用点\n\n\n    return this.get(pointName);\n  };\n\n  Edge.prototype.init = function () {\n    _super.prototype.init.call(this); // 初始化两个端点\n\n\n    this.setSource(this.get('source'));\n    this.setTarget(this.get('target'));\n  };\n\n  Edge.prototype.getShapeCfg = function (model, updateType) {\n    var self = this;\n    var linkCenter = self.get('linkCenter'); // 如果连接到中心，忽视锚点、忽视控制点\n\n    var cfg = (updateType === null || updateType === void 0 ? void 0 : updateType.includes('move')) ? model : _super.prototype.getShapeCfg.call(this, model);\n\n    if (linkCenter) {\n      cfg.startPoint = self.getEndCenter('source');\n      cfg.endPoint = self.getEndCenter('target');\n    } else {\n      var controlPoints = cfg.controlPoints || self.getControlPointsByCenter(cfg);\n      cfg.startPoint = self.getLinkPoint('source', model, controlPoints);\n      cfg.endPoint = self.getLinkPoint('target', model, controlPoints);\n    }\n\n    cfg.sourceNode = self.get('sourceNode');\n    cfg.targetNode = self.get('targetNode');\n    return cfg;\n  };\n  /**\n   * 获取边的数据模型\n   */\n\n\n  Edge.prototype.getModel = function () {\n    var out = this.get('model');\n    var sourceItem = this.get(\"source\".concat(ITEM_NAME_SUFFIX));\n    var targetItem = this.get(\"target\".concat(ITEM_NAME_SUFFIX));\n\n    if (sourceItem) {\n      delete out[\"source\".concat(ITEM_NAME_SUFFIX)];\n    } else {\n      out.source = this.get(\"start\".concat(POINT_NAME_SUFFIX));\n    }\n\n    if (targetItem) {\n      delete out[\"target\".concat(ITEM_NAME_SUFFIX)];\n    } else {\n      out.target = this.get(\"end\".concat(POINT_NAME_SUFFIX));\n    }\n\n    if (!isString(out.source) && !isPlainObject(out.source)) {\n      out.source = out.source.getID();\n    }\n\n    if (!isString(out.target) && !isPlainObject(out.target)) {\n      out.target = out.target.getID();\n    }\n\n    return out;\n  };\n\n  Edge.prototype.setSource = function (source) {\n    this.setEnd('source', source);\n    this.set('source', source);\n  };\n\n  Edge.prototype.setTarget = function (target) {\n    this.setEnd('target', target);\n    this.set('target', target);\n  };\n\n  Edge.prototype.getSource = function () {\n    return this.get('source');\n  };\n\n  Edge.prototype.getTarget = function () {\n    return this.get('target');\n  };\n\n  Edge.prototype.updatePosition = function () {\n    return false;\n  };\n  /**\n   * 边不需要重计算容器位置，直接重新计算 path 位置\n   * @param {object} cfg 待更新数据\n   */\n\n\n  Edge.prototype.update = function (cfg, updateType) {\n    if (updateType === void 0) {\n      updateType = undefined;\n    }\n\n    var model = this.get('model');\n    var oriVisible = model.visible;\n    var cfgVisible = cfg.visible;\n    if (oriVisible !== cfgVisible && cfgVisible !== undefined) this.changeVisibility(cfgVisible);\n    var styles = this.get('styles');\n\n    if (cfg.stateStyles) {\n      // 更新 item 时更新 this.get('styles') 中的值\n      var stateStyles = cfg.stateStyles;\n      mix(styles, stateStyles);\n      delete cfg.stateStyles;\n    }\n\n    Object.assign(model, cfg);\n    this.updateShape(updateType);\n    this.afterUpdate();\n    this.clearCache();\n  };\n\n  Edge.prototype.destroy = function () {\n    var sourceItem = this.get(\"source\".concat(ITEM_NAME_SUFFIX));\n    var targetItem = this.get(\"target\".concat(ITEM_NAME_SUFFIX));\n\n    if (sourceItem && !sourceItem.destroyed) {\n      sourceItem.removeEdge(this);\n    }\n\n    if (targetItem && !targetItem.destroyed) {\n      targetItem.removeEdge(this);\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return Edge;\n}(Item);\n\nexport default Edge;"],"mappings":"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"},"metadata":{},"sourceType":"module"}