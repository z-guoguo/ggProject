{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * 按照数据中的结果设置fixorder\n */\n\nvar initDataOrder = function (g, nodeOrder) {\n  var simpleNodes = g.nodes().filter(function (v) {\n    var _a;\n\n    return !((_a = g.children(v)) === null || _a === void 0 ? void 0 : _a.length);\n  });\n  var ranks = simpleNodes.map(function (v) {\n    return g.node(v).rank;\n  });\n  var maxRank = Math.max.apply(Math, ranks);\n  var layers = Array(maxRank + 1).fill([]);\n  nodeOrder === null || nodeOrder === void 0 ? void 0 : nodeOrder.forEach(function (n) {\n    var node = g.node(n); // 只考虑原有节点，dummy节点需要按照后续算法排出\n\n    if (!node || (node === null || node === void 0 ? void 0 : node.dummy)) {\n      return;\n    }\n\n    if (!isNaN(node.rank)) {\n      node.fixorder = layers[node.rank].length; // 设置fixorder为当层的顺序\n\n      layers[node.rank].push(n);\n    }\n  });\n};\n\nexports.default = initDataOrder;","map":{"version":3,"mappings":";;;;;AAEA;;;;AAGA,IAAMA,aAAa,GAAG,UAACC,CAAD,EAAWC,SAAX,EAA8B;EAClD,IAAMC,WAAW,GAAGF,CAAC,CAACG,KAAF,GAAUC,MAAV,CAAiB,UAACC,CAAD,EAAE;;;IACrC,OAAO,EAAC,OAAC,CAACC,QAAF,CAAWD,CAAX,OAAa,IAAb,IAAaE,aAAb,GAAa,MAAb,GAAaA,GAAEC,MAAhB,CAAP;EACD,CAFmB,CAApB;EAGA,IAAMC,KAAK,GAAGP,WAAW,CAACQ,GAAZ,CAAgB,UAACL,CAAD,EAAE;IAAK,QAAC,CAACM,IAAF,CAAON,CAAP,EAAWO,IAAX;EAAyB,CAAhD,CAAd;EACA,IAAMC,OAAO,GAAGC,IAAI,CAACC,GAAL,CAAQC,KAAR,OAAYP,KAAZ,CAAhB;EACA,IAAMQ,MAAM,GAAeC,KAAK,CAACL,OAAO,GAAG,CAAX,CAAL,CAAmBM,IAAnB,CAAwB,EAAxB,CAA3B;EAEAlB,SAAS,SAAT,aAAS,WAAT,GAAS,MAAT,YAAS,CAAEmB,OAAX,CAAmB,UAACC,CAAD,EAAE;IACnB,IAAMV,IAAI,GAAGX,CAAC,CAACW,IAAF,CAAOU,CAAP,CAAb,CADmB,CAEnB;;IACA,IAAI,CAACV,IAAD,KAASA,IAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAEW,KAAf,CAAJ,EAA0B;MACxB;IACD;;IACD,IAAI,CAACC,KAAK,CAACZ,IAAI,CAACC,IAAN,CAAV,EAAiC;MAC/BD,IAAI,CAACa,QAAL,GAAgBP,MAAM,CAACN,IAAI,CAACC,IAAN,CAAN,CAA4BJ,MAA5C,CAD+B,CACqB;;MACpDS,MAAM,CAACN,IAAI,CAACC,IAAN,CAAN,CAA4Ba,IAA5B,CAAiCJ,CAAjC;IACD;EACF,CAVD;AAWD,CAnBD;;AAqBAK,kBAAe3B,aAAf","names":["initDataOrder","g","nodeOrder","simpleNodes","nodes","filter","v","children","_a","length","ranks","map","node","rank","maxRank","Math","max","apply","layers","Array","fill","forEach","n","dummy","isNaN","fixorder","push","exports"],"sourceRoot":"","sources":["../../../../../src/layout/dagre/src/order/init-data-order.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}