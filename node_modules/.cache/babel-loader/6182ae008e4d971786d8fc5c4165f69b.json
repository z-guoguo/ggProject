{"ast":null,"code":"import path2Absolute from './path-2-absolute';\nimport { segmentToCubic } from './process/segment-2-cubic';\nexport default function pathToCurve(path, needZCommandIndexes) {\n  if (needZCommandIndexes === void 0) {\n    needZCommandIndexes = false;\n  }\n\n  var pathArray = path2Absolute(path);\n  var params = {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    x: 0,\n    y: 0,\n    qx: null,\n    qy: null\n  };\n  var allPathCommands = [];\n  var pathCommand = '';\n  var ii = pathArray.length;\n  var segment;\n  var seglen;\n  var zCommandIndexes = [];\n\n  for (var i = 0; i < ii; i += 1) {\n    if (pathArray[i]) pathCommand = pathArray[i][0];\n    allPathCommands[i] = pathCommand;\n    pathArray[i] = segmentToCubic(pathArray[i], params);\n    fixArc(pathArray, allPathCommands, i);\n    ii = pathArray.length; // solves curveArrays ending in Z\n    // keep Z command account for lineJoin\n    // @see https://github.com/antvis/util/issues/68\n\n    if (pathCommand === 'Z') {\n      zCommandIndexes.push(i);\n    }\n\n    segment = pathArray[i];\n    seglen = segment.length;\n    params.x1 = +segment[seglen - 2];\n    params.y1 = +segment[seglen - 1];\n    params.x2 = +segment[seglen - 4] || params.x1;\n    params.y2 = +segment[seglen - 3] || params.y1;\n  }\n\n  if (needZCommandIndexes) {\n    return [pathArray, zCommandIndexes];\n  } else {\n    return pathArray;\n  }\n}\n\nfunction fixArc(pathArray, allPathCommands, i) {\n  if (pathArray[i].length > 7) {\n    pathArray[i].shift();\n    var pi = pathArray[i]; // const ni = i + 1;\n\n    var ni = i;\n\n    while (pi.length) {\n      // if created multiple C:s, their original seg is saved\n      allPathCommands[i] = 'A'; // @ts-ignore\n\n      pathArray.splice(ni += 1, 0, ['C'].concat(pi.splice(0, 6)));\n    }\n\n    pathArray.splice(i, 1);\n  }\n}","map":{"version":3,"mappings":"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","names":["path2Absolute","segmentToCubic","pathToCurve","path","needZCommandIndexes","pathArray","params","x1","y1","x2","y2","x","y","qx","qy","allPathCommands","pathCommand","ii","length","segment","seglen","zCommandIndexes","i","fixArc","push","shift","pi","ni","splice","concat"],"sourceRoot":"","sources":["../src/path-2-curve.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}