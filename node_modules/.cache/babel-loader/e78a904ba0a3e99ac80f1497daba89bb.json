{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { clone } from '@antv/util';\nimport Base from '../base';\nvar DELTA = 0.05;\nvar lensDelegateStyle = {\n  stroke: '#000',\n  strokeOpacity: 0.8,\n  lineWidth: 2,\n  fillOpacity: 0.1,\n  fill: '#ccc'\n};\n\nvar Fisheye =\n/** @class */\nfunction (_super) {\n  __extends(Fisheye, _super);\n\n  function Fisheye(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Fisheye.prototype.getDefaultCfgs = function () {\n    return {\n      trigger: 'mousemove',\n      d: 1.5,\n      r: 300,\n      delegateStyle: clone(lensDelegateStyle),\n      showLabel: false,\n      maxD: 5,\n      minD: 0,\n      scaleRBy: 'unset',\n      scaleDBy: 'unset',\n      showDPercent: true\n    };\n  }; // class-methods-use-this\n\n\n  Fisheye.prototype.getEvents = function () {\n    var events;\n\n    switch (this.get('trigger')) {\n      case 'click':\n        events = {\n          click: 'magnify'\n        };\n        break;\n\n      case 'drag':\n        events = {\n          click: 'createDelegate'\n        };\n        break;\n\n      default:\n        events = {\n          mousemove: 'magnify'\n        };\n        break;\n    }\n\n    return events;\n  };\n\n  Fisheye.prototype.init = function () {\n    var self = this;\n    var r = self.get('r');\n    self.set('cachedMagnifiedModels', []);\n    self.set('cachedOriginPositions', {});\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n  }; // Create the delegate when the trigger is drag\n\n\n  Fisheye.prototype.createDelegate = function (e) {\n    var _this = this;\n\n    var self = this;\n    var lensDelegate = self.get('delegate');\n\n    if (!lensDelegate || lensDelegate.destroyed) {\n      self.magnify(e);\n      lensDelegate = self.get('delegate'); // drag to move the lens\n\n      lensDelegate.on('dragstart', function (evt) {\n        self.set('delegateCenterDiff', {\n          x: lensDelegate.attr('x') - evt.x,\n          y: lensDelegate.attr('y') - evt.y\n        });\n      });\n      lensDelegate.on('drag', function (evt) {\n        self.magnify(evt);\n      }); // 绑定调整范围（r）和缩放系数(d)的监听\n      // 由于 drag 用于改变 lens 位置, 因此在此模式下, drag 不能用于调整 r 和 d\n      // scaling d\n\n      if (this.get('scaleDBy') === 'wheel') {\n        lensDelegate.on('mousewheel', function (evt) {\n          _this.scaleDByWheel(evt);\n        });\n      } // scaling r\n\n\n      if (this.get('scaleRBy') === 'wheel') {\n        lensDelegate.on('mousewheel', function (evt) {\n          self.scaleRByWheel(evt);\n        });\n      }\n    }\n  };\n  /**\n   * Scale the range by wheel\n   * @param e mouse wheel event\n   */\n\n\n  Fisheye.prototype.scaleRByWheel = function (e) {\n    var self = this;\n    if (!e || !e.originalEvent) return;\n    if (e.preventDefault) e.preventDefault();\n    var graph = self.get('graph');\n    var ratio;\n    var lensDelegate = self.get('delegate');\n    var lensCenter = lensDelegate ? {\n      x: lensDelegate.attr('x'),\n      y: lensDelegate.attr('y')\n    } : undefined;\n    var mousePos = lensCenter || graph.getPointByClient(e.clientX, e.clientY);\n\n    if (e.originalEvent.wheelDelta < 0) {\n      ratio = 1 - DELTA;\n    } else {\n      ratio = 1 / (1 - DELTA);\n    }\n\n    var maxR = self.get('maxR');\n    var minR = self.get('minR');\n    var r = self.get('r');\n\n    if (r > (maxR || graph.get('height')) && ratio > 1 || r < (minR || graph.get('height') * 0.05) && ratio < 1) {\n      ratio = 1;\n    }\n\n    r *= ratio;\n    self.set('r', r);\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n    self.set('delegateCenterDiff', undefined);\n    self.magnify(e, mousePos);\n  };\n  /**\n   * Scale the range by dragging\n   * @param e mouse event\n   */\n\n\n  Fisheye.prototype.scaleRByDrag = function (e) {\n    var self = this;\n    if (!e) return;\n    var dragPrePos = self.get('dragPrePos');\n    var graph = self.get('graph');\n    var ratio;\n    var mousePos = graph.getPointByClient(e.clientX, e.clientY);\n\n    if (e.x - dragPrePos.x < 0) {\n      ratio = 1 - DELTA;\n    } else {\n      ratio = 1 / (1 - DELTA);\n    }\n\n    var maxR = self.get('maxR');\n    var minR = self.get('minR');\n    var r = self.get('r');\n\n    if (r > (maxR || graph.get('height')) && ratio > 1 || r < (minR || graph.get('height') * 0.05) && ratio < 1) {\n      ratio = 1;\n    }\n\n    r *= ratio;\n    self.set('r', r);\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n    self.magnify(e, mousePos);\n    self.set('dragPrePos', {\n      x: e.x,\n      y: e.y\n    });\n  };\n  /**\n   * Scale the magnifying factor by wheel\n   * @param e mouse wheel event\n   */\n\n\n  Fisheye.prototype.scaleDByWheel = function (evt) {\n    var self = this;\n    if (!evt && !evt.originalEvent) return;\n    if (evt.preventDefault) evt.preventDefault();\n    var delta = 0;\n\n    if (evt.originalEvent.wheelDelta < 0) {\n      delta = -0.1;\n    } else {\n      delta = 0.1;\n    }\n\n    var d = self.get('d');\n    var newD = d + delta;\n    var maxD = self.get('maxD');\n    var minD = self.get('minD');\n\n    if (newD < maxD && newD > minD) {\n      self.set('d', newD);\n      var r = self.get('r');\n      self.set('molecularParam', (newD + 1) * r);\n      var lensDelegate = self.get('delegate');\n      var lensCenter = lensDelegate ? {\n        x: lensDelegate.attr('x'),\n        y: lensDelegate.attr('y')\n      } : undefined;\n      self.set('delegateCenterDiff', undefined);\n      self.magnify(evt, lensCenter);\n    }\n  };\n  /**\n   * Scale the magnifying factor by dragging\n   * @param e mouse event\n   */\n\n\n  Fisheye.prototype.scaleDByDrag = function (e) {\n    var self = this;\n    var dragPrePos = self.get('dragPrePos');\n    var delta = e.x - dragPrePos.x > 0 ? 0.1 : -0.1;\n    var d = self.get('d');\n    var newD = d + delta;\n    var maxD = self.get('maxD');\n    var minD = self.get('minD');\n\n    if (newD < maxD && newD > minD) {\n      self.set('d', newD);\n      var r = self.get('r');\n      self.set('molecularParam', (newD + 1) * r);\n      self.magnify(e);\n    }\n\n    self.set('dragPrePos', {\n      x: e.x,\n      y: e.y\n    });\n  };\n  /**\n   * Response function for mousemove, click, or drag to magnify\n   * @param e mouse event\n   */\n\n\n  Fisheye.prototype.magnify = function (e, mousePos) {\n    var self = this;\n    self.restoreCache();\n    var graph = self.get('graph');\n    var cachedMagnifiedModels = self.get('cachedMagnifiedModels');\n    var cachedOriginPositions = self.get('cachedOriginPositions');\n    var showLabel = self.get('showLabel');\n    var r = self.get('r');\n    var r2 = self.get('r2');\n    var d = self.get('d');\n    var molecularParam = self.get('molecularParam');\n    var nodes = graph.getNodes();\n    var nodeLength = nodes.length;\n    var mCenter = mousePos ? {\n      x: mousePos.x,\n      y: mousePos.y\n    } : {\n      x: e.x,\n      y: e.y\n    };\n\n    if (self.get('dragging') && (self.get('trigger') === 'mousemove' || self.get('trigger') === 'click')) {\n      mCenter = self.get('cacheCenter');\n    }\n\n    var delegateCenterDiff = self.get('delegateCenterDiff');\n\n    if (delegateCenterDiff) {\n      mCenter.x += delegateCenterDiff.x;\n      mCenter.y += delegateCenterDiff.y;\n    }\n\n    self.updateDelegate(mCenter, r);\n\n    for (var i = 0; i < nodeLength; i++) {\n      var model = nodes[i].getModel();\n      var x = model.x,\n          y = model.y;\n      if (isNaN(x) || isNaN(y)) continue; // the square of the distance between the node and the magnified center\n\n      var dist2 = (x - mCenter.x) * (x - mCenter.x) + (y - mCenter.y) * (y - mCenter.y);\n\n      if (!isNaN(dist2) && dist2 < r2 && dist2 !== 0) {\n        var dist = Math.sqrt(dist2); // (r * (d + 1) * (dist / r)) / (d * (dist / r) + 1);\n\n        var magnifiedDist = molecularParam * dist / (d * dist + r);\n        var cos = (x - mCenter.x) / dist;\n        var sin = (y - mCenter.y) / dist;\n        model.x = cos * magnifiedDist + mCenter.x;\n        model.y = sin * magnifiedDist + mCenter.y;\n\n        if (!cachedOriginPositions[model.id]) {\n          cachedOriginPositions[model.id] = {\n            x: x,\n            y: y,\n            texts: []\n          };\n        }\n\n        cachedMagnifiedModels.push(model);\n\n        if (showLabel && 2 * dist < r) {\n          var node = nodes[i];\n          var nodeGroup = node.getContainer();\n          var shapes = nodeGroup.getChildren();\n          var shapeLength = shapes.length;\n\n          for (var j = 0; j < shapeLength; j++) {\n            var shape = shapes[j];\n\n            if (shape.get('type') === 'text') {\n              cachedOriginPositions[model.id].texts.push({\n                visible: shape.get('visible'),\n                shape: shape\n              });\n              shape.set('visible', true);\n            }\n          }\n        }\n      }\n    }\n\n    graph.refreshPositions();\n  };\n  /**\n   * Restore the cache nodes while magnifying\n   */\n\n\n  Fisheye.prototype.restoreCache = function () {\n    var self = this;\n    var cachedMagnifiedModels = self.get('cachedMagnifiedModels');\n    var cachedOriginPositions = self.get('cachedOriginPositions');\n    var cacheLength = cachedMagnifiedModels.length;\n\n    for (var i = 0; i < cacheLength; i++) {\n      var node = cachedMagnifiedModels[i];\n      var id = node.id;\n      var ori = cachedOriginPositions[id];\n      node.x = ori.x;\n      node.y = ori.y;\n      var textLength = ori.texts.length;\n\n      for (var j = 0; j < textLength; j++) {\n        var text = ori.texts[j];\n        text.shape.set('visible', text.visible);\n      }\n    }\n\n    self.set('cachedMagnifiedModels', []);\n    self.set('cachedOriginPositions', {});\n  };\n  /**\n   * Adjust part of the parameters, including trigger, d, r, maxR, minR, maxD, minD, scaleRBy, and scaleDBy\n   * @param {FisheyeConfig} cfg\n   */\n\n\n  Fisheye.prototype.updateParams = function (cfg) {\n    var self = this;\n    var r = cfg.r,\n        d = cfg.d,\n        trigger = cfg.trigger,\n        minD = cfg.minD,\n        maxD = cfg.maxD,\n        minR = cfg.minR,\n        maxR = cfg.maxR,\n        scaleDBy = cfg.scaleDBy,\n        scaleRBy = cfg.scaleRBy;\n\n    if (!isNaN(cfg.r)) {\n      self.set('r', r);\n      self.set('r2', r * r);\n    }\n\n    if (!isNaN(d)) {\n      self.set('d', d);\n    }\n\n    if (!isNaN(maxD)) {\n      self.set('maxD', maxD);\n    }\n\n    if (!isNaN(minD)) {\n      self.set('minD', minD);\n    }\n\n    if (!isNaN(maxR)) {\n      self.set('maxR', maxR);\n    }\n\n    if (!isNaN(minR)) {\n      self.set('minR', minR);\n    }\n\n    var nd = self.get('d');\n    var nr = self.get('r');\n    self.set('molecularParam', (nd + 1) * nr);\n\n    if (trigger === 'mousemove' || trigger === 'click' || trigger === 'drag') {\n      self.set('trigger', trigger);\n    }\n\n    if (scaleDBy === 'drag' || scaleDBy === 'wheel' || scaleDBy === 'unset') {\n      self.set('scaleDBy', scaleDBy);\n      self.get('delegate').remove();\n      self.get('delegate').destroy();\n      var dPercentText = self.get('dPercentText');\n\n      if (dPercentText) {\n        dPercentText.remove();\n        dPercentText.destroy();\n      }\n    }\n\n    if (scaleRBy === 'drag' || scaleRBy === 'wheel' || scaleRBy === 'unset') {\n      self.set('scaleRBy', scaleRBy);\n      self.get('delegate').remove();\n      self.get('delegate').destroy();\n      var dPercentText = self.get('dPercentText');\n\n      if (dPercentText) {\n        dPercentText.remove();\n        dPercentText.destroy();\n      }\n    }\n  };\n  /**\n   * Update the delegate shape of the lens\n   * @param {Point} mCenter the center of the shape\n   * @param {number} r the radius of the shape\n   */\n\n\n  Fisheye.prototype.updateDelegate = function (mCenter, r) {\n    var _this = this;\n\n    var self = this;\n    var graph = self.get('graph');\n    var lensDelegate = self.get('delegate');\n\n    if (!lensDelegate || lensDelegate.destroyed) {\n      // 拖动多个\n      var parent_1 = graph.get('group');\n      var attrs = self.get('delegateStyle') || lensDelegateStyle; // model上的x, y是相对于图形中心的, delegateShape是g实例, x,y是绝对坐标\n\n      lensDelegate = parent_1.addShape('circle', {\n        attrs: __assign({\n          r: r / 1.5,\n          x: mCenter.x,\n          y: mCenter.y\n        }, attrs),\n        name: 'lens-shape',\n        draggable: true\n      });\n\n      if (this.get('trigger') !== 'drag') {\n        // 调整范围 r 的监听\n        if (this.get('scaleRBy') === 'wheel') {\n          // 使用滚轮调整 r\n          lensDelegate.on('mousewheel', function (evt) {\n            self.scaleRByWheel(evt);\n          });\n        } else if (this.get('scaleRBy') === 'drag') {\n          // 使用拖拽调整 r\n          lensDelegate.on('dragstart', function (e) {\n            self.set('dragging', true);\n            self.set('cacheCenter', {\n              x: e.x,\n              y: e.y\n            });\n            self.set('dragPrePos', {\n              x: e.x,\n              y: e.y\n            });\n          });\n          lensDelegate.on('drag', function (evt) {\n            self.scaleRByDrag(evt);\n          });\n          lensDelegate.on('dragend', function (e) {\n            self.set('dragging', false);\n          });\n        } // 调整缩放系数 d 的监听\n\n\n        if (this.get('scaleDBy') === 'wheel') {\n          // 使用滚轮调整 d\n          lensDelegate.on('mousewheel', function (evt) {\n            _this.scaleDByWheel(evt);\n          });\n        } else if (this.get('scaleDBy') === 'drag') {\n          // 使用拖拽调整 d\n          lensDelegate.on('dragstart', function (evt) {\n            self.set('dragging', true);\n            self.set('cacheCenter', {\n              x: evt.x,\n              y: evt.y\n            });\n            self.set('dragPrePos', {\n              x: evt.x,\n              y: evt.y\n            });\n          });\n          lensDelegate.on('drag', function (evt) {\n            _this.scaleDByDrag(evt);\n          });\n          lensDelegate.on('dragend', function (evt) {\n            self.set('dragging', false);\n          });\n        }\n      }\n    } else {\n      lensDelegate.attr({\n        x: mCenter.x,\n        y: mCenter.y,\n        r: r / 1.5\n      });\n    } // 绘制缩放系数百分比文本\n\n\n    if (self.get('showDPercent')) {\n      var percent = Math.round((self.get('d') - self.get('minD')) / (self.get('maxD') - self.get('minD')) * 100);\n      var dPercentText = self.get('dPercentText');\n      var textY = mCenter.y + r / 1.5 + 16;\n\n      if (!dPercentText || dPercentText.destroyed) {\n        var parent_2 = graph.get('group');\n        dPercentText = parent_2.addShape('text', {\n          attrs: {\n            text: \"\".concat(percent, \"%\"),\n            x: mCenter.x,\n            y: textY,\n            fill: '#aaa',\n            stroke: '#fff',\n            lineWidth: 1,\n            fontSize: 12\n          }\n        });\n        self.set('dPercentText', dPercentText);\n      } else {\n        dPercentText.attr({\n          text: \"\".concat(percent, \"%\"),\n          x: mCenter.x,\n          y: textY\n        });\n      }\n    }\n\n    self.set('delegate', lensDelegate);\n  };\n  /**\n   * Clear the fisheye lens\n   */\n\n\n  Fisheye.prototype.clear = function () {\n    var graph = this.get('graph');\n    this.restoreCache();\n    graph.refreshPositions();\n    var lensDelegate = this.get('delegate');\n\n    if (lensDelegate && !lensDelegate.destroyed) {\n      lensDelegate.remove();\n      lensDelegate.destroy();\n    }\n\n    var dPercentText = this.get('dPercentText');\n\n    if (dPercentText && !dPercentText.destroyed) {\n      dPercentText.remove();\n      dPercentText.destroy();\n    }\n  };\n  /**\n   * Destroy the component\n   */\n\n\n  Fisheye.prototype.destroy = function () {\n    this.clear();\n  };\n\n  return Fisheye;\n}(Base);\n\nexport default Fisheye;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","clone","Base","DELTA","lensDelegateStyle","stroke","strokeOpacity","lineWidth","fillOpacity","fill","Fisheye","_super","config","getDefaultCfgs","trigger","r","delegateStyle","showLabel","maxD","minD","scaleRBy","scaleDBy","showDPercent","getEvents","events","get","click","mousemove","init","self","set","createDelegate","e","_this","lensDelegate","destroyed","magnify","on","evt","x","attr","y","scaleDByWheel","scaleRByWheel","originalEvent","preventDefault","graph","ratio","lensCenter","undefined","mousePos","getPointByClient","clientX","clientY","wheelDelta","maxR","minR","scaleRByDrag","dragPrePos","delta","newD","scaleDByDrag","restoreCache","cachedMagnifiedModels","cachedOriginPositions","r2","molecularParam","nodes","getNodes","nodeLength","mCenter","delegateCenterDiff","updateDelegate","model","getModel","isNaN","dist2","dist","Math","sqrt","magnifiedDist","cos","sin","id","texts","push","node","nodeGroup","getContainer","shapes","getChildren","shapeLength","j","shape","visible","refreshPositions","cacheLength","ori","textLength","text","updateParams","cfg","nd","nr","remove","destroy","dPercentText","parent_1","attrs","addShape","name","draggable","percent","round","textY","parent_2","concat","fontSize","clear"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/fisheye/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { clone } from '@antv/util';\nimport Base from '../base';\nvar DELTA = 0.05;\nvar lensDelegateStyle = {\n  stroke: '#000',\n  strokeOpacity: 0.8,\n  lineWidth: 2,\n  fillOpacity: 0.1,\n  fill: '#ccc'\n};\n\nvar Fisheye =\n/** @class */\nfunction (_super) {\n  __extends(Fisheye, _super);\n\n  function Fisheye(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Fisheye.prototype.getDefaultCfgs = function () {\n    return {\n      trigger: 'mousemove',\n      d: 1.5,\n      r: 300,\n      delegateStyle: clone(lensDelegateStyle),\n      showLabel: false,\n      maxD: 5,\n      minD: 0,\n      scaleRBy: 'unset',\n      scaleDBy: 'unset',\n      showDPercent: true\n    };\n  }; // class-methods-use-this\n\n\n  Fisheye.prototype.getEvents = function () {\n    var events;\n\n    switch (this.get('trigger')) {\n      case 'click':\n        events = {\n          click: 'magnify'\n        };\n        break;\n\n      case 'drag':\n        events = {\n          click: 'createDelegate'\n        };\n        break;\n\n      default:\n        events = {\n          mousemove: 'magnify'\n        };\n        break;\n    }\n\n    return events;\n  };\n\n  Fisheye.prototype.init = function () {\n    var self = this;\n    var r = self.get('r');\n    self.set('cachedMagnifiedModels', []);\n    self.set('cachedOriginPositions', {});\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n  }; // Create the delegate when the trigger is drag\n\n\n  Fisheye.prototype.createDelegate = function (e) {\n    var _this = this;\n\n    var self = this;\n    var lensDelegate = self.get('delegate');\n\n    if (!lensDelegate || lensDelegate.destroyed) {\n      self.magnify(e);\n      lensDelegate = self.get('delegate'); // drag to move the lens\n\n      lensDelegate.on('dragstart', function (evt) {\n        self.set('delegateCenterDiff', {\n          x: lensDelegate.attr('x') - evt.x,\n          y: lensDelegate.attr('y') - evt.y\n        });\n      });\n      lensDelegate.on('drag', function (evt) {\n        self.magnify(evt);\n      }); // 绑定调整范围（r）和缩放系数(d)的监听\n      // 由于 drag 用于改变 lens 位置, 因此在此模式下, drag 不能用于调整 r 和 d\n      // scaling d\n\n      if (this.get('scaleDBy') === 'wheel') {\n        lensDelegate.on('mousewheel', function (evt) {\n          _this.scaleDByWheel(evt);\n        });\n      } // scaling r\n\n\n      if (this.get('scaleRBy') === 'wheel') {\n        lensDelegate.on('mousewheel', function (evt) {\n          self.scaleRByWheel(evt);\n        });\n      }\n    }\n  };\n  /**\n   * Scale the range by wheel\n   * @param e mouse wheel event\n   */\n\n\n  Fisheye.prototype.scaleRByWheel = function (e) {\n    var self = this;\n    if (!e || !e.originalEvent) return;\n    if (e.preventDefault) e.preventDefault();\n    var graph = self.get('graph');\n    var ratio;\n    var lensDelegate = self.get('delegate');\n    var lensCenter = lensDelegate ? {\n      x: lensDelegate.attr('x'),\n      y: lensDelegate.attr('y')\n    } : undefined;\n    var mousePos = lensCenter || graph.getPointByClient(e.clientX, e.clientY);\n\n    if (e.originalEvent.wheelDelta < 0) {\n      ratio = 1 - DELTA;\n    } else {\n      ratio = 1 / (1 - DELTA);\n    }\n\n    var maxR = self.get('maxR');\n    var minR = self.get('minR');\n    var r = self.get('r');\n\n    if (r > (maxR || graph.get('height')) && ratio > 1 || r < (minR || graph.get('height') * 0.05) && ratio < 1) {\n      ratio = 1;\n    }\n\n    r *= ratio;\n    self.set('r', r);\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n    self.set('delegateCenterDiff', undefined);\n    self.magnify(e, mousePos);\n  };\n  /**\n   * Scale the range by dragging\n   * @param e mouse event\n   */\n\n\n  Fisheye.prototype.scaleRByDrag = function (e) {\n    var self = this;\n    if (!e) return;\n    var dragPrePos = self.get('dragPrePos');\n    var graph = self.get('graph');\n    var ratio;\n    var mousePos = graph.getPointByClient(e.clientX, e.clientY);\n\n    if (e.x - dragPrePos.x < 0) {\n      ratio = 1 - DELTA;\n    } else {\n      ratio = 1 / (1 - DELTA);\n    }\n\n    var maxR = self.get('maxR');\n    var minR = self.get('minR');\n    var r = self.get('r');\n\n    if (r > (maxR || graph.get('height')) && ratio > 1 || r < (minR || graph.get('height') * 0.05) && ratio < 1) {\n      ratio = 1;\n    }\n\n    r *= ratio;\n    self.set('r', r);\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n    self.magnify(e, mousePos);\n    self.set('dragPrePos', {\n      x: e.x,\n      y: e.y\n    });\n  };\n  /**\n   * Scale the magnifying factor by wheel\n   * @param e mouse wheel event\n   */\n\n\n  Fisheye.prototype.scaleDByWheel = function (evt) {\n    var self = this;\n    if (!evt && !evt.originalEvent) return;\n    if (evt.preventDefault) evt.preventDefault();\n    var delta = 0;\n\n    if (evt.originalEvent.wheelDelta < 0) {\n      delta = -0.1;\n    } else {\n      delta = 0.1;\n    }\n\n    var d = self.get('d');\n    var newD = d + delta;\n    var maxD = self.get('maxD');\n    var minD = self.get('minD');\n\n    if (newD < maxD && newD > minD) {\n      self.set('d', newD);\n      var r = self.get('r');\n      self.set('molecularParam', (newD + 1) * r);\n      var lensDelegate = self.get('delegate');\n      var lensCenter = lensDelegate ? {\n        x: lensDelegate.attr('x'),\n        y: lensDelegate.attr('y')\n      } : undefined;\n      self.set('delegateCenterDiff', undefined);\n      self.magnify(evt, lensCenter);\n    }\n  };\n  /**\n   * Scale the magnifying factor by dragging\n   * @param e mouse event\n   */\n\n\n  Fisheye.prototype.scaleDByDrag = function (e) {\n    var self = this;\n    var dragPrePos = self.get('dragPrePos');\n    var delta = e.x - dragPrePos.x > 0 ? 0.1 : -0.1;\n    var d = self.get('d');\n    var newD = d + delta;\n    var maxD = self.get('maxD');\n    var minD = self.get('minD');\n\n    if (newD < maxD && newD > minD) {\n      self.set('d', newD);\n      var r = self.get('r');\n      self.set('molecularParam', (newD + 1) * r);\n      self.magnify(e);\n    }\n\n    self.set('dragPrePos', {\n      x: e.x,\n      y: e.y\n    });\n  };\n  /**\n   * Response function for mousemove, click, or drag to magnify\n   * @param e mouse event\n   */\n\n\n  Fisheye.prototype.magnify = function (e, mousePos) {\n    var self = this;\n    self.restoreCache();\n    var graph = self.get('graph');\n    var cachedMagnifiedModels = self.get('cachedMagnifiedModels');\n    var cachedOriginPositions = self.get('cachedOriginPositions');\n    var showLabel = self.get('showLabel');\n    var r = self.get('r');\n    var r2 = self.get('r2');\n    var d = self.get('d');\n    var molecularParam = self.get('molecularParam');\n    var nodes = graph.getNodes();\n    var nodeLength = nodes.length;\n    var mCenter = mousePos ? {\n      x: mousePos.x,\n      y: mousePos.y\n    } : {\n      x: e.x,\n      y: e.y\n    };\n\n    if (self.get('dragging') && (self.get('trigger') === 'mousemove' || self.get('trigger') === 'click')) {\n      mCenter = self.get('cacheCenter');\n    }\n\n    var delegateCenterDiff = self.get('delegateCenterDiff');\n\n    if (delegateCenterDiff) {\n      mCenter.x += delegateCenterDiff.x;\n      mCenter.y += delegateCenterDiff.y;\n    }\n\n    self.updateDelegate(mCenter, r);\n\n    for (var i = 0; i < nodeLength; i++) {\n      var model = nodes[i].getModel();\n      var x = model.x,\n          y = model.y;\n      if (isNaN(x) || isNaN(y)) continue; // the square of the distance between the node and the magnified center\n\n      var dist2 = (x - mCenter.x) * (x - mCenter.x) + (y - mCenter.y) * (y - mCenter.y);\n\n      if (!isNaN(dist2) && dist2 < r2 && dist2 !== 0) {\n        var dist = Math.sqrt(dist2); // (r * (d + 1) * (dist / r)) / (d * (dist / r) + 1);\n\n        var magnifiedDist = molecularParam * dist / (d * dist + r);\n        var cos = (x - mCenter.x) / dist;\n        var sin = (y - mCenter.y) / dist;\n        model.x = cos * magnifiedDist + mCenter.x;\n        model.y = sin * magnifiedDist + mCenter.y;\n\n        if (!cachedOriginPositions[model.id]) {\n          cachedOriginPositions[model.id] = {\n            x: x,\n            y: y,\n            texts: []\n          };\n        }\n\n        cachedMagnifiedModels.push(model);\n\n        if (showLabel && 2 * dist < r) {\n          var node = nodes[i];\n          var nodeGroup = node.getContainer();\n          var shapes = nodeGroup.getChildren();\n          var shapeLength = shapes.length;\n\n          for (var j = 0; j < shapeLength; j++) {\n            var shape = shapes[j];\n\n            if (shape.get('type') === 'text') {\n              cachedOriginPositions[model.id].texts.push({\n                visible: shape.get('visible'),\n                shape: shape\n              });\n              shape.set('visible', true);\n            }\n          }\n        }\n      }\n    }\n\n    graph.refreshPositions();\n  };\n  /**\n   * Restore the cache nodes while magnifying\n   */\n\n\n  Fisheye.prototype.restoreCache = function () {\n    var self = this;\n    var cachedMagnifiedModels = self.get('cachedMagnifiedModels');\n    var cachedOriginPositions = self.get('cachedOriginPositions');\n    var cacheLength = cachedMagnifiedModels.length;\n\n    for (var i = 0; i < cacheLength; i++) {\n      var node = cachedMagnifiedModels[i];\n      var id = node.id;\n      var ori = cachedOriginPositions[id];\n      node.x = ori.x;\n      node.y = ori.y;\n      var textLength = ori.texts.length;\n\n      for (var j = 0; j < textLength; j++) {\n        var text = ori.texts[j];\n        text.shape.set('visible', text.visible);\n      }\n    }\n\n    self.set('cachedMagnifiedModels', []);\n    self.set('cachedOriginPositions', {});\n  };\n  /**\n   * Adjust part of the parameters, including trigger, d, r, maxR, minR, maxD, minD, scaleRBy, and scaleDBy\n   * @param {FisheyeConfig} cfg\n   */\n\n\n  Fisheye.prototype.updateParams = function (cfg) {\n    var self = this;\n    var r = cfg.r,\n        d = cfg.d,\n        trigger = cfg.trigger,\n        minD = cfg.minD,\n        maxD = cfg.maxD,\n        minR = cfg.minR,\n        maxR = cfg.maxR,\n        scaleDBy = cfg.scaleDBy,\n        scaleRBy = cfg.scaleRBy;\n\n    if (!isNaN(cfg.r)) {\n      self.set('r', r);\n      self.set('r2', r * r);\n    }\n\n    if (!isNaN(d)) {\n      self.set('d', d);\n    }\n\n    if (!isNaN(maxD)) {\n      self.set('maxD', maxD);\n    }\n\n    if (!isNaN(minD)) {\n      self.set('minD', minD);\n    }\n\n    if (!isNaN(maxR)) {\n      self.set('maxR', maxR);\n    }\n\n    if (!isNaN(minR)) {\n      self.set('minR', minR);\n    }\n\n    var nd = self.get('d');\n    var nr = self.get('r');\n    self.set('molecularParam', (nd + 1) * nr);\n\n    if (trigger === 'mousemove' || trigger === 'click' || trigger === 'drag') {\n      self.set('trigger', trigger);\n    }\n\n    if (scaleDBy === 'drag' || scaleDBy === 'wheel' || scaleDBy === 'unset') {\n      self.set('scaleDBy', scaleDBy);\n      self.get('delegate').remove();\n      self.get('delegate').destroy();\n      var dPercentText = self.get('dPercentText');\n\n      if (dPercentText) {\n        dPercentText.remove();\n        dPercentText.destroy();\n      }\n    }\n\n    if (scaleRBy === 'drag' || scaleRBy === 'wheel' || scaleRBy === 'unset') {\n      self.set('scaleRBy', scaleRBy);\n      self.get('delegate').remove();\n      self.get('delegate').destroy();\n      var dPercentText = self.get('dPercentText');\n\n      if (dPercentText) {\n        dPercentText.remove();\n        dPercentText.destroy();\n      }\n    }\n  };\n  /**\n   * Update the delegate shape of the lens\n   * @param {Point} mCenter the center of the shape\n   * @param {number} r the radius of the shape\n   */\n\n\n  Fisheye.prototype.updateDelegate = function (mCenter, r) {\n    var _this = this;\n\n    var self = this;\n    var graph = self.get('graph');\n    var lensDelegate = self.get('delegate');\n\n    if (!lensDelegate || lensDelegate.destroyed) {\n      // 拖动多个\n      var parent_1 = graph.get('group');\n      var attrs = self.get('delegateStyle') || lensDelegateStyle; // model上的x, y是相对于图形中心的, delegateShape是g实例, x,y是绝对坐标\n\n      lensDelegate = parent_1.addShape('circle', {\n        attrs: __assign({\n          r: r / 1.5,\n          x: mCenter.x,\n          y: mCenter.y\n        }, attrs),\n        name: 'lens-shape',\n        draggable: true\n      });\n\n      if (this.get('trigger') !== 'drag') {\n        // 调整范围 r 的监听\n        if (this.get('scaleRBy') === 'wheel') {\n          // 使用滚轮调整 r\n          lensDelegate.on('mousewheel', function (evt) {\n            self.scaleRByWheel(evt);\n          });\n        } else if (this.get('scaleRBy') === 'drag') {\n          // 使用拖拽调整 r\n          lensDelegate.on('dragstart', function (e) {\n            self.set('dragging', true);\n            self.set('cacheCenter', {\n              x: e.x,\n              y: e.y\n            });\n            self.set('dragPrePos', {\n              x: e.x,\n              y: e.y\n            });\n          });\n          lensDelegate.on('drag', function (evt) {\n            self.scaleRByDrag(evt);\n          });\n          lensDelegate.on('dragend', function (e) {\n            self.set('dragging', false);\n          });\n        } // 调整缩放系数 d 的监听\n\n\n        if (this.get('scaleDBy') === 'wheel') {\n          // 使用滚轮调整 d\n          lensDelegate.on('mousewheel', function (evt) {\n            _this.scaleDByWheel(evt);\n          });\n        } else if (this.get('scaleDBy') === 'drag') {\n          // 使用拖拽调整 d\n          lensDelegate.on('dragstart', function (evt) {\n            self.set('dragging', true);\n            self.set('cacheCenter', {\n              x: evt.x,\n              y: evt.y\n            });\n            self.set('dragPrePos', {\n              x: evt.x,\n              y: evt.y\n            });\n          });\n          lensDelegate.on('drag', function (evt) {\n            _this.scaleDByDrag(evt);\n          });\n          lensDelegate.on('dragend', function (evt) {\n            self.set('dragging', false);\n          });\n        }\n      }\n    } else {\n      lensDelegate.attr({\n        x: mCenter.x,\n        y: mCenter.y,\n        r: r / 1.5\n      });\n    } // 绘制缩放系数百分比文本\n\n\n    if (self.get('showDPercent')) {\n      var percent = Math.round((self.get('d') - self.get('minD')) / (self.get('maxD') - self.get('minD')) * 100);\n      var dPercentText = self.get('dPercentText');\n      var textY = mCenter.y + r / 1.5 + 16;\n\n      if (!dPercentText || dPercentText.destroyed) {\n        var parent_2 = graph.get('group');\n        dPercentText = parent_2.addShape('text', {\n          attrs: {\n            text: \"\".concat(percent, \"%\"),\n            x: mCenter.x,\n            y: textY,\n            fill: '#aaa',\n            stroke: '#fff',\n            lineWidth: 1,\n            fontSize: 12\n          }\n        });\n        self.set('dPercentText', dPercentText);\n      } else {\n        dPercentText.attr({\n          text: \"\".concat(percent, \"%\"),\n          x: mCenter.x,\n          y: textY\n        });\n      }\n    }\n\n    self.set('delegate', lensDelegate);\n  };\n  /**\n   * Clear the fisheye lens\n   */\n\n\n  Fisheye.prototype.clear = function () {\n    var graph = this.get('graph');\n    this.restoreCache();\n    graph.refreshPositions();\n    var lensDelegate = this.get('delegate');\n\n    if (lensDelegate && !lensDelegate.destroyed) {\n      lensDelegate.remove();\n      lensDelegate.destroy();\n    }\n\n    var dPercentText = this.get('dPercentText');\n\n    if (dPercentText && !dPercentText.destroyed) {\n      dPercentText.remove();\n      dPercentText.destroy();\n    }\n  };\n  /**\n   * Destroy the component\n   */\n\n\n  Fisheye.prototype.destroy = function () {\n    this.clear();\n  };\n\n  return Fisheye;\n}(Base);\n\nexport default Fisheye;"],"mappings":"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"},"metadata":{},"sourceType":"module"}