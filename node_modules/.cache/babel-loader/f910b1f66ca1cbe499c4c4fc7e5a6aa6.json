{"ast":null,"code":"\"use strict\";\n/**\n * @fileOverview fruchterman layout\n * @author shiwu.wyy@antfin.com\n */\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GForceLayout = void 0;\n\nvar base_1 = require(\"./base\");\n\nvar util_1 = require(\"../util\");\n\nvar proccessToFunc = function (value, defaultV) {\n  var func;\n\n  if (!value) {\n    func = function (d) {\n      return defaultV || 1;\n    };\n  } else if ((0, util_1.isNumber)(value)) {\n    func = function (d) {\n      return value;\n    };\n  } else {\n    func = value;\n  }\n\n  return func;\n};\n/**\n * graphin 中的 force 布局\n */\n\n\nvar GForceLayout =\n/** @class */\nfunction (_super) {\n  __extends(GForceLayout, _super);\n\n  function GForceLayout(options) {\n    var _this = _super.call(this) || this;\n    /** 停止迭代的最大迭代数 */\n\n\n    _this.maxIteration = 500;\n    /** 是否启动 worker */\n\n    _this.workerEnabled = false;\n    /** 弹簧引力系数 */\n\n    _this.edgeStrength = 200;\n    /** 斥力系数 */\n\n    _this.nodeStrength = 1000;\n    /** 库伦系数 */\n\n    _this.coulombDisScale = 0.005;\n    /** 阻尼系数 */\n\n    _this.damping = 0.9;\n    /** 最大速度 */\n\n    _this.maxSpeed = 1000;\n    /** 一次迭代的平均移动距离小于该值时停止迭代 */\n\n    _this.minMovement = 0.5;\n    /** 迭代中衰减 */\n\n    _this.interval = 0.02;\n    /** 斥力的一个系数 */\n\n    _this.factor = 1;\n    /** 理想边长 */\n\n    _this.linkDistance = 1;\n    /** 重力大小 */\n\n    _this.gravity = 10;\n    /** 是否防止重叠 */\n\n    _this.preventOverlap = true;\n    /** 防止重叠的力大小参数 */\n\n    _this.collideStrength = 1;\n    /** 每次迭代结束的回调函数 */\n\n    _this.tick = function () {};\n\n    _this.nodes = [];\n    _this.edges = [];\n    _this.width = 300;\n    _this.height = 300;\n    _this.nodeMap = {};\n    _this.nodeIdxMap = {};\n    /** 是否使用 window.setInterval 运行迭代 */\n\n    _this.animate = true;\n\n    _this.updateCfg(options);\n\n    return _this;\n  }\n\n  GForceLayout.prototype.getDefaultCfg = function () {\n    return {\n      maxIteration: 500,\n      gravity: 10,\n      enableTick: true,\n      animate: true\n    };\n  };\n  /**\n   * 执行布局\n   */\n\n\n  GForceLayout.prototype.execute = function () {\n    var _a, _b;\n\n    var self = this;\n    var nodes = self.nodes;\n\n    if (self.timeInterval !== undefined && typeof window !== \"undefined\") {\n      window.clearInterval(self.timeInterval);\n    }\n\n    if (!nodes || nodes.length === 0) {\n      (_a = self.onLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(self);\n      return;\n    }\n\n    if (!self.width && typeof window !== \"undefined\") {\n      self.width = window.innerWidth;\n    }\n\n    if (!self.height && typeof window !== \"undefined\") {\n      self.height = window.innerHeight;\n    }\n\n    if (!self.center) {\n      self.center = [self.width / 2, self.height / 2];\n    }\n\n    var center = self.center;\n\n    if (nodes.length === 1) {\n      nodes[0].x = center[0];\n      nodes[0].y = center[1];\n      (_b = self.onLayoutEnd) === null || _b === void 0 ? void 0 : _b.call(self);\n      return;\n    }\n\n    var nodeMap = {};\n    var nodeIdxMap = {};\n    nodes.forEach(function (node, i) {\n      if (!(0, util_1.isNumber)(node.x)) node.x = Math.random() * self.width;\n      if (!(0, util_1.isNumber)(node.y)) node.y = Math.random() * self.height;\n      nodeMap[node.id] = node;\n      nodeIdxMap[node.id] = i;\n    });\n    self.nodeMap = nodeMap;\n    self.nodeIdxMap = nodeIdxMap;\n    self.linkDistance = proccessToFunc(self.linkDistance, 1);\n    self.nodeStrength = proccessToFunc(self.nodeStrength, 1);\n    self.edgeStrength = proccessToFunc(self.edgeStrength, 1); // node size function\n\n    var nodeSize = self.nodeSize;\n    var nodeSizeFunc;\n\n    if (self.preventOverlap) {\n      var nodeSpacing_1 = self.nodeSpacing;\n      var nodeSpacingFunc_1;\n\n      if ((0, util_1.isNumber)(nodeSpacing_1)) {\n        nodeSpacingFunc_1 = function () {\n          return nodeSpacing_1;\n        };\n      } else if ((0, util_1.isFunction)(nodeSpacing_1)) {\n        nodeSpacingFunc_1 = nodeSpacing_1;\n      } else {\n        nodeSpacingFunc_1 = function () {\n          return 0;\n        };\n      }\n\n      if (!nodeSize) {\n        nodeSizeFunc = function (d) {\n          if (d.size) {\n            if ((0, util_1.isArray)(d.size)) {\n              return Math.max(d.size[0], d.size[1]) + nodeSpacingFunc_1(d);\n            }\n\n            if ((0, util_1.isObject)(d.size)) {\n              return Math.max(d.size.width, d.size.height) + nodeSpacingFunc_1(d);\n            }\n\n            return d.size + nodeSpacingFunc_1(d);\n          }\n\n          return 10 + nodeSpacingFunc_1(d);\n        };\n      } else if ((0, util_1.isArray)(nodeSize)) {\n        nodeSizeFunc = function (d) {\n          return Math.max(nodeSize[0], nodeSize[1]) + nodeSpacingFunc_1(d);\n        };\n      } else {\n        nodeSizeFunc = function (d) {\n          return nodeSize + nodeSpacingFunc_1(d);\n        };\n      }\n    }\n\n    self.nodeSize = nodeSizeFunc;\n    var edges = self.edges;\n    self.degrees = (0, util_1.getDegree)(nodes.length, self.nodeIdxMap, edges);\n\n    if (!self.getMass) {\n      self.getMass = function (d) {\n        var mass = d.mass || self.degrees[self.nodeIdxMap[d.id]] || 1;\n        return mass;\n      };\n    } // layout\n\n\n    self.run();\n  };\n\n  GForceLayout.prototype.run = function () {\n    var _a;\n\n    var self = this;\n    var maxIteration = self.maxIteration,\n        nodes = self.nodes,\n        workerEnabled = self.workerEnabled,\n        minMovement = self.minMovement,\n        animate = self.animate;\n    if (!nodes) return;\n\n    if (workerEnabled || !animate) {\n      for (var i = 0; i < maxIteration; i++) {\n        var previousPos = self.runOneStep(i);\n\n        if (self.reachMoveThreshold(nodes, previousPos, minMovement)) {\n          break;\n        }\n      }\n\n      (_a = self.onLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(self);\n    } else {\n      if (typeof window === \"undefined\") return;\n      var iter_1 = 0; // interval for render the result after each iteration\n\n      this.timeInterval = window.setInterval(function () {\n        var _a, _b;\n\n        if (!nodes) return;\n        var previousPos = self.runOneStep(iter_1) || [];\n\n        if (self.reachMoveThreshold(nodes, previousPos, minMovement)) {\n          (_a = self.onLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(self);\n          window.clearInterval(self.timeInterval);\n        }\n\n        iter_1++;\n\n        if (iter_1 >= maxIteration) {\n          (_b = self.onLayoutEnd) === null || _b === void 0 ? void 0 : _b.call(self);\n          window.clearInterval(self.timeInterval);\n        }\n      }, 0);\n    }\n  };\n\n  GForceLayout.prototype.reachMoveThreshold = function (nodes, previousPos, minMovement) {\n    // whether to stop the iteration\n    var movement = 0;\n    nodes.forEach(function (node, j) {\n      var vx = node.x - previousPos[j].x;\n      var vy = node.y - previousPos[j].y;\n      movement += Math.sqrt(vx * vx + vy * vy);\n    });\n    movement /= nodes.length;\n    return movement < minMovement;\n  };\n\n  GForceLayout.prototype.runOneStep = function (iter) {\n    var _a;\n\n    var self = this;\n    var nodes = self.nodes,\n        edges = self.edges;\n    var accArray = [];\n    var velArray = [];\n    if (!nodes) return;\n    nodes.forEach(function (_, i) {\n      accArray[2 * i] = 0;\n      accArray[2 * i + 1] = 0;\n      velArray[2 * i] = 0;\n      velArray[2 * i + 1] = 0;\n    });\n    self.calRepulsive(accArray, nodes);\n    if (edges) self.calAttractive(accArray, edges);\n    self.calGravity(accArray, nodes);\n    var stepInterval = Math.max(0.02, self.interval - iter * 0.002);\n    self.updateVelocity(accArray, velArray, stepInterval, nodes);\n    var previousPos = [];\n    nodes.forEach(function (node) {\n      previousPos.push({\n        x: node.x,\n        y: node.y\n      });\n    });\n    self.updatePosition(velArray, stepInterval, nodes);\n    (_a = self.tick) === null || _a === void 0 ? void 0 : _a.call(self);\n    return previousPos;\n  };\n\n  GForceLayout.prototype.calRepulsive = function (accArray, nodes) {\n    var self = this;\n    var getMass = self.getMass,\n        factor = self.factor,\n        coulombDisScale = self.coulombDisScale,\n        preventOverlap = self.preventOverlap,\n        _a = self.collideStrength,\n        collideStrength = _a === void 0 ? 1 : _a;\n    var nodeStrength = self.nodeStrength;\n    var nodeSize = self.nodeSize;\n    nodes.forEach(function (ni, i) {\n      var massi = getMass ? getMass(ni) : 1;\n      nodes.forEach(function (nj, j) {\n        if (i >= j) return; // if (!accArray[j]) accArray[j] = 0;\n\n        var vecX = ni.x - nj.x;\n        var vecY = ni.y - nj.y;\n\n        if (vecX === 0 && vecY === 0) {\n          vecX = Math.random() * 0.01;\n          vecY = Math.random() * 0.01;\n        }\n\n        var lengthSqr = vecX * vecX + vecY * vecY;\n        var vecLength = Math.sqrt(lengthSqr);\n        var nVecLength = (vecLength + 0.1) * coulombDisScale;\n        var direX = vecX / vecLength;\n        var direY = vecY / vecLength;\n        var param = (nodeStrength(ni) + nodeStrength(nj)) * 0.5 * factor / (nVecLength * nVecLength);\n        var massj = getMass ? getMass(nj) : 1;\n        accArray[2 * i] += direX * param;\n        accArray[2 * i + 1] += direY * param;\n        accArray[2 * j] -= direX * param;\n        accArray[2 * j + 1] -= direY * param;\n\n        if (preventOverlap && (nodeSize(ni) + nodeSize(nj)) / 2 > vecLength) {\n          var paramOverlap = collideStrength * (nodeStrength(ni) + nodeStrength(nj)) * 0.5 / lengthSqr;\n          accArray[2 * i] += direX * paramOverlap / massi;\n          accArray[2 * i + 1] += direY * paramOverlap / massi;\n          accArray[2 * j] -= direX * paramOverlap / massj;\n          accArray[2 * j + 1] -= direY * paramOverlap / massj;\n        }\n      });\n    });\n  };\n\n  GForceLayout.prototype.calAttractive = function (accArray, edges) {\n    var self = this;\n    var nodeMap = self.nodeMap,\n        nodeIdxMap = self.nodeIdxMap,\n        linkDistance = self.linkDistance,\n        edgeStrength = self.edgeStrength;\n    var nodeSize = self.nodeSize;\n    var getMass = self.getMass;\n    edges.forEach(function (edge, i) {\n      var source = (0, util_1.getEdgeTerminal)(edge, 'source');\n      var target = (0, util_1.getEdgeTerminal)(edge, 'target');\n      var sourceNode = nodeMap[source];\n      var targetNode = nodeMap[target];\n      var vecX = targetNode.x - sourceNode.x;\n      var vecY = targetNode.y - sourceNode.y;\n\n      if (vecX === 0 && vecY === 0) {\n        vecX = Math.random() * 0.01;\n        vecY = Math.random() * 0.01;\n      }\n\n      var vecLength = Math.sqrt(vecX * vecX + vecY * vecY);\n      var direX = vecX / vecLength;\n      var direY = vecY / vecLength;\n      var length = linkDistance(edge, sourceNode, targetNode) || 1 + (nodeSize(sourceNode) + nodeSize(sourceNode) || 0) / 2;\n      var diff = length - vecLength;\n      var param = diff * edgeStrength(edge);\n      var sourceIdx = nodeIdxMap[source];\n      var targetIdx = nodeIdxMap[target];\n      var massSource = getMass ? getMass(sourceNode) : 1;\n      var massTarget = getMass ? getMass(targetNode) : 1;\n      accArray[2 * sourceIdx] -= direX * param / massSource;\n      accArray[2 * sourceIdx + 1] -= direY * param / massSource;\n      accArray[2 * targetIdx] += direX * param / massTarget;\n      accArray[2 * targetIdx + 1] += direY * param / massTarget;\n    });\n  };\n\n  GForceLayout.prototype.calGravity = function (accArray, nodes) {\n    var self = this; // const nodes = self.nodes;\n\n    var center = self.center;\n    var defaultGravity = self.gravity;\n    var degrees = self.degrees;\n    var nodeLength = nodes.length;\n\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      var vecX = node.x - center[0];\n      var vecY = node.y - center[1];\n      var gravity = defaultGravity;\n\n      if (self.getCenter) {\n        var customCenterOpt = self.getCenter(node, degrees[i]);\n\n        if (customCenterOpt && (0, util_1.isNumber)(customCenterOpt[0]) && (0, util_1.isNumber)(customCenterOpt[1]) && (0, util_1.isNumber)(customCenterOpt[2])) {\n          vecX = node.x - customCenterOpt[0];\n          vecY = node.y - customCenterOpt[1];\n          gravity = customCenterOpt[2];\n        }\n      }\n\n      if (!gravity) continue;\n      accArray[2 * i] -= gravity * vecX;\n      accArray[2 * i + 1] -= gravity * vecY;\n    }\n  };\n\n  GForceLayout.prototype.updateVelocity = function (accArray, velArray, stepInterval, nodes) {\n    var self = this;\n    var param = stepInterval * self.damping; // const nodes = self.nodes;\n\n    nodes.forEach(function (node, i) {\n      var vx = accArray[2 * i] * param || 0.01;\n      var vy = accArray[2 * i + 1] * param || 0.01;\n      var vLength = Math.sqrt(vx * vx + vy * vy);\n\n      if (vLength > self.maxSpeed) {\n        var param2 = self.maxSpeed / vLength;\n        vx = param2 * vx;\n        vy = param2 * vy;\n      }\n\n      velArray[2 * i] = vx;\n      velArray[2 * i + 1] = vy;\n    });\n  };\n\n  GForceLayout.prototype.updatePosition = function (velArray, stepInterval, nodes) {\n    nodes.forEach(function (node, i) {\n      if ((0, util_1.isNumber)(node.fx) && (0, util_1.isNumber)(node.fy)) {\n        node.x = node.fx;\n        node.y = node.fy;\n        return;\n      }\n\n      var distX = velArray[2 * i] * stepInterval;\n      var distY = velArray[2 * i + 1] * stepInterval;\n      node.x += distX;\n      node.y += distY;\n    });\n  };\n\n  GForceLayout.prototype.stop = function () {\n    if (this.timeInterval && typeof window !== \"undefined\") {\n      window.clearInterval(this.timeInterval);\n    }\n  };\n\n  GForceLayout.prototype.destroy = function () {\n    var self = this;\n    self.stop();\n    self.tick = null;\n    self.nodes = null;\n    self.edges = null;\n    self.destroyed = true;\n  };\n\n  GForceLayout.prototype.getType = function () {\n    return \"gForce\";\n  };\n\n  return GForceLayout;\n}(base_1.Base);\n\nexports.GForceLayout = GForceLayout;","map":{"version":3,"mappings":"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","names":["proccessToFunc","value","defaultV","func","d","__extends","options","_super","_this","updateCfg","GForceLayout","maxIteration","gravity","enableTick","animate","self","nodes","timeInterval","undefined","window","clearInterval","length","onLayoutEnd","_a","width","innerWidth","height","innerHeight","center","x","y","_b","nodeMap","nodeIdxMap","forEach","node","i","Math","random","id","linkDistance","nodeStrength","edgeStrength","nodeSize","nodeSizeFunc","preventOverlap","nodeSpacing_1","nodeSpacing","nodeSpacingFunc_1","size","max","edges","degrees","getMass","mass","run","workerEnabled","minMovement","previousPos","runOneStep","reachMoveThreshold","iter_1","setInterval","movement","j","vx","vy","sqrt","iter","accArray","velArray","_","calRepulsive","calAttractive","calGravity","stepInterval","interval","updateVelocity","push","updatePosition","tick","factor","coulombDisScale","collideStrength","ni","massi","nj","vecX","vecY","lengthSqr","vecLength","nVecLength","direX","direY","param","massj","paramOverlap","edge","source","target","sourceNode","targetNode","diff","sourceIdx","targetIdx","massSource","massTarget","defaultGravity","nodeLength","getCenter","customCenterOpt","damping","vLength","maxSpeed","param2","fx","fy","distX","distY","stop","destroyed","base_1","exports"],"sourceRoot":"","sources":["../../src/layout/gForce.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}