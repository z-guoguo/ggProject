{"ast":null,"code":"import { Node, Markup, ObjectExt } from '@antv/x6';\nexport class VueShape extends Node {\n  get component() {\n    return this.getComponent();\n  }\n\n  set component(val) {\n    this.setComponent(val);\n  }\n\n  getComponent() {\n    return this.store.get('component');\n  }\n\n  setComponent(component, options = {}) {\n    if (component == null) {\n      this.removeComponent(options);\n    } else {\n      this.store.set('component', component, options);\n    }\n\n    return this;\n  }\n\n  removeComponent(options = {}) {\n    this.store.remove('component', options);\n    return this;\n  }\n\n}\n\n(function (VueShape) {\n  function getMarkup(useForeignObject, primer = 'rect') {\n    const markup = [{\n      tagName: primer,\n      selector: 'body'\n    }];\n\n    if (useForeignObject) {\n      markup.push(Markup.getForeignObjectMarkup());\n    } else {\n      markup.push({\n        tagName: 'g',\n        selector: 'content'\n      });\n    }\n\n    markup.push({\n      tagName: 'text',\n      selector: 'label'\n    });\n    return markup;\n  }\n\n  VueShape.config({\n    view: 'vue-shape-view',\n    markup: getMarkup(true),\n    attrs: {\n      body: {\n        fill: 'none',\n        stroke: 'none',\n        refWidth: '100%',\n        refHeight: '100%'\n      },\n      fo: {\n        refWidth: '100%',\n        refHeight: '100%'\n      },\n      label: {\n        fontSize: 14,\n        fill: '#333',\n        refX: '50%',\n        refY: '50%',\n        textAnchor: 'middle',\n        textVerticalAnchor: 'middle'\n      }\n    },\n\n    propHooks(metadata) {\n      if (metadata.markup == null) {\n        const primer = metadata.primer;\n        const useForeignObject = metadata.useForeignObject;\n\n        if (primer != null || useForeignObject != null) {\n          metadata.markup = getMarkup(useForeignObject !== false, primer);\n\n          if (primer) {\n            if (metadata.attrs == null) {\n              metadata.attrs = {};\n            }\n\n            let attrs = {};\n\n            if (primer === 'circle') {\n              attrs = {\n                refCx: '50%',\n                refCy: '50%',\n                refR: '50%'\n              };\n            } else if (primer === 'ellipse') {\n              attrs = {\n                refCx: '50%',\n                refCy: '50%',\n                refRx: '50%',\n                refRy: '50%'\n              };\n            }\n\n            if (primer !== 'rect') {\n              metadata.attrs = ObjectExt.merge({}, metadata.attrs, {\n                body: Object.assign({\n                  refWidth: null,\n                  refHeight: null\n                }, attrs)\n              });\n            }\n          }\n        }\n      }\n\n      return metadata;\n    }\n\n  });\n  Node.registry.register('vue-shape', VueShape, true);\n})(VueShape || (VueShape = {}));","map":{"version":3,"mappings":"AAAA,SAASA,IAAT,EAAeC,MAAf,EAAuBC,SAAvB,QAAwC,UAAxC;AAGA,OAAM,MAAOC,QAAP,SAEIH,IAFJ,CAEoB;EACX,IAATI,SAAS;IACX,OAAO,KAAKC,YAAL,EAAP;EACD;;EAEY,IAATD,SAAS,CAACE,GAAD,EAAsC;IACjD,KAAKC,YAAL,CAAkBD,GAAlB;EACD;;EAEDD,YAAY;IACV,OAAO,KAAKG,KAAL,CAAWC,GAAX,CAAe,WAAf,CAAP;EACD;;EAEDF,YAAY,CACVH,SADU,EAEVM,UAA2B,EAFjB,EAEmB;IAE7B,IAAIN,SAAS,IAAI,IAAjB,EAAuB;MACrB,KAAKO,eAAL,CAAqBD,OAArB;IACD,CAFD,MAEO;MACL,KAAKF,KAAL,CAAWI,GAAX,CAAe,WAAf,EAA4BR,SAA5B,EAAuCM,OAAvC;IACD;;IACD,OAAO,IAAP;EACD;;EAEDC,eAAe,CAACD,UAA2B,EAA5B,EAA8B;IAC3C,KAAKF,KAAL,CAAWK,MAAX,CAAkB,WAAlB,EAA+BH,OAA/B;IACA,OAAO,IAAP;EACD;;AA5BuB;;AA+C1B,WAAiBP,QAAjB,EAAyB;EACvB,SAASW,SAAT,CAAmBC,gBAAnB,EAA8CC,SAAiB,MAA/D,EAAqE;IACnE,MAAMC,MAAM,GAAwB,CAClC;MACEC,OAAO,EAAEF,MADX;MAEEG,QAAQ,EAAE;IAFZ,CADkC,CAApC;;IAOA,IAAIJ,gBAAJ,EAAsB;MACpBE,MAAM,CAACG,IAAP,CAAYnB,MAAM,CAACoB,sBAAP,EAAZ;IACD,CAFD,MAEO;MACLJ,MAAM,CAACG,IAAP,CAAY;QACVF,OAAO,EAAE,GADC;QAEVC,QAAQ,EAAE;MAFA,CAAZ;IAID;;IAEDF,MAAM,CAACG,IAAP,CAAY;MACVF,OAAO,EAAE,MADC;MAEVC,QAAQ,EAAE;IAFA,CAAZ;IAKA,OAAOF,MAAP;EACD;;EACDd,QAAQ,CAACmB,MAAT,CAAgB;IACdC,IAAI,EAAE,gBADQ;IAEdN,MAAM,EAAEH,SAAS,CAAC,IAAD,CAFH;IAGdU,KAAK,EAAE;MACLC,IAAI,EAAE;QACJC,IAAI,EAAE,MADF;QAEJC,MAAM,EAAE,MAFJ;QAGJC,QAAQ,EAAE,MAHN;QAIJC,SAAS,EAAE;MAJP,CADD;MAOLC,EAAE,EAAE;QACFF,QAAQ,EAAE,MADR;QAEFC,SAAS,EAAE;MAFT,CAPC;MAWLE,KAAK,EAAE;QACLC,QAAQ,EAAE,EADL;QAELN,IAAI,EAAE,MAFD;QAGLO,IAAI,EAAE,KAHD;QAILC,IAAI,EAAE,KAJD;QAKLC,UAAU,EAAE,QALP;QAMLC,kBAAkB,EAAE;MANf;IAXF,CAHO;;IAuBdC,SAAS,CAACC,QAAD,EAAqB;MAC5B,IAAIA,QAAQ,CAACrB,MAAT,IAAmB,IAAvB,EAA6B;QAC3B,MAAMD,MAAM,GAAGsB,QAAQ,CAACtB,MAAxB;QACA,MAAMD,gBAAgB,GAAGuB,QAAQ,CAACvB,gBAAlC;;QACA,IAAIC,MAAM,IAAI,IAAV,IAAkBD,gBAAgB,IAAI,IAA1C,EAAgD;UAC9CuB,QAAQ,CAACrB,MAAT,GAAkBH,SAAS,CAACC,gBAAgB,KAAK,KAAtB,EAA6BC,MAA7B,CAA3B;;UACA,IAAIA,MAAJ,EAAY;YACV,IAAIsB,QAAQ,CAACd,KAAT,IAAkB,IAAtB,EAA4B;cAC1Bc,QAAQ,CAACd,KAAT,GAAiB,EAAjB;YACD;;YACD,IAAIA,KAAK,GAAG,EAAZ;;YACA,IAAIR,MAAM,KAAK,QAAf,EAAyB;cACvBQ,KAAK,GAAG;gBACNe,KAAK,EAAE,KADD;gBAENC,KAAK,EAAE,KAFD;gBAGNC,IAAI,EAAE;cAHA,CAAR;YAKD,CAND,MAMO,IAAIzB,MAAM,KAAK,SAAf,EAA0B;cAC/BQ,KAAK,GAAG;gBACNe,KAAK,EAAE,KADD;gBAENC,KAAK,EAAE,KAFD;gBAGNE,KAAK,EAAE,KAHD;gBAINC,KAAK,EAAE;cAJD,CAAR;YAMD;;YAED,IAAI3B,MAAM,KAAK,MAAf,EAAuB;cACrBsB,QAAQ,CAACd,KAAT,GAAiBtB,SAAS,CAAC0C,KAAV,CAAgB,EAAhB,EAAoBN,QAAQ,CAACd,KAA7B,EAAoC;gBACnDC,IAAI;kBACFG,QAAQ,EAAE,IADR;kBAEFC,SAAS,EAAE;gBAFT,GAGCL,KAHD;cAD+C,CAApC,CAAjB;YAOD;UACF;QACF;MACF;;MACD,OAAOc,QAAP;IACD;;EA9Da,CAAhB;EAiEAtC,IAAI,CAAC6C,QAAL,CAAcC,QAAd,CAAuB,WAAvB,EAAoC3C,QAApC,EAA8C,IAA9C;AACD,CA3FD,EAAiBA,QAAQ,KAARA,QAAQ,MAAzB","names":["Node","Markup","ObjectExt","VueShape","component","getComponent","val","setComponent","store","get","options","removeComponent","set","remove","getMarkup","useForeignObject","primer","markup","tagName","selector","push","getForeignObjectMarkup","config","view","attrs","body","fill","stroke","refWidth","refHeight","fo","label","fontSize","refX","refY","textAnchor","textVerticalAnchor","propHooks","metadata","refCx","refCy","refR","refRx","refRy","merge","registry","register"],"sourceRoot":"","sources":["../src/node.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}