{"ast":null,"code":"\"use strict\";\n/**\n * @fileOverview random layout\n * @author shiwu.wyy@antfin.com\n */\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadialLayout = void 0;\n\nvar util_1 = require(\"../../util\");\n\nvar base_1 = require(\"../base\");\n\nvar mds_1 = __importDefault(require(\"./mds\"));\n\nvar radialNonoverlapForce_1 = __importDefault(require(\"./radialNonoverlapForce\"));\n\nfunction getWeightMatrix(M) {\n  var rows = M.length;\n  var cols = M[0].length;\n  var result = [];\n\n  for (var i = 0; i < rows; i++) {\n    var row = [];\n\n    for (var j = 0; j < cols; j++) {\n      if (M[i][j] !== 0) {\n        row.push(1 / (M[i][j] * M[i][j]));\n      } else {\n        row.push(0);\n      }\n    }\n\n    result.push(row);\n  }\n\n  return result;\n}\n\nfunction getIndexById(array, id) {\n  var index = -1;\n  array.forEach(function (a, i) {\n    if (a.id === id) {\n      index = i;\n    }\n  });\n  return index;\n}\n\nfunction getEDistance(p1, p2) {\n  return Math.sqrt((p1[0] - p2[0]) * (p1[0] - p2[0]) + (p1[1] - p2[1]) * (p1[1] - p2[1]));\n}\n/**\n * 辐射状布局\n */\n\n\nvar RadialLayout =\n/** @class */\nfunction (_super) {\n  __extends(RadialLayout, _super);\n\n  function RadialLayout(options) {\n    var _this = _super.call(this) || this;\n    /** 停止迭代的最大迭代数 */\n\n\n    _this.maxIteration = 1000;\n    /** 中心点，默认为数据中第一个点 */\n\n    _this.focusNode = null;\n    /** 每一圈半径 */\n\n    _this.unitRadius = null;\n    /** 默认边长度 */\n\n    _this.linkDistance = 50;\n    /** 是否防止重叠 */\n\n    _this.preventOverlap = false;\n    /** 是否必须是严格的 radial 布局，即每一层的节点严格布局在一个环上。preventOverlap 为 true 时生效 */\n\n    _this.strictRadial = true;\n    /** 防止重叠步骤的最大迭代次数 */\n\n    _this.maxPreventOverlapIteration = 200;\n    _this.sortStrength = 10;\n    _this.nodes = [];\n    _this.edges = [];\n\n    _this.updateCfg(options);\n\n    return _this;\n  }\n\n  RadialLayout.prototype.getDefaultCfg = function () {\n    return {\n      maxIteration: 1000,\n      focusNode: null,\n      unitRadius: null,\n      linkDistance: 50,\n      preventOverlap: false,\n      nodeSize: undefined,\n      nodeSpacing: undefined,\n      strictRadial: true,\n      maxPreventOverlapIteration: 200,\n      sortBy: undefined,\n      sortStrength: 10\n    };\n  };\n  /**\n   * 执行布局\n   */\n\n\n  RadialLayout.prototype.execute = function () {\n    var self = this;\n    var nodes = self.nodes;\n    var edges = self.edges || [];\n\n    if (!nodes || nodes.length === 0) {\n      if (self.onLayoutEnd) self.onLayoutEnd();\n      return;\n    }\n\n    if (!self.width && typeof window !== \"undefined\") {\n      self.width = window.innerWidth;\n    }\n\n    if (!self.height && typeof window !== \"undefined\") {\n      self.height = window.innerHeight;\n    }\n\n    if (!self.center) {\n      self.center = [self.width / 2, self.height / 2];\n    }\n\n    var center = self.center;\n\n    if (nodes.length === 1) {\n      nodes[0].x = center[0];\n      nodes[0].y = center[1];\n      if (self.onLayoutEnd) self.onLayoutEnd();\n      return;\n    }\n\n    var linkDistance = self.linkDistance; // layout\n\n    var focusNode = null;\n\n    if ((0, util_1.isString)(self.focusNode)) {\n      var found = false;\n\n      for (var i = 0; i < nodes.length; i++) {\n        if (nodes[i].id === self.focusNode) {\n          focusNode = nodes[i];\n          self.focusNode = focusNode;\n          found = true;\n          i = nodes.length;\n        }\n      }\n\n      if (!found) {\n        focusNode = null;\n      }\n    } else {\n      focusNode = self.focusNode;\n    } // default focus node\n\n\n    if (!focusNode) {\n      focusNode = nodes[0];\n      self.focusNode = focusNode;\n    } // the index of the focusNode in data\n\n\n    var focusIndex = getIndexById(nodes, focusNode.id);\n    if (focusIndex < 0) focusIndex = 0;\n    self.focusIndex = focusIndex; // the graph-theoretic distance (shortest path distance) matrix\n\n    var adjMatrix = (0, util_1.getAdjMatrix)({\n      nodes: nodes,\n      edges: edges\n    }, false);\n    var D = (0, util_1.floydWarshall)(adjMatrix);\n    var maxDistance = self.maxToFocus(D, focusIndex); // replace first node in unconnected component to the circle at (maxDistance + 1)\n\n    self.handleInfinity(D, focusIndex, maxDistance + 1);\n    self.distances = D; // the shortest path distance from each node to focusNode\n\n    var focusNodeD = D[focusIndex];\n    var width = self.width || 500;\n    var height = self.height || 500;\n    var semiWidth = width - center[0] > center[0] ? center[0] : width - center[0];\n    var semiHeight = height - center[1] > center[1] ? center[1] : height - center[1];\n\n    if (semiWidth === 0) {\n      semiWidth = width / 2;\n    }\n\n    if (semiHeight === 0) {\n      semiHeight = height / 2;\n    } // the maxRadius of the graph\n\n\n    var maxRadius = semiHeight > semiWidth ? semiWidth : semiHeight;\n    var maxD = Math.max.apply(Math, focusNodeD); // the radius for each nodes away from focusNode\n\n    var radii = [];\n    focusNodeD.forEach(function (value, i) {\n      if (!self.unitRadius) {\n        self.unitRadius = maxRadius / maxD;\n      }\n\n      radii[i] = value * self.unitRadius;\n    });\n    self.radii = radii;\n    var eIdealD = self.eIdealDisMatrix(); // const eIdealD = scaleMatrix(D, linkDistance);\n\n    self.eIdealDistances = eIdealD; // the weight matrix, Wij = 1 / dij^(-2)\n\n    var W = getWeightMatrix(eIdealD);\n    self.weights = W; // the initial positions from mds\n\n    var mds = new mds_1.default({\n      linkDistance: linkDistance,\n      distances: eIdealD\n    });\n    var positions = mds.layout();\n    positions.forEach(function (p) {\n      if ((0, util_1.isNaN)(p[0])) {\n        p[0] = Math.random() * linkDistance;\n      }\n\n      if ((0, util_1.isNaN)(p[1])) {\n        p[1] = Math.random() * linkDistance;\n      }\n    });\n    self.positions = positions;\n    positions.forEach(function (p, i) {\n      nodes[i].x = p[0] + center[0];\n      nodes[i].y = p[1] + center[1];\n    }); // move the graph to origin, centered at focusNode\n\n    positions.forEach(function (p) {\n      p[0] -= positions[focusIndex][0];\n      p[1] -= positions[focusIndex][1];\n    });\n    self.run();\n    var preventOverlap = self.preventOverlap;\n    var nodeSize = self.nodeSize;\n    var nodeSizeFunc;\n    var strictRadial = self.strictRadial; // stagger the overlapped nodes\n\n    if (preventOverlap) {\n      var nodeSpacing_1 = self.nodeSpacing;\n      var nodeSpacingFunc_1;\n\n      if ((0, util_1.isNumber)(nodeSpacing_1)) {\n        nodeSpacingFunc_1 = function () {\n          return nodeSpacing_1;\n        };\n      } else if ((0, util_1.isFunction)(nodeSpacing_1)) {\n        nodeSpacingFunc_1 = nodeSpacing_1;\n      } else {\n        nodeSpacingFunc_1 = function () {\n          return 0;\n        };\n      }\n\n      if (!nodeSize) {\n        nodeSizeFunc = function (d) {\n          if (d.size) {\n            if ((0, util_1.isArray)(d.size)) {\n              var res = d.size[0] > d.size[1] ? d.size[0] : d.size[1];\n              return res + nodeSpacingFunc_1(d);\n            }\n\n            if ((0, util_1.isObject)(d.size)) {\n              var res = d.size.width > d.size.height ? d.size.width : d.size.height;\n              return res + nodeSpacingFunc_1(d);\n            }\n\n            return d.size + nodeSpacingFunc_1(d);\n          }\n\n          return 10 + nodeSpacingFunc_1(d);\n        };\n      } else if ((0, util_1.isArray)(nodeSize)) {\n        nodeSizeFunc = function (d) {\n          var res = nodeSize[0] > nodeSize[1] ? nodeSize[0] : nodeSize[1];\n          return res + nodeSpacingFunc_1(d);\n        };\n      } else {\n        nodeSizeFunc = function (d) {\n          return nodeSize + nodeSpacingFunc_1(d);\n        };\n      }\n\n      var nonoverlapForceParams = {\n        nodes: nodes,\n        nodeSizeFunc: nodeSizeFunc,\n        adjMatrix: adjMatrix,\n        positions: positions,\n        radii: radii,\n        height: height,\n        width: width,\n        strictRadial: strictRadial,\n        focusID: focusIndex,\n        iterations: self.maxPreventOverlapIteration || 200,\n        k: positions.length / 4.5\n      };\n      var nonoverlapForce = new radialNonoverlapForce_1.default(nonoverlapForceParams);\n      positions = nonoverlapForce.layout();\n    } // move the graph to center\n\n\n    positions.forEach(function (p, i) {\n      nodes[i].x = p[0] + center[0];\n      nodes[i].y = p[1] + center[1];\n    });\n    if (self.onLayoutEnd) self.onLayoutEnd();\n    return {\n      nodes: nodes,\n      edges: edges\n    };\n  };\n\n  RadialLayout.prototype.run = function () {\n    var self = this;\n    var maxIteration = self.maxIteration;\n    var positions = self.positions || [];\n    var W = self.weights || [];\n    var eIdealDis = self.eIdealDistances || [];\n    var radii = self.radii || [];\n\n    for (var i = 0; i <= maxIteration; i++) {\n      var param = i / maxIteration;\n      self.oneIteration(param, positions, radii, eIdealDis, W);\n    }\n  };\n\n  RadialLayout.prototype.oneIteration = function (param, positions, radii, D, W) {\n    var self = this;\n    var vparam = 1 - param;\n    var focusIndex = self.focusIndex;\n    positions.forEach(function (v, i) {\n      // v\n      var originDis = getEDistance(v, [0, 0]);\n      var reciODis = originDis === 0 ? 0 : 1 / originDis;\n\n      if (i === focusIndex) {\n        return;\n      }\n\n      var xMolecule = 0;\n      var yMolecule = 0;\n      var denominator = 0;\n      positions.forEach(function (u, j) {\n        // u\n        if (i === j) {\n          return;\n        } // the euclidean distance between v and u\n\n\n        var edis = getEDistance(v, u);\n        var reciEdis = edis === 0 ? 0 : 1 / edis;\n        var idealDis = D[j][i]; // same for x and y\n\n        denominator += W[i][j]; // x\n\n        xMolecule += W[i][j] * (u[0] + idealDis * (v[0] - u[0]) * reciEdis); // y\n\n        yMolecule += W[i][j] * (u[1] + idealDis * (v[1] - u[1]) * reciEdis);\n      });\n      var reciR = radii[i] === 0 ? 0 : 1 / radii[i];\n      denominator *= vparam;\n      denominator += param * reciR * reciR; // x\n\n      xMolecule *= vparam;\n      xMolecule += param * reciR * v[0] * reciODis;\n      v[0] = xMolecule / denominator; // y\n\n      yMolecule *= vparam;\n      yMolecule += param * reciR * v[1] * reciODis;\n      v[1] = yMolecule / denominator;\n    });\n  };\n\n  RadialLayout.prototype.eIdealDisMatrix = function () {\n    var self = this;\n    var nodes = self.nodes;\n    if (!nodes) return [];\n    var D = self.distances;\n    var linkDis = self.linkDistance;\n    var radii = self.radii || [];\n    var unitRadius = self.unitRadius || 50;\n    var result = [];\n\n    if (D) {\n      D.forEach(function (row, i) {\n        var newRow = [];\n        row.forEach(function (v, j) {\n          if (i === j) {\n            newRow.push(0);\n          } else if (radii[i] === radii[j]) {\n            // i and j are on the same circle\n            if (self.sortBy === \"data\") {\n              // sort the nodes on the same circle according to the ordering of the data\n              newRow.push(v * (Math.abs(i - j) * self.sortStrength) / (radii[i] / unitRadius));\n            } else if (self.sortBy) {\n              // sort the nodes on the same circle according to the attributes\n              var iValue = nodes[i][self.sortBy] || 0;\n              var jValue = nodes[j][self.sortBy] || 0;\n\n              if ((0, util_1.isString)(iValue)) {\n                iValue = iValue.charCodeAt(0);\n              }\n\n              if ((0, util_1.isString)(jValue)) {\n                jValue = jValue.charCodeAt(0);\n              }\n\n              newRow.push(v * (Math.abs(iValue - jValue) * self.sortStrength) / (radii[i] / unitRadius));\n            } else {\n              newRow.push(v * linkDis / (radii[i] / unitRadius));\n            }\n          } else {\n            // i and j are on different circle\n            // i and j are on different circle\n            var link = (linkDis + unitRadius) / 2;\n            newRow.push(v * link);\n          }\n        });\n        result.push(newRow);\n      });\n    }\n\n    return result;\n  };\n\n  RadialLayout.prototype.handleInfinity = function (matrix, focusIndex, step) {\n    var length = matrix.length; // 遍历 matrix 中遍历 focus 对应行\n\n    for (var i = 0; i < length; i++) {\n      // matrix 关注点对应行的 Inf 项\n      if (matrix[focusIndex][i] === Infinity) {\n        matrix[focusIndex][i] = step;\n        matrix[i][focusIndex] = step; // 遍历 matrix 中的 i 行，i 行中非 Inf 项若在 focus 行为 Inf，则替换 focus 行的那个 Inf\n\n        for (var j = 0; j < length; j++) {\n          if (matrix[i][j] !== Infinity && matrix[focusIndex][j] === Infinity) {\n            matrix[focusIndex][j] = step + matrix[i][j];\n            matrix[j][focusIndex] = step + matrix[i][j];\n          }\n        }\n      }\n    } // 处理其他行的 Inf。根据该行对应点与 focus 距离以及 Inf 项点 与 focus 距离，决定替换值\n\n\n    for (var i = 0; i < length; i++) {\n      if (i === focusIndex) {\n        continue;\n      }\n\n      for (var j = 0; j < length; j++) {\n        if (matrix[i][j] === Infinity) {\n          var minus = Math.abs(matrix[focusIndex][i] - matrix[focusIndex][j]);\n          minus = minus === 0 ? 1 : minus;\n          matrix[i][j] = minus;\n        }\n      }\n    }\n  };\n\n  RadialLayout.prototype.maxToFocus = function (matrix, focusIndex) {\n    var max = 0;\n\n    for (var i = 0; i < matrix[focusIndex].length; i++) {\n      if (matrix[focusIndex][i] === Infinity) {\n        continue;\n      }\n\n      max = matrix[focusIndex][i] > max ? matrix[focusIndex][i] : max;\n    }\n\n    return max;\n  };\n\n  RadialLayout.prototype.getType = function () {\n    return \"radial\";\n  };\n\n  return RadialLayout;\n}(base_1.Base);\n\nexports.RadialLayout = RadialLayout;","map":{"version":3,"mappings":"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","names":["getWeightMatrix","M","rows","length","cols","result","i","row","j","push","getIndexById","array","id","index","forEach","a","getEDistance","p1","p2","Math","sqrt","__extends","options","_super","_this","updateCfg","RadialLayout","maxIteration","focusNode","unitRadius","linkDistance","preventOverlap","nodeSize","undefined","nodeSpacing","strictRadial","maxPreventOverlapIteration","sortBy","sortStrength","self","nodes","edges","onLayoutEnd","width","window","innerWidth","height","innerHeight","center","x","y","found","focusIndex","adjMatrix","D","maxDistance","maxToFocus","handleInfinity","distances","focusNodeD","semiWidth","semiHeight","maxRadius","maxD","max","apply","radii","value","eIdealD","eIdealDisMatrix","eIdealDistances","W","weights","mds","mds_1","positions","layout","p","random","run","nodeSizeFunc","nodeSpacing_1","nodeSpacingFunc_1","d","size","res","nonoverlapForceParams","focusID","iterations","k","nonoverlapForce","radialNonoverlapForce_1","eIdealDis","param","oneIteration","vparam","v","originDis","reciODis","xMolecule","yMolecule","denominator","u","edis","reciEdis","idealDis","reciR","linkDis","newRow","abs","iValue","jValue","charCodeAt","link","matrix","step","Infinity","minus","base_1","exports"],"sourceRoot":"","sources":["../../../src/layout/radial/radial.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}