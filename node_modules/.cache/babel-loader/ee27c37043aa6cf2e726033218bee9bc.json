{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport { clone, isString } from '@antv/util';\nimport Base from '../base';\nimport insertCss from 'insert-css';\nvar DELTA = 0.05;\ntypeof document !== 'undefined' && insertCss(\"\\n  .g6-component-toolbar {\\n    position: absolute;\\n    list-style-type: none;\\n    padding: 6px;\\n    left: 0px;\\n    top: 0px;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    margin: 0;\\n  }\\n  .g6-component-toolbar li {\\n    float: left;\\n    text-align: center;\\n    width: 35px;\\n    height: 24px;\\n    cursor: pointer;\\n\\t\\tlist-style-type:none;\\n    list-style: none;\\n    margin-left: 0px;\\n  }\\n  .g6-component-toolbar li .icon {\\n    opacity: 0.7;\\n  }\\n  .g6-component-toolbar li .icon:hover {\\n    opacity: 1;\\n  }\\n\");\n\nvar getEventPath = function getEventPath(evt) {\n  if (!evt) {\n    return [];\n  }\n\n  if (evt.composedPath) {\n    return evt.composedPath();\n  }\n\n  var path = [];\n  var el = evt.target;\n\n  while (el) {\n    path.push(el);\n\n    if (el.tagName === 'HTML') {\n      path.push(document, window);\n      return path;\n    }\n\n    el = el.parentElement;\n  }\n\n  return path;\n};\n\nvar ToolBar =\n/** @class */\nfunction (_super) {\n  __extends(ToolBar, _super);\n\n  function ToolBar(config) {\n    return _super.call(this, config) || this;\n  }\n\n  ToolBar.prototype.getDefaultCfgs = function () {\n    return {\n      handleClick: undefined,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(graph) {\n        return \"\\n          <ul class='g6-component-toolbar'>\\n            <li code='redo'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z\\\" fill=\\\"\\\" p-id=\\\"2041\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='undo'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z\\\" fill=\\\"\\\" p-id=\\\"2764\\\"></path>\\n              </svg>\\n            </li>\\n            <li  code='zoomOut'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='zoomIn'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z\\\" p-id=\\\"3853\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='realZoom'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"24\\\">\\n                <path d=\\\"M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='autoZoom'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"24\\\">\\n                <path d=\\\"M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z\\\"></path>\\n              </svg>\\n            </li>\\n          </ul>\\n        \";\n      },\n      zoomSensitivity: 2\n    };\n  };\n\n  ToolBar.prototype.init = function () {\n    var _this = this;\n\n    var graph = this.get('graph');\n    var getContent = this.get('getContent');\n    var toolBar = getContent(graph);\n    var toolBarDOM = toolBar;\n\n    if (isString(toolBar)) {\n      toolBarDOM = createDom(toolBar);\n    }\n\n    var className = this.get('className');\n    toolBarDOM.setAttribute('class', className || 'g6-component-toolbar');\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    if (isString(container)) {\n      container = document.getElementById(container);\n    }\n\n    container.appendChild(toolBarDOM);\n    this.set('toolBar', toolBarDOM);\n    var handleClick = this.get('handleClick');\n    toolBarDOM.addEventListener('click', function (evt) {\n      var current = getEventPath(evt).filter(function (p) {\n        return p.nodeName === 'LI';\n      });\n\n      if (current.length === 0) {\n        return;\n      }\n\n      var code = current[0].getAttribute('code');\n\n      if (!code) {\n        return;\n      }\n\n      if (handleClick) {\n        handleClick(code, graph);\n      } else {\n        _this.handleDefaultOperator(code);\n      }\n    });\n    var pos = this.get('position');\n\n    if (pos) {\n      modifyCSS(toolBarDOM, {\n        top: \"\".concat(pos.y, \"px\"),\n        left: \"\".concat(pos.x, \"px\")\n      });\n    }\n\n    this.bindUndoRedo();\n  };\n\n  ToolBar.prototype.bindUndoRedo = function () {\n    var graph = this.get('graph');\n    var undoDom = document.querySelector('.g6-component-toolbar li[code=\"undo\"]');\n    var undoDomIcon = document.querySelector('.g6-component-toolbar li[code=\"undo\"] svg');\n    var redoDom = document.querySelector('.g6-component-toolbar li[code=\"redo\"]');\n    var redoDomIcon = document.querySelector('.g6-component-toolbar li[code=\"redo\"] svg');\n\n    if (!undoDom || !undoDomIcon || !redoDom || !redoDomIcon) {\n      return;\n    }\n\n    graph.on('stackchange', function (evt) {\n      var undoStack = evt.undoStack,\n          redoStack = evt.redoStack;\n      var undoStackLen = undoStack.length;\n      var redoStackLen = redoStack.length; // undo 不可用\n\n      if (undoStackLen === 1) {\n        undoDom.setAttribute('style', 'cursor: not-allowed');\n        undoDomIcon.setAttribute('style', 'opacity: 0.4');\n      } else {\n        undoDom.removeAttribute('style');\n        undoDomIcon.removeAttribute('style');\n      } // redo 不可用\n\n\n      if (redoStackLen === 0) {\n        redoDom.setAttribute('style', 'cursor: not-allowed');\n        redoDomIcon.setAttribute('style', 'opacity: 0.4');\n      } else {\n        redoDom.removeAttribute('style');\n        redoDomIcon.removeAttribute('style');\n      }\n    });\n  };\n  /**\n   * undo 操作\n   */\n\n\n  ToolBar.prototype.undo = function () {\n    var graph = this.get('graph');\n    var undoStack = graph.getUndoStack();\n\n    if (!undoStack || undoStack.length === 1) {\n      return;\n    }\n\n    var currentData = undoStack.pop();\n\n    if (currentData) {\n      var action = currentData.action;\n      graph.pushStack(action, clone(currentData.data), 'redo');\n      var data_1 = currentData.data.before;\n\n      if (action === 'add') {\n        data_1 = currentData.data.after;\n      }\n\n      if (!data_1) return;\n\n      switch (action) {\n        case 'visible':\n          {\n            Object.keys(data_1).forEach(function (key) {\n              var array = data_1[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var item = graph.findById(model.id);\n\n                if (model.visible) {\n                  graph.showItem(item, false);\n                } else {\n                  graph.hideItem(item, false);\n                }\n              });\n            });\n            break;\n          }\n\n        case 'render':\n        case 'update':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              var item = graph.findById(model.id);\n              delete model.id;\n              graph.updateItem(item, model, false);\n              if (item.getType() === 'combo') graph.updateCombo(item);\n            });\n          });\n          break;\n\n        case 'changedata':\n          graph.changeData(data_1, false);\n          break;\n\n        case 'delete':\n          {\n            Object.keys(data_1).forEach(function (key) {\n              var array = data_1[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var itemType = model.itemType;\n                delete model.itemType;\n                graph.addItem(itemType, model, false);\n              });\n            });\n            break;\n          }\n\n        case 'add':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          });\n          break;\n\n        case 'updateComboTree':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.updateComboTree(model.id, model.parentId, false);\n            });\n          });\n          break;\n\n        case 'layout':\n          graph.updateLayout(data_1, undefined, undefined, false);\n          break;\n\n        default:\n      }\n    }\n  };\n  /**\n   * redo 操作\n   */\n\n\n  ToolBar.prototype.redo = function () {\n    var graph = this.get('graph');\n    var redoStack = graph.getRedoStack();\n\n    if (!redoStack || redoStack.length === 0) {\n      return;\n    }\n\n    var currentData = redoStack.pop();\n\n    if (currentData) {\n      var action = currentData.action;\n      var data_2 = currentData.data.after;\n      graph.pushStack(action, clone(currentData.data));\n\n      if (action === 'delete') {\n        data_2 = currentData.data.before;\n      }\n\n      if (!data_2) return;\n\n      switch (action) {\n        case 'visible':\n          {\n            Object.keys(data_2).forEach(function (key) {\n              var array = data_2[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var item = graph.findById(model.id);\n\n                if (model.visible) {\n                  graph.showItem(item, false);\n                } else {\n                  graph.hideItem(item, false);\n                }\n              });\n            });\n            break;\n          }\n\n        case 'render':\n        case 'update':\n          Object.keys(data_2).forEach(function (key) {\n            var array = data_2[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              var item = graph.findById(model.id);\n              delete model.id;\n              graph.updateItem(item, model, false);\n              if (item.getType() === 'combo') graph.updateCombo(item);\n            });\n          });\n          break;\n\n        case 'changedata':\n          graph.changeData(data_2, false);\n          break;\n\n        case 'delete':\n          if (data_2.edges) {\n            data_2.edges.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          if (data_2.nodes) {\n            data_2.nodes.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          if (data_2.combos) {\n            data_2.combos.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          break;\n\n        case 'add':\n          {\n            Object.keys(data_2).forEach(function (key) {\n              var array = data_2[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var itemType = model.itemType;\n                delete model.itemType;\n                graph.addItem(itemType, model, false);\n              });\n            });\n            break;\n          }\n\n        case 'updateComboTree':\n          Object.keys(data_2).forEach(function (key) {\n            var array = data_2[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.updateComboTree(model.id, model.parentId, false);\n            });\n          });\n          break;\n\n        case 'layout':\n          graph.updateLayout(data_2, undefined, undefined, false);\n          break;\n\n        default:\n      }\n    }\n  };\n  /**\n   * zoomOut 操作\n   */\n\n\n  ToolBar.prototype.zoomOut = function () {\n    var graph = this.get('graph');\n    var currentZoom = graph.getZoom();\n    var ratioOut = 1 / (1 - DELTA * this.get('zoomSensitivity'));\n    var maxZoom = this.get('maxZoom') || graph.get('maxZoom');\n\n    if (ratioOut * currentZoom > maxZoom) {\n      return;\n    }\n\n    graph.zoomTo(currentZoom * ratioOut);\n  };\n  /**\n   * zoomIn 操作\n   */\n\n\n  ToolBar.prototype.zoomIn = function () {\n    var graph = this.get('graph');\n    var currentZoom = graph.getZoom();\n    var ratioIn = 1 - DELTA * this.get('zoomSensitivity');\n    var minZoom = this.get('minZoom') || graph.get('minZoom');\n\n    if (ratioIn * currentZoom < minZoom) {\n      return;\n    }\n\n    graph.zoomTo(currentZoom * ratioIn);\n  };\n  /**\n   * realZoom 操作\n   */\n\n\n  ToolBar.prototype.realZoom = function () {\n    var graph = this.get('graph');\n    graph.zoomTo(1);\n  };\n  /**\n   * autoZoom 操作\n   */\n\n\n  ToolBar.prototype.autoZoom = function () {\n    var graph = this.get('graph');\n    graph.fitView([20, 20]);\n  };\n  /**\n   * 根据 Toolbar 上不同类型对图进行操作\n   * @param code 操作类型编码\n   * @param graph Graph 实例\n   */\n\n\n  ToolBar.prototype.handleDefaultOperator = function (code) {\n    switch (code) {\n      case 'redo':\n        this.redo();\n        break;\n\n      case 'undo':\n        this.undo();\n        break;\n\n      case 'zoomOut':\n        this.zoomOut();\n        break;\n\n      case 'zoomIn':\n        this.zoomIn();\n        break;\n\n      case 'realZoom':\n        this.realZoom();\n        break;\n\n      case 'autoZoom':\n        this.autoZoom();\n        break;\n\n      default:\n    }\n  };\n\n  ToolBar.prototype.destroy = function () {\n    var toolBar = this.get('toolBar');\n\n    if (toolBar) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      container.removeChild(toolBar);\n    }\n\n    var handleClick = this.get('handleClick');\n\n    if (handleClick) {\n      toolBar.removeEventListener('click', handleClick);\n    }\n  };\n\n  return ToolBar;\n}(Base);\n\nexport default ToolBar;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","modifyCSS","createDom","clone","isString","Base","insertCss","DELTA","document","getEventPath","evt","composedPath","path","el","target","push","tagName","window","parentElement","ToolBar","_super","config","getDefaultCfgs","handleClick","undefined","getContent","graph","zoomSensitivity","init","_this","get","toolBar","toolBarDOM","className","setAttribute","container","getElementById","appendChild","set","addEventListener","current","filter","nodeName","length","code","getAttribute","handleDefaultOperator","pos","top","concat","y","left","x","bindUndoRedo","undoDom","querySelector","undoDomIcon","redoDom","redoDomIcon","on","undoStack","redoStack","undoStackLen","redoStackLen","removeAttribute","undo","getUndoStack","currentData","pop","action","pushStack","data","data_1","before","after","keys","forEach","key","array","model","item","findById","id","visible","showItem","hideItem","updateItem","getType","updateCombo","changeData","itemType","addItem","removeItem","updateComboTree","parentId","updateLayout","redo","getRedoStack","data_2","edges","nodes","combos","zoomOut","currentZoom","getZoom","ratioOut","maxZoom","zoomTo","zoomIn","ratioIn","minZoom","realZoom","autoZoom","fitView","destroy","removeChild","removeEventListener"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/toolBar/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport { clone, isString } from '@antv/util';\nimport Base from '../base';\nimport insertCss from 'insert-css';\nvar DELTA = 0.05;\ntypeof document !== 'undefined' && insertCss(\"\\n  .g6-component-toolbar {\\n    position: absolute;\\n    list-style-type: none;\\n    padding: 6px;\\n    left: 0px;\\n    top: 0px;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    margin: 0;\\n  }\\n  .g6-component-toolbar li {\\n    float: left;\\n    text-align: center;\\n    width: 35px;\\n    height: 24px;\\n    cursor: pointer;\\n\\t\\tlist-style-type:none;\\n    list-style: none;\\n    margin-left: 0px;\\n  }\\n  .g6-component-toolbar li .icon {\\n    opacity: 0.7;\\n  }\\n  .g6-component-toolbar li .icon:hover {\\n    opacity: 1;\\n  }\\n\");\n\nvar getEventPath = function getEventPath(evt) {\n  if (!evt) {\n    return [];\n  }\n\n  if (evt.composedPath) {\n    return evt.composedPath();\n  }\n\n  var path = [];\n  var el = evt.target;\n\n  while (el) {\n    path.push(el);\n\n    if (el.tagName === 'HTML') {\n      path.push(document, window);\n      return path;\n    }\n\n    el = el.parentElement;\n  }\n\n  return path;\n};\n\nvar ToolBar =\n/** @class */\nfunction (_super) {\n  __extends(ToolBar, _super);\n\n  function ToolBar(config) {\n    return _super.call(this, config) || this;\n  }\n\n  ToolBar.prototype.getDefaultCfgs = function () {\n    return {\n      handleClick: undefined,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(graph) {\n        return \"\\n          <ul class='g6-component-toolbar'>\\n            <li code='redo'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z\\\" fill=\\\"\\\" p-id=\\\"2041\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='undo'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z\\\" fill=\\\"\\\" p-id=\\\"2764\\\"></path>\\n              </svg>\\n            </li>\\n            <li  code='zoomOut'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='zoomIn'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\">\\n                <path d=\\\"M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z\\\" p-id=\\\"3853\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='realZoom'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"24\\\">\\n                <path d=\\\"M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z\\\"></path>\\n              </svg>\\n            </li>\\n            <li code='autoZoom'>\\n              <svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"24\\\">\\n                <path d=\\\"M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z\\\"></path>\\n              </svg>\\n            </li>\\n          </ul>\\n        \";\n      },\n      zoomSensitivity: 2\n    };\n  };\n\n  ToolBar.prototype.init = function () {\n    var _this = this;\n\n    var graph = this.get('graph');\n    var getContent = this.get('getContent');\n    var toolBar = getContent(graph);\n    var toolBarDOM = toolBar;\n\n    if (isString(toolBar)) {\n      toolBarDOM = createDom(toolBar);\n    }\n\n    var className = this.get('className');\n    toolBarDOM.setAttribute('class', className || 'g6-component-toolbar');\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    if (isString(container)) {\n      container = document.getElementById(container);\n    }\n\n    container.appendChild(toolBarDOM);\n    this.set('toolBar', toolBarDOM);\n    var handleClick = this.get('handleClick');\n    toolBarDOM.addEventListener('click', function (evt) {\n      var current = getEventPath(evt).filter(function (p) {\n        return p.nodeName === 'LI';\n      });\n\n      if (current.length === 0) {\n        return;\n      }\n\n      var code = current[0].getAttribute('code');\n\n      if (!code) {\n        return;\n      }\n\n      if (handleClick) {\n        handleClick(code, graph);\n      } else {\n        _this.handleDefaultOperator(code);\n      }\n    });\n    var pos = this.get('position');\n\n    if (pos) {\n      modifyCSS(toolBarDOM, {\n        top: \"\".concat(pos.y, \"px\"),\n        left: \"\".concat(pos.x, \"px\")\n      });\n    }\n\n    this.bindUndoRedo();\n  };\n\n  ToolBar.prototype.bindUndoRedo = function () {\n    var graph = this.get('graph');\n    var undoDom = document.querySelector('.g6-component-toolbar li[code=\"undo\"]');\n    var undoDomIcon = document.querySelector('.g6-component-toolbar li[code=\"undo\"] svg');\n    var redoDom = document.querySelector('.g6-component-toolbar li[code=\"redo\"]');\n    var redoDomIcon = document.querySelector('.g6-component-toolbar li[code=\"redo\"] svg');\n\n    if (!undoDom || !undoDomIcon || !redoDom || !redoDomIcon) {\n      return;\n    }\n\n    graph.on('stackchange', function (evt) {\n      var undoStack = evt.undoStack,\n          redoStack = evt.redoStack;\n      var undoStackLen = undoStack.length;\n      var redoStackLen = redoStack.length; // undo 不可用\n\n      if (undoStackLen === 1) {\n        undoDom.setAttribute('style', 'cursor: not-allowed');\n        undoDomIcon.setAttribute('style', 'opacity: 0.4');\n      } else {\n        undoDom.removeAttribute('style');\n        undoDomIcon.removeAttribute('style');\n      } // redo 不可用\n\n\n      if (redoStackLen === 0) {\n        redoDom.setAttribute('style', 'cursor: not-allowed');\n        redoDomIcon.setAttribute('style', 'opacity: 0.4');\n      } else {\n        redoDom.removeAttribute('style');\n        redoDomIcon.removeAttribute('style');\n      }\n    });\n  };\n  /**\n   * undo 操作\n   */\n\n\n  ToolBar.prototype.undo = function () {\n    var graph = this.get('graph');\n    var undoStack = graph.getUndoStack();\n\n    if (!undoStack || undoStack.length === 1) {\n      return;\n    }\n\n    var currentData = undoStack.pop();\n\n    if (currentData) {\n      var action = currentData.action;\n      graph.pushStack(action, clone(currentData.data), 'redo');\n      var data_1 = currentData.data.before;\n\n      if (action === 'add') {\n        data_1 = currentData.data.after;\n      }\n\n      if (!data_1) return;\n\n      switch (action) {\n        case 'visible':\n          {\n            Object.keys(data_1).forEach(function (key) {\n              var array = data_1[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var item = graph.findById(model.id);\n\n                if (model.visible) {\n                  graph.showItem(item, false);\n                } else {\n                  graph.hideItem(item, false);\n                }\n              });\n            });\n            break;\n          }\n\n        case 'render':\n        case 'update':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              var item = graph.findById(model.id);\n              delete model.id;\n              graph.updateItem(item, model, false);\n              if (item.getType() === 'combo') graph.updateCombo(item);\n            });\n          });\n          break;\n\n        case 'changedata':\n          graph.changeData(data_1, false);\n          break;\n\n        case 'delete':\n          {\n            Object.keys(data_1).forEach(function (key) {\n              var array = data_1[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var itemType = model.itemType;\n                delete model.itemType;\n                graph.addItem(itemType, model, false);\n              });\n            });\n            break;\n          }\n\n        case 'add':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          });\n          break;\n\n        case 'updateComboTree':\n          Object.keys(data_1).forEach(function (key) {\n            var array = data_1[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.updateComboTree(model.id, model.parentId, false);\n            });\n          });\n          break;\n\n        case 'layout':\n          graph.updateLayout(data_1, undefined, undefined, false);\n          break;\n\n        default:\n      }\n    }\n  };\n  /**\n   * redo 操作\n   */\n\n\n  ToolBar.prototype.redo = function () {\n    var graph = this.get('graph');\n    var redoStack = graph.getRedoStack();\n\n    if (!redoStack || redoStack.length === 0) {\n      return;\n    }\n\n    var currentData = redoStack.pop();\n\n    if (currentData) {\n      var action = currentData.action;\n      var data_2 = currentData.data.after;\n      graph.pushStack(action, clone(currentData.data));\n\n      if (action === 'delete') {\n        data_2 = currentData.data.before;\n      }\n\n      if (!data_2) return;\n\n      switch (action) {\n        case 'visible':\n          {\n            Object.keys(data_2).forEach(function (key) {\n              var array = data_2[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var item = graph.findById(model.id);\n\n                if (model.visible) {\n                  graph.showItem(item, false);\n                } else {\n                  graph.hideItem(item, false);\n                }\n              });\n            });\n            break;\n          }\n\n        case 'render':\n        case 'update':\n          Object.keys(data_2).forEach(function (key) {\n            var array = data_2[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              var item = graph.findById(model.id);\n              delete model.id;\n              graph.updateItem(item, model, false);\n              if (item.getType() === 'combo') graph.updateCombo(item);\n            });\n          });\n          break;\n\n        case 'changedata':\n          graph.changeData(data_2, false);\n          break;\n\n        case 'delete':\n          if (data_2.edges) {\n            data_2.edges.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          if (data_2.nodes) {\n            data_2.nodes.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          if (data_2.combos) {\n            data_2.combos.forEach(function (model) {\n              graph.removeItem(model.id, false);\n            });\n          }\n\n          break;\n\n        case 'add':\n          {\n            Object.keys(data_2).forEach(function (key) {\n              var array = data_2[key];\n              if (!array) return;\n              array.forEach(function (model) {\n                var itemType = model.itemType;\n                delete model.itemType;\n                graph.addItem(itemType, model, false);\n              });\n            });\n            break;\n          }\n\n        case 'updateComboTree':\n          Object.keys(data_2).forEach(function (key) {\n            var array = data_2[key];\n            if (!array) return;\n            array.forEach(function (model) {\n              graph.updateComboTree(model.id, model.parentId, false);\n            });\n          });\n          break;\n\n        case 'layout':\n          graph.updateLayout(data_2, undefined, undefined, false);\n          break;\n\n        default:\n      }\n    }\n  };\n  /**\n   * zoomOut 操作\n   */\n\n\n  ToolBar.prototype.zoomOut = function () {\n    var graph = this.get('graph');\n    var currentZoom = graph.getZoom();\n    var ratioOut = 1 / (1 - DELTA * this.get('zoomSensitivity'));\n    var maxZoom = this.get('maxZoom') || graph.get('maxZoom');\n\n    if (ratioOut * currentZoom > maxZoom) {\n      return;\n    }\n\n    graph.zoomTo(currentZoom * ratioOut);\n  };\n  /**\n   * zoomIn 操作\n   */\n\n\n  ToolBar.prototype.zoomIn = function () {\n    var graph = this.get('graph');\n    var currentZoom = graph.getZoom();\n    var ratioIn = 1 - DELTA * this.get('zoomSensitivity');\n    var minZoom = this.get('minZoom') || graph.get('minZoom');\n\n    if (ratioIn * currentZoom < minZoom) {\n      return;\n    }\n\n    graph.zoomTo(currentZoom * ratioIn);\n  };\n  /**\n   * realZoom 操作\n   */\n\n\n  ToolBar.prototype.realZoom = function () {\n    var graph = this.get('graph');\n    graph.zoomTo(1);\n  };\n  /**\n   * autoZoom 操作\n   */\n\n\n  ToolBar.prototype.autoZoom = function () {\n    var graph = this.get('graph');\n    graph.fitView([20, 20]);\n  };\n  /**\n   * 根据 Toolbar 上不同类型对图进行操作\n   * @param code 操作类型编码\n   * @param graph Graph 实例\n   */\n\n\n  ToolBar.prototype.handleDefaultOperator = function (code) {\n    switch (code) {\n      case 'redo':\n        this.redo();\n        break;\n\n      case 'undo':\n        this.undo();\n        break;\n\n      case 'zoomOut':\n        this.zoomOut();\n        break;\n\n      case 'zoomIn':\n        this.zoomIn();\n        break;\n\n      case 'realZoom':\n        this.realZoom();\n        break;\n\n      case 'autoZoom':\n        this.autoZoom();\n        break;\n\n      default:\n    }\n  };\n\n  ToolBar.prototype.destroy = function () {\n    var toolBar = this.get('toolBar');\n\n    if (toolBar) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      container.removeChild(toolBar);\n    }\n\n    var handleClick = this.get('handleClick');\n\n    if (handleClick) {\n      toolBar.removeEventListener('click', handleClick);\n    }\n  };\n\n  return ToolBar;\n}(Base);\n\nexport default ToolBar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}