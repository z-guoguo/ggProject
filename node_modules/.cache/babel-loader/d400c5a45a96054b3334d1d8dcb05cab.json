{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/**\n * An implementation of the Priority Queue abstract data type.\n *\n * @see: http://en.wikipedia.org/wiki/Priority_queue\n *\n * It is like a normal stack or queue, but where each item has assigned a\n * priority (a number). Items with higher priority are served before items\n * with lower priority. This implementation uses binary heap as an internal\n * representation of the queue. The time complexity of all the methods is as\n * follows:\n *\n * - create: `O(n)`\n * - insert: `O(log n)`\n * - remove: `O(log n)`\n * - peek: `O(1)`\n * - isEmpty: `O(1)`\n * - peekPriority: `O(1)`\n */\nexport class PriorityQueue {\n  constructor(options = {}) {\n    this.comparator = options.comparator || PriorityQueue.defaultComparator;\n    this.index = {};\n    this.data = options.data || [];\n    this.heapify();\n  }\n  /**\n   * Returns `true` if the priority queue is empty, `false` otherwise.\n   */\n\n\n  isEmpty() {\n    return this.data.length === 0;\n  }\n  /**\n   * Inserts a value with priority to the queue. Optionally pass a unique\n   * id of this item. Passing unique IDs for each item you insert allows\n   * you to use the `updatePriority()` operation.\n   * @param priority\n   * @param value\n   * @param id\n   */\n\n\n  insert(priority, value, id) {\n    const item = {\n      priority,\n      value\n    };\n    const index = this.data.length - 1;\n\n    if (id) {\n      item.id = id;\n      this.index[id] = index;\n    }\n\n    this.data.push(item);\n    this.bubbleUp(index);\n    return this;\n  }\n  /**\n   * Returns the value of an item with the highest priority.\n   */\n\n\n  peek() {\n    return this.data[0] ? this.data[0].value : null;\n  }\n  /**\n   * Returns the highest priority in the queue.\n   */\n\n\n  peekPriority() {\n    return this.data[0] ? this.data[0].priority : null;\n  }\n\n  updatePriority(id, priority) {\n    const index = this.index[id];\n\n    if (typeof index === 'undefined') {\n      throw new Error(`Node with id '${id}' was not found in the heap.`);\n    }\n\n    const data = this.data;\n    const oldPriority = data[index].priority;\n    const comp = this.comparator(priority, oldPriority);\n\n    if (comp < 0) {\n      data[index].priority = priority;\n      this.bubbleUp(index);\n    } else if (comp > 0) {\n      data[index].priority = priority;\n      this.bubbleDown(index);\n    }\n  }\n  /**\n   * Removes the item with the highest priority from the queue\n   *\n   * @returns The value of the removed item.\n   */\n\n\n  remove() {\n    const data = this.data;\n    const peek = data[0];\n    const last = data.pop();\n    delete this.index[data.length];\n\n    if (data.length > 0) {\n      data[0] = last;\n\n      if (last.id) {\n        this.index[last.id] = 0;\n      }\n\n      this.bubbleDown(0);\n    }\n\n    return peek ? peek.value : null;\n  }\n\n  heapify() {\n    for (let i = 0; i < this.data.length; i += 1) {\n      this.bubbleUp(i);\n    }\n  }\n\n  bubbleUp(index) {\n    const data = this.data;\n    let tmp;\n    let parent;\n    let current = index;\n\n    while (current > 0) {\n      parent = current - 1 >>> 1;\n\n      if (this.comparator(data[current].priority, data[parent].priority) < 0) {\n        tmp = data[parent];\n        data[parent] = data[current];\n        let id = data[current].id;\n\n        if (id != null) {\n          this.index[id] = parent;\n        }\n\n        data[current] = tmp;\n        id = data[current].id;\n\n        if (id != null) {\n          this.index[id] = current;\n        }\n\n        current = parent;\n      } else {\n        break;\n      }\n    }\n  }\n\n  bubbleDown(index) {\n    const data = this.data;\n    const last = data.length - 1;\n    let current = index; // eslint-disable-next-line\n\n    while (true) {\n      const left = (current << 1) + 1;\n      const right = left + 1;\n      let minIndex = current;\n\n      if (left <= last && this.comparator(data[left].priority, data[minIndex].priority) < 0) {\n        minIndex = left;\n      }\n\n      if (right <= last && this.comparator(data[right].priority, data[minIndex].priority) < 0) {\n        minIndex = right;\n      }\n\n      if (minIndex !== current) {\n        const tmp = data[minIndex];\n        data[minIndex] = data[current];\n        let id = data[current].id;\n\n        if (id != null) {\n          this.index[id] = minIndex;\n        }\n\n        data[current] = tmp;\n        id = data[current].id;\n\n        if (id != null) {\n          this.index[id] = current;\n        }\n\n        current = minIndex;\n      } else {\n        break;\n      }\n    }\n  }\n\n}\n\n(function (PriorityQueue) {\n  PriorityQueue.defaultComparator = (a, b) => a - b;\n})(PriorityQueue || (PriorityQueue = {}));","map":{"version":3,"mappings":"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","names":["PriorityQueue","constructor","options","comparator","defaultComparator","index","data","heapify","isEmpty","length","insert","priority","value","id","item","push","bubbleUp","peek","peekPriority","updatePriority","Error","oldPriority","comp","bubbleDown","remove","last","pop","i","tmp","parent","current","left","right","minIndex","a","b"],"sourceRoot":"","sources":["../../../src/common/algorithm/priorityqueue.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}