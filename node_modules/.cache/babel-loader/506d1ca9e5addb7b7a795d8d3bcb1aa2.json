{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tagProperty = exports.tagParameter = exports.decorate = void 0;\n\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\n\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\n\nfunction tagParameter(annotationTarget, propertyName, parameterIndex, metadata) {\n  var metadataKey = METADATA_KEY.TAGGED;\n\n  _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex);\n}\n\nexports.tagParameter = tagParameter;\n\nfunction tagProperty(annotationTarget, propertyName, metadata) {\n  var metadataKey = METADATA_KEY.TAGGED_PROP;\n\n  _tagParameterOrProperty(metadataKey, annotationTarget.constructor, propertyName, metadata);\n}\n\nexports.tagProperty = tagProperty;\n\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex) {\n  var paramsOrPropertiesMetadata = {};\n  var isParameterDecorator = typeof parameterIndex === \"number\";\n  var key = parameterIndex !== undefined && isParameterDecorator ? parameterIndex.toString() : propertyName;\n\n  if (isParameterDecorator && propertyName !== undefined) {\n    throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\n  }\n\n  if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\n    paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\n  }\n\n  var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\n\n  if (!Array.isArray(paramOrPropertyMetadata)) {\n    paramOrPropertyMetadata = [];\n  } else {\n    for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\n      var m = paramOrPropertyMetadata_1[_i];\n\n      if (m.key === metadata.key) {\n        throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\n      }\n    }\n  }\n\n  paramOrPropertyMetadata.push(metadata);\n  paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\n  Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\n}\n\nfunction _decorate(decorators, target) {\n  Reflect.decorate(decorators, target);\n}\n\nfunction _param(paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n}\n\nfunction decorate(decorator, target, parameterIndex) {\n  if (typeof parameterIndex === \"number\") {\n    _decorate([_param(parameterIndex, decorator)], target);\n  } else if (typeof parameterIndex === \"string\") {\n    Reflect.decorate([decorator], target, parameterIndex);\n  } else {\n    _decorate([decorator], target);\n  }\n}\n\nexports.decorate = decorate;","map":{"version":3,"mappings":"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","names":["tagParameter","annotationTarget","propertyName","parameterIndex","metadata","metadataKey","METADATA_KEY","TAGGED","_tagParameterOrProperty","exports","tagProperty","TAGGED_PROP","constructor","paramsOrPropertiesMetadata","isParameterDecorator","key","undefined","toString","Error","ERROR_MSGS","INVALID_DECORATOR_OPERATION","Reflect","hasOwnMetadata","getMetadata","paramOrPropertyMetadata","Array","isArray","_i","m","DUPLICATED_METADATA","push","defineMetadata","_decorate","decorators","target","decorate","_param","paramIndex","decorator"],"sourceRoot":"","sources":["../../src/annotation/decorator_utils.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}