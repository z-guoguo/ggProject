{"ast":null,"code":"/**\n * @fileoverview shadow\n * @author dengfuping_develop@163.com\n */\nimport { each, uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar ATTR_MAP = {\n  shadowColor: 'color',\n  shadowOpacity: 'opacity',\n  shadowBlur: 'blur',\n  shadowOffsetX: 'dx',\n  shadowOffsetY: 'dy'\n};\nvar SHADOW_DIMENSION = {\n  x: '-40%',\n  y: '-40%',\n  width: '200%',\n  height: '200%'\n};\n\nvar Shadow =\n/** @class */\nfunction () {\n  function Shadow(cfg) {\n    this.type = 'filter';\n    this.cfg = {};\n    this.type = 'filter';\n    var el = createSVGElement('filter'); // expand the filter region to fill in shadows\n\n    each(SHADOW_DIMENSION, function (v, k) {\n      el.setAttribute(k, v);\n    });\n    this.el = el;\n    this.id = uniqueId('filter_');\n    this.el.id = this.id;\n    this.cfg = cfg;\n\n    this._parseShadow(cfg, el);\n\n    return this;\n  }\n\n  Shadow.prototype.match = function (type, cfg) {\n    if (this.type !== type) {\n      return false;\n    }\n\n    var flag = true;\n    var config = this.cfg;\n    each(Object.keys(config), function (attr) {\n      if (config[attr] !== cfg[attr]) {\n        flag = false;\n        return false;\n      }\n    });\n    return flag;\n  };\n\n  Shadow.prototype.update = function (name, value) {\n    var config = this.cfg;\n    config[ATTR_MAP[name]] = value;\n\n    this._parseShadow(config, this.el);\n\n    return this;\n  };\n\n  Shadow.prototype._parseShadow = function (config, el) {\n    var child = \"<feDropShadow\\n      dx=\\\"\" + (config.dx || 0) + \"\\\"\\n      dy=\\\"\" + (config.dy || 0) + \"\\\"\\n      stdDeviation=\\\"\" + (config.blur ? config.blur / 10 : 0) + \"\\\"\\n      flood-color=\\\"\" + (config.color ? config.color : '#000') + \"\\\"\\n      flood-opacity=\\\"\" + (config.opacity ? config.opacity : 1) + \"\\\"\\n      />\";\n    el.innerHTML = child;\n  };\n\n  return Shadow;\n}();\n\nexport default Shadow;","map":{"version":3,"mappings":"AAAA;;;;AAKA,SAASA,IAAT,EAAeC,QAAf,QAA+B,YAA/B;AACA,SAASC,gBAAT,QAAiC,aAAjC;AAEA,IAAMC,QAAQ,GAAG;EACfC,WAAW,EAAE,OADE;EAEfC,aAAa,EAAE,SAFA;EAGfC,UAAU,EAAE,MAHG;EAIfC,aAAa,EAAE,IAJA;EAKfC,aAAa,EAAE;AALA,CAAjB;AAQA,IAAMC,gBAAgB,GAAG;EACvBC,CAAC,EAAE,MADoB;EAEvBC,CAAC,EAAE,MAFoB;EAGvBC,KAAK,EAAE,MAHgB;EAIvBC,MAAM,EAAE;AAJe,CAAzB;;AAOA;AAAA;AAAA;EAQE,gBAAYC,GAAZ,EAAe;IAPf,YAAe,QAAf;IAGA,WAEI,EAFJ;IAKE,KAAKC,IAAL,GAAY,QAAZ;IACA,IAAMC,EAAE,GAAGd,gBAAgB,CAAC,QAAD,CAA3B,CAFa,CAGb;;IACAF,IAAI,CAACS,gBAAD,EAAmB,UAACQ,CAAD,EAAIC,CAAJ,EAAK;MAC1BF,EAAE,CAACG,YAAH,CAAgBD,CAAhB,EAAmBD,CAAnB;IACD,CAFG,CAAJ;IAGA,KAAKD,EAAL,GAAUA,EAAV;IACA,KAAKI,EAAL,GAAUnB,QAAQ,CAAC,SAAD,CAAlB;IACA,KAAKe,EAAL,CAAQI,EAAR,GAAa,KAAKA,EAAlB;IACA,KAAKN,GAAL,GAAWA,GAAX;;IACA,KAAKO,YAAL,CAAkBP,GAAlB,EAAuBE,EAAvB;;IACA,OAAO,IAAP;EACD;;EAEDM,mCAAMP,IAAN,EAAYD,GAAZ,EAAe;IACb,IAAI,KAAKC,IAAL,KAAcA,IAAlB,EAAwB;MACtB,OAAO,KAAP;IACD;;IACD,IAAIQ,IAAI,GAAG,IAAX;IACA,IAAMC,MAAM,GAAG,KAAKV,GAApB;IACAd,IAAI,CAACyB,MAAM,CAACC,IAAP,CAAYF,MAAZ,CAAD,EAAsB,UAACG,IAAD,EAAK;MAC7B,IAAIH,MAAM,CAACG,IAAD,CAAN,KAAiBb,GAAG,CAACa,IAAD,CAAxB,EAAgC;QAC9BJ,IAAI,GAAG,KAAP;QACA,OAAO,KAAP;MACD;IACF,CALG,CAAJ;IAMA,OAAOA,IAAP;EACD,CAbD;;EAeAD,oCAAOM,IAAP,EAAaC,KAAb,EAAkB;IAChB,IAAML,MAAM,GAAG,KAAKV,GAApB;IACAU,MAAM,CAACrB,QAAQ,CAACyB,IAAD,CAAT,CAAN,GAAyBC,KAAzB;;IACA,KAAKR,YAAL,CAAkBG,MAAlB,EAA0B,KAAKR,EAA/B;;IACA,OAAO,IAAP;EACD,CALD;;EAOAM,0CAAaE,MAAb,EAAqBR,EAArB,EAAuB;IACrB,IAAMc,KAAK,GAAG,gCACNN,MAAM,CAACO,EAAP,IAAa,CADP,IACQ,iBADR,IAENP,MAAM,CAACQ,EAAP,IAAa,CAFP,IAEQ,2BAFR,IAGIR,MAAM,CAACS,IAAP,GAAcT,MAAM,CAACS,IAAP,GAAc,EAA5B,GAAiC,CAHrC,IAGsC,0BAHtC,IAIGT,MAAM,CAACU,KAAP,GAAeV,MAAM,CAACU,KAAtB,GAA8B,MAJjC,IAIuC,4BAJvC,IAKKV,MAAM,CAACW,OAAP,GAAiBX,MAAM,CAACW,OAAxB,GAAkC,CALvC,IAKwC,cALtD;IAOAnB,EAAE,CAACoB,SAAH,GAAeN,KAAf;EACD,CATD;;EAUF;AAAC,CAvDD;;AAyDA,eAAeR,MAAf","names":["each","uniqueId","createSVGElement","ATTR_MAP","shadowColor","shadowOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","SHADOW_DIMENSION","x","y","width","height","cfg","type","el","v","k","setAttribute","id","_parseShadow","Shadow","flag","config","Object","keys","attr","name","value","child","dx","dy","blur","color","opacity","innerHTML"],"sourceRoot":"","sources":["../../src/defs/shadow.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}