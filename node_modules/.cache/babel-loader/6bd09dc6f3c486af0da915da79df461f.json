{"ast":null,"code":"import { getLogPositiveMin, log } from '../util/math';\n/**\n * 计算 log 的 ticks，考虑 min = 0 的场景\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\n\nexport default function calculateLogTicks(cfg) {\n  var base = cfg.base,\n      tickCount = cfg.tickCount,\n      min = cfg.min,\n      max = cfg.max,\n      values = cfg.values;\n  var minTick;\n  var maxTick = log(base, max);\n\n  if (min > 0) {\n    minTick = Math.floor(log(base, min));\n  } else {\n    var positiveMin = getLogPositiveMin(values, base, max);\n    minTick = Math.floor(log(base, positiveMin));\n  }\n\n  var count = maxTick - minTick;\n  var avg = Math.ceil(count / tickCount);\n  var ticks = [];\n\n  for (var i = minTick; i < maxTick + avg; i = i + avg) {\n    ticks.push(Math.pow(base, i));\n  }\n\n  if (min <= 0) {\n    // 最小值 <= 0 时显示 0\n    ticks.unshift(0);\n  }\n\n  return ticks;\n}","map":{"version":3,"mappings":"AAEA,SAASA,iBAAT,EAA4BC,GAA5B,QAAuC,cAAvC;AAEA;;;;;;AAKA,eAAc,SAAUC,iBAAV,CAA4BC,GAA5B,EAA4C;EAChD,QAAI,GAAkCA,GAAG,KAAzC;EAAA,IAAMC,SAAS,GAAuBD,GAAG,UAAzC;EAAA,IAAiBE,GAAG,GAAkBF,GAAG,IAAzC;EAAA,IAAsBG,GAAG,GAAaH,GAAG,IAAzC;EAAA,IAA2BI,MAAM,GAAKJ,GAAG,OAAzC;EACR,IAAIK,OAAJ;EACA,IAAMC,OAAO,GAAGR,GAAG,CAACS,IAAD,EAAOJ,GAAP,CAAnB;;EACA,IAAID,GAAG,GAAG,CAAV,EAAa;IACXG,OAAO,GAAGG,IAAI,CAACC,KAAL,CAAWX,GAAG,CAACS,IAAD,EAAOL,GAAP,CAAd,CAAV;EACD,CAFD,MAEO;IACL,IAAMQ,WAAW,GAAGb,iBAAiB,CAACO,MAAD,EAASG,IAAT,EAAeJ,GAAf,CAArC;IACAE,OAAO,GAAGG,IAAI,CAACC,KAAL,CAAWX,GAAG,CAACS,IAAD,EAAOG,WAAP,CAAd,CAAV;EACD;;EACD,IAAMC,KAAK,GAAGL,OAAO,GAAGD,OAAxB;EACA,IAAMO,GAAG,GAAGJ,IAAI,CAACK,IAAL,CAAUF,KAAK,GAAGV,SAAlB,CAAZ;EACA,IAAMa,KAAK,GAAG,EAAd;;EACA,KAAK,IAAIC,CAAC,GAAGV,OAAb,EAAsBU,CAAC,GAAGT,OAAO,GAAGM,GAApC,EAAyCG,CAAC,GAAGA,CAAC,GAAGH,GAAjD,EAAsD;IACpDE,KAAK,CAACE,IAAN,CAAWR,IAAI,CAACS,GAAL,CAASV,IAAT,EAAeQ,CAAf,CAAX;EACD;;EACD,IAAIb,GAAG,IAAI,CAAX,EAAc;IACZ;IACAY,KAAK,CAACI,OAAN,CAAc,CAAd;EACD;;EACD,OAAOJ,KAAP;AACD","names":["getLogPositiveMin","log","calculateLogTicks","cfg","tickCount","min","max","values","minTick","maxTick","base","Math","floor","positiveMin","count","avg","ceil","ticks","i","push","pow","unshift"],"sourceRoot":"","sources":["../../src/tick-method/log.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}