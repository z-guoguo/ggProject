{"ast":null,"code":"import { offset } from './util';\n\nfunction alignLine(line, type, offset = 0) {\n  const {\n    start,\n    end\n  } = line;\n  let a;\n  let b;\n  let direction;\n  let coordinate;\n\n  switch (type) {\n    case 'left':\n      coordinate = 'x';\n      a = end;\n      b = start;\n      direction = -1;\n      break;\n\n    case 'right':\n      coordinate = 'x';\n      a = start;\n      b = end;\n      direction = 1;\n      break;\n\n    case 'top':\n      coordinate = 'y';\n      a = end;\n      b = start;\n      direction = -1;\n      break;\n\n    case 'bottom':\n      coordinate = 'y';\n      a = start;\n      b = end;\n      direction = 1;\n      break;\n\n    default:\n      return;\n  }\n\n  if (start[coordinate] < end[coordinate]) {\n    a[coordinate] = b[coordinate];\n  } else {\n    b[coordinate] = a[coordinate];\n  }\n\n  if (Number.isFinite(offset)) {\n    a[coordinate] += direction * offset;\n    b[coordinate] += direction * offset;\n  }\n}\n/**\n * Places the connection point at the edge's endpoint.\n */\n\n\nexport const anchor = function (line, view, magnet, options) {\n  const {\n    alignOffset,\n    align\n  } = options;\n\n  if (align) {\n    alignLine(line, align, alignOffset);\n  }\n\n  return offset(line.end, line.start, options.offset);\n};","map":{"version":3,"mappings":"AAEA,SAASA,MAAT,QAAuB,QAAvB;;AASA,SAASC,SAAT,CAAmBC,IAAnB,EAA+BC,IAA/B,EAA4CH,MAAM,GAAG,CAArD,EAAsD;EACpD,MAAM;IAAEI,KAAF;IAASC;EAAT,IAAiBH,IAAvB;EACA,IAAII,CAAJ;EACA,IAAIC,CAAJ;EACA,IAAIC,SAAJ;EACA,IAAIC,UAAJ;;EAEA,QAAQN,IAAR;IACE,KAAK,MAAL;MACEM,UAAU,GAAG,GAAb;MACAH,CAAC,GAAGD,GAAJ;MACAE,CAAC,GAAGH,KAAJ;MACAI,SAAS,GAAG,CAAC,CAAb;MACA;;IACF,KAAK,OAAL;MACEC,UAAU,GAAG,GAAb;MACAH,CAAC,GAAGF,KAAJ;MACAG,CAAC,GAAGF,GAAJ;MACAG,SAAS,GAAG,CAAZ;MACA;;IACF,KAAK,KAAL;MACEC,UAAU,GAAG,GAAb;MACAH,CAAC,GAAGD,GAAJ;MACAE,CAAC,GAAGH,KAAJ;MACAI,SAAS,GAAG,CAAC,CAAb;MACA;;IACF,KAAK,QAAL;MACEC,UAAU,GAAG,GAAb;MACAH,CAAC,GAAGF,KAAJ;MACAG,CAAC,GAAGF,GAAJ;MACAG,SAAS,GAAG,CAAZ;MACA;;IACF;MACE;EA1BJ;;EA6BA,IAAIJ,KAAK,CAACK,UAAD,CAAL,GAAoBJ,GAAG,CAACI,UAAD,CAA3B,EAAyC;IACvCH,CAAC,CAACG,UAAD,CAAD,GAAgBF,CAAC,CAACE,UAAD,CAAjB;EACD,CAFD,MAEO;IACLF,CAAC,CAACE,UAAD,CAAD,GAAgBH,CAAC,CAACG,UAAD,CAAjB;EACD;;EAED,IAAIC,MAAM,CAACC,QAAP,CAAgBX,MAAhB,CAAJ,EAA6B;IAC3BM,CAAC,CAACG,UAAD,CAAD,IAAiBD,SAAS,GAAGR,MAA7B;IACAO,CAAC,CAACE,UAAD,CAAD,IAAiBD,SAAS,GAAGR,MAA7B;EACD;AACF;AAED;;;;;AAGA,OAAO,MAAMY,MAAM,GAA8C,UAC/DV,IAD+D,EAE/DW,IAF+D,EAG/DC,MAH+D,EAI/DC,OAJ+D,EAIxD;EAEP,MAAM;IAAEC,WAAF;IAAeC;EAAf,IAAyBF,OAA/B;;EACA,IAAIE,KAAJ,EAAW;IACThB,SAAS,CAACC,IAAD,EAAOe,KAAP,EAAcD,WAAd,CAAT;EACD;;EACD,OAAOhB,MAAM,CAACE,IAAI,CAACG,GAAN,EAAWH,IAAI,CAACE,KAAhB,EAAuBW,OAAO,CAACf,MAA/B,CAAb;AACD,CAXM","names":["offset","alignLine","line","type","start","end","a","b","direction","coordinate","Number","isFinite","anchor","view","magnet","options","alignOffset","align"],"sourceRoot":"","sources":["../../../src/registry/connection-point/anchor.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}