{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.includes.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/**\n * 基于 G 的时间轴组件\n */\n\n\nimport { Canvas as GCanvas } from '@antv/g-canvas';\nimport { Canvas as GSVGCanvas } from '@antv/g-svg';\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport Base from '../base';\nimport TrendTimeBar from './trendTimeBar';\nimport TimeBarSlice from './timeBarSlice';\nimport { VALUE_CHANGE } from './constant';\nimport { isString, throttle } from '@antv/util'; // simple 版本默认高度\n\nvar DEFAULT_SIMPLE_HEIGHT = 4; // trend 版本默认高度\n\nvar DEFAULT_TREND_HEIGHT = 26;\n\nvar TimeBar =\n/** @class */\nfunction (_super) {\n  __extends(TimeBar, _super);\n\n  function TimeBar(config) {\n    return _super.call(this, config) || this;\n  }\n\n  TimeBar.prototype.getDefaultCfgs = function () {\n    return {\n      container: null,\n      className: 'g6-component-timebar',\n      padding: 10,\n      type: 'trend',\n      trend: {\n        data: [],\n        isArea: false,\n        smooth: true\n      },\n      controllerCfg: {\n        speed: 1,\n        loop: false\n      },\n      slider: {\n        start: 0.1,\n        end: 0.9,\n        minText: 'min',\n        maxText: 'max'\n      },\n      tick: {\n        start: 0.1,\n        end: 0.9,\n        data: []\n      },\n      textStyle: {},\n      filterEdge: false,\n      filterItemTypes: ['node'],\n      containerCSS: {}\n    };\n  };\n  /**\n   * 初始化 TimeBar 的容器\n   */\n\n\n  TimeBar.prototype.initContainer = function () {\n    var graph = this.get('graph');\n    var _a = this._cfgs,\n        width = _a.width,\n        height = _a.height;\n    var className = this.get('className') || 'g6-component-timebar';\n    var container = this.get('container');\n    var graphContainer = this.get('graph').get('container');\n    var timeBarContainer;\n\n    if (!container) {\n      timeBarContainer = createDom(\"<div class='\".concat(className, \"'></div>\"));\n      modifyCSS(timeBarContainer, {\n        position: 'relative'\n      });\n    } else {\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      timeBarContainer = container;\n    }\n\n    graphContainer.appendChild(timeBarContainer);\n    this.set('timeBarContainer', timeBarContainer);\n    var canvas;\n    var renderer = graph.get('renderer');\n\n    if (renderer === 'SVG') {\n      canvas = new GSVGCanvas({\n        container: timeBarContainer,\n        width: width,\n        height: height\n      });\n    } else {\n      canvas = new GCanvas({\n        container: timeBarContainer,\n        width: width,\n        height: height\n      });\n    } // 根据传入的参数修改容器 CSS 样式\n\n\n    if (this.get('containerCSS')) modifyCSS(timeBarContainer, this.get('containerCSS'));\n    this.set('canvas', canvas);\n  };\n\n  TimeBar.prototype.init = function () {\n    this.initContainer();\n    var canvas = this.get('canvas');\n    var timeBarGroup = canvas.addGroup({\n      name: 'timebar-group'\n    });\n    this.set('timeBarGroup', timeBarGroup);\n    this.renderTrend();\n    this.initEvent();\n    var fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.set('fontFamily', fontFamily);\n  };\n\n  TimeBar.prototype.renderTrend = function () {\n    var _this = this;\n\n    var _a = this._cfgs,\n        width = _a.width,\n        x = _a.x,\n        y = _a.y,\n        padding = _a.padding,\n        type = _a.type,\n        trend = _a.trend,\n        slider = _a.slider,\n        controllerCfg = _a.controllerCfg,\n        textStyle = _a.textStyle,\n        tick = _a.tick,\n        backgroundStyle = _a.backgroundStyle,\n        foregroundStyle = _a.foregroundStyle;\n\n    var data = trend.data,\n        other = __rest(trend, [\"data\"]);\n\n    var realWidth = width - 2 * padding;\n    var defaultHeight = type === 'trend' ? DEFAULT_TREND_HEIGHT : DEFAULT_SIMPLE_HEIGHT;\n    var graph = this.get('graph');\n    var group = this.get('timeBarGroup');\n    var canvas = this.get('canvas');\n    var timebar = null;\n\n    if (type === 'trend' || type === 'simple') {\n      var getValue_1 = this.get('getValue');\n      timebar = new TrendTimeBar(__assign(__assign({\n        graph: graph,\n        canvas: canvas,\n        group: group,\n        type: type,\n        x: x + padding,\n        y: type === 'trend' ? y + padding : y + padding + 15,\n        width: realWidth,\n        height: defaultHeight,\n        padding: padding,\n        backgroundStyle: backgroundStyle,\n        foregroundStyle: foregroundStyle,\n        trendCfg: __assign(__assign({}, other), {\n          data: data.map(function (d) {\n            return (getValue_1 === null || getValue_1 === void 0 ? void 0 : getValue_1(d)) || d.value;\n          })\n        })\n      }, slider), {\n        tick: {\n          ticks: data,\n          tickLabelFormatter: tick.tickLabelFormatter,\n          tickLabelStyle: tick.tickLabelStyle,\n          tickLineStyle: tick.tickLineStyle\n        },\n        handlerStyle: __assign(__assign({}, slider.handlerStyle), {\n          height: slider.height || defaultHeight\n        }),\n        controllerCfg: controllerCfg,\n        textStyle: textStyle\n      }));\n    } else if (type === 'tick') {\n      // 刻度时间轴\n      timebar = new TimeBarSlice(__assign({\n        graph: graph,\n        canvas: canvas,\n        group: group,\n        x: x + padding,\n        y: y + padding,\n        width: width,\n        height: 42,\n        padding: 2\n      }, tick));\n    } // 鼠标按下左/右滑块或范围条后在任意地方释放，都触发暂停播放\n\n\n    var handleMouseUp = function handleMouseUp() {\n      var timebarInstance = _this.get('timebar');\n\n      timebarInstance.draggingHandler = false;\n\n      if (timebarInstance.isPlay) {\n        timebarInstance.isPlay = false;\n        timebarInstance.currentHandler = timebarInstance.maxHandlerShape;\n        timebarInstance.changePlayStatus();\n      }\n\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n\n    canvas.on('mousedown', function (e) {\n      if (e.target.get('name') === 'maxHandlerShape-handler' || e.target.get('name') === 'minHandlerShape-handler' || e.target === timebar.foregroundShape) {\n        document.addEventListener('mouseup', handleMouseUp);\n      }\n    });\n    this.set('timebar', timebar);\n  };\n\n  TimeBar.prototype.filterData = function (evt) {\n    var _a;\n\n    var value = evt.value;\n    var trendData = null;\n    var type = this._cfgs.type;\n\n    if (type === 'trend' || type === 'simple') {\n      trendData = this._cfgs.trend.data;\n    } else if (type === 'tick') {\n      trendData = this._cfgs.tick.data;\n    }\n\n    if (!trendData || trendData.length === 0) {\n      console.warn('请配置 TimeBar 组件的数据');\n      return;\n    }\n\n    var rangeChange = this.get('rangeChange');\n    var graph = this.get('graph');\n    var min = Math.round(trendData.length * value[0]);\n    var max = Math.round(trendData.length * value[1]);\n    max = max >= trendData.length ? trendData.length - 1 : max;\n    min = min >= trendData.length ? trendData.length - 1 : min;\n    var tickLabelFormatter = (_a = this._cfgs.tick) === null || _a === void 0 ? void 0 : _a.tickLabelFormatter;\n    var minText = tickLabelFormatter ? tickLabelFormatter(trendData[min]) : trendData[min].date;\n    var maxText = tickLabelFormatter ? tickLabelFormatter(trendData[max]) : trendData[max].date;\n\n    if (type !== 'tick') {\n      var timebar = this.get('timebar');\n      timebar.setText(minText, maxText);\n    }\n\n    if (rangeChange) {\n      rangeChange(graph, minText, maxText);\n    } else {\n      // 自动过滤数据，并渲染 graph\n      if (!this.cacheGraphData || this.cacheGraphData.nodes && this.cacheGraphData.nodes.length === 0) {\n        this.cacheGraphData = graph.get('data'); // graph.save() as GraphData;\n      }\n\n      var filterItemTypes = this.get('filterItemTypes');\n      var changeData = this.get('changeData'); // 过滤不在 min 和 max 范围内的节点\n\n      var getDate_1 = this.get('getDate');\n      var shouldIgnore_1 = this.get('shouldIgnore');\n      var minDate_1 = trendData[min].date,\n          maxDate_1 = trendData[max].date;\n\n      if (changeData || changeData === undefined) {\n        var filterNodes = this.cacheGraphData.nodes;\n        var filterEdges = this.cacheGraphData.edges;\n\n        if (filterItemTypes.includes('node')) {\n          filterNodes = filterNodes.filter(function (node) {\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(node)) || node.date);\n            return date >= minDate_1 && date <= maxDate_1 || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('node', node, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n          });\n          var nodeIds_1 = filterNodes.map(function (node) {\n            return node.id;\n          });\n\n          if (filterEdges) {\n            // 过滤 source 或 target 不在 min 和 max 范围内的边\n            filterEdges = filterEdges.filter(function (edge) {\n              return nodeIds_1.includes(edge.source) && nodeIds_1.includes(edge.target) || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', edge, {\n                min: minDate_1,\n                max: maxDate_1\n              }));\n            });\n          }\n        }\n\n        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {\n          filterEdges = filterEdges.filter(function (edge) {\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(edge)) || edge.date);\n            return date >= minDate_1 && date <= maxDate_1 || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', edge, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n          });\n        }\n\n        graph.changeData({\n          nodes: filterNodes,\n          edges: filterEdges\n        });\n      } else {\n        if (filterItemTypes.includes('node')) {\n          graph.getNodes().forEach(function (node) {\n            var model = node.getModel();\n            if (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('node', model, {\n              min: minDate_1,\n              max: maxDate_1\n            })) return;\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(model)) || model.date);\n\n            if (date < minDate_1 || date > maxDate_1) {\n              graph.hideItem(node);\n            } else {\n              graph.showItem(node);\n            }\n          });\n        }\n\n        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {\n          graph.getEdges().forEach(function (edge) {\n            var model = edge.getModel();\n            if (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', model, {\n              min: trendData[min].date,\n              max: trendData[max].date\n            })) return;\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(model)) || model.date);\n\n            if (date < trendData[min].date || date > trendData[max].date) {\n              graph.hideItem(edge);\n            } else {\n              graph.showItem(edge);\n            }\n          });\n        }\n      }\n    }\n  };\n\n  TimeBar.prototype.initEvent = function () {\n    var _this = this;\n\n    var start = 0;\n    var end = 0;\n    var type = this._cfgs.type;\n\n    if (!type || type === 'trend' || type === 'simple') {\n      start = this._cfgs.slider.start;\n      end = this._cfgs.slider.end;\n    } else if (type === 'tick') {\n      start = this._cfgs.tick.start;\n      end = this._cfgs.tick.end;\n    }\n\n    var graph = this.get('graph');\n    graph.on('afterrender', function (e) {\n      _this.filterData({\n        value: [start, end]\n      });\n    }); // 时间轴的值发生改变的事件\n\n    graph.on(VALUE_CHANGE, throttle(function (e) {\n      _this.filterData(e);\n    }, 200, {\n      trailing: true,\n      leading: true\n    }));\n  };\n\n  TimeBar.prototype.destroy = function () {\n    var timebar = this.get('timebar');\n\n    if (timebar && timebar.destory) {\n      timebar.destory();\n    }\n\n    _super.prototype.destroy.call(this);\n\n    var timeBarContainer = this.get('timeBarContainer');\n\n    if (timeBarContainer) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      container.removeChild(timeBarContainer);\n    }\n  };\n\n  return TimeBar;\n}(Base);\n\nexport default TimeBar;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Canvas","GCanvas","GSVGCanvas","createDom","modifyCSS","Base","TrendTimeBar","TimeBarSlice","VALUE_CHANGE","isString","throttle","DEFAULT_SIMPLE_HEIGHT","DEFAULT_TREND_HEIGHT","TimeBar","_super","config","getDefaultCfgs","container","className","padding","type","trend","data","isArea","smooth","controllerCfg","speed","loop","slider","start","end","minText","maxText","tick","textStyle","filterEdge","filterItemTypes","containerCSS","initContainer","graph","get","_a","_cfgs","width","height","graphContainer","timeBarContainer","concat","position","document","getElementById","appendChild","set","canvas","renderer","init","timeBarGroup","addGroup","name","renderTrend","initEvent","fontFamily","window","getComputedStyle","body","getPropertyValue","_this","x","y","backgroundStyle","foregroundStyle","other","realWidth","defaultHeight","group","timebar","getValue_1","trendCfg","map","value","ticks","tickLabelFormatter","tickLabelStyle","tickLineStyle","handlerStyle","handleMouseUp","timebarInstance","draggingHandler","isPlay","currentHandler","maxHandlerShape","changePlayStatus","removeEventListener","on","target","foregroundShape","addEventListener","filterData","evt","trendData","console","warn","rangeChange","min","Math","round","max","date","setText","cacheGraphData","nodes","changeData","getDate_1","shouldIgnore_1","minDate_1","maxDate_1","undefined","filterNodes","filterEdges","edges","includes","filter","node","nodeIds_1","id","edge","source","getNodes","forEach","model","getModel","hideItem","showItem","getEdges","trailing","leading","destroy","destory","removeChild"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/timeBar/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/**\n * 基于 G 的时间轴组件\n */\n\n\nimport { Canvas as GCanvas } from '@antv/g-canvas';\nimport { Canvas as GSVGCanvas } from '@antv/g-svg';\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport Base from '../base';\nimport TrendTimeBar from './trendTimeBar';\nimport TimeBarSlice from './timeBarSlice';\nimport { VALUE_CHANGE } from './constant';\nimport { isString, throttle } from '@antv/util'; // simple 版本默认高度\n\nvar DEFAULT_SIMPLE_HEIGHT = 4; // trend 版本默认高度\n\nvar DEFAULT_TREND_HEIGHT = 26;\n\nvar TimeBar =\n/** @class */\nfunction (_super) {\n  __extends(TimeBar, _super);\n\n  function TimeBar(config) {\n    return _super.call(this, config) || this;\n  }\n\n  TimeBar.prototype.getDefaultCfgs = function () {\n    return {\n      container: null,\n      className: 'g6-component-timebar',\n      padding: 10,\n      type: 'trend',\n      trend: {\n        data: [],\n        isArea: false,\n        smooth: true\n      },\n      controllerCfg: {\n        speed: 1,\n        loop: false\n      },\n      slider: {\n        start: 0.1,\n        end: 0.9,\n        minText: 'min',\n        maxText: 'max'\n      },\n      tick: {\n        start: 0.1,\n        end: 0.9,\n        data: []\n      },\n      textStyle: {},\n      filterEdge: false,\n      filterItemTypes: ['node'],\n      containerCSS: {}\n    };\n  };\n  /**\n   * 初始化 TimeBar 的容器\n   */\n\n\n  TimeBar.prototype.initContainer = function () {\n    var graph = this.get('graph');\n    var _a = this._cfgs,\n        width = _a.width,\n        height = _a.height;\n    var className = this.get('className') || 'g6-component-timebar';\n    var container = this.get('container');\n    var graphContainer = this.get('graph').get('container');\n    var timeBarContainer;\n\n    if (!container) {\n      timeBarContainer = createDom(\"<div class='\".concat(className, \"'></div>\"));\n      modifyCSS(timeBarContainer, {\n        position: 'relative'\n      });\n    } else {\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      timeBarContainer = container;\n    }\n\n    graphContainer.appendChild(timeBarContainer);\n    this.set('timeBarContainer', timeBarContainer);\n    var canvas;\n    var renderer = graph.get('renderer');\n\n    if (renderer === 'SVG') {\n      canvas = new GSVGCanvas({\n        container: timeBarContainer,\n        width: width,\n        height: height\n      });\n    } else {\n      canvas = new GCanvas({\n        container: timeBarContainer,\n        width: width,\n        height: height\n      });\n    } // 根据传入的参数修改容器 CSS 样式\n\n\n    if (this.get('containerCSS')) modifyCSS(timeBarContainer, this.get('containerCSS'));\n    this.set('canvas', canvas);\n  };\n\n  TimeBar.prototype.init = function () {\n    this.initContainer();\n    var canvas = this.get('canvas');\n    var timeBarGroup = canvas.addGroup({\n      name: 'timebar-group'\n    });\n    this.set('timeBarGroup', timeBarGroup);\n    this.renderTrend();\n    this.initEvent();\n    var fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.set('fontFamily', fontFamily);\n  };\n\n  TimeBar.prototype.renderTrend = function () {\n    var _this = this;\n\n    var _a = this._cfgs,\n        width = _a.width,\n        x = _a.x,\n        y = _a.y,\n        padding = _a.padding,\n        type = _a.type,\n        trend = _a.trend,\n        slider = _a.slider,\n        controllerCfg = _a.controllerCfg,\n        textStyle = _a.textStyle,\n        tick = _a.tick,\n        backgroundStyle = _a.backgroundStyle,\n        foregroundStyle = _a.foregroundStyle;\n\n    var data = trend.data,\n        other = __rest(trend, [\"data\"]);\n\n    var realWidth = width - 2 * padding;\n    var defaultHeight = type === 'trend' ? DEFAULT_TREND_HEIGHT : DEFAULT_SIMPLE_HEIGHT;\n    var graph = this.get('graph');\n    var group = this.get('timeBarGroup');\n    var canvas = this.get('canvas');\n    var timebar = null;\n\n    if (type === 'trend' || type === 'simple') {\n      var getValue_1 = this.get('getValue');\n      timebar = new TrendTimeBar(__assign(__assign({\n        graph: graph,\n        canvas: canvas,\n        group: group,\n        type: type,\n        x: x + padding,\n        y: type === 'trend' ? y + padding : y + padding + 15,\n        width: realWidth,\n        height: defaultHeight,\n        padding: padding,\n        backgroundStyle: backgroundStyle,\n        foregroundStyle: foregroundStyle,\n        trendCfg: __assign(__assign({}, other), {\n          data: data.map(function (d) {\n            return (getValue_1 === null || getValue_1 === void 0 ? void 0 : getValue_1(d)) || d.value;\n          })\n        })\n      }, slider), {\n        tick: {\n          ticks: data,\n          tickLabelFormatter: tick.tickLabelFormatter,\n          tickLabelStyle: tick.tickLabelStyle,\n          tickLineStyle: tick.tickLineStyle\n        },\n        handlerStyle: __assign(__assign({}, slider.handlerStyle), {\n          height: slider.height || defaultHeight\n        }),\n        controllerCfg: controllerCfg,\n        textStyle: textStyle\n      }));\n    } else if (type === 'tick') {\n      // 刻度时间轴\n      timebar = new TimeBarSlice(__assign({\n        graph: graph,\n        canvas: canvas,\n        group: group,\n        x: x + padding,\n        y: y + padding,\n        width: width,\n        height: 42,\n        padding: 2\n      }, tick));\n    } // 鼠标按下左/右滑块或范围条后在任意地方释放，都触发暂停播放\n\n\n    var handleMouseUp = function handleMouseUp() {\n      var timebarInstance = _this.get('timebar');\n\n      timebarInstance.draggingHandler = false;\n\n      if (timebarInstance.isPlay) {\n        timebarInstance.isPlay = false;\n        timebarInstance.currentHandler = timebarInstance.maxHandlerShape;\n        timebarInstance.changePlayStatus();\n      }\n\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n\n    canvas.on('mousedown', function (e) {\n      if (e.target.get('name') === 'maxHandlerShape-handler' || e.target.get('name') === 'minHandlerShape-handler' || e.target === timebar.foregroundShape) {\n        document.addEventListener('mouseup', handleMouseUp);\n      }\n    });\n    this.set('timebar', timebar);\n  };\n\n  TimeBar.prototype.filterData = function (evt) {\n    var _a;\n\n    var value = evt.value;\n    var trendData = null;\n    var type = this._cfgs.type;\n\n    if (type === 'trend' || type === 'simple') {\n      trendData = this._cfgs.trend.data;\n    } else if (type === 'tick') {\n      trendData = this._cfgs.tick.data;\n    }\n\n    if (!trendData || trendData.length === 0) {\n      console.warn('请配置 TimeBar 组件的数据');\n      return;\n    }\n\n    var rangeChange = this.get('rangeChange');\n    var graph = this.get('graph');\n    var min = Math.round(trendData.length * value[0]);\n    var max = Math.round(trendData.length * value[1]);\n    max = max >= trendData.length ? trendData.length - 1 : max;\n    min = min >= trendData.length ? trendData.length - 1 : min;\n    var tickLabelFormatter = (_a = this._cfgs.tick) === null || _a === void 0 ? void 0 : _a.tickLabelFormatter;\n    var minText = tickLabelFormatter ? tickLabelFormatter(trendData[min]) : trendData[min].date;\n    var maxText = tickLabelFormatter ? tickLabelFormatter(trendData[max]) : trendData[max].date;\n\n    if (type !== 'tick') {\n      var timebar = this.get('timebar');\n      timebar.setText(minText, maxText);\n    }\n\n    if (rangeChange) {\n      rangeChange(graph, minText, maxText);\n    } else {\n      // 自动过滤数据，并渲染 graph\n      if (!this.cacheGraphData || this.cacheGraphData.nodes && this.cacheGraphData.nodes.length === 0) {\n        this.cacheGraphData = graph.get('data'); // graph.save() as GraphData;\n      }\n\n      var filterItemTypes = this.get('filterItemTypes');\n      var changeData = this.get('changeData'); // 过滤不在 min 和 max 范围内的节点\n\n      var getDate_1 = this.get('getDate');\n      var shouldIgnore_1 = this.get('shouldIgnore');\n      var minDate_1 = trendData[min].date,\n          maxDate_1 = trendData[max].date;\n\n      if (changeData || changeData === undefined) {\n        var filterNodes = this.cacheGraphData.nodes;\n        var filterEdges = this.cacheGraphData.edges;\n\n        if (filterItemTypes.includes('node')) {\n          filterNodes = filterNodes.filter(function (node) {\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(node)) || node.date);\n            return date >= minDate_1 && date <= maxDate_1 || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('node', node, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n          });\n          var nodeIds_1 = filterNodes.map(function (node) {\n            return node.id;\n          });\n\n          if (filterEdges) {\n            // 过滤 source 或 target 不在 min 和 max 范围内的边\n            filterEdges = filterEdges.filter(function (edge) {\n              return nodeIds_1.includes(edge.source) && nodeIds_1.includes(edge.target) || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', edge, {\n                min: minDate_1,\n                max: maxDate_1\n              }));\n            });\n          }\n        }\n\n        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {\n          filterEdges = filterEdges.filter(function (edge) {\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(edge)) || edge.date);\n            return date >= minDate_1 && date <= maxDate_1 || (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', edge, {\n              min: minDate_1,\n              max: maxDate_1\n            }));\n          });\n        }\n\n        graph.changeData({\n          nodes: filterNodes,\n          edges: filterEdges\n        });\n      } else {\n        if (filterItemTypes.includes('node')) {\n          graph.getNodes().forEach(function (node) {\n            var model = node.getModel();\n            if (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('node', model, {\n              min: minDate_1,\n              max: maxDate_1\n            })) return;\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(model)) || model.date);\n\n            if (date < minDate_1 || date > maxDate_1) {\n              graph.hideItem(node);\n            } else {\n              graph.showItem(node);\n            }\n          });\n        }\n\n        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {\n          graph.getEdges().forEach(function (edge) {\n            var model = edge.getModel();\n            if (shouldIgnore_1 === null || shouldIgnore_1 === void 0 ? void 0 : shouldIgnore_1('edge', model, {\n              min: trendData[min].date,\n              max: trendData[max].date\n            })) return;\n            var date = +((getDate_1 === null || getDate_1 === void 0 ? void 0 : getDate_1(model)) || model.date);\n\n            if (date < trendData[min].date || date > trendData[max].date) {\n              graph.hideItem(edge);\n            } else {\n              graph.showItem(edge);\n            }\n          });\n        }\n      }\n    }\n  };\n\n  TimeBar.prototype.initEvent = function () {\n    var _this = this;\n\n    var start = 0;\n    var end = 0;\n    var type = this._cfgs.type;\n\n    if (!type || type === 'trend' || type === 'simple') {\n      start = this._cfgs.slider.start;\n      end = this._cfgs.slider.end;\n    } else if (type === 'tick') {\n      start = this._cfgs.tick.start;\n      end = this._cfgs.tick.end;\n    }\n\n    var graph = this.get('graph');\n    graph.on('afterrender', function (e) {\n      _this.filterData({\n        value: [start, end]\n      });\n    }); // 时间轴的值发生改变的事件\n\n    graph.on(VALUE_CHANGE, throttle(function (e) {\n      _this.filterData(e);\n    }, 200, {\n      trailing: true,\n      leading: true\n    }));\n  };\n\n  TimeBar.prototype.destroy = function () {\n    var timebar = this.get('timebar');\n\n    if (timebar && timebar.destory) {\n      timebar.destory();\n    }\n\n    _super.prototype.destroy.call(this);\n\n    var timeBarContainer = this.get('timeBarContainer');\n\n    if (timeBarContainer) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      container.removeChild(timeBarContainer);\n    }\n  };\n\n  return TimeBar;\n}(Base);\n\nexport default TimeBar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}