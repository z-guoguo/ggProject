{"ast":null,"code":"import { __assign } from \"tslib\";\nimport Global from '../../global';\nimport Shape from '../shape';\nimport { isNumber, clone, mix, isArray } from '@antv/util'; // 圆形 Combo\n\nShape.registerCombo('circle', {\n  // 自定义节点时的配置\n  options: {\n    size: [Global.defaultCombo.size[0], Global.defaultCombo.size[0]],\n    padding: Global.defaultCombo.padding[0],\n    animate: true,\n    style: {\n      stroke: Global.defaultCombo.style.stroke,\n      fill: Global.defaultCombo.style.fill,\n      lineWidth: Global.defaultCombo.style.lineWidth\n    },\n    labelCfg: {\n      style: {\n        fill: Global.comboLabel.style.fill,\n        fontSize: Global.comboLabel.style.fontSize\n      },\n      refX: 0,\n      refY: 0\n    },\n    stateStyles: __assign({}, Global.comboStateStyles),\n    collapsedSubstituteIcon: {\n      show: false,\n      img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ'\n    }\n  },\n  shapeType: 'circle',\n  // 文本位置\n  labelPosition: 'top',\n  drawShape: function drawShape(cfg, group) {\n    var style = this.getShapeStyle(cfg);\n    delete style.height;\n    delete style.width;\n    var keyShape = group.addShape('circle', {\n      attrs: style,\n      className: 'circle-combo',\n      name: 'circle-combo',\n      draggable: true\n    });\n    return keyShape;\n  },\n\n  /**\n   * 获取 Combo 的样式，供基于该 Combo 自定义时使用\n   * @param {Object} cfg Combo 数据模型\n   * @return {Object} Combo 的样式\n   */\n  getShapeStyle: function getShapeStyle(cfg) {\n    var defaultStyle = this.options.style;\n    var padding = cfg.padding || this.options.padding;\n    if (isArray(padding)) padding = padding[0];\n    var strokeStyle = {\n      stroke: cfg.color\n    }; // 如果设置了color，则覆盖默认的stroke属性\n\n    var style = mix({}, defaultStyle, strokeStyle, cfg.style);\n    var r;\n\n    if (cfg.fixSize) {\n      r = isNumber(cfg.fixSize) ? cfg.fixSize : cfg.fixSize[0];\n    } else {\n      var size = this.getSize(cfg);\n      if (!isNumber(style.r) || isNaN(style.r)) r = size[0] / 2 || Global.defaultCombo.style.r;else r = Math.max(style.r, size[0] / 2) || size[0] / 2;\n    }\n\n    style.r = r + padding;\n\n    var styles = __assign({\n      x: 0,\n      y: 0\n    }, style);\n\n    if (cfg.style) cfg.style.r = r;else {\n      cfg.style = {\n        r: r\n      };\n    }\n    return styles;\n  },\n  update: function update(cfg, item) {\n    var size = this.getSize(cfg);\n    var padding = cfg.padding || this.options.padding;\n    if (isArray(padding)) padding = padding[0];\n    var cfgStyle = clone(cfg.style);\n    var r;\n\n    if (cfg.fixSize) {\n      r = isNumber(cfg.fixSize) ? cfg.fixSize : cfg.fixSize[0];\n    } else {\n      r = Math.max(cfgStyle.r, size[0] / 2) || size[0] / 2;\n    }\n\n    cfgStyle.r = r + padding;\n    var itemCacheSize = item.get('sizeCache');\n\n    if (itemCacheSize) {\n      itemCacheSize.r = cfgStyle.r;\n    } // 下面这些属性需要覆盖默认样式与目前样式，但若在 cfg 中有指定则应该被 cfg 的相应配置覆盖。\n\n\n    var strokeStyle = {\n      stroke: cfg.color\n    }; // 与 getShapeStyle 不同在于，update 时需要获取到当前的 style 进行融合。即新传入的配置项中没有涉及的属性，保留当前的配置。\n\n    var keyShape = item.get('keyShape');\n    var style = mix({}, keyShape.attr(), strokeStyle, cfgStyle);\n    if (cfg.style) cfg.style.r = r;else {\n      cfg.style = {\n        r: r\n      };\n    }\n    this.updateShape(cfg, item, style, true);\n  }\n}, 'single-combo');","map":{"version":3,"names":["__assign","Global","Shape","isNumber","clone","mix","isArray","registerCombo","options","size","defaultCombo","padding","animate","style","stroke","fill","lineWidth","labelCfg","comboLabel","fontSize","refX","refY","stateStyles","comboStateStyles","collapsedSubstituteIcon","show","img","shapeType","labelPosition","drawShape","cfg","group","getShapeStyle","height","width","keyShape","addShape","attrs","className","name","draggable","defaultStyle","strokeStyle","color","r","fixSize","getSize","isNaN","Math","max","styles","x","y","update","item","cfgStyle","itemCacheSize","get","attr","updateShape"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-core/es/element/combos/circle.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport Global from '../../global';\nimport Shape from '../shape';\nimport { isNumber, clone, mix, isArray } from '@antv/util'; // 圆形 Combo\n\nShape.registerCombo('circle', {\n  // 自定义节点时的配置\n  options: {\n    size: [Global.defaultCombo.size[0], Global.defaultCombo.size[0]],\n    padding: Global.defaultCombo.padding[0],\n    animate: true,\n    style: {\n      stroke: Global.defaultCombo.style.stroke,\n      fill: Global.defaultCombo.style.fill,\n      lineWidth: Global.defaultCombo.style.lineWidth\n    },\n    labelCfg: {\n      style: {\n        fill: Global.comboLabel.style.fill,\n        fontSize: Global.comboLabel.style.fontSize\n      },\n      refX: 0,\n      refY: 0\n    },\n    stateStyles: __assign({}, Global.comboStateStyles),\n    collapsedSubstituteIcon: {\n      show: false,\n      img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ'\n    }\n  },\n  shapeType: 'circle',\n  // 文本位置\n  labelPosition: 'top',\n  drawShape: function drawShape(cfg, group) {\n    var style = this.getShapeStyle(cfg);\n    delete style.height;\n    delete style.width;\n    var keyShape = group.addShape('circle', {\n      attrs: style,\n      className: 'circle-combo',\n      name: 'circle-combo',\n      draggable: true\n    });\n    return keyShape;\n  },\n\n  /**\n   * 获取 Combo 的样式，供基于该 Combo 自定义时使用\n   * @param {Object} cfg Combo 数据模型\n   * @return {Object} Combo 的样式\n   */\n  getShapeStyle: function getShapeStyle(cfg) {\n    var defaultStyle = this.options.style;\n    var padding = cfg.padding || this.options.padding;\n    if (isArray(padding)) padding = padding[0];\n    var strokeStyle = {\n      stroke: cfg.color\n    }; // 如果设置了color，则覆盖默认的stroke属性\n\n    var style = mix({}, defaultStyle, strokeStyle, cfg.style);\n    var r;\n\n    if (cfg.fixSize) {\n      r = isNumber(cfg.fixSize) ? cfg.fixSize : cfg.fixSize[0];\n    } else {\n      var size = this.getSize(cfg);\n      if (!isNumber(style.r) || isNaN(style.r)) r = size[0] / 2 || Global.defaultCombo.style.r;else r = Math.max(style.r, size[0] / 2) || size[0] / 2;\n    }\n\n    style.r = r + padding;\n\n    var styles = __assign({\n      x: 0,\n      y: 0\n    }, style);\n\n    if (cfg.style) cfg.style.r = r;else {\n      cfg.style = {\n        r: r\n      };\n    }\n    return styles;\n  },\n  update: function update(cfg, item) {\n    var size = this.getSize(cfg);\n    var padding = cfg.padding || this.options.padding;\n    if (isArray(padding)) padding = padding[0];\n    var cfgStyle = clone(cfg.style);\n    var r;\n\n    if (cfg.fixSize) {\n      r = isNumber(cfg.fixSize) ? cfg.fixSize : cfg.fixSize[0];\n    } else {\n      r = Math.max(cfgStyle.r, size[0] / 2) || size[0] / 2;\n    }\n\n    cfgStyle.r = r + padding;\n    var itemCacheSize = item.get('sizeCache');\n\n    if (itemCacheSize) {\n      itemCacheSize.r = cfgStyle.r;\n    } // 下面这些属性需要覆盖默认样式与目前样式，但若在 cfg 中有指定则应该被 cfg 的相应配置覆盖。\n\n\n    var strokeStyle = {\n      stroke: cfg.color\n    }; // 与 getShapeStyle 不同在于，update 时需要获取到当前的 style 进行融合。即新传入的配置项中没有涉及的属性，保留当前的配置。\n\n    var keyShape = item.get('keyShape');\n    var style = mix({}, keyShape.attr(), strokeStyle, cfgStyle);\n    if (cfg.style) cfg.style.r = r;else {\n      cfg.style = {\n        r: r\n      };\n    }\n    this.updateShape(cfg, item, style, true);\n  }\n}, 'single-combo');"],"mappings":"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"},"metadata":{},"sourceType":"module"}