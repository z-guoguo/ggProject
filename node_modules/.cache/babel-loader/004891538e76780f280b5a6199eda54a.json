{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { each, mix } from '@antv/util';\nimport { Util } from '@antv/g6-core';\nimport Base from '../base';\nvar pointLineDistance = Util.pointLineDistance; // 对齐线样式\n\nvar alignLineStyle = {\n  stroke: '#FA8C16',\n  lineWidth: 1\n};\n\nvar SnapLine =\n/** @class */\nfunction (_super) {\n  __extends(SnapLine, _super);\n\n  function SnapLine(props) {\n    return _super.call(this, props) || this;\n  }\n\n  SnapLine.prototype.getDefaultCfgs = function () {\n    return {\n      line: alignLineStyle,\n\n      /**\n       * item align type\n       * @type {String|True|False}\n       */\n      itemAlignType: 'center',\n\n      /**\n       * tolerance to item force align\n       * @type {String|True|False}\n       */\n      tolerance: 5,\n      horizontalLines: {},\n      verticalLines: {},\n      alignLines: []\n    };\n  };\n\n  SnapLine.prototype.init = function () {}; // class-methods-use-this\n\n\n  SnapLine.prototype.getEvents = function () {\n    return {\n      'node:dragstart': 'onDragStart',\n      'node:drag': 'onDrag',\n      'node:dragend': 'onDragEnd'\n    };\n  };\n\n  SnapLine.prototype.onDragStart = function () {\n    this.initBoxLine();\n  };\n\n  SnapLine.prototype.onDrag = function (e) {\n    var item = e.item; // 计算辅助线位置,拖动过程中更新辅助线\n\n    var delegateShape = item.get('delegateShape') || item;\n    var bbox = delegateShape.getBBox();\n    var model = item.getModel();\n    var dx = model.x - bbox.x;\n    var dy = model.y - bbox.y;\n    this.show({\n      x: bbox.minX + dx,\n      y: bbox.minY + dy\n    }, {\n      width: bbox.width,\n      height: bbox.height\n    });\n  };\n\n  SnapLine.prototype.onDragEnd = function () {\n    // 拖动结束时候删除辅助线\n    this.destory();\n  };\n  /**\n   * 每次开始拖动之前，计算出所有节点在水平和垂直方向上，左中右三条中线，并缓存起来\n   *\n   * @param {object} item Node节点\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.initBoxLine = function () {\n    var _a = this._cfgs,\n        horizontalLines = _a.horizontalLines,\n        verticalLines = _a.verticalLines,\n        itemAlignType = _a.itemAlignType;\n    var graph = this.get('graph');\n    var nodes = graph.getNodes();\n    nodes.forEach(function (item) {\n      var bbox = item.getBBox();\n      var nodeId = item.get('id'); // 设置水平方向辅助线\n\n      if (itemAlignType === true || itemAlignType === 'horizontal') {\n        // tltr: top left top right\n        // lcrc: left center right center\n        // blbr: bottom left bottom right\n        horizontalLines[\"\".concat(nodeId, \"tltr\")] = [bbox.minX, bbox.minY, bbox.maxX, bbox.minY, item];\n        horizontalLines[\"\".concat(nodeId, \"lcrc\")] = [bbox.minX, bbox.centerY, bbox.maxX, bbox.centerY, item];\n        horizontalLines[\"\".concat(nodeId, \"blbr\")] = [bbox.minX, bbox.maxY, bbox.maxX, bbox.maxY, item];\n      } else if (itemAlignType === 'center') {\n        horizontalLines[\"\".concat(nodeId, \"lcrc\")] = [bbox.minX, bbox.centerY, bbox.maxX, bbox.centerY, item];\n      } // 设置垂直方向辅助线\n\n\n      if (itemAlignType === true || itemAlignType === 'vertical') {\n        // tlbl: top left bottom left\n        // tcbc: top center bottom center\n        // trbr: top right bottom right\n        verticalLines[\"\".concat(nodeId, \"tlbl\")] = [bbox.minX, bbox.minY, bbox.minX, bbox.maxY, item];\n        verticalLines[\"\".concat(nodeId, \"tcbc\")] = [bbox.centerX, bbox.minY, bbox.centerX, bbox.maxY, item];\n        verticalLines[\"\".concat(nodeId, \"trbr\")] = [bbox.maxX, bbox.minY, bbox.maxX, bbox.maxY, item];\n      } else if (itemAlignType === 'center') {\n        verticalLines[\"\".concat(nodeId, \"tcbc\")] = [bbox.centerX, bbox.minY, bbox.centerX, bbox.maxY, item];\n      }\n    });\n  };\n  /**\n   * 显示AlignLine\n   *\n   * @param {object} point 起始点\n   * @param {object} bbox BBox\n   * @returns\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.show = function (point, bbox) {\n    var originPoint = mix({}, point);\n    this.itemAlign(point, bbox, originPoint);\n    return point;\n  };\n  /**\n   * 拖动拖出中添加辅助线\n   *\n   * @param {object} point 起始点\n   * @param {object} bbox 代理形状的bbox\n   * @param {object} originPoint 原始点，同point\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.itemAlign = function (point, bbox, originPoint) {\n    var _this = this;\n\n    var _a = this._cfgs,\n        horizontalLines = _a.horizontalLines,\n        verticalLines = _a.verticalLines,\n        tolerance = _a.tolerance;\n    var tc = {\n      x: originPoint.x + bbox.width / 2,\n      y: originPoint.y\n    };\n    var cc = {\n      x: originPoint.x + bbox.width / 2,\n      y: originPoint.y + bbox.height / 2\n    };\n    var bc = {\n      x: originPoint.x + bbox.width / 2,\n      y: originPoint.y + bbox.height\n    };\n    var lc = {\n      x: originPoint.x,\n      y: originPoint.y + bbox.height / 2\n    };\n    var rc = {\n      x: originPoint.x + bbox.width,\n      y: originPoint.y + bbox.height / 2\n    };\n    var horizontalDis = [];\n    var verticalDis = [];\n    var alignCfg = null;\n    this.clearAlignLine();\n    each(horizontalLines, function (line) {\n      if (line[4].isVisible) {\n        horizontalDis.push(_this.getLineDisObject(line, tc));\n        horizontalDis.push(_this.getLineDisObject(line, cc));\n        horizontalDis.push(_this.getLineDisObject(line, bc));\n      }\n    });\n    each(verticalLines, function (line) {\n      if (line[4].isVisible) {\n        verticalDis.push(_this.getLineDisObject(line, lc));\n        verticalDis.push(_this.getLineDisObject(line, cc));\n        verticalDis.push(_this.getLineDisObject(line, rc));\n      }\n    });\n    horizontalDis.sort(function (a, b) {\n      return a.dis - b.dis;\n    });\n    verticalDis.sort(function (a, b) {\n      return a.dis - b.dis;\n    });\n\n    if (horizontalDis.length !== 0 && horizontalDis[0].dis < tolerance) {\n      point.y = horizontalDis[0].line[1] - horizontalDis[0].point.y + originPoint.y;\n      alignCfg = {\n        type: 'item',\n        horizontals: [horizontalDis[0]]\n      };\n\n      for (var i = 1; i < 3; i++) {\n        if (horizontalDis[0].dis === horizontalDis[i].dis) {\n          alignCfg.horizontals.push(horizontalDis[i]);\n        }\n      }\n    }\n\n    if (verticalDis.length !== 0 && verticalDis[0].dis < tolerance) {\n      point.x = verticalDis[0].line[0] - verticalDis[0].point.x + originPoint.x;\n\n      if (!alignCfg) {\n        alignCfg = {\n          type: 'item',\n          verticals: [verticalDis[0]]\n        };\n      } else {\n        alignCfg.verticals = [verticalDis[0]];\n      }\n\n      for (var i = 1; i < 3; i++) {\n        if (verticalDis[0].dis === verticalDis[i].dis) {\n          alignCfg.verticals.push(verticalDis[i]);\n        }\n      }\n    }\n\n    if (alignCfg) {\n      alignCfg.bbox = bbox;\n      this.addAlignLine(alignCfg);\n    }\n  };\n  /**\n   * 根据配置项添加辅助线\n   *\n   * @param {object} cfg\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.addAlignLine = function (cfg) {\n    var bbox = cfg.bbox,\n        type = cfg.type,\n        horizontals = cfg.horizontals,\n        verticals = cfg.verticals;\n    var _a = this._cfgs,\n        lineStyle = _a.line,\n        alignLines = _a.alignLines;\n    var graph = this.get('graph');\n    var group = graph.get('group');\n\n    if (type === 'item') {\n      if (horizontals) {\n        each(horizontals, function (horizontal) {\n          var refLine = horizontal.line,\n              refPoint = horizontal.point;\n          var lineCenterX = (refLine[0] + refLine[2]) / 2;\n          var x1;\n          var x2;\n\n          if (refPoint.x < lineCenterX) {\n            x1 = refPoint.x - bbox.width / 2;\n            x2 = Math.max(refLine[0], refLine[2]);\n          } else {\n            x1 = refPoint.x + bbox.width / 2;\n            x2 = Math.min(refLine[0], refLine[2]);\n          }\n\n          var lineAttrs = mix({\n            x1: x1,\n            y1: refLine[1],\n            x2: x2,\n            y2: refLine[1]\n          }, lineStyle);\n          var line = group.addShape('line', {\n            attrs: lineAttrs,\n            capture: false\n          });\n          alignLines.push(line);\n        });\n      }\n\n      if (verticals) {\n        each(verticals, function (vertical) {\n          var refLine = vertical.line,\n              refPoint = vertical.point;\n          var lineCenterY = (refLine[1] + refLine[3]) / 2;\n          var y1;\n          var y2;\n\n          if (refPoint.y < lineCenterY) {\n            y1 = refPoint.y - bbox.height / 2;\n            y2 = Math.max(refLine[1], refLine[3]);\n          } else {\n            y1 = refPoint.y + bbox.height / 2;\n            y2 = Math.min(refLine[1], refLine[3]);\n          }\n\n          var lineAtts = mix({\n            x1: refLine[0],\n            y1: y1,\n            x2: refLine[0],\n            y2: y2\n          }, lineStyle);\n          var line = group.addShape('line', {\n            attrs: lineAtts,\n            capture: false\n          });\n          alignLines.push(line);\n        });\n      }\n    }\n  };\n  /**\n   * 获取点到线的距离\n   *\n   * @param {array} line [x1, y1, x2, y2] 线的四个点\n   * @param {object} point 点的x和y坐标点 {x, y}\n   * @returns\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.getLineDisObject = function (line, point) {\n    return {\n      line: line,\n      point: point,\n      dis: pointLineDistance(line, point)\n    };\n  };\n\n  SnapLine.prototype.getContainer = function () {\n    return this.get('container');\n  };\n  /**\n   * 拖动过程中，清楚上次绘制的线\n   *\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.clearAlignLine = function () {\n    var alignLines = this._cfgs.alignLines;\n    each(alignLines, function (line) {\n      line.remove();\n    });\n    alignLines.length = 0;\n  };\n  /**\n   * 拖动结束时候，情况缓存的节点的辅助线，同时删除绘制的线\n   *\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.destory = function () {\n    var _a = this._cfgs,\n        horizontalLines = _a.horizontalLines,\n        verticalLines = _a.verticalLines;\n    var graph = this.get('graph');\n    var nodes = graph.getNodes();\n    nodes.forEach(function (node) {\n      var itemId = node.get('id');\n      delete horizontalLines[\"\".concat(itemId, \"tltr\")];\n      delete horizontalLines[\"\".concat(itemId, \"lcrc\")];\n      delete horizontalLines[\"\".concat(itemId, \"blbr\")];\n      delete verticalLines[\"\".concat(itemId, \"tlbl\")];\n      delete verticalLines[\"\".concat(itemId, \"tcbc\")];\n      delete verticalLines[\"\".concat(itemId, \"trbr\")];\n    });\n    this.clearAlignLine();\n  };\n\n  return SnapLine;\n}(Base);\n\nexport default SnapLine;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","each","mix","Util","Base","pointLineDistance","alignLineStyle","stroke","lineWidth","SnapLine","_super","props","getDefaultCfgs","line","itemAlignType","tolerance","horizontalLines","verticalLines","alignLines","init","getEvents","onDragStart","initBoxLine","onDrag","e","item","delegateShape","get","bbox","getBBox","model","getModel","dx","x","dy","y","show","minX","minY","width","height","onDragEnd","destory","_a","_cfgs","graph","nodes","getNodes","forEach","nodeId","concat","maxX","centerY","maxY","centerX","point","originPoint","itemAlign","_this","tc","cc","bc","lc","rc","horizontalDis","verticalDis","alignCfg","clearAlignLine","isVisible","push","getLineDisObject","sort","a","dis","length","type","horizontals","i","verticals","addAlignLine","cfg","lineStyle","group","horizontal","refLine","refPoint","lineCenterX","x1","x2","Math","max","min","lineAttrs","y1","y2","addShape","attrs","capture","vertical","lineCenterY","lineAtts","getContainer","remove","node","itemId"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/snapline/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { each, mix } from '@antv/util';\nimport { Util } from '@antv/g6-core';\nimport Base from '../base';\nvar pointLineDistance = Util.pointLineDistance; // 对齐线样式\n\nvar alignLineStyle = {\n  stroke: '#FA8C16',\n  lineWidth: 1\n};\n\nvar SnapLine =\n/** @class */\nfunction (_super) {\n  __extends(SnapLine, _super);\n\n  function SnapLine(props) {\n    return _super.call(this, props) || this;\n  }\n\n  SnapLine.prototype.getDefaultCfgs = function () {\n    return {\n      line: alignLineStyle,\n\n      /**\n       * item align type\n       * @type {String|True|False}\n       */\n      itemAlignType: 'center',\n\n      /**\n       * tolerance to item force align\n       * @type {String|True|False}\n       */\n      tolerance: 5,\n      horizontalLines: {},\n      verticalLines: {},\n      alignLines: []\n    };\n  };\n\n  SnapLine.prototype.init = function () {}; // class-methods-use-this\n\n\n  SnapLine.prototype.getEvents = function () {\n    return {\n      'node:dragstart': 'onDragStart',\n      'node:drag': 'onDrag',\n      'node:dragend': 'onDragEnd'\n    };\n  };\n\n  SnapLine.prototype.onDragStart = function () {\n    this.initBoxLine();\n  };\n\n  SnapLine.prototype.onDrag = function (e) {\n    var item = e.item; // 计算辅助线位置,拖动过程中更新辅助线\n\n    var delegateShape = item.get('delegateShape') || item;\n    var bbox = delegateShape.getBBox();\n    var model = item.getModel();\n    var dx = model.x - bbox.x;\n    var dy = model.y - bbox.y;\n    this.show({\n      x: bbox.minX + dx,\n      y: bbox.minY + dy\n    }, {\n      width: bbox.width,\n      height: bbox.height\n    });\n  };\n\n  SnapLine.prototype.onDragEnd = function () {\n    // 拖动结束时候删除辅助线\n    this.destory();\n  };\n  /**\n   * 每次开始拖动之前，计算出所有节点在水平和垂直方向上，左中右三条中线，并缓存起来\n   *\n   * @param {object} item Node节点\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.initBoxLine = function () {\n    var _a = this._cfgs,\n        horizontalLines = _a.horizontalLines,\n        verticalLines = _a.verticalLines,\n        itemAlignType = _a.itemAlignType;\n    var graph = this.get('graph');\n    var nodes = graph.getNodes();\n    nodes.forEach(function (item) {\n      var bbox = item.getBBox();\n      var nodeId = item.get('id'); // 设置水平方向辅助线\n\n      if (itemAlignType === true || itemAlignType === 'horizontal') {\n        // tltr: top left top right\n        // lcrc: left center right center\n        // blbr: bottom left bottom right\n        horizontalLines[\"\".concat(nodeId, \"tltr\")] = [bbox.minX, bbox.minY, bbox.maxX, bbox.minY, item];\n        horizontalLines[\"\".concat(nodeId, \"lcrc\")] = [bbox.minX, bbox.centerY, bbox.maxX, bbox.centerY, item];\n        horizontalLines[\"\".concat(nodeId, \"blbr\")] = [bbox.minX, bbox.maxY, bbox.maxX, bbox.maxY, item];\n      } else if (itemAlignType === 'center') {\n        horizontalLines[\"\".concat(nodeId, \"lcrc\")] = [bbox.minX, bbox.centerY, bbox.maxX, bbox.centerY, item];\n      } // 设置垂直方向辅助线\n\n\n      if (itemAlignType === true || itemAlignType === 'vertical') {\n        // tlbl: top left bottom left\n        // tcbc: top center bottom center\n        // trbr: top right bottom right\n        verticalLines[\"\".concat(nodeId, \"tlbl\")] = [bbox.minX, bbox.minY, bbox.minX, bbox.maxY, item];\n        verticalLines[\"\".concat(nodeId, \"tcbc\")] = [bbox.centerX, bbox.minY, bbox.centerX, bbox.maxY, item];\n        verticalLines[\"\".concat(nodeId, \"trbr\")] = [bbox.maxX, bbox.minY, bbox.maxX, bbox.maxY, item];\n      } else if (itemAlignType === 'center') {\n        verticalLines[\"\".concat(nodeId, \"tcbc\")] = [bbox.centerX, bbox.minY, bbox.centerX, bbox.maxY, item];\n      }\n    });\n  };\n  /**\n   * 显示AlignLine\n   *\n   * @param {object} point 起始点\n   * @param {object} bbox BBox\n   * @returns\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.show = function (point, bbox) {\n    var originPoint = mix({}, point);\n    this.itemAlign(point, bbox, originPoint);\n    return point;\n  };\n  /**\n   * 拖动拖出中添加辅助线\n   *\n   * @param {object} point 起始点\n   * @param {object} bbox 代理形状的bbox\n   * @param {object} originPoint 原始点，同point\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.itemAlign = function (point, bbox, originPoint) {\n    var _this = this;\n\n    var _a = this._cfgs,\n        horizontalLines = _a.horizontalLines,\n        verticalLines = _a.verticalLines,\n        tolerance = _a.tolerance;\n    var tc = {\n      x: originPoint.x + bbox.width / 2,\n      y: originPoint.y\n    };\n    var cc = {\n      x: originPoint.x + bbox.width / 2,\n      y: originPoint.y + bbox.height / 2\n    };\n    var bc = {\n      x: originPoint.x + bbox.width / 2,\n      y: originPoint.y + bbox.height\n    };\n    var lc = {\n      x: originPoint.x,\n      y: originPoint.y + bbox.height / 2\n    };\n    var rc = {\n      x: originPoint.x + bbox.width,\n      y: originPoint.y + bbox.height / 2\n    };\n    var horizontalDis = [];\n    var verticalDis = [];\n    var alignCfg = null;\n    this.clearAlignLine();\n    each(horizontalLines, function (line) {\n      if (line[4].isVisible) {\n        horizontalDis.push(_this.getLineDisObject(line, tc));\n        horizontalDis.push(_this.getLineDisObject(line, cc));\n        horizontalDis.push(_this.getLineDisObject(line, bc));\n      }\n    });\n    each(verticalLines, function (line) {\n      if (line[4].isVisible) {\n        verticalDis.push(_this.getLineDisObject(line, lc));\n        verticalDis.push(_this.getLineDisObject(line, cc));\n        verticalDis.push(_this.getLineDisObject(line, rc));\n      }\n    });\n    horizontalDis.sort(function (a, b) {\n      return a.dis - b.dis;\n    });\n    verticalDis.sort(function (a, b) {\n      return a.dis - b.dis;\n    });\n\n    if (horizontalDis.length !== 0 && horizontalDis[0].dis < tolerance) {\n      point.y = horizontalDis[0].line[1] - horizontalDis[0].point.y + originPoint.y;\n      alignCfg = {\n        type: 'item',\n        horizontals: [horizontalDis[0]]\n      };\n\n      for (var i = 1; i < 3; i++) {\n        if (horizontalDis[0].dis === horizontalDis[i].dis) {\n          alignCfg.horizontals.push(horizontalDis[i]);\n        }\n      }\n    }\n\n    if (verticalDis.length !== 0 && verticalDis[0].dis < tolerance) {\n      point.x = verticalDis[0].line[0] - verticalDis[0].point.x + originPoint.x;\n\n      if (!alignCfg) {\n        alignCfg = {\n          type: 'item',\n          verticals: [verticalDis[0]]\n        };\n      } else {\n        alignCfg.verticals = [verticalDis[0]];\n      }\n\n      for (var i = 1; i < 3; i++) {\n        if (verticalDis[0].dis === verticalDis[i].dis) {\n          alignCfg.verticals.push(verticalDis[i]);\n        }\n      }\n    }\n\n    if (alignCfg) {\n      alignCfg.bbox = bbox;\n      this.addAlignLine(alignCfg);\n    }\n  };\n  /**\n   * 根据配置项添加辅助线\n   *\n   * @param {object} cfg\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.addAlignLine = function (cfg) {\n    var bbox = cfg.bbox,\n        type = cfg.type,\n        horizontals = cfg.horizontals,\n        verticals = cfg.verticals;\n    var _a = this._cfgs,\n        lineStyle = _a.line,\n        alignLines = _a.alignLines;\n    var graph = this.get('graph');\n    var group = graph.get('group');\n\n    if (type === 'item') {\n      if (horizontals) {\n        each(horizontals, function (horizontal) {\n          var refLine = horizontal.line,\n              refPoint = horizontal.point;\n          var lineCenterX = (refLine[0] + refLine[2]) / 2;\n          var x1;\n          var x2;\n\n          if (refPoint.x < lineCenterX) {\n            x1 = refPoint.x - bbox.width / 2;\n            x2 = Math.max(refLine[0], refLine[2]);\n          } else {\n            x1 = refPoint.x + bbox.width / 2;\n            x2 = Math.min(refLine[0], refLine[2]);\n          }\n\n          var lineAttrs = mix({\n            x1: x1,\n            y1: refLine[1],\n            x2: x2,\n            y2: refLine[1]\n          }, lineStyle);\n          var line = group.addShape('line', {\n            attrs: lineAttrs,\n            capture: false\n          });\n          alignLines.push(line);\n        });\n      }\n\n      if (verticals) {\n        each(verticals, function (vertical) {\n          var refLine = vertical.line,\n              refPoint = vertical.point;\n          var lineCenterY = (refLine[1] + refLine[3]) / 2;\n          var y1;\n          var y2;\n\n          if (refPoint.y < lineCenterY) {\n            y1 = refPoint.y - bbox.height / 2;\n            y2 = Math.max(refLine[1], refLine[3]);\n          } else {\n            y1 = refPoint.y + bbox.height / 2;\n            y2 = Math.min(refLine[1], refLine[3]);\n          }\n\n          var lineAtts = mix({\n            x1: refLine[0],\n            y1: y1,\n            x2: refLine[0],\n            y2: y2\n          }, lineStyle);\n          var line = group.addShape('line', {\n            attrs: lineAtts,\n            capture: false\n          });\n          alignLines.push(line);\n        });\n      }\n    }\n  };\n  /**\n   * 获取点到线的距离\n   *\n   * @param {array} line [x1, y1, x2, y2] 线的四个点\n   * @param {object} point 点的x和y坐标点 {x, y}\n   * @returns\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.getLineDisObject = function (line, point) {\n    return {\n      line: line,\n      point: point,\n      dis: pointLineDistance(line, point)\n    };\n  };\n\n  SnapLine.prototype.getContainer = function () {\n    return this.get('container');\n  };\n  /**\n   * 拖动过程中，清楚上次绘制的线\n   *\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.clearAlignLine = function () {\n    var alignLines = this._cfgs.alignLines;\n    each(alignLines, function (line) {\n      line.remove();\n    });\n    alignLines.length = 0;\n  };\n  /**\n   * 拖动结束时候，情况缓存的节点的辅助线，同时删除绘制的线\n   *\n   * @memberof AlignLine\n   */\n\n\n  SnapLine.prototype.destory = function () {\n    var _a = this._cfgs,\n        horizontalLines = _a.horizontalLines,\n        verticalLines = _a.verticalLines;\n    var graph = this.get('graph');\n    var nodes = graph.getNodes();\n    nodes.forEach(function (node) {\n      var itemId = node.get('id');\n      delete horizontalLines[\"\".concat(itemId, \"tltr\")];\n      delete horizontalLines[\"\".concat(itemId, \"lcrc\")];\n      delete horizontalLines[\"\".concat(itemId, \"blbr\")];\n      delete verticalLines[\"\".concat(itemId, \"tlbl\")];\n      delete verticalLines[\"\".concat(itemId, \"tcbc\")];\n      delete verticalLines[\"\".concat(itemId, \"trbr\")];\n    });\n    this.clearAlignLine();\n  };\n\n  return SnapLine;\n}(Base);\n\nexport default SnapLine;"],"mappings":"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"},"metadata":{},"sourceType":"module"}