{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BindingToSyntax = void 0;\n\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\n\nvar literal_types_1 = require(\"../constants/literal_types\");\n\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\n\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\n\nvar BindingToSyntax = function () {\n  function BindingToSyntax(binding) {\n    this._binding = binding;\n  }\n\n  BindingToSyntax.prototype.to = function (constructor) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n    this._binding.implementationType = constructor;\n    return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toSelf = function () {\n    if (typeof this._binding.serviceIdentifier !== \"function\") {\n      throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n    }\n\n    var self = this._binding.serviceIdentifier;\n    return this.to(self);\n  };\n\n  BindingToSyntax.prototype.toConstantValue = function (value) {\n    this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n    this._binding.cache = value;\n    this._binding.dynamicValue = null;\n    this._binding.implementationType = null;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toDynamicValue = function (func) {\n    this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n    this._binding.cache = null;\n    this._binding.dynamicValue = func;\n    this._binding.implementationType = null;\n    return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toConstructor = function (constructor) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n    this._binding.implementationType = constructor;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toFactory = function (factory) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n    this._binding.factory = factory;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toFunction = function (func) {\n    if (typeof func !== \"function\") {\n      throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n    }\n\n    var bindingWhenOnSyntax = this.toConstantValue(func);\n    this._binding.type = literal_types_1.BindingTypeEnum.Function;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return bindingWhenOnSyntax;\n  };\n\n  BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n\n    this._binding.factory = function (context) {\n      var autofactory = function () {\n        return context.container.get(serviceIdentifier);\n      };\n\n      return autofactory;\n    };\n\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toProvider = function (provider) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n    this._binding.provider = provider;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toService = function (service) {\n    this.toDynamicValue(function (context) {\n      return context.container.get(service);\n    });\n  };\n\n  return BindingToSyntax;\n}();\n\nexports.BindingToSyntax = BindingToSyntax;","map":{"version":3,"mappings":"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","names":["binding","_binding","BindingToSyntax","constructor","type","literal_types_1","Instance","implementationType","binding_in_when_on_syntax_1","serviceIdentifier","Error","ERROR_MSGS","INVALID_TO_SELF_VALUE","self","to","value","ConstantValue","cache","dynamicValue","scope","Singleton","binding_when_on_syntax_1","func","DynamicValue","Constructor","factory","Factory","INVALID_FUNCTION_BINDING","bindingWhenOnSyntax","toConstantValue","Function","context","autofactory","container","get","provider","Provider","service","toDynamicValue","exports"],"sourceRoot":"","sources":["../../src/syntax/binding_to_syntax.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}