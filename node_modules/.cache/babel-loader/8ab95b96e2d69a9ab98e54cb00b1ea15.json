{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { Platform, NumberExt, ObjectExt, Dom, FunctionExt } from '../../util';\nimport { Point, Rectangle } from '../../geometry';\nimport { View } from '../../view/view';\nimport { Renderer } from '../../graph/renderer';\nimport { GraphView } from '../../graph/view';\nimport { BackgroundManager } from '../../graph/background';\nexport class Scroller extends View {\n  constructor(options) {\n    super();\n    this.padding = {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0\n    };\n    this.options = Util.getOptions(options);\n    const scale = this.graph.transform.getScale();\n    this.sx = scale.sx;\n    this.sy = scale.sy;\n    const width = this.options.width || this.graph.options.width;\n    const height = this.options.height || this.graph.options.height;\n    this.container = document.createElement('div');\n    this.$container = this.$(this.container).addClass(this.prefixClassName(Util.containerClass)).css({\n      width,\n      height\n    });\n\n    if (this.options.pageVisible) {\n      this.$container.addClass(this.prefixClassName(Util.pagedClass));\n    }\n\n    if (this.options.className) {\n      this.$container.addClass(this.options.className);\n    }\n\n    const graphContainer = this.graph.container;\n\n    if (graphContainer.parentNode) {\n      this.$container.insertBefore(graphContainer);\n    } // copy style\n\n\n    const style = graphContainer.getAttribute('style');\n\n    if (style) {\n      const obj = {};\n      const styles = style.split(';');\n      styles.forEach(item => {\n        const section = item.trim();\n\n        if (section) {\n          const pair = section.split(':');\n\n          if (pair.length) {\n            obj[pair[0].trim()] = pair[1] ? pair[1].trim() : '';\n          }\n        }\n      });\n      Object.keys(obj).forEach(key => {\n        if (key === 'width' || key === 'height') {\n          return;\n        }\n\n        graphContainer.style[key] = '';\n        this.container.style[key] = obj[key];\n      });\n    }\n\n    this.content = document.createElement('div');\n    this.$content = this.$(this.content).addClass(this.prefixClassName(Util.contentClass)).css({\n      width: this.graph.options.width,\n      height: this.graph.options.height\n    }); // custom background\n\n    this.background = document.createElement('div');\n    this.$background = this.$(this.background).addClass(this.prefixClassName(Util.backgroundClass));\n    this.$content.append(this.background);\n\n    if (!this.options.pageVisible) {\n      this.$content.append(this.graph.view.grid);\n    }\n\n    this.$content.append(graphContainer);\n    this.$content.appendTo(this.container);\n    this.startListening();\n\n    if (!this.options.pageVisible) {\n      this.graph.grid.update();\n    }\n\n    this.backgroundManager = new Scroller.Background(this);\n\n    if (!this.options.autoResize) {\n      this.update();\n    }\n  }\n\n  get graph() {\n    return this.options.graph;\n  }\n\n  get model() {\n    return this.graph.model;\n  }\n\n  startListening() {\n    const graph = this.graph;\n    const model = this.model;\n    graph.on('scale', this.onScale, this);\n    graph.on('resize', this.onResize, this);\n    graph.on('before:print', this.storeScrollPosition, this);\n    graph.on('before:export', this.storeScrollPosition, this);\n    graph.on('after:print', this.restoreScrollPosition, this);\n    graph.on('after:export', this.restoreScrollPosition, this);\n    graph.on('render:done', this.onRenderDone, this);\n    graph.on('unfreeze', this.onUpdate, this);\n    model.on('reseted', this.onUpdate, this);\n    model.on('cell:added', this.onUpdate, this);\n    model.on('cell:removed', this.onUpdate, this);\n    model.on('cell:changed', this.onUpdate, this);\n    model.on('batch:stop', this.onBatchStop, this);\n    this.delegateBackgroundEvents();\n  }\n\n  stopListening() {\n    const graph = this.graph;\n    const model = this.model;\n    graph.off('scale', this.onScale, this);\n    graph.off('resize', this.onResize, this);\n    graph.off('beforeprint', this.storeScrollPosition, this);\n    graph.off('beforeexport', this.storeScrollPosition, this);\n    graph.off('afterprint', this.restoreScrollPosition, this);\n    graph.off('afterexport', this.restoreScrollPosition, this);\n    graph.off('render:done', this.onRenderDone, this);\n    graph.off('unfreeze', this.onUpdate, this);\n    model.off('reseted', this.onUpdate, this);\n    model.off('cell:added', this.onUpdate, this);\n    model.off('cell:removed', this.onUpdate, this);\n    model.off('cell:changed', this.onUpdate, this);\n    model.off('batch:stop', this.onBatchStop, this);\n    this.undelegateBackgroundEvents();\n  }\n\n  enableAutoResize() {\n    this.options.autoResize = true;\n  }\n\n  disableAutoResize() {\n    this.options.autoResize = false;\n  }\n\n  onUpdate() {\n    if (this.graph.isAsync() || !this.options.autoResize) {\n      return;\n    }\n\n    this.update();\n  }\n\n  onBatchStop(args) {\n    if (this.graph.isAsync() || !this.options.autoResize) {\n      return;\n    }\n\n    if (Renderer.UPDATE_DELAYING_BATCHES.includes(args.name)) {\n      this.update();\n    }\n  }\n\n  delegateBackgroundEvents(events) {\n    const evts = events || GraphView.events;\n    this.delegatedHandlers = Object.keys(evts).reduce((memo, name) => {\n      const handler = evts[name];\n\n      if (name.indexOf(' ') === -1) {\n        if (typeof handler === 'function') {\n          memo[name] = handler;\n        } else {\n          let method = this.graph.view[handler];\n\n          if (typeof method === 'function') {\n            method = method.bind(this.graph.view);\n            memo[name] = method;\n          }\n        }\n      }\n\n      return memo;\n    }, {});\n    this.onBackgroundEvent = this.onBackgroundEvent.bind(this);\n    Object.keys(this.delegatedHandlers).forEach(name => {\n      this.delegateEvent(name, {\n        guarded: false\n      }, this.onBackgroundEvent);\n    });\n  }\n\n  undelegateBackgroundEvents() {\n    Object.keys(this.delegatedHandlers).forEach(name => {\n      this.undelegateEvent(name, this.onBackgroundEvent);\n    });\n  }\n\n  onBackgroundEvent(e) {\n    let valid = false;\n    const target = e.target;\n\n    if (!this.options.pageVisible) {\n      const view = this.graph.view;\n      valid = view.background === target || view.grid === target;\n    } else if (this.options.background) {\n      valid = this.background === target;\n    } else {\n      valid = this.content === target;\n    }\n\n    if (valid) {\n      const handler = this.delegatedHandlers[e.type];\n\n      if (typeof handler === 'function') {\n        handler.apply(this.graph, arguments); // eslint-disable-line\n      }\n    }\n  }\n\n  onRenderDone({\n    stats\n  }) {\n    if (this.options.autoResize && stats.priority < 2) {\n      this.update();\n    }\n  }\n\n  onResize() {\n    if (this.cachedCenterPoint) {\n      this.centerPoint(this.cachedCenterPoint.x, this.cachedCenterPoint.y);\n      this.updatePageBreak();\n    }\n  }\n\n  onScale({\n    sx,\n    sy,\n    ox,\n    oy\n  }) {\n    this.updateScale(sx, sy);\n\n    if (ox || oy) {\n      this.centerPoint(ox, oy);\n      this.updatePageBreak();\n    }\n\n    const autoResizeOptions = this.options.autoResizeOptions || this.options.fitTocontentOptions;\n\n    if (typeof autoResizeOptions === 'function') {\n      this.update();\n    }\n  }\n\n  storeScrollPosition() {\n    this.cachedScrollLeft = this.container.scrollLeft;\n    this.cachedScrollTop = this.container.scrollTop;\n  }\n\n  restoreScrollPosition() {\n    this.container.scrollLeft = this.cachedScrollLeft;\n    this.container.scrollTop = this.cachedScrollTop;\n    this.cachedScrollLeft = null;\n    this.cachedScrollTop = null;\n  }\n\n  storeClientSize() {\n    this.cachedClientSize = {\n      width: this.container.clientWidth,\n      height: this.container.clientHeight\n    };\n  }\n\n  restoreClientSize() {\n    this.cachedClientSize = null;\n  }\n\n  beforeManipulation() {\n    if (Platform.IS_IE || Platform.IS_EDGE) {\n      this.$container.css('visibility', 'hidden');\n    }\n  }\n\n  afterManipulation() {\n    if (Platform.IS_IE || Platform.IS_EDGE) {\n      this.$container.css('visibility', 'visible');\n    }\n  }\n\n  updatePageSize(width, height) {\n    if (width != null) {\n      this.options.pageWidth = width;\n    }\n\n    if (height != null) {\n      this.options.pageHeight = height;\n    }\n\n    this.updatePageBreak();\n  }\n\n  updatePageBreak() {\n    if (this.pageBreak && this.pageBreak.parentNode) {\n      this.pageBreak.parentNode.removeChild(this.pageBreak);\n    }\n\n    this.pageBreak = null;\n\n    if (this.options.pageVisible && this.options.pageBreak) {\n      const graphWidth = this.graph.options.width;\n      const graphHeight = this.graph.options.height;\n      const pageWidth = this.options.pageWidth * this.sx;\n      const pageHeight = this.options.pageHeight * this.sy;\n\n      if (graphWidth > pageWidth || graphHeight > pageHeight) {\n        let hasPageBreak = false;\n        const container = document.createElement('div');\n\n        for (let i = 1, l = Math.floor(graphWidth / pageWidth); i < l; i += 1) {\n          this.$('<div/>').addClass(this.prefixClassName(`graph-pagebreak-vertical`)).css({\n            left: i * pageWidth\n          }).appendTo(container);\n          hasPageBreak = true;\n        }\n\n        for (let i = 1, l = Math.floor(graphHeight / pageHeight); i < l; i += 1) {\n          this.$('<div/>').addClass(this.prefixClassName(`graph-pagebreak-horizontal`)).css({\n            top: i * pageHeight\n          }).appendTo(container);\n          hasPageBreak = true;\n        }\n\n        if (hasPageBreak) {\n          Dom.addClass(container, this.prefixClassName('graph-pagebreak'));\n          this.$(this.graph.view.grid).after(container);\n          this.pageBreak = container;\n        }\n      }\n    }\n  }\n\n  update() {\n    const size = this.getClientSize();\n    this.cachedCenterPoint = this.clientToLocalPoint(size.width / 2, size.height / 2);\n    let resizeOptions = this.options.autoResizeOptions || this.options.fitTocontentOptions;\n\n    if (typeof resizeOptions === 'function') {\n      resizeOptions = FunctionExt.call(resizeOptions, this, this);\n    }\n\n    const options = Object.assign({\n      gridWidth: this.options.pageWidth,\n      gridHeight: this.options.pageHeight,\n      allowNewOrigin: 'negative'\n    }, resizeOptions);\n    this.graph.fitToContent(this.getFitToContentOptions(options));\n  }\n\n  getFitToContentOptions(options) {\n    const sx = this.sx;\n    const sy = this.sy;\n    options.gridWidth && (options.gridWidth *= sx);\n    options.gridHeight && (options.gridHeight *= sy);\n    options.minWidth && (options.minWidth *= sx);\n    options.minHeight && (options.minHeight *= sy);\n\n    if (typeof options.padding === 'object') {\n      options.padding = {\n        left: (options.padding.left || 0) * sx,\n        right: (options.padding.right || 0) * sx,\n        top: (options.padding.top || 0) * sy,\n        bottom: (options.padding.bottom || 0) * sy\n      };\n    } else if (typeof options.padding === 'number') {\n      options.padding *= sx;\n    }\n\n    if (!this.options.autoResize) {\n      options.contentArea = Rectangle.create();\n    }\n\n    return options;\n  }\n\n  updateScale(sx, sy) {\n    const options = this.graph.options;\n    const dx = sx / this.sx;\n    const dy = sy / this.sy;\n    this.sx = sx;\n    this.sy = sy;\n    this.graph.translate(options.x * dx, options.y * dy);\n    this.graph.resizeGraph(options.width * dx, options.height * dy);\n  }\n\n  scrollbarPosition(left, top, options) {\n    if (left == null && top == null) {\n      return {\n        left: this.container.scrollLeft,\n        top: this.container.scrollTop\n      };\n    }\n\n    const prop = {};\n\n    if (typeof left === 'number') {\n      prop.scrollLeft = left;\n    }\n\n    if (typeof top === 'number') {\n      prop.scrollTop = top;\n    }\n\n    if (options && options.animation) {\n      this.$container.animate(prop, options.animation);\n    } else {\n      this.$container.prop(prop);\n    }\n\n    return this;\n  }\n  /**\n   * Try to scroll to ensure that the position (x,y) on the graph (in local\n   * coordinates) is at the center of the viewport. If only one of the\n   * coordinates is specified, only scroll in the specified dimension and\n   * keep the other coordinate unchanged.\n   */\n\n\n  scrollToPoint(x, y, options) {\n    const size = this.getClientSize();\n    const ctm = this.graph.matrix();\n    const prop = {};\n\n    if (typeof x === 'number') {\n      prop.scrollLeft = x - size.width / 2 + ctm.e + (this.padding.left || 0);\n    }\n\n    if (typeof y === 'number') {\n      prop.scrollTop = y - size.height / 2 + ctm.f + (this.padding.top || 0);\n    }\n\n    if (options && options.animation) {\n      this.$container.animate(prop, options.animation);\n    } else {\n      this.$container.prop(prop);\n    }\n\n    return this;\n  }\n  /**\n   * Try to scroll to ensure that the center of graph content is at the\n   * center of the viewport.\n   */\n\n\n  scrollToContent(options) {\n    const sx = this.sx;\n    const sy = this.sy;\n    const center = this.graph.getContentArea().getCenter();\n    return this.scrollToPoint(center.x * sx, center.y * sy, options);\n  }\n  /**\n   * Try to scroll to ensure that the center of cell is at the center of\n   * the viewport.\n   */\n\n\n  scrollToCell(cell, options) {\n    const sx = this.sx;\n    const sy = this.sy;\n    const center = cell.getBBox().getCenter();\n    return this.scrollToPoint(center.x * sx, center.y * sy, options);\n  }\n  /**\n   * The center methods are more aggressive than the scroll methods. These\n   * methods position the graph so that a specific point on the graph lies\n   * at the center of the viewport, adding paddings around the paper if\n   * necessary (e.g. if the requested point lies in a corner of the paper).\n   * This means that the requested point will always move into the center\n   * of the viewport. (Use the scroll functions to avoid adding paddings\n   * and only scroll the viewport as far as the graph boundary.)\n   */\n\n  /**\n   * Position the center of graph to the center of the viewport.\n   */\n\n\n  center(optons) {\n    return this.centerPoint(optons);\n  }\n\n  centerPoint(x, y, options) {\n    const ctm = this.graph.matrix();\n    const sx = ctm.a;\n    const sy = ctm.d;\n    const tx = -ctm.e;\n    const ty = -ctm.f;\n    const tWidth = tx + this.graph.options.width;\n    const tHeight = ty + this.graph.options.height;\n    let localOptions;\n    this.storeClientSize(); // avoid multilple reflow\n\n    if (typeof x === 'number' || typeof y === 'number') {\n      localOptions = options;\n      const visibleCenter = this.getVisibleArea().getCenter();\n\n      if (typeof x === 'number') {\n        x *= sx; // eslint-disable-line\n      } else {\n        x = visibleCenter.x; // eslint-disable-line\n      }\n\n      if (typeof y === 'number') {\n        y *= sy; // eslint-disable-line\n      } else {\n        y = visibleCenter.y; // eslint-disable-line\n      }\n    } else {\n      localOptions = x;\n      x = (tx + tWidth) / 2; // eslint-disable-line\n\n      y = (ty + tHeight) / 2; // eslint-disable-line\n    }\n\n    if (localOptions && localOptions.padding) {\n      return this.positionPoint({\n        x,\n        y\n      }, '50%', '50%', localOptions);\n    }\n\n    const padding = this.getPadding();\n    const clientSize = this.getClientSize();\n    const cx = clientSize.width / 2;\n    const cy = clientSize.height / 2;\n    const left = cx - padding.left - x + tx;\n    const right = cx - padding.right + x - tWidth;\n    const top = cy - padding.top - y + ty;\n    const bottom = cy - padding.bottom + y - tHeight;\n    this.addPadding(Math.max(left, 0), Math.max(right, 0), Math.max(top, 0), Math.max(bottom, 0));\n    const result = this.scrollToPoint(x, y, localOptions || undefined);\n    this.restoreClientSize();\n    return result;\n  }\n\n  centerContent(options) {\n    return this.positionContent('center', options);\n  }\n\n  centerCell(cell, options) {\n    return this.positionCell(cell, 'center', options);\n  }\n  /**\n   * The position methods are a more general version of the center methods.\n   * They position the graph so that a specific point on the graph lies at\n   * requested coordinates inside the viewport.\n   */\n\n  /**\n   *\n   */\n\n\n  positionContent(pos, options) {\n    const rect = this.graph.getContentArea(options);\n    return this.positionRect(rect, pos, options);\n  }\n\n  positionCell(cell, pos, options) {\n    const bbox = cell.getBBox();\n    return this.positionRect(bbox, pos, options);\n  }\n\n  positionRect(rect, pos, options) {\n    const bbox = Rectangle.create(rect);\n\n    switch (pos) {\n      case 'center':\n        return this.positionPoint(bbox.getCenter(), '50%', '50%', options);\n\n      case 'top':\n        return this.positionPoint(bbox.getTopCenter(), '50%', 0, options);\n\n      case 'top-right':\n        return this.positionPoint(bbox.getTopRight(), '100%', 0, options);\n\n      case 'right':\n        return this.positionPoint(bbox.getRightMiddle(), '100%', '50%', options);\n\n      case 'bottom-right':\n        return this.positionPoint(bbox.getBottomRight(), '100%', '100%', options);\n\n      case 'bottom':\n        return this.positionPoint(bbox.getBottomCenter(), '50%', '100%', options);\n\n      case 'bottom-left':\n        return this.positionPoint(bbox.getBottomLeft(), 0, '100%', options);\n\n      case 'left':\n        return this.positionPoint(bbox.getLeftMiddle(), 0, '50%', options);\n\n      case 'top-left':\n        return this.positionPoint(bbox.getTopLeft(), 0, 0, options);\n\n      default:\n        return this;\n    }\n  }\n\n  positionPoint(point, x, y, options = {}) {\n    const {\n      padding: pad\n    } = options,\n          localOptions = __rest(options, [\"padding\"]);\n\n    const padding = NumberExt.normalizeSides(pad);\n    const clientRect = Rectangle.fromSize(this.getClientSize());\n    const targetRect = clientRect.clone().moveAndExpand({\n      x: padding.left,\n      y: padding.top,\n      width: -padding.right - padding.left,\n      height: -padding.top - padding.bottom\n    }); // eslint-disable-next-line\n\n    x = NumberExt.normalizePercentage(x, Math.max(0, targetRect.width));\n\n    if (x < 0) {\n      x = targetRect.width + x; // eslint-disable-line\n    } // eslint-disable-next-line\n\n\n    y = NumberExt.normalizePercentage(y, Math.max(0, targetRect.height));\n\n    if (y < 0) {\n      y = targetRect.height + y; // eslint-disable-line\n    }\n\n    const origin = targetRect.getTopLeft().translate(x, y);\n    const diff = clientRect.getCenter().diff(origin);\n    const scale = this.zoom();\n    const rawDiff = diff.scale(1 / scale, 1 / scale);\n    const result = Point.create(point).translate(rawDiff);\n    return this.centerPoint(result.x, result.y, localOptions);\n  }\n\n  zoom(factor, options) {\n    if (factor == null) {\n      return this.sx;\n    }\n\n    options = options || {}; // eslint-disable-line\n\n    let cx;\n    let cy;\n    const clientSize = this.getClientSize();\n    const center = this.clientToLocalPoint(clientSize.width / 2, clientSize.height / 2);\n    let sx = factor;\n    let sy = factor;\n\n    if (!options.absolute) {\n      sx += this.sx;\n      sy += this.sy;\n    }\n\n    if (options.scaleGrid) {\n      sx = Math.round(sx / options.scaleGrid) * options.scaleGrid;\n      sy = Math.round(sy / options.scaleGrid) * options.scaleGrid;\n    }\n\n    if (options.maxScale) {\n      sx = Math.min(options.maxScale, sx);\n      sy = Math.min(options.maxScale, sy);\n    }\n\n    if (options.minScale) {\n      sx = Math.max(options.minScale, sx);\n      sy = Math.max(options.minScale, sy);\n    }\n\n    sx = this.graph.transform.clampScale(sx);\n    sy = this.graph.transform.clampScale(sy);\n\n    if (options.center) {\n      const fx = sx / this.sx;\n      const fy = sy / this.sy;\n      cx = options.center.x - (options.center.x - center.x) / fx;\n      cy = options.center.y - (options.center.y - center.y) / fy;\n    } else {\n      cx = center.x;\n      cy = center.y;\n    }\n\n    this.beforeManipulation();\n    this.graph.transform.scale(sx, sy);\n    this.centerPoint(cx, cy);\n    this.afterManipulation();\n    return this;\n  }\n\n  zoomToRect(rect, options = {}) {\n    const area = Rectangle.create(rect);\n    const graph = this.graph;\n    options.contentArea = area;\n\n    if (options.viewportArea == null) {\n      options.viewportArea = {\n        x: graph.options.x,\n        y: graph.options.y,\n        width: this.$container.width(),\n        height: this.$container.height()\n      };\n    }\n\n    this.beforeManipulation();\n    graph.transform.scaleContentToFitImpl(options, false);\n    const center = area.getCenter();\n    this.centerPoint(center.x, center.y);\n    this.afterManipulation();\n    return this;\n  }\n\n  zoomToFit(options = {}) {\n    return this.zoomToRect(this.graph.getContentArea(options), options);\n  }\n\n  transitionToPoint(x, y, options) {\n    if (typeof x === 'object') {\n      options = y; // eslint-disable-line\n\n      y = x.y; // eslint-disable-line\n\n      x = x.x; // eslint-disable-line\n    } else {\n      y = y; // eslint-disable-line\n    }\n\n    if (options == null) {\n      options = {}; // eslint-disable-line\n    }\n\n    let transform;\n    let transformOrigin;\n    const scale = this.sx;\n    const targetScale = Math.max(options.scale || scale, 0.000001);\n    const clientSize = this.getClientSize();\n    const targetPoint = new Point(x, y);\n    const localPoint = this.clientToLocalPoint(clientSize.width / 2, clientSize.height / 2);\n\n    if (scale === targetScale) {\n      const translate = localPoint.diff(targetPoint).scale(scale, scale).round();\n      transform = `translate(${translate.x}px,${translate.y}px)`;\n    } else {\n      const delta = targetScale / (scale - targetScale) * targetPoint.distance(localPoint);\n      const range = localPoint.clone().move(targetPoint, delta);\n      const origin = this.localToBackgroundPoint(range).round();\n      transform = `scale(${targetScale / scale})`;\n      transformOrigin = `${origin.x}px ${origin.y}px`;\n    }\n\n    const onTransitionEnd = options.onTransitionEnd;\n    this.$container.addClass(Util.transitionClassName);\n    this.$content.off(Util.transitionEventName).on(Util.transitionEventName, e => {\n      this.syncTransition(targetScale, {\n        x: x,\n        y: y\n      });\n\n      if (typeof onTransitionEnd === 'function') {\n        FunctionExt.call(onTransitionEnd, this, e.originalEvent);\n      }\n    }).css({\n      transform,\n      transformOrigin,\n      transition: 'transform',\n      transitionDuration: options.duration || '1s',\n      transitionDelay: options.delay,\n      transitionTimingFunction: options.timing\n    });\n    return this;\n  }\n\n  syncTransition(scale, p) {\n    this.beforeManipulation();\n    this.graph.scale(scale);\n    this.removeTransition();\n    this.centerPoint(p.x, p.y);\n    this.afterManipulation();\n    return this;\n  }\n\n  removeTransition() {\n    this.$container.removeClass(Util.transitionClassName);\n    this.$content.off(Util.transitionEventName).css({\n      transform: '',\n      transformOrigin: '',\n      transition: '',\n      transitionDuration: '',\n      transitionDelay: '',\n      transitionTimingFunction: ''\n    });\n    return this;\n  }\n\n  transitionToRect(rectangle, options = {}) {\n    const rect = Rectangle.create(rectangle);\n    const maxScale = options.maxScale || Infinity;\n    const minScale = options.minScale || Number.MIN_VALUE;\n    const scaleGrid = options.scaleGrid || null;\n    const PIXEL_SIZE = options.visibility || 1;\n    const center = options.center ? Point.create(options.center) : rect.getCenter();\n    const clientSize = this.getClientSize();\n    const w = clientSize.width * PIXEL_SIZE;\n    const h = clientSize.height * PIXEL_SIZE;\n    let scale = new Rectangle(center.x - w / 2, center.y - h / 2, w, h).getMaxUniformScaleToFit(rect, center);\n    scale = Math.min(scale, maxScale);\n\n    if (scaleGrid) {\n      scale = Math.floor(scale / scaleGrid) * scaleGrid;\n    }\n\n    scale = Math.max(minScale, scale);\n    return this.transitionToPoint(center, Object.assign({\n      scale\n    }, options));\n  }\n\n  startPanning(evt) {\n    const e = this.normalizeEvent(evt);\n    this.clientX = e.clientX;\n    this.clientY = e.clientY;\n    this.trigger('pan:start', {\n      e\n    });\n    this.$(document.body).on({\n      'mousemove.panning touchmove.panning': this.pan.bind(this),\n      'mouseup.panning touchend.panning': this.stopPanning.bind(this),\n      'mouseleave.panning': this.stopPanning.bind(this)\n    });\n    this.$(window).on('mouseup.panning', this.stopPanning.bind(this));\n  }\n\n  pan(evt) {\n    const e = this.normalizeEvent(evt);\n    const dx = e.clientX - this.clientX;\n    const dy = e.clientY - this.clientY;\n    this.container.scrollTop -= dy;\n    this.container.scrollLeft -= dx;\n    this.clientX = e.clientX;\n    this.clientY = e.clientY;\n    this.trigger('panning', {\n      e\n    });\n  }\n\n  stopPanning(e) {\n    this.$(document.body).off('.panning');\n    this.$(window).off('.panning');\n    this.trigger('pan:stop', {\n      e\n    });\n  }\n\n  clientToLocalPoint(a, b) {\n    let x = typeof a === 'object' ? a.x : a;\n    let y = typeof a === 'object' ? a.y : b;\n    const ctm = this.graph.matrix();\n    x += this.container.scrollLeft - this.padding.left - ctm.e;\n    y += this.container.scrollTop - this.padding.top - ctm.f;\n    return new Point(x / ctm.a, y / ctm.d);\n  }\n\n  localToBackgroundPoint(x, y) {\n    const p = typeof x === 'object' ? Point.create(x) : new Point(x, y);\n    const ctm = this.graph.matrix();\n    const padding = this.padding;\n    return Dom.transformPoint(p, ctm).translate(padding.left, padding.top);\n  }\n\n  resize(width, height) {\n    let w = width != null ? width : this.container.offsetWidth;\n    let h = height != null ? height : this.container.offsetHeight;\n\n    if (typeof w === 'number') {\n      w = Math.round(w);\n    }\n\n    if (typeof h === 'number') {\n      h = Math.round(h);\n    }\n\n    this.options.width = w;\n    this.options.height = h;\n    this.$container.css({\n      width: w,\n      height: h\n    });\n    this.update();\n  }\n\n  getClientSize() {\n    if (this.cachedClientSize) {\n      return this.cachedClientSize;\n    }\n\n    return {\n      width: this.container.clientWidth,\n      height: this.container.clientHeight\n    };\n  }\n\n  autoScroll(clientX, clientY) {\n    const buffer = 10;\n    const container = this.container;\n    const rect = container.getBoundingClientRect();\n    let dx = 0;\n    let dy = 0;\n\n    if (clientX <= rect.left + buffer) {\n      dx = -buffer;\n    }\n\n    if (clientY <= rect.top + buffer) {\n      dy = -buffer;\n    }\n\n    if (clientX >= rect.right - buffer) {\n      dx = buffer;\n    }\n\n    if (clientY >= rect.bottom - buffer) {\n      dy = buffer;\n    }\n\n    if (dx !== 0) {\n      container.scrollLeft += dx;\n    }\n\n    if (dy !== 0) {\n      container.scrollTop += dy;\n    }\n\n    return {\n      scrollerX: dx,\n      scrollerY: dy\n    };\n  }\n\n  addPadding(left, right, top, bottom) {\n    let padding = this.getPadding();\n    this.padding = {\n      left: Math.round(padding.left + (left || 0)),\n      top: Math.round(padding.top + (top || 0)),\n      bottom: Math.round(padding.bottom + (bottom || 0)),\n      right: Math.round(padding.right + (right || 0))\n    };\n    padding = this.padding;\n    this.$content.css({\n      width: padding.left + this.graph.options.width + padding.right,\n      height: padding.top + this.graph.options.height + padding.bottom\n    });\n    const container = this.graph.container;\n    container.style.left = `${this.padding.left}px`;\n    container.style.top = `${this.padding.top}px`;\n    return this;\n  }\n\n  getPadding() {\n    const padding = this.options.padding;\n\n    if (typeof padding === 'function') {\n      return NumberExt.normalizeSides(FunctionExt.call(padding, this, this));\n    }\n\n    return NumberExt.normalizeSides(padding);\n  }\n  /**\n   * Returns the untransformed size and origin of the current viewport.\n   */\n\n\n  getVisibleArea() {\n    const ctm = this.graph.matrix();\n    const size = this.getClientSize();\n    const box = {\n      x: this.container.scrollLeft || 0,\n      y: this.container.scrollTop || 0,\n      width: size.width,\n      height: size.height\n    };\n    const area = Dom.transformRectangle(box, ctm.inverse());\n    area.x -= (this.padding.left || 0) / this.sx;\n    area.y -= (this.padding.top || 0) / this.sy;\n    return area;\n  }\n\n  isCellVisible(cell, options = {}) {\n    const bbox = cell.getBBox();\n    const area = this.getVisibleArea();\n    return options.strict ? area.containsRect(bbox) : area.isIntersectWithRect(bbox);\n  }\n\n  isPointVisible(point) {\n    return this.getVisibleArea().containsPoint(point);\n  }\n  /**\n   * Lock the current viewport by disabling user scrolling.\n   */\n\n\n  lock() {\n    this.$container.css('overflow', 'hidden');\n    return this;\n  }\n  /**\n   * Enable user scrolling if previously locked.\n   */\n\n\n  unlock() {\n    this.$container.css('overflow', 'scroll');\n    return this;\n  }\n\n  onRemove() {\n    this.stopListening();\n  }\n\n  dispose() {\n    this.$(this.graph.container).insertBefore(this.$container);\n    this.remove();\n  }\n\n}\n\n__decorate([View.dispose()], Scroller.prototype, \"dispose\", null);\n\n(function (Scroller) {\n  class Background extends BackgroundManager {\n    constructor(scroller) {\n      super(scroller.graph);\n      this.scroller = scroller;\n\n      if (scroller.options.background) {\n        this.draw(scroller.options.background);\n      }\n    }\n\n    get elem() {\n      return this.scroller.background;\n    }\n\n    init() {\n      this.graph.on('scale', this.update, this);\n      this.graph.on('translate', this.update, this);\n    }\n\n    updateBackgroundOptions(options) {\n      this.scroller.options.background = options;\n    }\n\n  }\n\n  Scroller.Background = Background;\n})(Scroller || (Scroller = {}));\n\nvar Util;\n\n(function (Util) {\n  Util.containerClass = 'graph-scroller';\n  Util.panningClass = `${Util.containerClass}-panning`;\n  Util.pannableClass = `${Util.containerClass}-pannable`;\n  Util.pagedClass = `${Util.containerClass}-paged`;\n  Util.contentClass = `${Util.containerClass}-content`;\n  Util.backgroundClass = `${Util.containerClass}-background`;\n  Util.transitionClassName = 'transition-in-progress';\n  Util.transitionEventName = 'transitionend.graph-scroller-transition';\n  Util.defaultOptions = {\n    padding() {\n      const size = this.getClientSize();\n      const minWidth = Math.max(this.options.minVisibleWidth || 0, 1) || 1;\n      const minHeight = Math.max(this.options.minVisibleHeight || 0, 1) || 1;\n      const left = Math.max(size.width - minWidth, 0);\n      const top = Math.max(size.height - minHeight, 0);\n      return {\n        left,\n        top,\n        right: left,\n        bottom: top\n      };\n    },\n\n    minVisibleWidth: 50,\n    minVisibleHeight: 50,\n    pageVisible: false,\n    pageBreak: false,\n    autoResize: true\n  };\n\n  function getOptions(options) {\n    const result = ObjectExt.merge({}, Util.defaultOptions, options);\n\n    if (result.pageWidth == null) {\n      result.pageWidth = options.graph.options.width;\n    }\n\n    if (result.pageHeight == null) {\n      result.pageHeight = options.graph.options.height;\n    }\n\n    return result;\n  }\n\n  Util.getOptions = getOptions;\n})(Util || (Util = {}));","map":{"version":3,"mappings":"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","names":["Platform","NumberExt","ObjectExt","Dom","FunctionExt","Point","Rectangle","View","Renderer","GraphView","BackgroundManager","Scroller","constructor","options","left","top","right","bottom","Util","getOptions","scale","graph","transform","getScale","sx","sy","width","height","container","document","createElement","$container","$","addClass","prefixClassName","containerClass","css","pageVisible","pagedClass","className","graphContainer","parentNode","insertBefore","style","getAttribute","obj","styles","split","forEach","item","section","trim","pair","length","Object","keys","key","content","$content","contentClass","background","$background","backgroundClass","append","view","grid","appendTo","startListening","update","backgroundManager","Background","autoResize","model","on","onScale","onResize","storeScrollPosition","restoreScrollPosition","onRenderDone","onUpdate","onBatchStop","delegateBackgroundEvents","stopListening","off","undelegateBackgroundEvents","enableAutoResize","disableAutoResize","isAsync","args","UPDATE_DELAYING_BATCHES","includes","name","events","evts","delegatedHandlers","reduce","memo","handler","indexOf","method","bind","onBackgroundEvent","delegateEvent","guarded","undelegateEvent","e","valid","target","type","apply","arguments","stats","priority","cachedCenterPoint","centerPoint","x","y","updatePageBreak","ox","oy","updateScale","autoResizeOptions","fitTocontentOptions","cachedScrollLeft","scrollLeft","cachedScrollTop","scrollTop","storeClientSize","cachedClientSize","clientWidth","clientHeight","restoreClientSize","beforeManipulation","IS_IE","IS_EDGE","afterManipulation","updatePageSize","pageWidth","pageHeight","pageBreak","removeChild","graphWidth","graphHeight","hasPageBreak","i","l","Math","floor","after","size","getClientSize","clientToLocalPoint","resizeOptions","call","gridWidth","gridHeight","allowNewOrigin","fitToContent","getFitToContentOptions","minWidth","minHeight","padding","contentArea","create","dx","dy","translate","resizeGraph","scrollbarPosition","prop","animation","animate","scrollToPoint","ctm","matrix","f","scrollToContent","center","getContentArea","getCenter","scrollToCell","cell","getBBox","optons","a","d","tx","ty","tWidth","tHeight","localOptions","visibleCenter","getVisibleArea","positionPoint","getPadding","clientSize","cx","cy","addPadding","max","result","undefined","centerContent","positionContent","centerCell","positionCell","pos","rect","positionRect","bbox","getTopCenter","getTopRight","getRightMiddle","getBottomRight","getBottomCenter","getBottomLeft","getLeftMiddle","getTopLeft","point","pad","normalizeSides","clientRect","fromSize","targetRect","clone","moveAndExpand","normalizePercentage","origin","diff","zoom","rawDiff","factor","absolute","scaleGrid","round","maxScale","min","minScale","clampScale","fx","fy","zoomToRect","area","viewportArea","scaleContentToFitImpl","zoomToFit","transitionToPoint","transformOrigin","targetScale","targetPoint","localPoint","delta","distance","range","move","localToBackgroundPoint","onTransitionEnd","transitionClassName","transitionEventName","syncTransition","originalEvent","transition","transitionDuration","duration","transitionDelay","delay","transitionTimingFunction","timing","p","removeTransition","removeClass","transitionToRect","rectangle","Infinity","Number","MIN_VALUE","PIXEL_SIZE","visibility","w","h","getMaxUniformScaleToFit","startPanning","evt","normalizeEvent","clientX","clientY","trigger","body","pan","stopPanning","window","b","transformPoint","resize","offsetWidth","offsetHeight","autoScroll","buffer","getBoundingClientRect","scrollerX","scrollerY","box","transformRectangle","inverse","isCellVisible","strict","containsRect","isIntersectWithRect","isPointVisible","containsPoint","lock","unlock","onRemove","dispose","remove","__decorate","scroller","draw","elem","init","updateBackgroundOptions","minVisibleWidth","minVisibleHeight","merge"],"sourceRoot":"","sources":["../../../src/addon/scroller/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}