{"ast":null,"code":"import { Dom, ObjectExt, StringExt } from '../util';\nimport { NodeTool, EdgeTool } from '../registry/tool';\nimport { View } from './view';\nimport { CellView } from './cell';\nimport { Markup } from './markup';\nexport class ToolsView extends View {\n  constructor(options = {}) {\n    super();\n    this.svgContainer = this.createContainer(true, options);\n    this.htmlContainer = this.createContainer(false, options);\n    this.config(options);\n  }\n\n  get name() {\n    return this.options.name;\n  }\n\n  get graph() {\n    return this.cellView.graph;\n  }\n\n  get cell() {\n    return this.cellView.cell;\n  }\n\n  get [Symbol.toStringTag]() {\n    return ToolsView.toStringTag;\n  }\n\n  createContainer(svg, options) {\n    const container = svg ? View.createElement('g', true) : View.createElement('div', false);\n    Dom.addClass(container, this.prefixClassName('cell-tools'));\n\n    if (options.className) {\n      Dom.addClass(container, options.className);\n    }\n\n    return container;\n  }\n\n  config(options) {\n    this.options = Object.assign(Object.assign({}, this.options), options);\n\n    if (!CellView.isCellView(options.view) || options.view === this.cellView) {\n      return this;\n    }\n\n    this.cellView = options.view;\n\n    if (this.cell.isEdge()) {\n      Dom.addClass(this.svgContainer, this.prefixClassName('edge-tools'));\n      Dom.addClass(this.htmlContainer, this.prefixClassName('edge-tools'));\n    } else if (this.cell.isNode()) {\n      Dom.addClass(this.svgContainer, this.prefixClassName('node-tools'));\n      Dom.addClass(this.htmlContainer, this.prefixClassName('node-tools'));\n    }\n\n    this.svgContainer.setAttribute('data-cell-id', this.cell.id);\n    this.htmlContainer.setAttribute('data-cell-id', this.cell.id);\n\n    if (this.name) {\n      this.svgContainer.setAttribute('data-tools-name', this.name);\n      this.htmlContainer.setAttribute('data-tools-name', this.name);\n    }\n\n    const tools = this.options.items;\n\n    if (!Array.isArray(tools)) {\n      return this;\n    }\n\n    this.tools = [];\n    const normalizedTools = [];\n    tools.forEach(meta => {\n      if (ToolsView.ToolItem.isToolItem(meta)) {\n        if (meta.name === 'vertices') {\n          normalizedTools.unshift(meta);\n        } else {\n          normalizedTools.push(meta);\n        }\n      } else {\n        const name = typeof meta === 'object' ? meta.name : meta;\n\n        if (name === 'vertices') {\n          normalizedTools.unshift(meta);\n        } else {\n          normalizedTools.push(meta);\n        }\n      }\n    });\n\n    for (let i = 0; i < normalizedTools.length; i += 1) {\n      const meta = normalizedTools[i];\n      let tool;\n\n      if (ToolsView.ToolItem.isToolItem(meta)) {\n        tool = meta;\n      } else {\n        const name = typeof meta === 'object' ? meta.name : meta;\n        const args = typeof meta === 'object' ? meta.args || {} : {};\n\n        if (name) {\n          if (this.cell.isNode()) {\n            const ctor = NodeTool.registry.get(name);\n\n            if (ctor) {\n              tool = new ctor(args); // eslint-disable-line\n            } else {\n              return NodeTool.registry.onNotFound(name);\n            }\n          } else if (this.cell.isEdge()) {\n            const ctor = EdgeTool.registry.get(name);\n\n            if (ctor) {\n              tool = new ctor(args); // eslint-disable-line\n            } else {\n              return EdgeTool.registry.onNotFound(name);\n            }\n          }\n        }\n      }\n\n      if (tool) {\n        tool.config(this.cellView, this);\n        tool.render();\n        const container = tool.options.isSVGElement !== false ? this.svgContainer : this.htmlContainer;\n        container.appendChild(tool.container);\n        this.tools.push(tool);\n      }\n    }\n\n    return this;\n  }\n\n  update(options = {}) {\n    const tools = this.tools;\n\n    if (tools) {\n      tools.forEach(tool => {\n        if (options.toolId !== tool.cid && tool.isVisible()) {\n          tool.update();\n        }\n      });\n    }\n\n    return this;\n  }\n\n  focus(focusedTool) {\n    const tools = this.tools;\n\n    if (tools) {\n      tools.forEach(tool => {\n        if (focusedTool === tool) {\n          tool.show();\n        } else {\n          tool.hide();\n        }\n      });\n    }\n\n    return this;\n  }\n\n  blur(blurredTool) {\n    const tools = this.tools;\n\n    if (tools) {\n      tools.forEach(tool => {\n        if (tool !== blurredTool && !tool.isVisible()) {\n          tool.show();\n          tool.update();\n        }\n      });\n    }\n\n    return this;\n  }\n\n  hide() {\n    return this.focus(null);\n  }\n\n  show() {\n    return this.blur(null);\n  }\n\n  remove() {\n    const tools = this.tools;\n\n    if (tools) {\n      tools.forEach(tool => tool.remove());\n      this.tools = null;\n    }\n\n    Dom.remove(this.svgContainer);\n    Dom.remove(this.htmlContainer);\n    return super.remove();\n  }\n\n  mount() {\n    const tools = this.tools;\n    const cellView = this.cellView;\n\n    if (cellView && tools) {\n      const hasSVG = tools.some(tool => tool.options.isSVGElement !== false);\n      const hasHTML = tools.some(tool => tool.options.isSVGElement === false);\n\n      if (hasSVG) {\n        const parent = this.options.local ? cellView.container : cellView.graph.view.decorator;\n        parent.appendChild(this.svgContainer);\n      }\n\n      if (hasHTML) {\n        this.graph.container.appendChild(this.htmlContainer);\n      }\n    }\n\n    return this;\n  }\n\n}\n\n(function (ToolsView) {\n  ToolsView.toStringTag = `X6.${ToolsView.name}`;\n\n  function isToolsView(instance) {\n    if (instance == null) {\n      return false;\n    }\n\n    if (instance instanceof ToolsView) {\n      return true;\n    }\n\n    const tag = instance[Symbol.toStringTag];\n    const view = instance;\n\n    if ((tag == null || tag === ToolsView.toStringTag) && view.graph != null && view.cell != null && typeof view.config === 'function' && typeof view.update === 'function' && typeof view.focus === 'function' && typeof view.blur === 'function' && typeof view.show === 'function' && typeof view.hide === 'function') {\n      return true;\n    }\n\n    return false;\n  }\n\n  ToolsView.isToolsView = isToolsView;\n})(ToolsView || (ToolsView = {}));\n\n(function (ToolsView) {\n  class ToolItem extends View {\n    constructor(options = {}) {\n      super();\n      this.visible = true;\n      this.options = this.getOptions(options);\n      this.container = View.createElement(this.options.tagName || 'g', this.options.isSVGElement !== false);\n      Dom.addClass(this.container, this.prefixClassName('cell-tool'));\n\n      if (typeof this.options.className === 'string') {\n        Dom.addClass(this.container, this.options.className);\n      }\n\n      this.init();\n    }\n\n    static getDefaults() {\n      return this.defaults;\n    }\n\n    static config(options) {\n      this.defaults = this.getOptions(options);\n    }\n\n    static getOptions(options) {\n      return ObjectExt.merge(ObjectExt.cloneDeep(this.getDefaults()), options);\n    }\n\n    get graph() {\n      return this.cellView.graph;\n    }\n\n    get cell() {\n      return this.cellView.cell;\n    }\n\n    get name() {\n      return this.options.name;\n    }\n\n    get [Symbol.toStringTag]() {\n      return ToolItem.toStringTag;\n    }\n\n    init() {}\n\n    getOptions(options) {\n      const ctor = this.constructor;\n      return ctor.getOptions(options);\n    }\n\n    delegateEvents() {\n      if (this.options.events) {\n        super.delegateEvents(this.options.events);\n      }\n\n      return this;\n    }\n\n    config(view, toolsView) {\n      this.cellView = view;\n      this.parent = toolsView;\n      this.stamp(this.container);\n\n      if (this.cell.isEdge()) {\n        Dom.addClass(this.container, this.prefixClassName('edge-tool'));\n      } else if (this.cell.isNode()) {\n        Dom.addClass(this.container, this.prefixClassName('node-tool'));\n      }\n\n      if (this.name) {\n        this.container.setAttribute('data-tool-name', this.name);\n      }\n\n      this.delegateEvents();\n      return this;\n    }\n\n    render() {\n      this.empty();\n      const markup = this.options.markup;\n\n      if (markup) {\n        const meta = Markup.isStringMarkup(markup) ? Markup.parseStringMarkup(markup) : Markup.parseJSONMarkup(markup);\n        this.container.appendChild(meta.fragment);\n        this.childNodes = meta.selectors;\n      }\n\n      this.onRender();\n      return this;\n    }\n\n    onRender() {}\n\n    update() {\n      return this;\n    }\n\n    stamp(elem = this.container) {\n      if (elem) {\n        elem.setAttribute('data-cell-id', this.cellView.cell.id);\n      }\n    }\n\n    show() {\n      this.container.style.display = '';\n      this.visible = true;\n      return this;\n    }\n\n    hide() {\n      this.container.style.display = 'none';\n      this.visible = false;\n      return this;\n    }\n\n    isVisible() {\n      return !!this.visible;\n    }\n\n    focus() {\n      const opacity = this.options.focusOpacity;\n\n      if (opacity != null && Number.isFinite(opacity)) {\n        this.container.style.opacity = `${opacity}`;\n      }\n\n      this.parent.focus(this);\n      return this;\n    }\n\n    blur() {\n      this.container.style.opacity = '';\n      this.parent.blur(this);\n      return this;\n    }\n\n    guard(evt) {\n      if (this.graph == null || this.cellView == null) {\n        return true;\n      }\n\n      return this.graph.view.guard(evt, this.cellView);\n    }\n\n  } // #region static\n\n\n  ToolItem.defaults = {\n    isSVGElement: true,\n    tagName: 'g'\n  };\n  ToolsView.ToolItem = ToolItem;\n\n  (function (ToolItem) {\n    let counter = 0;\n\n    function getClassName(name) {\n      if (name) {\n        return StringExt.pascalCase(name);\n      }\n\n      counter += 1;\n      return `CustomTool${counter}`;\n    }\n\n    function define(options) {\n      const tool = ObjectExt.createClass(getClassName(options.name), this);\n      tool.config(options);\n      return tool;\n    }\n\n    ToolItem.define = define;\n  })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n\n  (function (ToolItem) {\n    ToolItem.toStringTag = `X6.${ToolItem.name}`;\n\n    function isToolItem(instance) {\n      if (instance == null) {\n        return false;\n      }\n\n      if (instance instanceof ToolItem) {\n        return true;\n      }\n\n      const tag = instance[Symbol.toStringTag];\n      const view = instance;\n\n      if ((tag == null || tag === ToolItem.toStringTag) && view.graph != null && view.cell != null && typeof view.config === 'function' && typeof view.update === 'function' && typeof view.focus === 'function' && typeof view.blur === 'function' && typeof view.show === 'function' && typeof view.hide === 'function' && typeof view.isVisible === 'function') {\n        return true;\n      }\n\n      return false;\n    }\n\n    ToolItem.isToolItem = isToolItem;\n  })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n})(ToolsView || (ToolsView = {}));","map":{"version":3,"mappings":"AACA,SAASA,GAAT,EAAcC,SAAd,EAAyBC,SAAzB,QAA0C,SAA1C;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,kBAAnC;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,QAAT,QAAyB,QAAzB;AACA,SAASC,MAAT,QAAuB,UAAvB;AAEA,OAAM,MAAOC,SAAP,SAAyBH,IAAzB,CAA6B;EAuBjCI,YAAYC,UAA6B,EAAzC,EAA2C;IACzC;IACA,KAAKC,YAAL,GAAoB,KAAKC,eAAL,CAAqB,IAArB,EAA2BF,OAA3B,CAApB;IACA,KAAKG,aAAL,GAAqB,KAAKD,eAAL,CAAqB,KAArB,EAA4BF,OAA5B,CAArB;IACA,KAAKI,MAAL,CAAYJ,OAAZ;EACD;;EArBc,IAAJK,IAAI;IACb,OAAO,KAAKL,OAAL,CAAaK,IAApB;EACD;;EAEe,IAALC,KAAK;IACd,OAAO,KAAKC,QAAL,CAAcD,KAArB;EACD;;EAEc,IAAJE,IAAI;IACb,OAAO,KAAKD,QAAL,CAAcC,IAArB;EACD;;EAEgC,KAAlBC,MAAM,CAACC,WAAW,IAAC;IAChC,OAAOZ,SAAS,CAACY,WAAjB;EACD;;EASSR,eAAe,CAACS,GAAD,EAAeX,OAAf,EAAyC;IAChE,MAAMY,SAAS,GAAGD,GAAG,GACjBhB,IAAI,CAACkB,aAAL,CAAmB,GAAnB,EAAwB,IAAxB,CADiB,GAEjBlB,IAAI,CAACkB,aAAL,CAAmB,KAAnB,EAA0B,KAA1B,CAFJ;IAGAvB,GAAG,CAACwB,QAAJ,CAAaF,SAAb,EAAwB,KAAKG,eAAL,CAAqB,YAArB,CAAxB;;IACA,IAAIf,OAAO,CAACgB,SAAZ,EAAuB;MACrB1B,GAAG,CAACwB,QAAJ,CAAaF,SAAb,EAAwBZ,OAAO,CAACgB,SAAhC;IACD;;IACD,OAAOJ,SAAP;EACD;;EAEDR,MAAM,CAACJ,OAAD,EAAiC;IACrC,KAAKA,OAAL,GAAYiB,gCACP,KAAKjB,OADE,GAEPA,OAFO,CAAZ;;IAKA,IAAI,CAACJ,QAAQ,CAACsB,UAAT,CAAoBlB,OAAO,CAACmB,IAA5B,CAAD,IAAsCnB,OAAO,CAACmB,IAAR,KAAiB,KAAKZ,QAAhE,EAA0E;MACxE,OAAO,IAAP;IACD;;IAED,KAAKA,QAAL,GAAgBP,OAAO,CAACmB,IAAxB;;IAEA,IAAI,KAAKX,IAAL,CAAUY,MAAV,EAAJ,EAAwB;MACtB9B,GAAG,CAACwB,QAAJ,CAAa,KAAKb,YAAlB,EAAgC,KAAKc,eAAL,CAAqB,YAArB,CAAhC;MACAzB,GAAG,CAACwB,QAAJ,CAAa,KAAKX,aAAlB,EAAiC,KAAKY,eAAL,CAAqB,YAArB,CAAjC;IACD,CAHD,MAGO,IAAI,KAAKP,IAAL,CAAUa,MAAV,EAAJ,EAAwB;MAC7B/B,GAAG,CAACwB,QAAJ,CAAa,KAAKb,YAAlB,EAAgC,KAAKc,eAAL,CAAqB,YAArB,CAAhC;MACAzB,GAAG,CAACwB,QAAJ,CAAa,KAAKX,aAAlB,EAAiC,KAAKY,eAAL,CAAqB,YAArB,CAAjC;IACD;;IAED,KAAKd,YAAL,CAAkBqB,YAAlB,CAA+B,cAA/B,EAA+C,KAAKd,IAAL,CAAUe,EAAzD;IACA,KAAKpB,aAAL,CAAmBmB,YAAnB,CAAgC,cAAhC,EAAgD,KAAKd,IAAL,CAAUe,EAA1D;;IAEA,IAAI,KAAKlB,IAAT,EAAe;MACb,KAAKJ,YAAL,CAAkBqB,YAAlB,CAA+B,iBAA/B,EAAkD,KAAKjB,IAAvD;MACA,KAAKF,aAAL,CAAmBmB,YAAnB,CAAgC,iBAAhC,EAAmD,KAAKjB,IAAxD;IACD;;IAED,MAAMmB,KAAK,GAAG,KAAKxB,OAAL,CAAayB,KAA3B;;IACA,IAAI,CAACC,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAL,EAA2B;MACzB,OAAO,IAAP;IACD;;IAED,KAAKA,KAAL,GAAa,EAAb;IAEA,MAAMI,eAAe,GAAiB,EAAtC;IAEAJ,KAAK,CAACK,OAAN,CAAeC,IAAD,IAAS;MACrB,IAAIhC,SAAS,CAACiC,QAAV,CAAmBC,UAAnB,CAA8BF,IAA9B,CAAJ,EAAyC;QACvC,IAAIA,IAAI,CAACzB,IAAL,KAAc,UAAlB,EAA8B;UAC5BuB,eAAe,CAACK,OAAhB,CAAwBH,IAAxB;QACD,CAFD,MAEO;UACLF,eAAe,CAACM,IAAhB,CAAqBJ,IAArB;QACD;MACF,CAND,MAMO;QACL,MAAMzB,IAAI,GAAG,OAAOyB,IAAP,KAAgB,QAAhB,GAA2BA,IAAI,CAACzB,IAAhC,GAAuCyB,IAApD;;QACA,IAAIzB,IAAI,KAAK,UAAb,EAAyB;UACvBuB,eAAe,CAACK,OAAhB,CAAwBH,IAAxB;QACD,CAFD,MAEO;UACLF,eAAe,CAACM,IAAhB,CAAqBJ,IAArB;QACD;MACF;IACF,CAfD;;IAiBA,KAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,eAAe,CAACQ,MAApC,EAA4CD,CAAC,IAAI,CAAjD,EAAoD;MAClD,MAAML,IAAI,GAAGF,eAAe,CAACO,CAAD,CAA5B;MACA,IAAIE,IAAJ;;MAEA,IAAIvC,SAAS,CAACiC,QAAV,CAAmBC,UAAnB,CAA8BF,IAA9B,CAAJ,EAAyC;QACvCO,IAAI,GAAGP,IAAP;MACD,CAFD,MAEO;QACL,MAAMzB,IAAI,GAAG,OAAOyB,IAAP,KAAgB,QAAhB,GAA2BA,IAAI,CAACzB,IAAhC,GAAuCyB,IAApD;QACA,MAAMQ,IAAI,GAAG,OAAOR,IAAP,KAAgB,QAAhB,GAA2BA,IAAI,CAACQ,IAAL,IAAa,EAAxC,GAA6C,EAA1D;;QACA,IAAIjC,IAAJ,EAAU;UACR,IAAI,KAAKG,IAAL,CAAUa,MAAV,EAAJ,EAAwB;YACtB,MAAMkB,IAAI,GAAG9C,QAAQ,CAAC+C,QAAT,CAAkBC,GAAlB,CAAsBpC,IAAtB,CAAb;;YACA,IAAIkC,IAAJ,EAAU;cACRF,IAAI,GAAG,IAAIE,IAAJ,CAASD,IAAT,CAAP,CADQ,CACc;YACvB,CAFD,MAEO;cACL,OAAO7C,QAAQ,CAAC+C,QAAT,CAAkBE,UAAlB,CAA6BrC,IAA7B,CAAP;YACD;UACF,CAPD,MAOO,IAAI,KAAKG,IAAL,CAAUY,MAAV,EAAJ,EAAwB;YAC7B,MAAMmB,IAAI,GAAG7C,QAAQ,CAAC8C,QAAT,CAAkBC,GAAlB,CAAsBpC,IAAtB,CAAb;;YACA,IAAIkC,IAAJ,EAAU;cACRF,IAAI,GAAG,IAAIE,IAAJ,CAASD,IAAT,CAAP,CADQ,CACc;YACvB,CAFD,MAEO;cACL,OAAO5C,QAAQ,CAAC8C,QAAT,CAAkBE,UAAlB,CAA6BrC,IAA7B,CAAP;YACD;UACF;QACF;MACF;;MAED,IAAIgC,IAAJ,EAAU;QACRA,IAAI,CAACjC,MAAL,CAAY,KAAKG,QAAjB,EAA2B,IAA3B;QACA8B,IAAI,CAACM,MAAL;QACA,MAAM/B,SAAS,GACbyB,IAAI,CAACrC,OAAL,CAAa4C,YAAb,KAA8B,KAA9B,GACI,KAAK3C,YADT,GAEI,KAAKE,aAHX;QAIAS,SAAS,CAACiC,WAAV,CAAsBR,IAAI,CAACzB,SAA3B;QACA,KAAKY,KAAL,CAAWU,IAAX,CAAgBG,IAAhB;MACD;IACF;;IAED,OAAO,IAAP;EACD;;EAEDS,MAAM,CAAC9C,UAAmC,EAApC,EAAsC;IAC1C,MAAMwB,KAAK,GAAG,KAAKA,KAAnB;;IACA,IAAIA,KAAJ,EAAW;MACTA,KAAK,CAACK,OAAN,CAAeQ,IAAD,IAAS;QACrB,IAAIrC,OAAO,CAAC+C,MAAR,KAAmBV,IAAI,CAACW,GAAxB,IAA+BX,IAAI,CAACY,SAAL,EAAnC,EAAqD;UACnDZ,IAAI,CAACS,MAAL;QACD;MACF,CAJD;IAKD;;IACD,OAAO,IAAP;EACD;;EAEDI,KAAK,CAACC,WAAD,EAAuC;IAC1C,MAAM3B,KAAK,GAAG,KAAKA,KAAnB;;IACA,IAAIA,KAAJ,EAAW;MACTA,KAAK,CAACK,OAAN,CAAeQ,IAAD,IAAS;QACrB,IAAIc,WAAW,KAAKd,IAApB,EAA0B;UACxBA,IAAI,CAACe,IAAL;QACD,CAFD,MAEO;UACLf,IAAI,CAACgB,IAAL;QACD;MACF,CAND;IAOD;;IAED,OAAO,IAAP;EACD;;EAEDC,IAAI,CAACC,WAAD,EAAuC;IACzC,MAAM/B,KAAK,GAAG,KAAKA,KAAnB;;IACA,IAAIA,KAAJ,EAAW;MACTA,KAAK,CAACK,OAAN,CAAeQ,IAAD,IAAS;QACrB,IAAIA,IAAI,KAAKkB,WAAT,IAAwB,CAAClB,IAAI,CAACY,SAAL,EAA7B,EAA+C;UAC7CZ,IAAI,CAACe,IAAL;UACAf,IAAI,CAACS,MAAL;QACD;MACF,CALD;IAMD;;IAED,OAAO,IAAP;EACD;;EAEDO,IAAI;IACF,OAAO,KAAKH,KAAL,CAAW,IAAX,CAAP;EACD;;EAEDE,IAAI;IACF,OAAO,KAAKE,IAAL,CAAU,IAAV,CAAP;EACD;;EAEDE,MAAM;IACJ,MAAMhC,KAAK,GAAG,KAAKA,KAAnB;;IACA,IAAIA,KAAJ,EAAW;MACTA,KAAK,CAACK,OAAN,CAAeQ,IAAD,IAAUA,IAAI,CAACmB,MAAL,EAAxB;MACA,KAAKhC,KAAL,GAAa,IAAb;IACD;;IAEDlC,GAAG,CAACkE,MAAJ,CAAW,KAAKvD,YAAhB;IACAX,GAAG,CAACkE,MAAJ,CAAW,KAAKrD,aAAhB;IACA,OAAO,MAAMqD,MAAN,EAAP;EACD;;EAEDC,KAAK;IACH,MAAMjC,KAAK,GAAG,KAAKA,KAAnB;IACA,MAAMjB,QAAQ,GAAG,KAAKA,QAAtB;;IACA,IAAIA,QAAQ,IAAIiB,KAAhB,EAAuB;MACrB,MAAMkC,MAAM,GAAGlC,KAAK,CAACmC,IAAN,CAAYtB,IAAD,IAAUA,IAAI,CAACrC,OAAL,CAAa4C,YAAb,KAA8B,KAAnD,CAAf;MACA,MAAMgB,OAAO,GAAGpC,KAAK,CAACmC,IAAN,CAAYtB,IAAD,IAAUA,IAAI,CAACrC,OAAL,CAAa4C,YAAb,KAA8B,KAAnD,CAAhB;;MACA,IAAIc,MAAJ,EAAY;QACV,MAAMG,MAAM,GAAG,KAAK7D,OAAL,CAAa8D,KAAb,GACXvD,QAAQ,CAACK,SADE,GAEXL,QAAQ,CAACD,KAAT,CAAea,IAAf,CAAoB4C,SAFxB;QAGAF,MAAM,CAAChB,WAAP,CAAmB,KAAK5C,YAAxB;MACD;;MAED,IAAI2D,OAAJ,EAAa;QACX,KAAKtD,KAAL,CAAWM,SAAX,CAAqBiC,WAArB,CAAiC,KAAK1C,aAAtC;MACD;IACF;;IACD,OAAO,IAAP;EACD;;AAzNgC;;AAwPnC,WAAiBL,SAAjB,EAA0B;EACXA,wBAAc,MAAMA,SAAS,CAACO,IAAI,EAAlC;;EAEb,SAAgB2D,WAAhB,CAA4BC,QAA5B,EAAyC;IACvC,IAAIA,QAAQ,IAAI,IAAhB,EAAsB;MACpB,OAAO,KAAP;IACD;;IAED,IAAIA,QAAQ,YAAYnE,SAAxB,EAAmC;MACjC,OAAO,IAAP;IACD;;IAED,MAAMoE,GAAG,GAAGD,QAAQ,CAACxD,MAAM,CAACC,WAAR,CAApB;IACA,MAAMS,IAAI,GAAG8C,QAAb;;IAEA,IACE,CAACC,GAAG,IAAI,IAAP,IAAeA,GAAG,KAAKpE,qBAAxB,KACAqB,IAAI,CAACb,KAAL,IAAc,IADd,IAEAa,IAAI,CAACX,IAAL,IAAa,IAFb,IAGA,OAAOW,IAAI,CAACf,MAAZ,KAAuB,UAHvB,IAIA,OAAOe,IAAI,CAAC2B,MAAZ,KAAuB,UAJvB,IAKA,OAAO3B,IAAI,CAAC+B,KAAZ,KAAsB,UALtB,IAMA,OAAO/B,IAAI,CAACmC,IAAZ,KAAqB,UANrB,IAOA,OAAOnC,IAAI,CAACiC,IAAZ,KAAqB,UAPrB,IAQA,OAAOjC,IAAI,CAACkC,IAAZ,KAAqB,UATvB,EAUE;MACA,OAAO,IAAP;IACD;;IAED,OAAO,KAAP;EACD;;EA3BevD,wBAAWkE,WAAX;AA4BjB,CA/BD,EAAiBlE,SAAS,KAATA,SAAS,MAA1B;;AAiCA,WAAiBA,SAAjB,EAA0B;EACxB,MAAaiC,QAAb,SAGUpC,IAHV,CAGc;IAyDZI,YAAYC,UAA4B,EAAxC,EAA0C;MACxC;MArBQ,eAAU,IAAV;MAuBR,KAAKA,OAAL,GAAe,KAAKmE,UAAL,CAAgBnE,OAAhB,CAAf;MACA,KAAKY,SAAL,GAAiBjB,IAAI,CAACkB,aAAL,CACf,KAAKb,OAAL,CAAaoE,OAAb,IAAwB,GADT,EAEf,KAAKpE,OAAL,CAAa4C,YAAb,KAA8B,KAFf,CAAjB;MAKAtD,GAAG,CAACwB,QAAJ,CAAa,KAAKF,SAAlB,EAA6B,KAAKG,eAAL,CAAqB,WAArB,CAA7B;;MAEA,IAAI,OAAO,KAAKf,OAAL,CAAagB,SAApB,KAAkC,QAAtC,EAAgD;QAC9C1B,GAAG,CAACwB,QAAJ,CAAa,KAAKF,SAAlB,EAA6B,KAAKZ,OAAL,CAAagB,SAA1C;MACD;;MAED,KAAKqD,IAAL;IACD;;IAjEwB,OAAXC,WAAW;MACvB,OAAO,KAAKC,QAAZ;IACD;;IAEmB,OAANnE,MAAM,CAClBJ,OADkB,EACC;MAEnB,KAAKuE,QAAL,GAAgB,KAAKJ,UAAL,CAAgBnE,OAAhB,CAAhB;IACD;;IAEuB,OAAVmE,UAAU,CACtBnE,OADsB,EACH;MAEnB,OAAOT,SAAS,CAACiF,KAAV,CACLjF,SAAS,CAACkF,SAAV,CAAoB,KAAKH,WAAL,EAApB,CADK,EAELtE,OAFK,CAAP;IAID;;IAgBe,IAALM,KAAK;MACd,OAAO,KAAKC,QAAL,CAAcD,KAArB;IACD;;IAEc,IAAJE,IAAI;MACb,OAAO,KAAKD,QAAL,CAAcC,IAArB;IACD;;IAEc,IAAJH,IAAI;MACb,OAAO,KAAKL,OAAL,CAAaK,IAApB;IACD;;IAEgC,KAAlBI,MAAM,CAACC,WAAW,IAAC;MAChC,OAAOqB,QAAQ,CAACrB,WAAhB;IACD;;IAoBS2D,IAAI,IAAK;;IAETF,UAAU,CAACnE,OAAD,EAA0B;MAC5C,MAAMuC,IAAI,GAAG,KAAKxC,WAAlB;MACA,OAAOwC,IAAI,CAAC4B,UAAL,CAAgBnE,OAAhB,CAAP;IACD;;IAED0E,cAAc;MACZ,IAAI,KAAK1E,OAAL,CAAa2E,MAAjB,EAAyB;QACvB,MAAMD,cAAN,CAAqB,KAAK1E,OAAL,CAAa2E,MAAlC;MACD;;MACD,OAAO,IAAP;IACD;;IAEDvE,MAAM,CAACe,IAAD,EAAiByD,SAAjB,EAAqC;MACzC,KAAKrE,QAAL,GAAgBY,IAAhB;MACA,KAAK0C,MAAL,GAAce,SAAd;MACA,KAAKC,KAAL,CAAW,KAAKjE,SAAhB;;MAEA,IAAI,KAAKJ,IAAL,CAAUY,MAAV,EAAJ,EAAwB;QACtB9B,GAAG,CAACwB,QAAJ,CAAa,KAAKF,SAAlB,EAA6B,KAAKG,eAAL,CAAqB,WAArB,CAA7B;MACD,CAFD,MAEO,IAAI,KAAKP,IAAL,CAAUa,MAAV,EAAJ,EAAwB;QAC7B/B,GAAG,CAACwB,QAAJ,CAAa,KAAKF,SAAlB,EAA6B,KAAKG,eAAL,CAAqB,WAArB,CAA7B;MACD;;MAED,IAAI,KAAKV,IAAT,EAAe;QACb,KAAKO,SAAL,CAAeU,YAAf,CAA4B,gBAA5B,EAA8C,KAAKjB,IAAnD;MACD;;MAED,KAAKqE,cAAL;MAEA,OAAO,IAAP;IACD;;IAED/B,MAAM;MACJ,KAAKmC,KAAL;MAEA,MAAMC,MAAM,GAAG,KAAK/E,OAAL,CAAa+E,MAA5B;;MACA,IAAIA,MAAJ,EAAY;QACV,MAAMjD,IAAI,GAAGjC,MAAM,CAACmF,cAAP,CAAsBD,MAAtB,IACTlF,MAAM,CAACoF,iBAAP,CAAyBF,MAAzB,CADS,GAETlF,MAAM,CAACqF,eAAP,CAAuBH,MAAvB,CAFJ;QAGA,KAAKnE,SAAL,CAAeiC,WAAf,CAA2Bf,IAAI,CAACqD,QAAhC;QACA,KAAKC,UAAL,GAAkBtD,IAAI,CAACuD,SAAvB;MACD;;MAED,KAAKC,QAAL;MACA,OAAO,IAAP;IACD;;IAESA,QAAQ,IAAK;;IAEvBxC,MAAM;MACJ,OAAO,IAAP;IACD;;IAES+B,KAAK,CAACU,OAAgB,KAAK3E,SAAtB,EAA+B;MAC5C,IAAI2E,IAAJ,EAAU;QACRA,IAAI,CAACjE,YAAL,CAAkB,cAAlB,EAAkC,KAAKf,QAAL,CAAcC,IAAd,CAAmBe,EAArD;MACD;IACF;;IAED6B,IAAI;MACF,KAAKxC,SAAL,CAAe4E,KAAf,CAAqBC,OAArB,GAA+B,EAA/B;MACA,KAAKC,OAAL,GAAe,IAAf;MACA,OAAO,IAAP;IACD;;IAEDrC,IAAI;MACF,KAAKzC,SAAL,CAAe4E,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;MACA,KAAKC,OAAL,GAAe,KAAf;MACA,OAAO,IAAP;IACD;;IAEDzC,SAAS;MACP,OAAO,CAAC,CAAC,KAAKyC,OAAd;IACD;;IAEDxC,KAAK;MACH,MAAMyC,OAAO,GAAG,KAAK3F,OAAL,CAAa4F,YAA7B;;MACA,IAAID,OAAO,IAAI,IAAX,IAAmBE,MAAM,CAACC,QAAP,CAAgBH,OAAhB,CAAvB,EAAiD;QAC/C,KAAK/E,SAAL,CAAe4E,KAAf,CAAqBG,OAArB,GAA+B,GAAGA,OAAO,EAAzC;MACD;;MACD,KAAK9B,MAAL,CAAYX,KAAZ,CAAkB,IAAlB;MACA,OAAO,IAAP;IACD;;IAEDI,IAAI;MACF,KAAK1C,SAAL,CAAe4E,KAAf,CAAqBG,OAArB,GAA+B,EAA/B;MACA,KAAK9B,MAAL,CAAYP,IAAZ,CAAiB,IAAjB;MACA,OAAO,IAAP;IACD;;IAESyC,KAAK,CAACC,GAAD,EAA2B;MACxC,IAAI,KAAK1F,KAAL,IAAc,IAAd,IAAsB,KAAKC,QAAL,IAAiB,IAA3C,EAAiD;QAC/C,OAAO,IAAP;MACD;;MAED,OAAO,KAAKD,KAAL,CAAWa,IAAX,CAAgB4E,KAAhB,CAAsBC,GAAtB,EAA2B,KAAKzF,QAAhC,CAAP;IACD;;EA9KW,CAJU,CAKtB;;;EAEiBwB,oBAA6B;IAC5Ca,YAAY,EAAE,IAD8B;IAE5CwB,OAAO,EAAE;EAFmC,CAA7B;EANNtE,qBAAQiC,QAAR;;EAiMb,WAAiBA,QAAjB,EAAyB;IAKvB,IAAIkE,OAAO,GAAG,CAAd;;IACA,SAASC,YAAT,CAAsB7F,IAAtB,EAAmC;MACjC,IAAIA,IAAJ,EAAU;QACR,OAAOb,SAAS,CAAC2G,UAAV,CAAqB9F,IAArB,CAAP;MACD;;MACD4F,OAAO,IAAI,CAAX;MACA,OAAO,aAAaA,OAAO,EAA3B;IACD;;IAED,SAAgBG,MAAhB,CAA0CpG,OAA1C,EAAoD;MAClD,MAAMqC,IAAI,GAAG9C,SAAS,CAAC8G,WAAV,CACXH,YAAY,CAAClG,OAAO,CAACK,IAAT,CADD,EAEX,IAFW,CAAb;MAKAgC,IAAI,CAACjC,MAAL,CAAYJ,OAAZ;MACA,OAAOqC,IAAP;IACD;;IAReN,kBAAMqE,MAAN;EASjB,CAvBD,EAAiBrE,QAAQ,GAARjC,4CAAQ,EAAR,CAAjB;;EAyBA,WAAiBiC,QAAjB,EAAyB;IACVA,uBAAc,MAAMA,QAAQ,CAAC1B,IAAI,EAAjC;;IAEb,SAAgB2B,UAAhB,CAA2BiC,QAA3B,EAAwC;MACtC,IAAIA,QAAQ,IAAI,IAAhB,EAAsB;QACpB,OAAO,KAAP;MACD;;MAED,IAAIA,QAAQ,YAAYlC,QAAxB,EAAkC;QAChC,OAAO,IAAP;MACD;;MAED,MAAMmC,GAAG,GAAGD,QAAQ,CAACxD,MAAM,CAACC,WAAR,CAApB;MACA,MAAMS,IAAI,GAAG8C,QAAb;;MAEA,IACE,CAACC,GAAG,IAAI,IAAP,IAAeA,GAAG,KAAKnC,oBAAxB,KACAZ,IAAI,CAACb,KAAL,IAAc,IADd,IAEAa,IAAI,CAACX,IAAL,IAAa,IAFb,IAGA,OAAOW,IAAI,CAACf,MAAZ,KAAuB,UAHvB,IAIA,OAAOe,IAAI,CAAC2B,MAAZ,KAAuB,UAJvB,IAKA,OAAO3B,IAAI,CAAC+B,KAAZ,KAAsB,UALtB,IAMA,OAAO/B,IAAI,CAACmC,IAAZ,KAAqB,UANrB,IAOA,OAAOnC,IAAI,CAACiC,IAAZ,KAAqB,UAPrB,IAQA,OAAOjC,IAAI,CAACkC,IAAZ,KAAqB,UARrB,IASA,OAAOlC,IAAI,CAAC8B,SAAZ,KAA0B,UAV5B,EAWE;QACA,OAAO,IAAP;MACD;;MAED,OAAO,KAAP;IACD;;IA5BelB,sBAAUC,UAAV;EA6BjB,CAhCD,EAAiBD,QAAQ,GAARjC,4CAAQ,EAAR,CAAjB;AAiCD,CA5PD,EAAiBA,SAAS,KAATA,SAAS,MAA1B","names":["Dom","ObjectExt","StringExt","NodeTool","EdgeTool","View","CellView","Markup","ToolsView","constructor","options","svgContainer","createContainer","htmlContainer","config","name","graph","cellView","cell","Symbol","toStringTag","svg","container","createElement","addClass","prefixClassName","className","Object","isCellView","view","isEdge","isNode","setAttribute","id","tools","items","Array","isArray","normalizedTools","forEach","meta","ToolItem","isToolItem","unshift","push","i","length","tool","args","ctor","registry","get","onNotFound","render","isSVGElement","appendChild","update","toolId","cid","isVisible","focus","focusedTool","show","hide","blur","blurredTool","remove","mount","hasSVG","some","hasHTML","parent","local","decorator","isToolsView","instance","tag","getOptions","tagName","init","getDefaults","defaults","merge","cloneDeep","delegateEvents","events","toolsView","stamp","empty","markup","isStringMarkup","parseStringMarkup","parseJSONMarkup","fragment","childNodes","selectors","onRender","elem","style","display","visible","opacity","focusOpacity","Number","isFinite","guard","evt","counter","getClassName","pascalCase","define","createClass"],"sourceRoot":"","sources":["../../src/view/tool.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}