{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar addBorderSegments = function (g) {\n  var _a;\n\n  var dfs = function (v) {\n    var children = g.children(v);\n    var node = g.node(v);\n\n    if (children === null || children === void 0 ? void 0 : children.length) {\n      children.forEach(function (child) {\n        return dfs(child);\n      });\n    }\n\n    if (node.hasOwnProperty(\"minRank\")) {\n      node.borderLeft = [];\n      node.borderRight = [];\n\n      for (var rank = node.minRank, maxRank = node.maxRank + 1; rank < maxRank; rank += 1) {\n        addBorderNode(g, \"borderLeft\", \"_bl\", v, node, rank);\n        addBorderNode(g, \"borderRight\", \"_br\", v, node, rank);\n      }\n    }\n  };\n\n  (_a = g.children()) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n    return dfs(child);\n  });\n};\n\nvar addBorderNode = function (g, prop, prefix, sg, sgNode, rank) {\n  var label = {\n    rank: rank,\n    borderType: prop,\n    width: 0,\n    height: 0\n  };\n  var prev = sgNode[prop][rank - 1];\n  var curr = (0, util_1.addDummyNode)(g, \"border\", label, prefix);\n  sgNode[prop][rank] = curr;\n  g.setParent(curr, sg);\n\n  if (prev) {\n    g.setEdge(prev, curr, {\n      weight: 1\n    });\n  }\n};\n\nexports.default = addBorderSegments;","map":{"version":3,"mappings":";;;;;;AACA;;AAEA,IAAMA,iBAAiB,GAAG,UAACC,CAAD,EAAS;;;EACjC,IAAMC,GAAG,GAAG,UAACC,CAAD,EAAU;IACpB,IAAMC,QAAQ,GAAGH,CAAC,CAACG,QAAF,CAAWD,CAAX,CAAjB;IACA,IAAME,IAAI,GAAGJ,CAAC,CAACI,IAAF,CAAOF,CAAP,CAAb;;IACA,IAAIC,QAAQ,SAAR,YAAQ,WAAR,GAAQ,MAAR,WAAQ,CAAEE,MAAd,EAAsB;MACpBF,QAAQ,CAACG,OAAT,CAAiB,UAACC,KAAD,EAAM;QAAK,UAAG,CAACA,KAAD,CAAH;MAAU,CAAtC;IACD;;IAED,IAAIH,IAAI,CAACI,cAAL,CAAoB,SAApB,CAAJ,EAAoC;MAClCJ,IAAI,CAACK,UAAL,GAAkB,EAAlB;MACAL,IAAI,CAACM,WAAL,GAAmB,EAAnB;;MACA,KACE,IAAIC,IAAI,GAAGP,IAAI,CAACQ,OAAhB,EAA0BC,OAAO,GAAGT,IAAI,CAACS,OAAL,GAAgB,CADtD,EAEEF,IAAI,GAAGE,OAFT,EAGEF,IAAI,IAAI,CAHV,EAIE;QACAG,aAAa,CAACd,CAAD,EAAI,YAAJ,EAAkB,KAAlB,EAAyBE,CAAzB,EAA4BE,IAA5B,EAAkCO,IAAlC,CAAb;QACAG,aAAa,CAACd,CAAD,EAAI,aAAJ,EAAmB,KAAnB,EAA0BE,CAA1B,EAA6BE,IAA7B,EAAmCO,IAAnC,CAAb;MACD;IACF;EACF,CAnBD;;EAqBA,OAAC,CAACR,QAAF,QAAY,IAAZ,IAAYY,aAAZ,GAAY,MAAZ,GAAYA,GAAET,OAAF,CAAU,UAACC,KAAD,EAAM;IAAK,UAAG,CAACA,KAAD,CAAH;EAAU,CAA/B,CAAZ;AACD,CAvBD;;AAyBA,IAAMO,aAAa,GAAG,UACpBd,CADoB,EAEpBgB,IAFoB,EAGpBC,MAHoB,EAIpBC,EAJoB,EAKpBC,MALoB,EAMpBR,IANoB,EAMR;EAEZ,IAAMS,KAAK,GAAG;IAAET,IAAI,MAAN;IAAQU,UAAU,EAAEL,IAApB;IAA0BM,KAAK,EAAE,CAAjC;IAAoCC,MAAM,EAAE;EAA5C,CAAd;EACA,IAAMC,IAAI,GAAGL,MAAM,CAACH,IAAD,CAAN,CAAaL,IAAI,GAAG,CAApB,CAAb;EACA,IAAMc,IAAI,GAAG,yBAAazB,CAAb,EAAgB,QAAhB,EAA0BoB,KAA1B,EAAiCH,MAAjC,CAAb;EACAE,MAAM,CAACH,IAAD,CAAN,CAAaL,IAAb,IAAqBc,IAArB;EACAzB,CAAC,CAAC0B,SAAF,CAAYD,IAAZ,EAAkBP,EAAlB;;EACA,IAAIM,IAAJ,EAAU;IACRxB,CAAC,CAAC2B,OAAF,CAAUH,IAAV,EAAgBC,IAAhB,EAAsB;MAAEG,MAAM,EAAE;IAAV,CAAtB;EACD;AACF,CAhBD;;AAkBAC,kBAAe9B,iBAAf","names":["addBorderSegments","g","dfs","v","children","node","length","forEach","child","hasOwnProperty","borderLeft","borderRight","rank","minRank","maxRank","addBorderNode","_a","prop","prefix","sg","sgNode","label","borderType","width","height","prev","curr","setParent","setEdge","weight","exports"],"sourceRoot":"","sources":["../../../../src/layout/dagre/src/add-border-segments.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}