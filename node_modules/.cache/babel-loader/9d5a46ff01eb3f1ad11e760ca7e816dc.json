{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { __assign } from \"tslib\";\nimport { isNumber, isString } from '@antv/util';\nimport { formatPadding } from '../../util/base';\nimport { applyMatrix, invertMatrix, lerpArray } from '../../util/math';\nimport { transform } from '@antv/matrix-util/lib/ext';\nimport { getAnimateCfgWithCallback } from '../../util/graphic';\n\nvar ViewController =\n/** @class */\nfunction () {\n  function ViewController(graph) {\n    this.destroyed = false;\n    this.graph = graph;\n    this.destroyed = false;\n  } // get view center coordinate\n\n\n  ViewController.prototype.getViewCenter = function () {\n    var padding = this.getFormatPadding();\n    var graph = this.graph;\n    var width = this.graph.get('width');\n    var height = graph.get('height');\n    return {\n      x: (width - padding[1] - padding[3]) / 2 + padding[3],\n      y: (height - padding[0] - padding[2]) / 2 + padding[0]\n    };\n  };\n\n  ViewController.prototype.fitCenter = function (animate, animateCfg) {\n    var graph = this.graph;\n    var group = graph.get('group');\n    group.resetMatrix();\n    var bbox = group.getCanvasBBox();\n    if (bbox.width === 0 || bbox.height === 0) return;\n    var viewCenter = this.getViewCenter();\n    var groupCenter = {\n      x: bbox.x + bbox.width / 2,\n      y: bbox.y + bbox.height / 2\n    };\n    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y, animate, animateCfg);\n  };\n\n  ViewController.prototype.animatedFitView = function (group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio) {\n    var graph = this.graph;\n    animateCfg = animateCfg ? animateCfg : {\n      duration: 500,\n      easing: 'easeCubic'\n    }; // start from the default matrix\n\n    var matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1]; // Translate\n\n    var vx = bbox.x + viewCenter.x - groupCenter.x - bbox.minX;\n    var vy = bbox.y + viewCenter.y - groupCenter.y - bbox.minY;\n    var translatedMatrix = transform(matrix, [['t', vx, vy]]); // Zoom\n\n    var minZoom = graph.get('minZoom');\n    var maxZoom = graph.get('maxZoom');\n    var realRatio = ratio;\n\n    if (minZoom && ratio < minZoom) {\n      realRatio = minZoom;\n      console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph minzoom has been used instead');\n    } else if (maxZoom && ratio > maxZoom) {\n      realRatio = minZoom;\n      console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph maxzoom has been used instead');\n    }\n\n    var zoomedMatrix = transform(translatedMatrix, [['t', -viewCenter.x, -viewCenter.y], ['s', realRatio, realRatio], ['t', viewCenter.x, viewCenter.y]]); // Animation\n\n    var animationConfig = getAnimateCfgWithCallback({\n      animateCfg: animateCfg,\n      callback: function callback() {\n        graph.emit('viewportchange', {\n          action: 'translate',\n          matrix: translatedMatrix\n        });\n        graph.emit('viewportchange', {\n          action: 'zoom',\n          matrix: zoomedMatrix\n        });\n      }\n    });\n    group.animate(function (ratio) {\n      return {\n        matrix: lerpArray(startMatrix, zoomedMatrix, ratio)\n      };\n    }, animationConfig);\n  }; // fit view graph\n\n\n  ViewController.prototype.fitView = function (animate, animateCfg) {\n    var graph = this.graph;\n    var padding = this.getFormatPadding();\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var group = graph.get('group');\n    var startMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    group.resetMatrix();\n    var bbox = group.getCanvasBBox();\n    if (bbox.width === 0 || bbox.height === 0) return;\n    var viewCenter = this.getViewCenter();\n    var groupCenter = {\n      x: bbox.x + bbox.width / 2,\n      y: bbox.y + bbox.height / 2\n    }; // Compute ratio\n\n    var w = (width - padding[1] - padding[3]) / bbox.width;\n    var h = (height - padding[0] - padding[2]) / bbox.height;\n    var ratio = w;\n\n    if (w > h) {\n      ratio = h;\n    }\n\n    if (animate) {\n      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio);\n    } else {\n      graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);\n\n      if (!graph.zoom(ratio, viewCenter)) {\n        console.warn('zoom failed, ratio out of range, ratio: %f', ratio);\n      }\n    }\n  }; // fit view graph by rule\n\n\n  ViewController.prototype.fitViewByRules = function (rules, animate, animateCfg) {\n    var _a = rules.onlyOutOfViewPort,\n        onlyOutOfViewPort = _a === void 0 ? false : _a,\n        _b = rules.direction,\n        direction = _b === void 0 ? 'both' : _b,\n        _c = rules.ratioRule,\n        ratioRule = _c === void 0 ? 'min' : _c;\n    var graph = this.graph;\n    var padding = this.getFormatPadding();\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var group = graph.get('group');\n    var startMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    group.resetMatrix();\n    var bbox = group.getCanvasBBox();\n    if (bbox.width === 0 || bbox.height === 0) return;\n    var viewCenter = this.getViewCenter();\n    var groupCenter = {\n      x: bbox.x + bbox.width / 2,\n      y: bbox.y + bbox.height / 2\n    }; // Compute ratio\n\n    var wRatio = (width - padding[1] - padding[3]) / bbox.width;\n    var hRatio = (height - padding[0] - padding[2]) / bbox.height;\n    var ratio;\n\n    if (direction === 'x') {\n      ratio = wRatio;\n    } else if (direction === 'y') {\n      ratio = hRatio;\n    } else {\n      // ratioRule\n      ratio = ratioRule === 'max' ? Math.max(wRatio, hRatio) : Math.min(wRatio, hRatio);\n    } // 如果设置了仅对超出视口宽高的场景进行fitview，则没超出的场景zoom取1\n\n\n    if (onlyOutOfViewPort) {\n      ratio = ratio < 1 ? ratio : 1;\n    }\n\n    if (animate) {\n      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio);\n    } else {\n      var initZoomRatio = graph.getZoom();\n      var endZoom = initZoomRatio * ratio;\n      var minZoom = graph.get('minZoom'); // 如果zoom小于最小zoom, 则以最小zoom为准\n\n      if (endZoom < minZoom) {\n        endZoom = minZoom;\n        console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph minzoom has been used instead');\n      }\n\n      graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);\n      graph.zoomTo(endZoom, viewCenter);\n    }\n  };\n\n  ViewController.prototype.getFormatPadding = function () {\n    var padding = this.graph.get('fitViewPadding');\n    return formatPadding(padding);\n  };\n\n  ViewController.prototype.focusPoint = function (point, animate, animateCfg) {\n    var _this = this;\n\n    var viewCenter = this.getViewCenter();\n    var modelCenter = this.getPointByCanvas(viewCenter.x, viewCenter.y);\n    var viewportMatrix = this.graph.get('group').getMatrix();\n    if (!viewportMatrix) viewportMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n\n    if (animate) {\n      var dx_1 = (modelCenter.x - point.x) * viewportMatrix[0];\n      var dy_1 = (modelCenter.y - point.y) * viewportMatrix[4];\n      var lastX_1 = 0;\n      var lastY_1 = 0;\n      var newX_1 = 0;\n      var newY_1 = 0; // 动画每次平移一点，直到目标位置\n\n      this.graph.get('canvas').animate(function (ratio) {\n        newX_1 = dx_1 * ratio;\n        newY_1 = dy_1 * ratio;\n\n        _this.graph.translate(newX_1 - lastX_1, newY_1 - lastY_1);\n\n        lastX_1 = newX_1;\n        lastY_1 = newY_1;\n      }, __assign({}, animateCfg));\n    } else {\n      this.graph.translate((modelCenter.x - point.x) * viewportMatrix[0], (modelCenter.y - point.y) * viewportMatrix[4]);\n    }\n  };\n  /**\n   * 将 Canvas 坐标转成视口坐标\n   * @param canvasX canvas x 坐标\n   * @param canvasY canvas y 坐标\n   */\n\n\n  ViewController.prototype.getPointByCanvas = function (canvasX, canvasY) {\n    var viewportMatrix = this.graph.get('group').getMatrix();\n\n    if (!viewportMatrix) {\n      viewportMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    }\n\n    var point = invertMatrix({\n      x: canvasX,\n      y: canvasY\n    }, viewportMatrix);\n    return point;\n  };\n  /**\n   * 将页面坐标转成视口坐标\n   * @param clientX 页面 x 坐标\n   * @param clientY 页面 y 坐标\n   */\n\n\n  ViewController.prototype.getPointByClient = function (clientX, clientY) {\n    var canvas = this.graph.get('canvas');\n    var canvasPoint = canvas.getPointByClient(clientX, clientY);\n    return this.getPointByCanvas(canvasPoint.x, canvasPoint.y);\n  };\n  /**\n   * 将视口坐标转成页面坐标\n   * @param x 视口 x 坐标\n   * @param y 视口 y 坐标\n   */\n\n\n  ViewController.prototype.getClientByPoint = function (x, y) {\n    var canvas = this.graph.get('canvas');\n    var canvasPoint = this.getCanvasByPoint(x, y);\n    var point = canvas.getClientByPoint(canvasPoint.x, canvasPoint.y);\n    return {\n      x: point.x,\n      y: point.y\n    };\n  };\n  /**\n   * 将视口坐标转成 Canvas 坐标\n   * @param x 视口 x 坐标\n   * @param y 视口 y 坐标\n   */\n\n\n  ViewController.prototype.getCanvasByPoint = function (x, y) {\n    var viewportMatrix = this.graph.get('group').getMatrix();\n\n    if (!viewportMatrix) {\n      viewportMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    }\n\n    return applyMatrix({\n      x: x,\n      y: y\n    }, viewportMatrix);\n  };\n  /**\n   * 将元素移动到画布中心\n   * @param item Item 实例或 id\n   * @param {boolean} animate 是否带有动画地移动\n   * @param {GraphAnimateConfig} animateCfg 若带有动画，动画的配置项\n   */\n\n\n  ViewController.prototype.focus = function (item, animate, animateCfg) {\n    if (isString(item)) {\n      item = this.graph.findById(item);\n    }\n\n    if (item) {\n      var x = 0,\n          y = 0;\n\n      if (item.getType && item.getType() === 'edge') {\n        var sourceMatrix = item.getSource().get('group').getMatrix();\n        var targetMatrix = item.getTarget().get('group').getMatrix();\n\n        if (sourceMatrix && targetMatrix) {\n          x = (sourceMatrix[6] + targetMatrix[6]) / 2;\n          y = (sourceMatrix[7] + targetMatrix[7]) / 2;\n        } else if (sourceMatrix || targetMatrix) {\n          x = sourceMatrix ? sourceMatrix[6] : targetMatrix[6];\n          y = sourceMatrix ? sourceMatrix[7] : targetMatrix[7];\n        }\n      } else {\n        var group = item.get('group');\n        var matrix = group.getMatrix();\n        if (!matrix) matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n        x = matrix[6];\n        y = matrix[7];\n      } // 用实际位置而不是model中的x,y,防止由于拖拽等的交互导致model的x,y并不是当前的x,y\n\n\n      this.focusPoint({\n        x: x,\n        y: y\n      }, animate, animateCfg);\n    }\n  };\n  /**\n   * 改变 canvas 画布的宽度和高度\n   * @param width canvas 宽度\n   * @param height canvas 高度\n   */\n\n\n  ViewController.prototype.changeSize = function (width, height) {\n    var graph = this.graph;\n\n    if (!isNumber(width) || !isNumber(height)) {\n      throw Error('invalid canvas width & height, please make sure width & height type is number');\n    }\n\n    graph.set({\n      width: width,\n      height: height\n    });\n    var canvas = graph.get('canvas');\n    canvas.changeSize(width, height); // change the size of grid plugin if it exists on graph\n\n    var plugins = graph.get('plugins');\n    plugins.forEach(function (plugin) {\n      if (plugin.get('gridContainer')) {\n        // 网格定位信息初始化\n        plugin.positionInit();\n      }\n    });\n  };\n\n  ViewController.prototype.destroy = function () {\n    this.graph = null;\n    this.destroyed = false;\n  };\n\n  return ViewController;\n}();\n\nexport default ViewController;","map":{"version":3,"names":["__assign","isNumber","isString","formatPadding","applyMatrix","invertMatrix","lerpArray","transform","getAnimateCfgWithCallback","ViewController","graph","destroyed","prototype","getViewCenter","padding","getFormatPadding","width","get","height","x","y","fitCenter","animate","animateCfg","group","resetMatrix","bbox","getCanvasBBox","viewCenter","groupCenter","translate","animatedFitView","startMatrix","ratio","duration","easing","matrix","vx","minX","vy","minY","translatedMatrix","minZoom","maxZoom","realRatio","console","warn","zoomedMatrix","animationConfig","callback","emit","action","fitView","getMatrix","w","h","zoom","fitViewByRules","rules","_a","onlyOutOfViewPort","_b","direction","_c","ratioRule","wRatio","hRatio","Math","max","min","initZoomRatio","getZoom","endZoom","zoomTo","focusPoint","point","_this","modelCenter","getPointByCanvas","viewportMatrix","dx_1","dy_1","lastX_1","lastY_1","newX_1","newY_1","canvasX","canvasY","getPointByClient","clientX","clientY","canvas","canvasPoint","getClientByPoint","getCanvasByPoint","focus","item","findById","getType","sourceMatrix","getSource","targetMatrix","getTarget","changeSize","Error","set","plugins","forEach","plugin","positionInit","destroy"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-core/es/graph/controller/view.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport { isNumber, isString } from '@antv/util';\nimport { formatPadding } from '../../util/base';\nimport { applyMatrix, invertMatrix, lerpArray } from '../../util/math';\nimport { transform } from '@antv/matrix-util/lib/ext';\nimport { getAnimateCfgWithCallback } from '../../util/graphic';\n\nvar ViewController =\n/** @class */\nfunction () {\n  function ViewController(graph) {\n    this.destroyed = false;\n    this.graph = graph;\n    this.destroyed = false;\n  } // get view center coordinate\n\n\n  ViewController.prototype.getViewCenter = function () {\n    var padding = this.getFormatPadding();\n    var graph = this.graph;\n    var width = this.graph.get('width');\n    var height = graph.get('height');\n    return {\n      x: (width - padding[1] - padding[3]) / 2 + padding[3],\n      y: (height - padding[0] - padding[2]) / 2 + padding[0]\n    };\n  };\n\n  ViewController.prototype.fitCenter = function (animate, animateCfg) {\n    var graph = this.graph;\n    var group = graph.get('group');\n    group.resetMatrix();\n    var bbox = group.getCanvasBBox();\n    if (bbox.width === 0 || bbox.height === 0) return;\n    var viewCenter = this.getViewCenter();\n    var groupCenter = {\n      x: bbox.x + bbox.width / 2,\n      y: bbox.y + bbox.height / 2\n    };\n    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y, animate, animateCfg);\n  };\n\n  ViewController.prototype.animatedFitView = function (group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio) {\n    var graph = this.graph;\n    animateCfg = animateCfg ? animateCfg : {\n      duration: 500,\n      easing: 'easeCubic'\n    }; // start from the default matrix\n\n    var matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1]; // Translate\n\n    var vx = bbox.x + viewCenter.x - groupCenter.x - bbox.minX;\n    var vy = bbox.y + viewCenter.y - groupCenter.y - bbox.minY;\n    var translatedMatrix = transform(matrix, [['t', vx, vy]]); // Zoom\n\n    var minZoom = graph.get('minZoom');\n    var maxZoom = graph.get('maxZoom');\n    var realRatio = ratio;\n\n    if (minZoom && ratio < minZoom) {\n      realRatio = minZoom;\n      console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph minzoom has been used instead');\n    } else if (maxZoom && ratio > maxZoom) {\n      realRatio = minZoom;\n      console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph maxzoom has been used instead');\n    }\n\n    var zoomedMatrix = transform(translatedMatrix, [['t', -viewCenter.x, -viewCenter.y], ['s', realRatio, realRatio], ['t', viewCenter.x, viewCenter.y]]); // Animation\n\n    var animationConfig = getAnimateCfgWithCallback({\n      animateCfg: animateCfg,\n      callback: function callback() {\n        graph.emit('viewportchange', {\n          action: 'translate',\n          matrix: translatedMatrix\n        });\n        graph.emit('viewportchange', {\n          action: 'zoom',\n          matrix: zoomedMatrix\n        });\n      }\n    });\n    group.animate(function (ratio) {\n      return {\n        matrix: lerpArray(startMatrix, zoomedMatrix, ratio)\n      };\n    }, animationConfig);\n  }; // fit view graph\n\n\n  ViewController.prototype.fitView = function (animate, animateCfg) {\n    var graph = this.graph;\n    var padding = this.getFormatPadding();\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var group = graph.get('group');\n    var startMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    group.resetMatrix();\n    var bbox = group.getCanvasBBox();\n    if (bbox.width === 0 || bbox.height === 0) return;\n    var viewCenter = this.getViewCenter();\n    var groupCenter = {\n      x: bbox.x + bbox.width / 2,\n      y: bbox.y + bbox.height / 2\n    }; // Compute ratio\n\n    var w = (width - padding[1] - padding[3]) / bbox.width;\n    var h = (height - padding[0] - padding[2]) / bbox.height;\n    var ratio = w;\n\n    if (w > h) {\n      ratio = h;\n    }\n\n    if (animate) {\n      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio);\n    } else {\n      graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);\n\n      if (!graph.zoom(ratio, viewCenter)) {\n        console.warn('zoom failed, ratio out of range, ratio: %f', ratio);\n      }\n    }\n  }; // fit view graph by rule\n\n\n  ViewController.prototype.fitViewByRules = function (rules, animate, animateCfg) {\n    var _a = rules.onlyOutOfViewPort,\n        onlyOutOfViewPort = _a === void 0 ? false : _a,\n        _b = rules.direction,\n        direction = _b === void 0 ? 'both' : _b,\n        _c = rules.ratioRule,\n        ratioRule = _c === void 0 ? 'min' : _c;\n    var graph = this.graph;\n    var padding = this.getFormatPadding();\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var group = graph.get('group');\n    var startMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    group.resetMatrix();\n    var bbox = group.getCanvasBBox();\n    if (bbox.width === 0 || bbox.height === 0) return;\n    var viewCenter = this.getViewCenter();\n    var groupCenter = {\n      x: bbox.x + bbox.width / 2,\n      y: bbox.y + bbox.height / 2\n    }; // Compute ratio\n\n    var wRatio = (width - padding[1] - padding[3]) / bbox.width;\n    var hRatio = (height - padding[0] - padding[2]) / bbox.height;\n    var ratio;\n\n    if (direction === 'x') {\n      ratio = wRatio;\n    } else if (direction === 'y') {\n      ratio = hRatio;\n    } else {\n      // ratioRule\n      ratio = ratioRule === 'max' ? Math.max(wRatio, hRatio) : Math.min(wRatio, hRatio);\n    } // 如果设置了仅对超出视口宽高的场景进行fitview，则没超出的场景zoom取1\n\n\n    if (onlyOutOfViewPort) {\n      ratio = ratio < 1 ? ratio : 1;\n    }\n\n    if (animate) {\n      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio);\n    } else {\n      var initZoomRatio = graph.getZoom();\n      var endZoom = initZoomRatio * ratio;\n      var minZoom = graph.get('minZoom'); // 如果zoom小于最小zoom, 则以最小zoom为准\n\n      if (endZoom < minZoom) {\n        endZoom = minZoom;\n        console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph minzoom has been used instead');\n      }\n\n      graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);\n      graph.zoomTo(endZoom, viewCenter);\n    }\n  };\n\n  ViewController.prototype.getFormatPadding = function () {\n    var padding = this.graph.get('fitViewPadding');\n    return formatPadding(padding);\n  };\n\n  ViewController.prototype.focusPoint = function (point, animate, animateCfg) {\n    var _this = this;\n\n    var viewCenter = this.getViewCenter();\n    var modelCenter = this.getPointByCanvas(viewCenter.x, viewCenter.y);\n    var viewportMatrix = this.graph.get('group').getMatrix();\n    if (!viewportMatrix) viewportMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n\n    if (animate) {\n      var dx_1 = (modelCenter.x - point.x) * viewportMatrix[0];\n      var dy_1 = (modelCenter.y - point.y) * viewportMatrix[4];\n      var lastX_1 = 0;\n      var lastY_1 = 0;\n      var newX_1 = 0;\n      var newY_1 = 0; // 动画每次平移一点，直到目标位置\n\n      this.graph.get('canvas').animate(function (ratio) {\n        newX_1 = dx_1 * ratio;\n        newY_1 = dy_1 * ratio;\n\n        _this.graph.translate(newX_1 - lastX_1, newY_1 - lastY_1);\n\n        lastX_1 = newX_1;\n        lastY_1 = newY_1;\n      }, __assign({}, animateCfg));\n    } else {\n      this.graph.translate((modelCenter.x - point.x) * viewportMatrix[0], (modelCenter.y - point.y) * viewportMatrix[4]);\n    }\n  };\n  /**\n   * 将 Canvas 坐标转成视口坐标\n   * @param canvasX canvas x 坐标\n   * @param canvasY canvas y 坐标\n   */\n\n\n  ViewController.prototype.getPointByCanvas = function (canvasX, canvasY) {\n    var viewportMatrix = this.graph.get('group').getMatrix();\n\n    if (!viewportMatrix) {\n      viewportMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    }\n\n    var point = invertMatrix({\n      x: canvasX,\n      y: canvasY\n    }, viewportMatrix);\n    return point;\n  };\n  /**\n   * 将页面坐标转成视口坐标\n   * @param clientX 页面 x 坐标\n   * @param clientY 页面 y 坐标\n   */\n\n\n  ViewController.prototype.getPointByClient = function (clientX, clientY) {\n    var canvas = this.graph.get('canvas');\n    var canvasPoint = canvas.getPointByClient(clientX, clientY);\n    return this.getPointByCanvas(canvasPoint.x, canvasPoint.y);\n  };\n  /**\n   * 将视口坐标转成页面坐标\n   * @param x 视口 x 坐标\n   * @param y 视口 y 坐标\n   */\n\n\n  ViewController.prototype.getClientByPoint = function (x, y) {\n    var canvas = this.graph.get('canvas');\n    var canvasPoint = this.getCanvasByPoint(x, y);\n    var point = canvas.getClientByPoint(canvasPoint.x, canvasPoint.y);\n    return {\n      x: point.x,\n      y: point.y\n    };\n  };\n  /**\n   * 将视口坐标转成 Canvas 坐标\n   * @param x 视口 x 坐标\n   * @param y 视口 y 坐标\n   */\n\n\n  ViewController.prototype.getCanvasByPoint = function (x, y) {\n    var viewportMatrix = this.graph.get('group').getMatrix();\n\n    if (!viewportMatrix) {\n      viewportMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    }\n\n    return applyMatrix({\n      x: x,\n      y: y\n    }, viewportMatrix);\n  };\n  /**\n   * 将元素移动到画布中心\n   * @param item Item 实例或 id\n   * @param {boolean} animate 是否带有动画地移动\n   * @param {GraphAnimateConfig} animateCfg 若带有动画，动画的配置项\n   */\n\n\n  ViewController.prototype.focus = function (item, animate, animateCfg) {\n    if (isString(item)) {\n      item = this.graph.findById(item);\n    }\n\n    if (item) {\n      var x = 0,\n          y = 0;\n\n      if (item.getType && item.getType() === 'edge') {\n        var sourceMatrix = item.getSource().get('group').getMatrix();\n        var targetMatrix = item.getTarget().get('group').getMatrix();\n\n        if (sourceMatrix && targetMatrix) {\n          x = (sourceMatrix[6] + targetMatrix[6]) / 2;\n          y = (sourceMatrix[7] + targetMatrix[7]) / 2;\n        } else if (sourceMatrix || targetMatrix) {\n          x = sourceMatrix ? sourceMatrix[6] : targetMatrix[6];\n          y = sourceMatrix ? sourceMatrix[7] : targetMatrix[7];\n        }\n      } else {\n        var group = item.get('group');\n        var matrix = group.getMatrix();\n        if (!matrix) matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n        x = matrix[6];\n        y = matrix[7];\n      } // 用实际位置而不是model中的x,y,防止由于拖拽等的交互导致model的x,y并不是当前的x,y\n\n\n      this.focusPoint({\n        x: x,\n        y: y\n      }, animate, animateCfg);\n    }\n  };\n  /**\n   * 改变 canvas 画布的宽度和高度\n   * @param width canvas 宽度\n   * @param height canvas 高度\n   */\n\n\n  ViewController.prototype.changeSize = function (width, height) {\n    var graph = this.graph;\n\n    if (!isNumber(width) || !isNumber(height)) {\n      throw Error('invalid canvas width & height, please make sure width & height type is number');\n    }\n\n    graph.set({\n      width: width,\n      height: height\n    });\n    var canvas = graph.get('canvas');\n    canvas.changeSize(width, height); // change the size of grid plugin if it exists on graph\n\n    var plugins = graph.get('plugins');\n    plugins.forEach(function (plugin) {\n      if (plugin.get('gridContainer')) {\n        // 网格定位信息初始化\n        plugin.positionInit();\n      }\n    });\n  };\n\n  ViewController.prototype.destroy = function () {\n    this.graph = null;\n    this.destroyed = false;\n  };\n\n  return ViewController;\n}();\n\nexport default ViewController;"],"mappings":"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"},"metadata":{},"sourceType":"module"}