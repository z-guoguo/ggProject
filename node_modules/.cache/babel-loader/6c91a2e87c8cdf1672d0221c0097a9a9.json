{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { isAnyArray } from 'is-any-array';\nimport Matrix from './matrix';\nexport function correlation(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n\n  if (typeof yMatrix === 'object' && !Matrix.isMatrix(yMatrix) && !isAnyArray(yMatrix)) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n\n  const {\n    center = true,\n    scale = true\n  } = options;\n\n  if (center) {\n    xMatrix.center('column');\n\n    if (!yIsSame) {\n      yMatrix.center('column');\n    }\n  }\n\n  if (scale) {\n    xMatrix.scale('column');\n\n    if (!yIsSame) {\n      yMatrix.scale('column');\n    }\n  }\n\n  const sdx = xMatrix.standardDeviation('column', {\n    unbiased: true\n  });\n  const sdy = yIsSame ? sdx : yMatrix.standardDeviation('column', {\n    unbiased: true\n  });\n  const corr = xMatrix.transpose().mmul(yMatrix);\n\n  for (let i = 0; i < corr.rows; i++) {\n    for (let j = 0; j < corr.columns; j++) {\n      corr.set(i, j, corr.get(i, j) * (1 / (sdx[i] * sdy[j])) * (1 / (xMatrix.rows - 1)));\n    }\n  }\n\n  return corr;\n}","map":{"version":3,"names":["isAnyArray","Matrix","correlation","xMatrix","yMatrix","options","yIsSame","isMatrix","rows","TypeError","center","scale","sdx","standardDeviation","unbiased","sdy","corr","transpose","mmul","i","j","columns","set","get"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/ml-matrix/src/correlation.js"],"sourcesContent":["import { isAnyArray } from 'is-any-array';\n\nimport Matrix from './matrix';\n\nexport function correlation(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n  if (\n    typeof yMatrix === 'object' &&\n    !Matrix.isMatrix(yMatrix) &&\n    !isAnyArray(yMatrix)\n  ) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n\n  const { center = true, scale = true } = options;\n  if (center) {\n    xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix.center('column');\n    }\n  }\n  if (scale) {\n    xMatrix.scale('column');\n    if (!yIsSame) {\n      yMatrix.scale('column');\n    }\n  }\n\n  const sdx = xMatrix.standardDeviation('column', { unbiased: true });\n  const sdy = yIsSame\n    ? sdx\n    : yMatrix.standardDeviation('column', { unbiased: true });\n\n  const corr = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < corr.rows; i++) {\n    for (let j = 0; j < corr.columns; j++) {\n      corr.set(\n        i,\n        j,\n        corr.get(i, j) * (1 / (sdx[i] * sdy[j])) * (1 / (xMatrix.rows - 1)),\n      );\n    }\n  }\n  return corr;\n}\n"],"mappings":";AAAA,SAASA,UAAT,QAA2B,cAA3B;AAEA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,OAAO,SAASC,WAAT,CAAqBC,OAArB,EAA8BC,OAAO,GAAGD,OAAxC,EAAiDE,OAAO,GAAG,EAA3D,EAA+D;EACpEF,OAAO,GAAG,IAAIF,MAAJ,CAAWE,OAAX,CAAV;EACA,IAAIG,OAAO,GAAG,KAAd;;EACA,IACE,OAAOF,OAAP,KAAmB,QAAnB,IACA,CAACH,MAAM,CAACM,QAAP,CAAgBH,OAAhB,CADD,IAEA,CAACJ,UAAU,CAACI,OAAD,CAHb,EAIE;IACAC,OAAO,GAAGD,OAAV;IACAA,OAAO,GAAGD,OAAV;IACAG,OAAO,GAAG,IAAV;EACD,CARD,MAQO;IACLF,OAAO,GAAG,IAAIH,MAAJ,CAAWG,OAAX,CAAV;EACD;;EACD,IAAID,OAAO,CAACK,IAAR,KAAiBJ,OAAO,CAACI,IAA7B,EAAmC;IACjC,MAAM,IAAIC,SAAJ,CAAc,iDAAd,CAAN;EACD;;EAED,MAAM;IAAEC,MAAM,GAAG,IAAX;IAAiBC,KAAK,GAAG;EAAzB,IAAkCN,OAAxC;;EACA,IAAIK,MAAJ,EAAY;IACVP,OAAO,CAACO,MAAR,CAAe,QAAf;;IACA,IAAI,CAACJ,OAAL,EAAc;MACZF,OAAO,CAACM,MAAR,CAAe,QAAf;IACD;EACF;;EACD,IAAIC,KAAJ,EAAW;IACTR,OAAO,CAACQ,KAAR,CAAc,QAAd;;IACA,IAAI,CAACL,OAAL,EAAc;MACZF,OAAO,CAACO,KAAR,CAAc,QAAd;IACD;EACF;;EAED,MAAMC,GAAG,GAAGT,OAAO,CAACU,iBAAR,CAA0B,QAA1B,EAAoC;IAAEC,QAAQ,EAAE;EAAZ,CAApC,CAAZ;EACA,MAAMC,GAAG,GAAGT,OAAO,GACfM,GADe,GAEfR,OAAO,CAACS,iBAAR,CAA0B,QAA1B,EAAoC;IAAEC,QAAQ,EAAE;EAAZ,CAApC,CAFJ;EAIA,MAAME,IAAI,GAAGb,OAAO,CAACc,SAAR,GAAoBC,IAApB,CAAyBd,OAAzB,CAAb;;EACA,KAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACR,IAAzB,EAA+BW,CAAC,EAAhC,EAAoC;IAClC,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,IAAI,CAACK,OAAzB,EAAkCD,CAAC,EAAnC,EAAuC;MACrCJ,IAAI,CAACM,GAAL,CACEH,CADF,EAEEC,CAFF,EAGEJ,IAAI,CAACO,GAAL,CAASJ,CAAT,EAAYC,CAAZ,KAAkB,KAAKR,GAAG,CAACO,CAAD,CAAH,GAASJ,GAAG,CAACK,CAAD,CAAjB,CAAlB,KAA4C,KAAKjB,OAAO,CAACK,IAAR,GAAe,CAApB,CAA5C,CAHF;IAKD;EACF;;EACD,OAAOQ,IAAP;AACD"},"metadata":{},"sourceType":"module"}