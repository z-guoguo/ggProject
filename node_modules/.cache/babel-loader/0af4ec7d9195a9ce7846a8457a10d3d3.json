{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\nexport default class CholeskyDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    if (!value.isSymmetric()) {\n      throw new Error('Matrix is not symmetric');\n    }\n\n    let a = value;\n    let dimension = a.rows;\n    let l = new Matrix(dimension, dimension);\n    let positiveDefinite = true;\n    let i, j, k;\n\n    for (j = 0; j < dimension; j++) {\n      let d = 0;\n\n      for (k = 0; k < j; k++) {\n        let s = 0;\n\n        for (i = 0; i < k; i++) {\n          s += l.get(k, i) * l.get(j, i);\n        }\n\n        s = (a.get(j, k) - s) / l.get(k, k);\n        l.set(j, k, s);\n        d = d + s * s;\n      }\n\n      d = a.get(j, j) - d;\n      positiveDefinite &= d > 0;\n      l.set(j, j, Math.sqrt(Math.max(d, 0)));\n\n      for (k = j + 1; k < dimension; k++) {\n        l.set(j, k, 0);\n      }\n    }\n\n    this.L = l;\n    this.positiveDefinite = Boolean(positiveDefinite);\n  }\n\n  isPositiveDefinite() {\n    return this.positiveDefinite;\n  }\n\n  solve(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n    let l = this.L;\n    let dimension = l.rows;\n\n    if (value.rows !== dimension) {\n      throw new Error('Matrix dimensions do not match');\n    }\n\n    if (this.isPositiveDefinite() === false) {\n      throw new Error('Matrix is not positive definite');\n    }\n\n    let count = value.columns;\n    let B = value.clone();\n    let i, j, k;\n\n    for (k = 0; k < dimension; k++) {\n      for (j = 0; j < count; j++) {\n        for (i = 0; i < k; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(k, i));\n        }\n\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    for (k = dimension - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        for (i = k + 1; i < dimension; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(i, k));\n        }\n\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    return B;\n  }\n\n  get lowerTriangularMatrix() {\n    return this.L;\n  }\n\n}","map":{"version":3,"names":["Matrix","WrapperMatrix2D","CholeskyDecomposition","constructor","value","checkMatrix","isSymmetric","Error","a","dimension","rows","l","positiveDefinite","i","j","k","d","s","get","set","Math","sqrt","max","L","Boolean","isPositiveDefinite","solve","count","columns","B","clone","lowerTriangularMatrix"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/ml-matrix/src/dc/cholesky.js"],"sourcesContent":["import Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\n\nexport default class CholeskyDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n    if (!value.isSymmetric()) {\n      throw new Error('Matrix is not symmetric');\n    }\n\n    let a = value;\n    let dimension = a.rows;\n    let l = new Matrix(dimension, dimension);\n    let positiveDefinite = true;\n    let i, j, k;\n\n    for (j = 0; j < dimension; j++) {\n      let d = 0;\n      for (k = 0; k < j; k++) {\n        let s = 0;\n        for (i = 0; i < k; i++) {\n          s += l.get(k, i) * l.get(j, i);\n        }\n        s = (a.get(j, k) - s) / l.get(k, k);\n        l.set(j, k, s);\n        d = d + s * s;\n      }\n\n      d = a.get(j, j) - d;\n\n      positiveDefinite &= d > 0;\n      l.set(j, j, Math.sqrt(Math.max(d, 0)));\n      for (k = j + 1; k < dimension; k++) {\n        l.set(j, k, 0);\n      }\n    }\n\n    this.L = l;\n    this.positiveDefinite = Boolean(positiveDefinite);\n  }\n\n  isPositiveDefinite() {\n    return this.positiveDefinite;\n  }\n\n  solve(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    let l = this.L;\n    let dimension = l.rows;\n\n    if (value.rows !== dimension) {\n      throw new Error('Matrix dimensions do not match');\n    }\n    if (this.isPositiveDefinite() === false) {\n      throw new Error('Matrix is not positive definite');\n    }\n\n    let count = value.columns;\n    let B = value.clone();\n    let i, j, k;\n\n    for (k = 0; k < dimension; k++) {\n      for (j = 0; j < count; j++) {\n        for (i = 0; i < k; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(k, i));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    for (k = dimension - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        for (i = k + 1; i < dimension; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(i, k));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    return B;\n  }\n\n  get lowerTriangularMatrix() {\n    return this.L;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}