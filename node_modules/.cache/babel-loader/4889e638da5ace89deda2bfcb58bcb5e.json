{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport JQuery from 'jquery';\nimport { Dom } from '../util';\nimport { Basecoat } from '../common';\nimport { Util, Config } from '../global';\nexport class View extends Basecoat {\n  constructor() {\n    super();\n    this.cid = Private.uniqueId();\n    View.views[this.cid] = this;\n  }\n\n  get priority() {\n    return 2;\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  confirmUpdate(flag, options) {\n    return 0;\n  }\n\n  $(elem) {\n    return View.$(elem);\n  }\n\n  empty(elem = this.container) {\n    this.$(elem).empty();\n    return this;\n  }\n\n  unmount(elem = this.container) {\n    this.$(elem).remove();\n    return this;\n  }\n\n  remove(elem = this.container) {\n    if (elem === this.container) {\n      this.removeEventListeners(document);\n      this.onRemove();\n      delete View.views[this.cid];\n    }\n\n    this.unmount(elem);\n    return this;\n  }\n\n  onRemove() {}\n\n  setClass(className, elem = this.container) {\n    elem.classList.value = Array.isArray(className) ? className.join(' ') : className;\n  }\n\n  addClass(className, elem = this.container) {\n    this.$(elem).addClass(Array.isArray(className) ? className.join(' ') : className);\n    return this;\n  }\n\n  removeClass(className, elem = this.container) {\n    this.$(elem).removeClass(Array.isArray(className) ? className.join(' ') : className);\n    return this;\n  }\n\n  setStyle(style, elem = this.container) {\n    this.$(elem).css(style);\n    return this;\n  }\n\n  setAttrs(attrs, elem = this.container) {\n    if (attrs != null && elem != null) {\n      if (elem instanceof SVGElement) {\n        Dom.attr(elem, attrs);\n      } else {\n        this.$(elem).attr(attrs);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Returns the value of the specified attribute of `node`.\n   *\n   * If the node does not set a value for attribute, start recursing up\n   * the DOM tree from node to lookup for attribute at the ancestors of\n   * node. If the recursion reaches CellView's root node and attribute\n   * is not found even there, return `null`.\n   */\n\n\n  findAttr(attrName, elem = this.container) {\n    let current = elem;\n\n    while (current && current.nodeType === 1) {\n      const value = current.getAttribute(attrName);\n\n      if (value != null) {\n        return value;\n      }\n\n      if (current === this.container) {\n        return null;\n      }\n\n      current = current.parentNode;\n    }\n\n    return null;\n  }\n\n  find(selector, rootElem = this.container, selectors = this.selectors) {\n    return View.find(selector, rootElem, selectors).elems;\n  }\n\n  findOne(selector, rootElem = this.container, selectors = this.selectors) {\n    const nodes = this.find(selector, rootElem, selectors);\n    return nodes.length > 0 ? nodes[0] : null;\n  }\n\n  findByAttr(attrName, elem = this.container) {\n    let node = elem;\n\n    while (node && node.getAttribute) {\n      const val = node.getAttribute(attrName);\n\n      if ((val != null || node === this.container) && val !== 'false') {\n        return node;\n      }\n\n      node = node.parentNode;\n    } // If the overall cell has set `magnet === false`, then returns\n    // `null` to announce there is no magnet found for this cell.\n    // This is especially useful to set on cells that have 'ports'.\n    // In this case, only the ports have set `magnet === true` and the\n    // overall element has `magnet === false`.\n\n\n    return null;\n  }\n\n  getSelector(elem, prevSelector) {\n    let selector;\n\n    if (elem === this.container) {\n      if (typeof prevSelector === 'string') {\n        selector = `> ${prevSelector}`;\n      }\n\n      return selector;\n    }\n\n    if (elem) {\n      const nth = Dom.index(elem) + 1;\n      selector = `${elem.tagName.toLowerCase()}:nth-child(${nth})`;\n\n      if (prevSelector) {\n        selector += ` > ${prevSelector}`;\n      }\n\n      selector = this.getSelector(elem.parentNode, selector);\n    }\n\n    return selector;\n  }\n\n  prefixClassName(className) {\n    return Util.prefix(className);\n  }\n\n  delegateEvents(events, append) {\n    if (events == null) {\n      return this;\n    }\n\n    if (!append) {\n      this.undelegateEvents();\n    }\n\n    const splitter = /^(\\S+)\\s*(.*)$/;\n    Object.keys(events).forEach(key => {\n      const match = key.match(splitter);\n\n      if (match == null) {\n        return;\n      }\n\n      const method = this.getEventHandler(events[key]);\n\n      if (typeof method === 'function') {\n        this.delegateEvent(match[1], match[2], method);\n      }\n    });\n    return this;\n  }\n\n  undelegateEvents() {\n    this.$(this.container).off(this.getEventNamespace());\n    return this;\n  }\n\n  delegateDocumentEvents(events, data) {\n    this.addEventListeners(document, events, data);\n    return this;\n  }\n\n  undelegateDocumentEvents() {\n    this.removeEventListeners(document);\n    return this;\n  }\n\n  delegateEvent(eventName, selector, listener) {\n    this.$(this.container).on(eventName + this.getEventNamespace(), selector, listener);\n    return this;\n  }\n\n  undelegateEvent(eventName, selector, listener) {\n    const name = eventName + this.getEventNamespace();\n\n    if (selector == null) {\n      this.$(this.container).off(name);\n    } else if (typeof selector === 'string') {\n      this.$(this.container).off(name, selector, listener);\n    } else {\n      this.$(this.container).off(name, selector);\n    }\n\n    return this;\n  }\n\n  addEventListeners(elem, events, data) {\n    if (events == null) {\n      return this;\n    }\n\n    const ns = this.getEventNamespace();\n    const $elem = this.$(elem);\n    Object.keys(events).forEach(eventName => {\n      const method = this.getEventHandler(events[eventName]);\n\n      if (typeof method === 'function') {\n        $elem.on(eventName + ns, data, method);\n      }\n    });\n    return this;\n  }\n\n  removeEventListeners(elem) {\n    if (elem != null) {\n      this.$(elem).off(this.getEventNamespace());\n    }\n\n    return this;\n  }\n\n  getEventNamespace() {\n    return `.${Config.prefixCls}-event-${this.cid}`;\n  } // eslint-disable-next-line\n\n\n  getEventHandler(handler) {\n    // eslint-disable-next-line\n    let method;\n\n    if (typeof handler === 'string') {\n      const fn = this[handler];\n\n      if (typeof fn === 'function') {\n        method = (...args) => fn.call(this, ...args);\n      }\n    } else {\n      method = (...args) => handler.call(this, ...args);\n    }\n\n    return method;\n  }\n\n  getEventTarget(e, options = {}) {\n    // Touchmove/Touchend event's target is not reflecting the element\n    // under the coordinates as mousemove does.\n    // It holds the element when a touchstart triggered.\n    const {\n      target,\n      type,\n      clientX = 0,\n      clientY = 0\n    } = e;\n\n    if (options.fromPoint || type === 'touchmove' || type === 'touchend') {\n      return document.elementFromPoint(clientX, clientY);\n    }\n\n    return target;\n  }\n\n  stopPropagation(e) {\n    this.setEventData(e, {\n      propagationStopped: true\n    });\n    return this;\n  }\n\n  isPropagationStopped(e) {\n    return this.getEventData(e).propagationStopped === true;\n  }\n\n  getEventData(e) {\n    return this.eventData(e);\n  }\n\n  setEventData(e, data) {\n    return this.eventData(e, data);\n  }\n\n  eventData(e, data) {\n    if (e == null) {\n      throw new TypeError('Event object required');\n    }\n\n    let currentData = e.data;\n    const key = `__${this.cid}__`; // get\n\n    if (data == null) {\n      if (currentData == null) {\n        return {};\n      }\n\n      return currentData[key] || {};\n    } // set\n\n\n    if (currentData == null) {\n      currentData = e.data = {};\n    }\n\n    if (currentData[key] == null) {\n      currentData[key] = Object.assign({}, data);\n    } else {\n      currentData[key] = Object.assign(Object.assign({}, currentData[key]), data);\n    }\n\n    return currentData[key];\n  }\n\n  normalizeEvent(evt) {\n    return View.normalizeEvent(evt);\n  }\n\n}\n\n(function (View) {\n  function $(elem) {\n    return JQuery(elem);\n  }\n\n  View.$ = $;\n\n  function createElement(tagName, isSvgElement) {\n    return isSvgElement ? Dom.createSvgElement(tagName || 'g') : Dom.createElementNS(tagName || 'div');\n  }\n\n  View.createElement = createElement;\n\n  function find(selector, rootElem, selectors) {\n    if (!selector || selector === '.') {\n      return {\n        elems: [rootElem]\n      };\n    }\n\n    if (selectors) {\n      const nodes = selectors[selector];\n\n      if (nodes) {\n        return {\n          elems: Array.isArray(nodes) ? nodes : [nodes]\n        };\n      }\n    }\n\n    if (Config.useCSSSelector) {\n      return {\n        isCSSSelector: true,\n        // elems: Array.prototype.slice.call(rootElem.querySelectorAll(selector)),\n        elems: $(rootElem).find(selector).toArray()\n      };\n    }\n\n    return {\n      elems: []\n    };\n  }\n\n  View.find = find;\n\n  function normalizeEvent(evt) {\n    let normalizedEvent = evt;\n    const originalEvent = evt.originalEvent;\n    const touchEvt = originalEvent && originalEvent.changedTouches && originalEvent.changedTouches[0];\n\n    if (touchEvt) {\n      // eslint-disable-next-line no-restricted-syntax\n      for (const key in evt) {\n        // copy all the properties from the input event that are not\n        // defined on the touch event (functions included).\n        if (touchEvt[key] === undefined) {\n          touchEvt[key] = evt[key];\n        }\n      }\n\n      normalizedEvent = touchEvt;\n    } // IE: evt.target could be set to SVGElementInstance for SVGUseElement\n\n\n    const target = normalizedEvent.target;\n\n    if (target) {\n      const useElement = target.correspondingUseElement;\n\n      if (useElement) {\n        normalizedEvent.target = useElement;\n      }\n    }\n\n    return normalizedEvent;\n  }\n\n  View.normalizeEvent = normalizeEvent;\n})(View || (View = {}));\n\n(function (View) {\n  View.views = {};\n\n  function getView(cid) {\n    return View.views[cid] || null;\n  }\n\n  View.getView = getView;\n})(View || (View = {}));\n\nvar Private;\n\n(function (Private) {\n  let counter = 0;\n\n  function uniqueId() {\n    const id = `v${counter}`;\n    counter += 1;\n    return id;\n  }\n\n  Private.uniqueId = uniqueId;\n})(Private || (Private = {}));","map":{"version":3,"mappings":"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","names":["JQuery","Dom","Basecoat","Util","Config","View","constructor","cid","Private","uniqueId","views","priority","confirmUpdate","flag","options","$","elem","empty","container","unmount","remove","removeEventListeners","document","onRemove","setClass","className","classList","value","Array","isArray","join","addClass","removeClass","setStyle","style","css","setAttrs","attrs","SVGElement","attr","findAttr","attrName","current","nodeType","getAttribute","parentNode","find","selector","rootElem","selectors","elems","findOne","nodes","length","findByAttr","node","val","getSelector","prevSelector","nth","index","tagName","toLowerCase","prefixClassName","prefix","delegateEvents","events","append","undelegateEvents","splitter","Object","keys","forEach","key","match","method","getEventHandler","delegateEvent","off","getEventNamespace","delegateDocumentEvents","data","addEventListeners","undelegateDocumentEvents","eventName","listener","on","undelegateEvent","name","ns","$elem","prefixCls","handler","fn","args","call","getEventTarget","e","target","type","clientX","clientY","fromPoint","elementFromPoint","stopPropagation","setEventData","propagationStopped","isPropagationStopped","getEventData","eventData","TypeError","currentData","normalizeEvent","evt","createElement","isSvgElement","createSvgElement","createElementNS","useCSSSelector","isCSSSelector","toArray","normalizedEvent","originalEvent","touchEvt","changedTouches","undefined","useElement","correspondingUseElement","getView","counter","id"],"sourceRoot":"","sources":["../../src/view/view.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}