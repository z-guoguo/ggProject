{"ast":null,"code":"import { filter, isNil, isNumber, last } from '@antv/util';\n/**\n * 计算分类 ticks\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\n\nexport default function calculateCatTicks(cfg) {\n  var values = cfg.values,\n      tickInterval = cfg.tickInterval,\n      tickCount = cfg.tickCount,\n      showLast = cfg.showLast;\n\n  if (isNumber(tickInterval)) {\n    var ticks_1 = filter(values, function (__, i) {\n      return i % tickInterval === 0;\n    });\n    var lastValue = last(values);\n\n    if (showLast && last(ticks_1) !== lastValue) {\n      ticks_1.push(lastValue);\n    }\n\n    return ticks_1;\n  }\n\n  var len = values.length;\n  var min = cfg.min,\n      max = cfg.max;\n\n  if (isNil(min)) {\n    min = 0;\n  }\n\n  if (isNil(max)) {\n    max = values.length - 1;\n  }\n\n  if (!isNumber(tickCount) || tickCount >= len) return values.slice(min, max + 1);\n  if (tickCount <= 0 || max <= 0) return [];\n  var interval = tickCount === 1 ? len : Math.floor(len / (tickCount - 1));\n  var ticks = [];\n  var idx = min;\n\n  for (var i = 0; i < tickCount; i++) {\n    if (idx >= max) break;\n    idx = Math.min(min + i * interval, max);\n    if (i === tickCount - 1 && showLast) ticks.push(values[max]);else ticks.push(values[idx]);\n  }\n\n  return ticks;\n}","map":{"version":3,"mappings":"AAAA,SAASA,MAAT,EAAiBC,KAAjB,EAAwBC,QAAxB,EAAkCC,IAAlC,QAA8C,YAA9C;AAGA;;;;;;AAKA,eAAc,SAAUC,iBAAV,CAA4BC,GAA5B,EAA4C;EAChD,UAAM,GAAwCA,GAAG,OAAjD;EAAA,IAAQC,YAAY,GAA0BD,GAAG,aAAjD;EAAA,IAAsBE,SAAS,GAAeF,GAAG,UAAjD;EAAA,IAAiCG,QAAQ,GAAKH,GAAG,SAAjD;;EAER,IAAIH,QAAQ,CAACI,YAAD,CAAZ,EAA4B;IAC1B,IAAMG,OAAK,GAAGT,MAAM,CAACU,MAAD,EAAS,UAACC,EAAD,EAAUC,CAAV,EAAmB;MAAK,QAAC,GAAGN,YAAJ,KAAqB,CAArB;IAAsB,CAAvD,CAApB;IACA,IAAMO,SAAS,GAAGV,IAAI,CAACO,MAAD,CAAtB;;IACA,IAAIF,QAAQ,IAAIL,IAAI,CAACM,OAAD,CAAJ,KAAgBI,SAAhC,EAA2C;MACzCJ,OAAK,CAACK,IAAN,CAAWD,SAAX;IACD;;IACD,OAAOJ,OAAP;EACD;;EAED,IAAMM,GAAG,GAAGL,MAAM,CAACM,MAAnB;EACM,OAAG,GAAUX,GAAG,IAAhB;EAAA,IAAKY,GAAG,GAAKZ,GAAG,IAAhB;;EACN,IAAIJ,KAAK,CAACiB,GAAD,CAAT,EAAgB;IACdA,GAAG,GAAG,CAAN;EACD;;EACD,IAAIjB,KAAK,CAACgB,GAAD,CAAT,EAAgB;IACdA,GAAG,GAAGP,MAAM,CAACM,MAAP,GAAgB,CAAtB;EACD;;EAED,IAAI,CAACd,QAAQ,CAACK,SAAD,CAAT,IAAwBA,SAAS,IAAIQ,GAAzC,EAA8C,OAAOL,MAAM,CAACS,KAAP,CAAaD,GAAb,EAAkBD,GAAG,GAAG,CAAxB,CAAP;EAC9C,IAAIV,SAAS,IAAI,CAAb,IAAkBU,GAAG,IAAI,CAA7B,EAAgC,OAAO,EAAP;EAEhC,IAAMG,QAAQ,GAAGb,SAAS,KAAK,CAAd,GAAkBQ,GAAlB,GAAwBM,IAAI,CAACC,KAAL,CAAWP,GAAG,IAAIR,SAAS,GAAG,CAAhB,CAAd,CAAzC;EACA,IAAMgB,KAAK,GAAG,EAAd;EAEA,IAAIC,GAAG,GAAGN,GAAV;;EACA,KAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,SAApB,EAA+BK,CAAC,EAAhC,EAAoC;IAClC,IAAIY,GAAG,IAAIP,GAAX,EAAgB;IAEhBO,GAAG,GAAGH,IAAI,CAACH,GAAL,CAASA,GAAG,GAAGN,CAAC,GAAGQ,QAAnB,EAA6BH,GAA7B,CAAN;IACA,IAAIL,CAAC,KAAKL,SAAS,GAAG,CAAlB,IAAuBC,QAA3B,EAAqCe,KAAK,CAACT,IAAN,CAAWJ,MAAM,CAACO,GAAD,CAAjB,EAArC,KACKM,KAAK,CAACT,IAAN,CAAWJ,MAAM,CAACc,GAAD,CAAjB;EACN;;EACD,OAAOD,KAAP;AACD","names":["filter","isNil","isNumber","last","calculateCatTicks","cfg","tickInterval","tickCount","showLast","ticks_1","values","__","i","lastValue","push","len","length","max","min","slice","interval","Math","floor","ticks","idx"],"sourceRoot":"","sources":["../../src/tick-method/cat.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}