{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport Base from '../base';\n\nfunction getEucliDis(pointA, pointB, eps) {\n  var vx = pointA.x - pointB.x;\n  var vy = pointA.y - pointB.y;\n\n  if (!eps || Math.abs(vx) > eps || Math.abs(vy) > eps) {\n    return Math.sqrt(vx * vx + vy * vy);\n  }\n\n  return eps;\n}\n\nfunction getDotProduct(ei, ej) {\n  return ei.x * ej.x + ei.y * ej.y;\n}\n\nfunction projectPointToEdge(p, e) {\n  var k = (e.source.y - e.target.y) / (e.source.x - e.target.x);\n  var x = (k * k * e.source.x + k * (p.y - e.source.y) + p.x) / (k * k + 1);\n  var y = k * (x - e.source.x) + e.source.y;\n  return {\n    x: x,\n    y: y\n  };\n}\n\nvar Bundling =\n/** @class */\nfunction (_super) {\n  __extends(Bundling, _super);\n\n  function Bundling(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Bundling.prototype.getDefaultCfgs = function () {\n    return {\n      edgeBundles: [],\n      edgePoints: [],\n      K: 0.1,\n      lambda: 0.1,\n      divisions: 1,\n      divRate: 2,\n      cycles: 6,\n      iterations: 90,\n      iterRate: 0.6666667,\n      bundleThreshold: 0.6,\n      eps: 1e-6,\n      onLayoutEnd: function onLayoutEnd() {},\n      onTick: function onTick() {}\n    };\n  };\n\n  Bundling.prototype.init = function () {\n    var graph = this.get('graph');\n    var onTick = this.get('onTick');\n\n    var tick = function tick() {\n      if (onTick) {\n        onTick();\n      }\n\n      graph.refreshPositions();\n    };\n\n    this.set('tick', tick);\n  };\n\n  Bundling.prototype.bundling = function (data) {\n    var self = this;\n    self.set('data', data); // 如果正在布局，忽略布局请求\n\n    if (self.isTicking()) {\n      return;\n    }\n\n    var edges = data.edges || [];\n    var nodes = data.nodes || [];\n    var nodeIdMap = {};\n    var error = false;\n    nodes.forEach(function (node) {\n      if (node.x === null || !node.y === null || node.x === undefined || !node.y === undefined) {\n        error = true;\n      }\n\n      nodeIdMap[node.id] = node;\n    });\n    if (error) throw new Error('please layout the graph or assign x and y for nodes first');\n    self.set('nodeIdMap', nodeIdMap); // subdivide each edges\n\n    var divisions = self.get('divisions');\n    var divRate = self.get('divRate');\n    var edgePoints = self.divideEdges(divisions);\n    self.set('edgePoints', edgePoints); // compute the bundles\n\n    var edgeBundles = self.getEdgeBundles();\n    self.set('edgeBundles', edgeBundles); // iterations\n\n    var C = self.get('cycles');\n    var iterations = self.get('iterations');\n    var iterRate = self.get('iterRate');\n    var lambda = self.get('lambda');\n\n    for (var i = 0; i < C; i++) {\n      var _loop_1 = function _loop_1(j) {\n        var forces = [];\n        edges.forEach(function (e, k) {\n          if (e.source === e.target) return;\n          var source = nodeIdMap[e.source];\n          var target = nodeIdMap[e.target];\n          forces[k] = self.getEdgeForces({\n            source: source,\n            target: target\n          }, k, divisions, lambda);\n\n          for (var p = 0; p < divisions + 1; p++) {\n            edgePoints[k][p].x += forces[k][p].x;\n            edgePoints[k][p].y += forces[k][p].y;\n          }\n        });\n      };\n\n      for (var j = 0; j < iterations; j++) {\n        _loop_1(j);\n      } // parameters for nex cycle\n\n\n      lambda = lambda / 2;\n      divisions *= divRate;\n      iterations *= iterRate;\n      edgePoints = self.divideEdges(divisions);\n      self.set('edgePoints', edgePoints);\n    } // change the edges according to edgePoints\n\n\n    edges.forEach(function (e, i) {\n      if (e.source === e.target) return;\n      e.type = 'polyline';\n      e.controlPoints = edgePoints[i].slice(1, edgePoints[i].length - 1);\n    });\n    var graph = self.get('graph');\n    graph.refresh();\n  };\n\n  Bundling.prototype.updateBundling = function (cfg) {\n    var self = this;\n    var data = cfg.data;\n\n    if (data) {\n      self.set('data', data);\n    }\n\n    if (self.get('ticking')) {\n      self.set('ticking', false);\n    }\n\n    Object.keys(cfg).forEach(function (key) {\n      self.set(key, cfg[key]);\n    });\n\n    if (cfg.onTick) {\n      var graph_1 = this.get('graph');\n      self.set('tick', function () {\n        cfg.onTick();\n        graph_1.refresh();\n      });\n    }\n\n    self.bundling(data);\n  };\n\n  Bundling.prototype.divideEdges = function (divisions) {\n    var self = this;\n    var edges = self.get('data').edges;\n    var nodeIdMap = self.get('nodeIdMap');\n    var edgePoints = self.get('edgePoints');\n    if (!edgePoints || edgePoints === undefined) edgePoints = [];\n    edges.forEach(function (edge, i) {\n      if (!edgePoints[i] || edgePoints[i] === undefined) {\n        edgePoints[i] = [];\n      }\n\n      var source = nodeIdMap[edge.source];\n      var target = nodeIdMap[edge.target];\n\n      if (divisions === 1) {\n        edgePoints[i].push({\n          x: source.x,\n          y: source.y\n        }); // source\n\n        edgePoints[i].push({\n          x: 0.5 * (source.x + target.x),\n          y: 0.5 * (source.y + target.y)\n        }); // mid\n\n        edgePoints[i].push({\n          x: target.x,\n          y: target.y\n        }); // target\n      } else {\n        var edgeLength = 0;\n\n        if (!edgePoints[i] || edgePoints[i] === []) {\n          // it is a straight line\n          edgeLength = getEucliDis({\n            x: source.x,\n            y: source.y\n          }, {\n            x: target.x,\n            y: target.y\n          });\n        } else {\n          edgeLength = self.getEdgeLength(edgePoints[i]);\n        }\n\n        var divisionLength_1 = edgeLength / (divisions + 1);\n        var currentDivisonLength_1 = divisionLength_1;\n        var newEdgePoints_1 = [{\n          x: source.x,\n          y: source.y\n        }]; // source\n\n        edgePoints[i].forEach(function (ep, j) {\n          if (j === 0) return;\n          var oriDivisionLength = getEucliDis(ep, edgePoints[i][j - 1]);\n\n          while (oriDivisionLength > currentDivisonLength_1) {\n            var ratio = currentDivisonLength_1 / oriDivisionLength;\n            var edgePoint = {\n              x: edgePoints[i][j - 1].x,\n              y: edgePoints[i][j - 1].y\n            };\n            edgePoint.x += ratio * (ep.x - edgePoints[i][j - 1].x);\n            edgePoint.y += ratio * (ep.y - edgePoints[i][j - 1].y);\n            newEdgePoints_1.push(edgePoint);\n            oriDivisionLength -= currentDivisonLength_1;\n            currentDivisonLength_1 = divisionLength_1;\n          }\n\n          currentDivisonLength_1 -= oriDivisionLength;\n        });\n        newEdgePoints_1.push({\n          x: target.x,\n          y: target.y\n        }); // target\n\n        edgePoints[i] = newEdgePoints_1;\n      }\n    });\n    return edgePoints;\n  };\n  /**\n   * 计算边的长度\n   * @param points\n   */\n\n\n  Bundling.prototype.getEdgeLength = function (points) {\n    var length = 0;\n    points.forEach(function (p, i) {\n      if (i === 0) return;\n      length += getEucliDis(p, points[i - 1]);\n    });\n    return length;\n  };\n\n  Bundling.prototype.getEdgeBundles = function () {\n    var self = this;\n    var data = self.get('data');\n    var edges = data.edges || [];\n    var bundleThreshold = self.get('bundleThreshold');\n    var nodeIdMap = self.get('nodeIdMap');\n    var edgeBundles = self.get('edgeBundles');\n    if (!edgeBundles) edgeBundles = [];\n    edges.forEach(function (e, i) {\n      if (!edgeBundles[i] || edgeBundles[i] === undefined) {\n        edgeBundles[i] = [];\n      }\n    });\n    edges.forEach(function (ei, i) {\n      var iSource = nodeIdMap[ei.source];\n      var iTarget = nodeIdMap[ei.target];\n      edges.forEach(function (ej, j) {\n        if (j <= i) return;\n        var jSource = nodeIdMap[ej.source];\n        var jTarget = nodeIdMap[ej.target];\n        var score = self.getBundleScore({\n          source: iSource,\n          target: iTarget\n        }, {\n          source: jSource,\n          target: jTarget\n        });\n\n        if (score >= bundleThreshold) {\n          edgeBundles[i].push(j);\n          edgeBundles[j].push(i);\n        }\n      });\n    });\n    return edgeBundles;\n  };\n\n  Bundling.prototype.getBundleScore = function (ei, ej) {\n    var self = this;\n    ei.vx = ei.target.x - ei.source.x;\n    ei.vy = ei.target.y - ei.source.y;\n    ej.vx = ej.target.x - ej.source.x;\n    ej.vy = ej.target.y - ej.source.y;\n    ei.length = getEucliDis({\n      x: ei.source.x,\n      y: ei.source.y\n    }, {\n      x: ei.target.x,\n      y: ei.target.y\n    });\n    ej.length = getEucliDis({\n      x: ej.source.x,\n      y: ej.source.y\n    }, {\n      x: ej.target.x,\n      y: ej.target.y\n    }); // angle score\n\n    var aScore = self.getAngleScore(ei, ej); // scale score\n\n    var sScore = self.getScaleScore(ei, ej); // position score\n\n    var pScore = self.getPositionScore(ei, ej); // visibility socre\n\n    var vScore = self.getVisibilityScore(ei, ej);\n    return aScore * sScore * pScore * vScore;\n  };\n\n  Bundling.prototype.getAngleScore = function (ei, ej) {\n    var dotProduct = getDotProduct({\n      x: ei.vx,\n      y: ei.vy\n    }, {\n      x: ej.vx,\n      y: ej.vy\n    });\n    return dotProduct / (ei.length * ej.length);\n  };\n\n  Bundling.prototype.getScaleScore = function (ei, ej) {\n    var aLength = (ei.length + ej.length) / 2;\n    var score = 2 / (aLength / Math.min(ei.length, ej.length) + Math.max(ei.length, ej.length) / aLength);\n    return score;\n  };\n\n  Bundling.prototype.getPositionScore = function (ei, ej) {\n    var aLength = (ei.length + ej.length) / 2;\n    var iMid = {\n      x: (ei.source.x + ei.target.x) / 2,\n      y: (ei.source.y + ei.target.y) / 2\n    };\n    var jMid = {\n      x: (ej.source.x + ej.target.x) / 2,\n      y: (ej.source.y + ej.target.y) / 2\n    };\n    var distance = getEucliDis(iMid, jMid);\n    return aLength / (aLength + distance);\n  };\n\n  Bundling.prototype.getVisibilityScore = function (ei, ej) {\n    var vij = this.getEdgeVisibility(ei, ej);\n    var vji = this.getEdgeVisibility(ej, ei);\n    return vij < vji ? vij : vji;\n  };\n\n  Bundling.prototype.getEdgeVisibility = function (ei, ej) {\n    var ps = projectPointToEdge(ej.source, ei);\n    var pt = projectPointToEdge(ej.target, ei);\n    var pMid = {\n      x: (ps.x + pt.x) / 2,\n      y: (ps.y + pt.y) / 2\n    };\n    var iMid = {\n      x: (ei.source.x + ei.target.x) / 2,\n      y: (ei.source.y + ei.target.y) / 2\n    };\n    return Math.max(0, 1 - 2 * getEucliDis(pMid, iMid) / getEucliDis(ps, pt));\n  };\n\n  Bundling.prototype.getEdgeForces = function (e, eidx, divisions, lambda) {\n    var self = this;\n    var edgePoints = self.get('edgePoints');\n    var K = self.get('K');\n    var kp = K / (getEucliDis(e.source, e.target) * (divisions + 1));\n    var edgePointForces = [{\n      x: 0,\n      y: 0\n    }];\n\n    for (var i = 1; i < divisions; i++) {\n      var force = {\n        x: 0,\n        y: 0\n      };\n      var spring = self.getSpringForce({\n        pre: edgePoints[eidx][i - 1],\n        cur: edgePoints[eidx][i],\n        next: edgePoints[eidx][i + 1]\n      }, kp);\n      var electrostatic = self.getElectrostaticForce(i, eidx);\n      force.x = lambda * (spring.x + electrostatic.x);\n      force.y = lambda * (spring.y + electrostatic.y);\n      edgePointForces.push(force);\n    }\n\n    edgePointForces.push({\n      x: 0,\n      y: 0\n    });\n    return edgePointForces;\n  };\n\n  Bundling.prototype.getSpringForce = function (divisions, kp) {\n    var x = divisions.pre.x + divisions.next.x - 2 * divisions.cur.x;\n    var y = divisions.pre.y + divisions.next.y - 2 * divisions.cur.y;\n    x *= kp;\n    y *= kp;\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Bundling.prototype.getElectrostaticForce = function (pidx, eidx) {\n    var self = this;\n    var eps = self.get('eps');\n    var edgeBundles = self.get('edgeBundles');\n    var edgePoints = self.get('edgePoints');\n    var edgeBundle = edgeBundles[eidx];\n    var resForce = {\n      x: 0,\n      y: 0\n    };\n    edgeBundle.forEach(function (eb) {\n      var force = {\n        x: edgePoints[eb][pidx].x - edgePoints[eidx][pidx].x,\n        y: edgePoints[eb][pidx].y - edgePoints[eidx][pidx].y\n      };\n\n      if (Math.abs(force.x) > eps || Math.abs(force.y) > eps) {\n        var length_1 = getEucliDis(edgePoints[eb][pidx], edgePoints[eidx][pidx]);\n        var diff = 1 / length_1;\n        resForce.x += force.x * diff;\n        resForce.y += force.y * diff;\n      }\n    });\n    return resForce;\n  };\n\n  Bundling.prototype.isTicking = function () {\n    return this.get('ticking');\n  };\n\n  Bundling.prototype.getSimulation = function () {\n    return this.get('forceSimulation');\n  };\n\n  Bundling.prototype.destroy = function () {\n    if (this.get('ticking')) {\n      this.getSimulation().stop();\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return Bundling;\n}(Base);\n\nexport default Bundling;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","Base","getEucliDis","pointA","pointB","eps","vx","x","vy","y","Math","abs","sqrt","getDotProduct","ei","ej","projectPointToEdge","e","k","source","target","Bundling","_super","config","getDefaultCfgs","edgeBundles","edgePoints","K","lambda","divisions","divRate","cycles","iterations","iterRate","bundleThreshold","onLayoutEnd","onTick","init","graph","get","tick","refreshPositions","set","bundling","data","self","isTicking","edges","nodes","nodeIdMap","error","forEach","node","undefined","id","Error","divideEdges","getEdgeBundles","C","i","_loop_1","j","forces","getEdgeForces","type","controlPoints","slice","length","refresh","updateBundling","cfg","keys","key","graph_1","edge","push","edgeLength","getEdgeLength","divisionLength_1","currentDivisonLength_1","newEdgePoints_1","ep","oriDivisionLength","ratio","edgePoint","points","iSource","iTarget","jSource","jTarget","score","getBundleScore","aScore","getAngleScore","sScore","getScaleScore","pScore","getPositionScore","vScore","getVisibilityScore","dotProduct","aLength","min","max","iMid","jMid","distance","vij","getEdgeVisibility","vji","ps","pt","pMid","eidx","kp","edgePointForces","force","spring","getSpringForce","pre","cur","next","electrostatic","getElectrostaticForce","pidx","edgeBundle","resForce","eb","length_1","diff","getSimulation","destroy","stop"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/bundling/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport Base from '../base';\n\nfunction getEucliDis(pointA, pointB, eps) {\n  var vx = pointA.x - pointB.x;\n  var vy = pointA.y - pointB.y;\n\n  if (!eps || Math.abs(vx) > eps || Math.abs(vy) > eps) {\n    return Math.sqrt(vx * vx + vy * vy);\n  }\n\n  return eps;\n}\n\nfunction getDotProduct(ei, ej) {\n  return ei.x * ej.x + ei.y * ej.y;\n}\n\nfunction projectPointToEdge(p, e) {\n  var k = (e.source.y - e.target.y) / (e.source.x - e.target.x);\n  var x = (k * k * e.source.x + k * (p.y - e.source.y) + p.x) / (k * k + 1);\n  var y = k * (x - e.source.x) + e.source.y;\n  return {\n    x: x,\n    y: y\n  };\n}\n\nvar Bundling =\n/** @class */\nfunction (_super) {\n  __extends(Bundling, _super);\n\n  function Bundling(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Bundling.prototype.getDefaultCfgs = function () {\n    return {\n      edgeBundles: [],\n      edgePoints: [],\n      K: 0.1,\n      lambda: 0.1,\n      divisions: 1,\n      divRate: 2,\n      cycles: 6,\n      iterations: 90,\n      iterRate: 0.6666667,\n      bundleThreshold: 0.6,\n      eps: 1e-6,\n      onLayoutEnd: function onLayoutEnd() {},\n      onTick: function onTick() {}\n    };\n  };\n\n  Bundling.prototype.init = function () {\n    var graph = this.get('graph');\n    var onTick = this.get('onTick');\n\n    var tick = function tick() {\n      if (onTick) {\n        onTick();\n      }\n\n      graph.refreshPositions();\n    };\n\n    this.set('tick', tick);\n  };\n\n  Bundling.prototype.bundling = function (data) {\n    var self = this;\n    self.set('data', data); // 如果正在布局，忽略布局请求\n\n    if (self.isTicking()) {\n      return;\n    }\n\n    var edges = data.edges || [];\n    var nodes = data.nodes || [];\n    var nodeIdMap = {};\n    var error = false;\n    nodes.forEach(function (node) {\n      if (node.x === null || !node.y === null || node.x === undefined || !node.y === undefined) {\n        error = true;\n      }\n\n      nodeIdMap[node.id] = node;\n    });\n    if (error) throw new Error('please layout the graph or assign x and y for nodes first');\n    self.set('nodeIdMap', nodeIdMap); // subdivide each edges\n\n    var divisions = self.get('divisions');\n    var divRate = self.get('divRate');\n    var edgePoints = self.divideEdges(divisions);\n    self.set('edgePoints', edgePoints); // compute the bundles\n\n    var edgeBundles = self.getEdgeBundles();\n    self.set('edgeBundles', edgeBundles); // iterations\n\n    var C = self.get('cycles');\n    var iterations = self.get('iterations');\n    var iterRate = self.get('iterRate');\n    var lambda = self.get('lambda');\n\n    for (var i = 0; i < C; i++) {\n      var _loop_1 = function _loop_1(j) {\n        var forces = [];\n        edges.forEach(function (e, k) {\n          if (e.source === e.target) return;\n          var source = nodeIdMap[e.source];\n          var target = nodeIdMap[e.target];\n          forces[k] = self.getEdgeForces({\n            source: source,\n            target: target\n          }, k, divisions, lambda);\n\n          for (var p = 0; p < divisions + 1; p++) {\n            edgePoints[k][p].x += forces[k][p].x;\n            edgePoints[k][p].y += forces[k][p].y;\n          }\n        });\n      };\n\n      for (var j = 0; j < iterations; j++) {\n        _loop_1(j);\n      } // parameters for nex cycle\n\n\n      lambda = lambda / 2;\n      divisions *= divRate;\n      iterations *= iterRate;\n      edgePoints = self.divideEdges(divisions);\n      self.set('edgePoints', edgePoints);\n    } // change the edges according to edgePoints\n\n\n    edges.forEach(function (e, i) {\n      if (e.source === e.target) return;\n      e.type = 'polyline';\n      e.controlPoints = edgePoints[i].slice(1, edgePoints[i].length - 1);\n    });\n    var graph = self.get('graph');\n    graph.refresh();\n  };\n\n  Bundling.prototype.updateBundling = function (cfg) {\n    var self = this;\n    var data = cfg.data;\n\n    if (data) {\n      self.set('data', data);\n    }\n\n    if (self.get('ticking')) {\n      self.set('ticking', false);\n    }\n\n    Object.keys(cfg).forEach(function (key) {\n      self.set(key, cfg[key]);\n    });\n\n    if (cfg.onTick) {\n      var graph_1 = this.get('graph');\n      self.set('tick', function () {\n        cfg.onTick();\n        graph_1.refresh();\n      });\n    }\n\n    self.bundling(data);\n  };\n\n  Bundling.prototype.divideEdges = function (divisions) {\n    var self = this;\n    var edges = self.get('data').edges;\n    var nodeIdMap = self.get('nodeIdMap');\n    var edgePoints = self.get('edgePoints');\n    if (!edgePoints || edgePoints === undefined) edgePoints = [];\n    edges.forEach(function (edge, i) {\n      if (!edgePoints[i] || edgePoints[i] === undefined) {\n        edgePoints[i] = [];\n      }\n\n      var source = nodeIdMap[edge.source];\n      var target = nodeIdMap[edge.target];\n\n      if (divisions === 1) {\n        edgePoints[i].push({\n          x: source.x,\n          y: source.y\n        }); // source\n\n        edgePoints[i].push({\n          x: 0.5 * (source.x + target.x),\n          y: 0.5 * (source.y + target.y)\n        }); // mid\n\n        edgePoints[i].push({\n          x: target.x,\n          y: target.y\n        }); // target\n      } else {\n        var edgeLength = 0;\n\n        if (!edgePoints[i] || edgePoints[i] === []) {\n          // it is a straight line\n          edgeLength = getEucliDis({\n            x: source.x,\n            y: source.y\n          }, {\n            x: target.x,\n            y: target.y\n          });\n        } else {\n          edgeLength = self.getEdgeLength(edgePoints[i]);\n        }\n\n        var divisionLength_1 = edgeLength / (divisions + 1);\n        var currentDivisonLength_1 = divisionLength_1;\n        var newEdgePoints_1 = [{\n          x: source.x,\n          y: source.y\n        }]; // source\n\n        edgePoints[i].forEach(function (ep, j) {\n          if (j === 0) return;\n          var oriDivisionLength = getEucliDis(ep, edgePoints[i][j - 1]);\n\n          while (oriDivisionLength > currentDivisonLength_1) {\n            var ratio = currentDivisonLength_1 / oriDivisionLength;\n            var edgePoint = {\n              x: edgePoints[i][j - 1].x,\n              y: edgePoints[i][j - 1].y\n            };\n            edgePoint.x += ratio * (ep.x - edgePoints[i][j - 1].x);\n            edgePoint.y += ratio * (ep.y - edgePoints[i][j - 1].y);\n            newEdgePoints_1.push(edgePoint);\n            oriDivisionLength -= currentDivisonLength_1;\n            currentDivisonLength_1 = divisionLength_1;\n          }\n\n          currentDivisonLength_1 -= oriDivisionLength;\n        });\n        newEdgePoints_1.push({\n          x: target.x,\n          y: target.y\n        }); // target\n\n        edgePoints[i] = newEdgePoints_1;\n      }\n    });\n    return edgePoints;\n  };\n  /**\n   * 计算边的长度\n   * @param points\n   */\n\n\n  Bundling.prototype.getEdgeLength = function (points) {\n    var length = 0;\n    points.forEach(function (p, i) {\n      if (i === 0) return;\n      length += getEucliDis(p, points[i - 1]);\n    });\n    return length;\n  };\n\n  Bundling.prototype.getEdgeBundles = function () {\n    var self = this;\n    var data = self.get('data');\n    var edges = data.edges || [];\n    var bundleThreshold = self.get('bundleThreshold');\n    var nodeIdMap = self.get('nodeIdMap');\n    var edgeBundles = self.get('edgeBundles');\n    if (!edgeBundles) edgeBundles = [];\n    edges.forEach(function (e, i) {\n      if (!edgeBundles[i] || edgeBundles[i] === undefined) {\n        edgeBundles[i] = [];\n      }\n    });\n    edges.forEach(function (ei, i) {\n      var iSource = nodeIdMap[ei.source];\n      var iTarget = nodeIdMap[ei.target];\n      edges.forEach(function (ej, j) {\n        if (j <= i) return;\n        var jSource = nodeIdMap[ej.source];\n        var jTarget = nodeIdMap[ej.target];\n        var score = self.getBundleScore({\n          source: iSource,\n          target: iTarget\n        }, {\n          source: jSource,\n          target: jTarget\n        });\n\n        if (score >= bundleThreshold) {\n          edgeBundles[i].push(j);\n          edgeBundles[j].push(i);\n        }\n      });\n    });\n    return edgeBundles;\n  };\n\n  Bundling.prototype.getBundleScore = function (ei, ej) {\n    var self = this;\n    ei.vx = ei.target.x - ei.source.x;\n    ei.vy = ei.target.y - ei.source.y;\n    ej.vx = ej.target.x - ej.source.x;\n    ej.vy = ej.target.y - ej.source.y;\n    ei.length = getEucliDis({\n      x: ei.source.x,\n      y: ei.source.y\n    }, {\n      x: ei.target.x,\n      y: ei.target.y\n    });\n    ej.length = getEucliDis({\n      x: ej.source.x,\n      y: ej.source.y\n    }, {\n      x: ej.target.x,\n      y: ej.target.y\n    }); // angle score\n\n    var aScore = self.getAngleScore(ei, ej); // scale score\n\n    var sScore = self.getScaleScore(ei, ej); // position score\n\n    var pScore = self.getPositionScore(ei, ej); // visibility socre\n\n    var vScore = self.getVisibilityScore(ei, ej);\n    return aScore * sScore * pScore * vScore;\n  };\n\n  Bundling.prototype.getAngleScore = function (ei, ej) {\n    var dotProduct = getDotProduct({\n      x: ei.vx,\n      y: ei.vy\n    }, {\n      x: ej.vx,\n      y: ej.vy\n    });\n    return dotProduct / (ei.length * ej.length);\n  };\n\n  Bundling.prototype.getScaleScore = function (ei, ej) {\n    var aLength = (ei.length + ej.length) / 2;\n    var score = 2 / (aLength / Math.min(ei.length, ej.length) + Math.max(ei.length, ej.length) / aLength);\n    return score;\n  };\n\n  Bundling.prototype.getPositionScore = function (ei, ej) {\n    var aLength = (ei.length + ej.length) / 2;\n    var iMid = {\n      x: (ei.source.x + ei.target.x) / 2,\n      y: (ei.source.y + ei.target.y) / 2\n    };\n    var jMid = {\n      x: (ej.source.x + ej.target.x) / 2,\n      y: (ej.source.y + ej.target.y) / 2\n    };\n    var distance = getEucliDis(iMid, jMid);\n    return aLength / (aLength + distance);\n  };\n\n  Bundling.prototype.getVisibilityScore = function (ei, ej) {\n    var vij = this.getEdgeVisibility(ei, ej);\n    var vji = this.getEdgeVisibility(ej, ei);\n    return vij < vji ? vij : vji;\n  };\n\n  Bundling.prototype.getEdgeVisibility = function (ei, ej) {\n    var ps = projectPointToEdge(ej.source, ei);\n    var pt = projectPointToEdge(ej.target, ei);\n    var pMid = {\n      x: (ps.x + pt.x) / 2,\n      y: (ps.y + pt.y) / 2\n    };\n    var iMid = {\n      x: (ei.source.x + ei.target.x) / 2,\n      y: (ei.source.y + ei.target.y) / 2\n    };\n    return Math.max(0, 1 - 2 * getEucliDis(pMid, iMid) / getEucliDis(ps, pt));\n  };\n\n  Bundling.prototype.getEdgeForces = function (e, eidx, divisions, lambda) {\n    var self = this;\n    var edgePoints = self.get('edgePoints');\n    var K = self.get('K');\n    var kp = K / (getEucliDis(e.source, e.target) * (divisions + 1));\n    var edgePointForces = [{\n      x: 0,\n      y: 0\n    }];\n\n    for (var i = 1; i < divisions; i++) {\n      var force = {\n        x: 0,\n        y: 0\n      };\n      var spring = self.getSpringForce({\n        pre: edgePoints[eidx][i - 1],\n        cur: edgePoints[eidx][i],\n        next: edgePoints[eidx][i + 1]\n      }, kp);\n      var electrostatic = self.getElectrostaticForce(i, eidx);\n      force.x = lambda * (spring.x + electrostatic.x);\n      force.y = lambda * (spring.y + electrostatic.y);\n      edgePointForces.push(force);\n    }\n\n    edgePointForces.push({\n      x: 0,\n      y: 0\n    });\n    return edgePointForces;\n  };\n\n  Bundling.prototype.getSpringForce = function (divisions, kp) {\n    var x = divisions.pre.x + divisions.next.x - 2 * divisions.cur.x;\n    var y = divisions.pre.y + divisions.next.y - 2 * divisions.cur.y;\n    x *= kp;\n    y *= kp;\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Bundling.prototype.getElectrostaticForce = function (pidx, eidx) {\n    var self = this;\n    var eps = self.get('eps');\n    var edgeBundles = self.get('edgeBundles');\n    var edgePoints = self.get('edgePoints');\n    var edgeBundle = edgeBundles[eidx];\n    var resForce = {\n      x: 0,\n      y: 0\n    };\n    edgeBundle.forEach(function (eb) {\n      var force = {\n        x: edgePoints[eb][pidx].x - edgePoints[eidx][pidx].x,\n        y: edgePoints[eb][pidx].y - edgePoints[eidx][pidx].y\n      };\n\n      if (Math.abs(force.x) > eps || Math.abs(force.y) > eps) {\n        var length_1 = getEucliDis(edgePoints[eb][pidx], edgePoints[eidx][pidx]);\n        var diff = 1 / length_1;\n        resForce.x += force.x * diff;\n        resForce.y += force.y * diff;\n      }\n    });\n    return resForce;\n  };\n\n  Bundling.prototype.isTicking = function () {\n    return this.get('ticking');\n  };\n\n  Bundling.prototype.getSimulation = function () {\n    return this.get('forceSimulation');\n  };\n\n  Bundling.prototype.destroy = function () {\n    if (this.get('ticking')) {\n      this.getSimulation().stop();\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return Bundling;\n}(Base);\n\nexport default Bundling;"],"mappings":"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"},"metadata":{},"sourceType":"module"}