{"ast":null,"code":"import { Curve, Path } from '../../geometry';\nexport const smooth = function (sourcePoint, targetPoint, routePoints, options = {}) {\n  let path;\n  let direction = options.direction;\n\n  if (routePoints && routePoints.length !== 0) {\n    const points = [sourcePoint, ...routePoints, targetPoint];\n    const curves = Curve.throughPoints(points);\n    path = new Path(curves);\n  } else {\n    // If we have no route, use a default cubic bezier curve, cubic bezier\n    // requires two control points, the control points have `x` midway\n    // between source and target. This produces an S-like curve.\n    path = new Path();\n    path.appendSegment(Path.createSegment('M', sourcePoint));\n\n    if (!direction) {\n      direction = Math.abs(sourcePoint.x - targetPoint.x) >= Math.abs(sourcePoint.y - targetPoint.y) ? 'H' : 'V';\n    }\n\n    if (direction === 'H') {\n      const controlPointX = (sourcePoint.x + targetPoint.x) / 2;\n      path.appendSegment(Path.createSegment('C', controlPointX, sourcePoint.y, controlPointX, targetPoint.y, targetPoint.x, targetPoint.y));\n    } else {\n      const controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n      path.appendSegment(Path.createSegment('C', sourcePoint.x, controlPointY, targetPoint.x, controlPointY, targetPoint.x, targetPoint.y));\n    }\n  }\n\n  return options.raw ? path : path.serialize();\n};","map":{"version":3,"mappings":"AAAA,SAASA,KAAT,EAAgBC,IAAhB,QAA4B,gBAA5B;AAOA,OAAO,MAAMC,MAAM,GAAiD,UAClEC,WADkE,EAElEC,WAFkE,EAGlEC,WAHkE,EAIlEC,OAAO,GAAG,EAJwD,EAItD;EAEZ,IAAIC,IAAJ;EACA,IAAIC,SAAS,GAAGF,OAAO,CAACE,SAAxB;;EAEA,IAAIH,WAAW,IAAIA,WAAW,CAACI,MAAZ,KAAuB,CAA1C,EAA6C;IAC3C,MAAMC,MAAM,GAAG,CAACP,WAAD,EAAc,GAAGE,WAAjB,EAA8BD,WAA9B,CAAf;IACA,MAAMO,MAAM,GAAGX,KAAK,CAACY,aAAN,CAAoBF,MAApB,CAAf;IACAH,IAAI,GAAG,IAAIN,IAAJ,CAASU,MAAT,CAAP;EACD,CAJD,MAIO;IACL;IACA;IACA;IAEAJ,IAAI,GAAG,IAAIN,IAAJ,EAAP;IACAM,IAAI,CAACM,aAAL,CAAmBZ,IAAI,CAACa,aAAL,CAAmB,GAAnB,EAAwBX,WAAxB,CAAnB;;IAEA,IAAI,CAACK,SAAL,EAAgB;MACdA,SAAS,GACPO,IAAI,CAACC,GAAL,CAASb,WAAW,CAACc,CAAZ,GAAgBb,WAAW,CAACa,CAArC,KACAF,IAAI,CAACC,GAAL,CAASb,WAAW,CAACe,CAAZ,GAAgBd,WAAW,CAACc,CAArC,CADA,GAEI,GAFJ,GAGI,GAJN;IAKD;;IAED,IAAIV,SAAS,KAAK,GAAlB,EAAuB;MACrB,MAAMW,aAAa,GAAG,CAAChB,WAAW,CAACc,CAAZ,GAAgBb,WAAW,CAACa,CAA7B,IAAkC,CAAxD;MACAV,IAAI,CAACM,aAAL,CACEZ,IAAI,CAACa,aAAL,CACE,GADF,EAEEK,aAFF,EAGEhB,WAAW,CAACe,CAHd,EAIEC,aAJF,EAKEf,WAAW,CAACc,CALd,EAMEd,WAAW,CAACa,CANd,EAOEb,WAAW,CAACc,CAPd,CADF;IAWD,CAbD,MAaO;MACL,MAAME,aAAa,GAAG,CAACjB,WAAW,CAACe,CAAZ,GAAgBd,WAAW,CAACc,CAA7B,IAAkC,CAAxD;MACAX,IAAI,CAACM,aAAL,CACEZ,IAAI,CAACa,aAAL,CACE,GADF,EAEEX,WAAW,CAACc,CAFd,EAGEG,aAHF,EAIEhB,WAAW,CAACa,CAJd,EAKEG,aALF,EAMEhB,WAAW,CAACa,CANd,EAOEb,WAAW,CAACc,CAPd,CADF;IAWD;EACF;;EAED,OAAOZ,OAAO,CAACe,GAAR,GAAcd,IAAd,GAAqBA,IAAI,CAACe,SAAL,EAA5B;AACD,CA3DM","names":["Curve","Path","smooth","sourcePoint","targetPoint","routePoints","options","path","direction","length","points","curves","throughPoints","appendSegment","createSegment","Math","abs","x","y","controlPointX","controlPointY","raw","serialize"],"sourceRoot":"","sources":["../../../src/registry/connector/smooth.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}