{"ast":null,"code":"import { Point } from '../../geometry';\nimport { toResult } from './util';\nexport const radial = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), false, args);\nexport const radialOriented = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), true, args);\n\nfunction radialLayout(portCenterOffset, autoOrient, args) {\n  const offset = args.offset != null ? args.offset : 20;\n  const origin = new Point(0, 0);\n  const angle = -portCenterOffset.theta(origin);\n  const pos = portCenterOffset.clone().move(origin, offset).diff(portCenterOffset).round();\n  let y = '.3em';\n  let textAnchor;\n  let orientAngle = angle;\n\n  if ((angle + 90) % 180 === 0) {\n    textAnchor = autoOrient ? 'end' : 'middle';\n\n    if (!autoOrient && angle === -270) {\n      y = '0em';\n    }\n  } else if (angle > -270 && angle < -90) {\n    textAnchor = 'start';\n    orientAngle = angle - 180;\n  } else {\n    textAnchor = 'end';\n  }\n\n  return toResult({\n    position: pos.round().toJSON(),\n    angle: autoOrient ? orientAngle : 0,\n    attrs: {\n      '.': {\n        y,\n        'text-anchor': textAnchor\n      }\n    }\n  }, args);\n}","map":{"version":3,"mappings":"AAAA,SAASA,KAAT,QAAsB,gBAAtB;AAEA,SAASC,QAAT,QAAyB,QAAzB;AAMA,OAAO,MAAMC,MAAM,GAA2C,CAC5DC,YAD4D,EAE5DC,QAF4D,EAG5DC,IAH4D,KAIzDC,YAAY,CAACH,YAAY,CAACI,IAAb,CAAkBH,QAAQ,CAACI,SAAT,EAAlB,CAAD,EAA0C,KAA1C,EAAiDH,IAAjD,CAJV;AAMP,OAAO,MAAMI,cAAc,GAA2C,CACpEN,YADoE,EAEpEC,QAFoE,EAGpEC,IAHoE,KAIjEC,YAAY,CAACH,YAAY,CAACI,IAAb,CAAkBH,QAAQ,CAACI,SAAT,EAAlB,CAAD,EAA0C,IAA1C,EAAgDH,IAAhD,CAJV;;AAMP,SAASC,YAAT,CACEI,gBADF,EAEEC,UAFF,EAGEN,IAHF,EAGkB;EAEhB,MAAMO,MAAM,GAAGP,IAAI,CAACO,MAAL,IAAe,IAAf,GAAsBP,IAAI,CAACO,MAA3B,GAAoC,EAAnD;EACA,MAAMC,MAAM,GAAG,IAAIb,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAf;EACA,MAAMc,KAAK,GAAG,CAACJ,gBAAgB,CAACK,KAAjB,CAAuBF,MAAvB,CAAf;EACA,MAAMG,GAAG,GAAGN,gBAAgB,CACzBO,KADS,GAETC,IAFS,CAEJL,MAFI,EAEID,MAFJ,EAGTL,IAHS,CAGJG,gBAHI,EAITS,KAJS,EAAZ;EAMA,IAAIC,CAAC,GAAG,MAAR;EACA,IAAIC,UAAJ;EACA,IAAIC,WAAW,GAAGR,KAAlB;;EAEA,IAAI,CAACA,KAAK,GAAG,EAAT,IAAe,GAAf,KAAuB,CAA3B,EAA8B;IAC5BO,UAAU,GAAGV,UAAU,GAAG,KAAH,GAAW,QAAlC;;IACA,IAAI,CAACA,UAAD,IAAeG,KAAK,KAAK,CAAC,GAA9B,EAAmC;MACjCM,CAAC,GAAG,KAAJ;IACD;EACF,CALD,MAKO,IAAIN,KAAK,GAAG,CAAC,GAAT,IAAgBA,KAAK,GAAG,CAAC,EAA7B,EAAiC;IACtCO,UAAU,GAAG,OAAb;IACAC,WAAW,GAAGR,KAAK,GAAG,GAAtB;EACD,CAHM,MAGA;IACLO,UAAU,GAAG,KAAb;EACD;;EAED,OAAOpB,QAAQ,CACb;IACEsB,QAAQ,EAAEP,GAAG,CAACG,KAAJ,GAAYK,MAAZ,EADZ;IAEEV,KAAK,EAAEH,UAAU,GAAGW,WAAH,GAAiB,CAFpC;IAGEG,KAAK,EAAE;MACL,KAAK;QACHL,CADG;QAEH,eAAeC;MAFZ;IADA;EAHT,CADa,EAWbhB,IAXa,CAAf;AAaD","names":["Point","toResult","radial","portPosition","elemBBox","args","radialLayout","diff","getCenter","radialOriented","portCenterOffset","autoOrient","offset","origin","angle","theta","pos","clone","move","round","y","textAnchor","orientAngle","position","toJSON","attrs"],"sourceRoot":"","sources":["../../../src/registry/port-label-layout/radial.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}