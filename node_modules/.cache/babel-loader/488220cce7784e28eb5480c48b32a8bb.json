{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { __spreadArray } from \"tslib\";\nimport { isString } from '@antv/util';\nimport { traverseTree } from './graphic';\n/**\n * 验证关系图或树图数据的合法性，必须符合以下规则才会渲染图：\n * 1. 必须传入数据\n * 2. 节点的 ID 必须为字符串，暂不支持数字类型，如果支持数字类型，会出现类似 123 与 '123' 是否相等的问题\n * 3. 边的 source 和 target 值必须在节点 ID 中存在\n * @param data 关系图或树图数据\n * @return boolean 全部验证通过返回 true，否则返回 false\n */\n\nexport var dataValidation = function dataValidation(data) {\n  // 1. 必须传入数据\n  if (!data) {\n    console.error('G6 Error Tips: the data must be defined');\n    return false;\n  } // 2. 节点的 ID 必须为字符串或数字类型\n\n\n  var nodes = data.nodes,\n      edges = data.edges,\n      _a = data.combos,\n      combos = _a === void 0 ? [] : _a;\n\n  if (!nodes && !edges) {\n    var validated_1 = true; // 不存在 nodes 和 edges，则说明是 TreeGraphData，按 TreeGraphData 规则验证\n\n    traverseTree(data, function (param) {\n      if (!isString(param.id)) {\n        validated_1 = false;\n        return false;\n      }\n\n      return true;\n    });\n    return validated_1;\n  }\n\n  var nonNode = (nodes || []).find(function (node) {\n    return !isString(node.id);\n  });\n\n  if (nonNode) {\n    console.warn(\"G6 Warning Tips: missing 'id' property, or %c\".concat(nonNode.id, \"%c is not a string.\"), 'font-size: 20px; color: red;', '');\n    return false;\n  } // 3. 边的 source 和 target 必须存在于节点 或 Combo中\n\n\n  var nodeIds = (nodes || []).map(function (node) {\n    return node.id;\n  });\n  var comboIds = combos === null || combos === void 0 ? void 0 : combos.map(function (combo) {\n    return combo.id;\n  });\n\n  var ids = __spreadArray(__spreadArray([], nodeIds, true), comboIds, true);\n\n  var nonEdges = (edges || []).find(function (edge) {\n    return !ids.includes(edge.source) || !ids.includes(edge.target);\n  });\n\n  if (nonEdges) {\n    console.warn(\"G6 Warning Tips: The source %c\".concat(nonEdges.source, \"%c or the target %c\").concat(nonEdges.target, \"%c of the edge do not exist in the nodes or combos.\"), 'font-size: 20px; color: red;', '', 'font-size: 20px; color: red;', '');\n    return false;\n  }\n\n  return true;\n};\n/**\n * 验证添加节点、边或从combo时的数据\n * @param type 节点、边或从combo\n * @param data 添加的单条数据\n * @return boolean 全部验证通过返回 true，否则返回 false\n */\n\nexport var singleDataValidation = function singleDataValidation(type, data) {\n  if (type === 'node' || type === 'combo') {\n    // 必须有 id 字段，且id必须为字符串类型\n    if (data.id && !isString(data.id)) {\n      console.warn(\"G6 Warning Tips: missing 'id' property, or the 'id' %c\".concat(data.id, \"%c is not a string.\"), 'font-size: 20px; color: red;', '');\n      return false;\n    }\n  } else if (type === 'edge') {\n    // 必须有 source 和 target 字段\n    if (!data.source || !data.target) {\n      console.warn(\"G6 Warning Tips: missing 'source' or 'target' for the edge.\");\n      return false;\n    }\n  }\n\n  return true;\n};","map":{"version":3,"names":["__spreadArray","isString","traverseTree","dataValidation","data","console","error","nodes","edges","_a","combos","validated_1","param","id","nonNode","find","node","warn","concat","nodeIds","map","comboIds","combo","ids","nonEdges","edge","includes","source","target","singleDataValidation","type"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-core/es/util/validation.js"],"sourcesContent":["import { __spreadArray } from \"tslib\";\nimport { isString } from '@antv/util';\nimport { traverseTree } from './graphic';\n/**\n * 验证关系图或树图数据的合法性，必须符合以下规则才会渲染图：\n * 1. 必须传入数据\n * 2. 节点的 ID 必须为字符串，暂不支持数字类型，如果支持数字类型，会出现类似 123 与 '123' 是否相等的问题\n * 3. 边的 source 和 target 值必须在节点 ID 中存在\n * @param data 关系图或树图数据\n * @return boolean 全部验证通过返回 true，否则返回 false\n */\n\nexport var dataValidation = function dataValidation(data) {\n  // 1. 必须传入数据\n  if (!data) {\n    console.error('G6 Error Tips: the data must be defined');\n    return false;\n  } // 2. 节点的 ID 必须为字符串或数字类型\n\n\n  var nodes = data.nodes,\n      edges = data.edges,\n      _a = data.combos,\n      combos = _a === void 0 ? [] : _a;\n\n  if (!nodes && !edges) {\n    var validated_1 = true; // 不存在 nodes 和 edges，则说明是 TreeGraphData，按 TreeGraphData 规则验证\n\n    traverseTree(data, function (param) {\n      if (!isString(param.id)) {\n        validated_1 = false;\n        return false;\n      }\n\n      return true;\n    });\n    return validated_1;\n  }\n\n  var nonNode = (nodes || []).find(function (node) {\n    return !isString(node.id);\n  });\n\n  if (nonNode) {\n    console.warn(\"G6 Warning Tips: missing 'id' property, or %c\".concat(nonNode.id, \"%c is not a string.\"), 'font-size: 20px; color: red;', '');\n    return false;\n  } // 3. 边的 source 和 target 必须存在于节点 或 Combo中\n\n\n  var nodeIds = (nodes || []).map(function (node) {\n    return node.id;\n  });\n  var comboIds = combos === null || combos === void 0 ? void 0 : combos.map(function (combo) {\n    return combo.id;\n  });\n\n  var ids = __spreadArray(__spreadArray([], nodeIds, true), comboIds, true);\n\n  var nonEdges = (edges || []).find(function (edge) {\n    return !ids.includes(edge.source) || !ids.includes(edge.target);\n  });\n\n  if (nonEdges) {\n    console.warn(\"G6 Warning Tips: The source %c\".concat(nonEdges.source, \"%c or the target %c\").concat(nonEdges.target, \"%c of the edge do not exist in the nodes or combos.\"), 'font-size: 20px; color: red;', '', 'font-size: 20px; color: red;', '');\n    return false;\n  }\n\n  return true;\n};\n/**\n * 验证添加节点、边或从combo时的数据\n * @param type 节点、边或从combo\n * @param data 添加的单条数据\n * @return boolean 全部验证通过返回 true，否则返回 false\n */\n\nexport var singleDataValidation = function singleDataValidation(type, data) {\n  if (type === 'node' || type === 'combo') {\n    // 必须有 id 字段，且id必须为字符串类型\n    if (data.id && !isString(data.id)) {\n      console.warn(\"G6 Warning Tips: missing 'id' property, or the 'id' %c\".concat(data.id, \"%c is not a string.\"), 'font-size: 20px; color: red;', '');\n      return false;\n    }\n  } else if (type === 'edge') {\n    // 必须有 source 和 target 字段\n    if (!data.source || !data.target) {\n      console.warn(\"G6 Warning Tips: missing 'source' or 'target' for the edge.\");\n      return false;\n    }\n  }\n\n  return true;\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}