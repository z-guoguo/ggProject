{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BindingWhenSyntax = void 0;\n\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\n\nvar constraint_helpers_1 = require(\"./constraint_helpers\");\n\nvar BindingWhenSyntax = function () {\n  function BindingWhenSyntax(binding) {\n    this._binding = binding;\n  }\n\n  BindingWhenSyntax.prototype.when = function (constraint) {\n    this._binding.constraint = constraint;\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\n    this._binding.constraint = constraint_helpers_1.namedConstraint(name);\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\n    this._binding.constraint = function (request) {\n      var targetIsDefault = request.target !== null && !request.target.isNamed() && !request.target.isTagged();\n      return targetIsDefault;\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\n    this._binding.constraint = constraint_helpers_1.taggedConstraint(tag)(value);\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\n    this._binding.constraint = function (request) {\n      return constraint_helpers_1.typeConstraint(parent)(request.parentRequest);\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenParentNamed = function (name) {\n    this._binding.constraint = function (request) {\n      return constraint_helpers_1.namedConstraint(name)(request.parentRequest);\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\n    this._binding.constraint = function (request) {\n      return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest);\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n    this._binding.constraint = function (request) {\n      return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n    this._binding.constraint = function (request) {\n      return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\n    this._binding.constraint = function (request) {\n      return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\n    this._binding.constraint = function (request) {\n      return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n    this._binding.constraint = function (request) {\n      return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n    this._binding.constraint = function (request) {\n      return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n    this._binding.constraint = function (request) {\n      return constraint_helpers_1.traverseAncerstors(request, constraint);\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n    this._binding.constraint = function (request) {\n      return !constraint_helpers_1.traverseAncerstors(request, constraint);\n    };\n\n    return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n  };\n\n  return BindingWhenSyntax;\n}();\n\nexports.BindingWhenSyntax = BindingWhenSyntax;","map":{"version":3,"mappings":";;;;;;;AACA;;AACA;;AAEA;EAII,2BAAmBA,OAAnB,EAAiD;IAC7C,KAAKC,QAAL,GAAgBD,OAAhB;EACH;;EAEME,mCAAP,UAAYC,UAAZ,EAAgE;IAC5D,KAAKF,QAAL,CAAcE,UAAd,GAA2BA,UAA3B;IACA,OAAO,IAAIC,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CAHM;;EAKAC,8CAAP,UAAuBG,IAAvB,EAAqD;IACjD,KAAKJ,QAAL,CAAcE,UAAd,GAA2BG,qCAAgBD,IAAhB,CAA3B;IACA,OAAO,IAAID,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CAHM;;EAKAC,kDAAP;IAEI,KAAKD,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MAEnD,IAAMC,eAAe,GAAID,OAAO,CAACE,MAAR,KAAmB,IAApB,IACnB,CAACF,OAAO,CAACE,MAAR,CAAeC,OAAf,EADkB,IAEnB,CAACH,OAAO,CAACE,MAAR,CAAeE,QAAf,EAFN;MAIA,OAAOH,eAAP;IACH,CAPD;;IASA,OAAO,IAAIJ,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CAZM;;EAcAC,+CAAP,UAAwBU,GAAxB,EAAuDC,KAAvD,EAAiE;IAC7D,KAAKZ,QAAL,CAAcE,UAAd,GAA2BG,sCAAiBM,GAAjB,EAAsBC,KAAtB,CAA3B;IACA,OAAO,IAAIT,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CAHM;;EAKAC,+CAAP,UAAwBY,MAAxB,EAAmD;IAC/C,KAAKb,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,2CAAeO,MAAf,EAAuBP,OAAO,CAACQ,aAA/B;IAA6C,CADjD;;IAEA,OAAO,IAAIX,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CAJM;;EAMAC,8CAAP,UAAuBG,IAAvB,EAAqD;IACjD,KAAKJ,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,4CAAgBF,IAAhB,EAAsBE,OAAO,CAACQ,aAA9B;IAA4C,CADhD;;IAEA,OAAO,IAAIX,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CAJM;;EAMAC,+CAAP,UAAwBU,GAAxB,EAAuDC,KAAvD,EAAiE;IAC7D,KAAKZ,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,6CAAiBK,GAAjB,EAAsBC,KAAtB,EAA6BN,OAAO,CAACQ,aAArC;IAAmD,CADvD;;IAEA,OAAO,IAAIX,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CAJM;;EAMAC,gDAAP,UAAyBc,QAAzB,EAAsD;IAClD,KAAKf,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,+CAAmBA,OAAnB,EAA4BD,oCAAeU,QAAf,CAA5B;IAAqD,CADzD;;IAEA,OAAO,IAAIZ,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CAJM;;EAMAC,+CAAP,UAAwBc,QAAxB,EAAqD;IACjD,KAAKf,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,QAACD,wCAAmBC,OAAnB,EAA4BD,oCAAeU,QAAf,CAA5B,CAAD;IAAsD,CAD1D;;IAEA,OAAO,IAAIZ,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CAJM;;EAMAC,mDAAP,UAA4BG,IAA5B,EAA0D;IAEtD,KAAKJ,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,+CAAmBA,OAAnB,EAA4BD,qCAAgBD,IAAhB,CAA5B;IAAkD,CADtD;;IAGA,OAAO,IAAID,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CANM;;EAQAC,kDAAP,UAA2BG,IAA3B,EAAyD;IAErD,KAAKJ,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,QAACD,wCAAmBC,OAAnB,EAA4BD,qCAAgBD,IAAhB,CAA5B,CAAD;IAAmD,CADvD;;IAGA,OAAO,IAAID,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CANM;;EAQAC,oDAAP,UAA6BU,GAA7B,EAA4DC,KAA5D,EAAsE;IAElE,KAAKZ,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,+CAAmBA,OAAnB,EAA4BD,sCAAiBM,GAAjB,EAAsBC,KAAtB,CAA5B;IAAyD,CAD7D;;IAGA,OAAO,IAAIT,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CANM;;EAQAC,mDAAP,UAA4BU,GAA5B,EAA2DC,KAA3D,EAAqE;IAEjE,KAAKZ,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,QAACD,wCAAmBC,OAAnB,EAA4BD,sCAAiBM,GAAjB,EAAsBC,KAAtB,CAA5B,CAAD;IAA0D,CAD9D;;IAGA,OAAO,IAAIT,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CANM;;EAQAC,qDAAP,UAA8BC,UAA9B,EAAkF;IAE9E,KAAKF,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,+CAAmBA,OAAnB,EAA4BJ,UAA5B;IAAuC,CAD3C;;IAGA,OAAO,IAAIC,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CANM;;EAQAC,oDAAP,UAA6BC,UAA7B,EAAiF;IAE7E,KAAKF,QAAL,CAAcE,UAAd,GAA2B,UAACI,OAAD,EAA4B;MACnD,QAACD,wCAAmBC,OAAnB,EAA4BJ,UAA5B,CAAD;IAAwC,CAD5C;;IAGA,OAAO,IAAIC,mCAAJ,CAAuB,KAAKH,QAA5B,CAAP;EACH,CANM;;EAQX;AAAC,CAnHD;;AAqHSgB","names":["binding","_binding","BindingWhenSyntax","constraint","binding_on_syntax_1","name","constraint_helpers_1","request","targetIsDefault","target","isNamed","isTagged","tag","value","parent","parentRequest","ancestor","exports"],"sourceRoot":"","sources":["../../src/syntax/binding_when_syntax.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}