{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.includes.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport Base from '../base'; // 网格背景图片\n\nvar GRID_PNG = 'url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)';\n\nvar Grid =\n/** @class */\nfunction (_super) {\n  __extends(Grid, _super);\n\n  function Grid(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Grid.prototype.getDefaultCfgs = function () {\n    return {\n      img: GRID_PNG,\n      follow: true\n    };\n  };\n\n  Grid.prototype.init = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var canvas = graph.get('canvas').get('el');\n    var img = this.get('img') || GRID_PNG;\n\n    if (!img.includes('url(')) {\n      img = \"url(\\\"\".concat(img, \"\\\")\");\n    }\n\n    var container = createDom(\"<div class='g6-grid-container' style=\\\"position:absolute;overflow:hidden;z-index: -1;\\\"></div>\");\n    var gridContainer = createDom(\"<div\\n        class='g6-grid'\\n        style='position:absolute;\\n        background-image: \".concat(img, \";\\n        user-select: none\\n        '></div>\"));\n    this.set('container', container);\n    this.set('gridContainer', gridContainer);\n    this.positionInit();\n    container.appendChild(gridContainer);\n    graphContainer.insertBefore(container, canvas);\n  };\n  /** 定位信息初始化 */\n\n\n  Grid.prototype.positionInit = function () {\n    var graph = this.get('graph');\n    var minZoom = graph.get('minZoom');\n    var width = graph.get('width');\n    var height = graph.get('height');\n    modifyCSS(this.get('container'), {\n      width: \"\".concat(width, \"px\"),\n      height: \"\".concat(height, \"px\")\n    }); // 网格 40*40 需保证 (gridContainerWidth / 2) % 40 = 0 才能让网格线对齐左上角 故 * 80\n\n    var gridContainerWidth = width * 80 / minZoom;\n    var gridContainerHeight = height * 80 / minZoom;\n    modifyCSS(this.get('gridContainer'), {\n      width: \"\".concat(gridContainerWidth, \"px\"),\n      height: \"\".concat(gridContainerHeight, \"px\"),\n      left: \"-\".concat(gridContainerWidth / 2, \"px\"),\n      top: \"-\".concat(gridContainerHeight / 2, \"px\")\n    });\n  }; // class-methods-use-this\n\n\n  Grid.prototype.getEvents = function () {\n    return {\n      viewportchange: 'updateGrid'\n    };\n  };\n  /**\n   * viewport change 事件的响应函数\n   * @param param\n   */\n\n\n  Grid.prototype.updateGrid = function (param) {\n    var gridContainer = this.get('gridContainer');\n    var matrix = param.matrix;\n    if (!matrix) matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var isFollow = this.get('follow');\n    var transform = \"matrix(\".concat(matrix[0], \", \").concat(matrix[1], \", \").concat(matrix[3], \", \").concat(matrix[4], \", \").concat(isFollow ? matrix[6] : '0', \", \").concat(isFollow ? matrix[7] : '0', \")\");\n    modifyCSS(gridContainer, {\n      transform: transform\n    });\n  };\n\n  Grid.prototype.getContainer = function () {\n    return this.get('container');\n  };\n\n  Grid.prototype.destroy = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = this.get('container');\n    graphContainer.removeChild(container);\n  };\n\n  return Grid;\n}(Base);\n\nexport default Grid;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","modifyCSS","createDom","Base","GRID_PNG","Grid","_super","config","getDefaultCfgs","img","follow","init","graph","get","graphContainer","canvas","includes","concat","container","gridContainer","set","positionInit","appendChild","insertBefore","minZoom","width","height","gridContainerWidth","gridContainerHeight","left","top","getEvents","viewportchange","updateGrid","param","matrix","isFollow","transform","getContainer","destroy","removeChild"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/grid/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport Base from '../base'; // 网格背景图片\n\nvar GRID_PNG = 'url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)';\n\nvar Grid =\n/** @class */\nfunction (_super) {\n  __extends(Grid, _super);\n\n  function Grid(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Grid.prototype.getDefaultCfgs = function () {\n    return {\n      img: GRID_PNG,\n      follow: true\n    };\n  };\n\n  Grid.prototype.init = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var canvas = graph.get('canvas').get('el');\n    var img = this.get('img') || GRID_PNG;\n\n    if (!img.includes('url(')) {\n      img = \"url(\\\"\".concat(img, \"\\\")\");\n    }\n\n    var container = createDom(\"<div class='g6-grid-container' style=\\\"position:absolute;overflow:hidden;z-index: -1;\\\"></div>\");\n    var gridContainer = createDom(\"<div\\n        class='g6-grid'\\n        style='position:absolute;\\n        background-image: \".concat(img, \";\\n        user-select: none\\n        '></div>\"));\n    this.set('container', container);\n    this.set('gridContainer', gridContainer);\n    this.positionInit();\n    container.appendChild(gridContainer);\n    graphContainer.insertBefore(container, canvas);\n  };\n  /** 定位信息初始化 */\n\n\n  Grid.prototype.positionInit = function () {\n    var graph = this.get('graph');\n    var minZoom = graph.get('minZoom');\n    var width = graph.get('width');\n    var height = graph.get('height');\n    modifyCSS(this.get('container'), {\n      width: \"\".concat(width, \"px\"),\n      height: \"\".concat(height, \"px\")\n    }); // 网格 40*40 需保证 (gridContainerWidth / 2) % 40 = 0 才能让网格线对齐左上角 故 * 80\n\n    var gridContainerWidth = width * 80 / minZoom;\n    var gridContainerHeight = height * 80 / minZoom;\n    modifyCSS(this.get('gridContainer'), {\n      width: \"\".concat(gridContainerWidth, \"px\"),\n      height: \"\".concat(gridContainerHeight, \"px\"),\n      left: \"-\".concat(gridContainerWidth / 2, \"px\"),\n      top: \"-\".concat(gridContainerHeight / 2, \"px\")\n    });\n  }; // class-methods-use-this\n\n\n  Grid.prototype.getEvents = function () {\n    return {\n      viewportchange: 'updateGrid'\n    };\n  };\n  /**\n   * viewport change 事件的响应函数\n   * @param param\n   */\n\n\n  Grid.prototype.updateGrid = function (param) {\n    var gridContainer = this.get('gridContainer');\n    var matrix = param.matrix;\n    if (!matrix) matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var isFollow = this.get('follow');\n    var transform = \"matrix(\".concat(matrix[0], \", \").concat(matrix[1], \", \").concat(matrix[3], \", \").concat(matrix[4], \", \").concat(isFollow ? matrix[6] : '0', \", \").concat(isFollow ? matrix[7] : '0', \")\");\n    modifyCSS(gridContainer, {\n      transform: transform\n    });\n  };\n\n  Grid.prototype.getContainer = function () {\n    return this.get('container');\n  };\n\n  Grid.prototype.destroy = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = this.get('container');\n    graphContainer.removeChild(container);\n  };\n\n  return Grid;\n}(Base);\n\nexport default Grid;"],"mappings":"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"},"metadata":{},"sourceType":"module"}