{"ast":null,"code":"import { NumberExt } from '../../util';\nimport { Point } from '../../geometry'; // eslint-disable-next-line\n\nexport function resolve(fn) {\n  return function (view, magnet, ref, options) {\n    if (ref instanceof Element) {\n      const refView = this.graph.renderer.findViewByElem(ref);\n      let refPoint;\n\n      if (refView) {\n        if (refView.isEdgeElement(ref)) {\n          const distance = options.fixedAt != null ? options.fixedAt : '50%';\n          refPoint = getPointAtEdge(refView, distance);\n        } else {\n          refPoint = refView.getBBoxOfElement(ref).getCenter();\n        }\n      } else {\n        refPoint = new Point();\n      }\n\n      return fn.call(this, view, magnet, refPoint, options);\n    }\n\n    return fn.apply(this, arguments); // eslint-disable-line\n  };\n}\nexport function getPointAtEdge(edgeView, value) {\n  const isPercentage = NumberExt.isPercentage(value);\n  const num = typeof value === 'string' ? parseFloat(value) : value;\n\n  if (isPercentage) {\n    return edgeView.getPointAtRatio(num / 100);\n  }\n\n  return edgeView.getPointAtLength(num);\n}","map":{"version":3,"mappings":"AAAA,SAASA,SAAT,QAA0B,YAA1B;AACA,SAASC,KAAT,QAAsB,gBAAtB,C,CAOA;;AACA,OAAM,SAAUC,OAAV,CAAyCC,EAAzC,EAA8C;EAClD,OAAO,UAELC,IAFK,EAGLC,MAHK,EAILC,GAJK,EAKLC,OALK,EAKkB;IAEvB,IAAID,GAAG,YAAYE,OAAnB,EAA4B;MAC1B,MAAMC,OAAO,GAAG,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,cAApB,CAAmCN,GAAnC,CAAhB;MACA,IAAIO,QAAJ;;MACA,IAAIJ,OAAJ,EAAa;QACX,IAAIA,OAAO,CAACK,aAAR,CAAsBR,GAAtB,CAAJ,EAAgC;UAC9B,MAAMS,QAAQ,GAAGR,OAAO,CAACS,OAAR,IAAmB,IAAnB,GAA0BT,OAAO,CAACS,OAAlC,GAA4C,KAA7D;UACAH,QAAQ,GAAGI,cAAc,CAACR,OAAD,EAAsBM,QAAtB,CAAzB;QACD,CAHD,MAGO;UACLF,QAAQ,GAAGJ,OAAO,CAACS,gBAAR,CAAyBZ,GAAzB,EAA8Ba,SAA9B,EAAX;QACD;MACF,CAPD,MAOO;QACLN,QAAQ,GAAG,IAAIZ,KAAJ,EAAX;MACD;;MACD,OAAOE,EAAE,CAACiB,IAAH,CAAQ,IAAR,EAAchB,IAAd,EAAoBC,MAApB,EAA4BQ,QAA5B,EAAsCN,OAAtC,CAAP;IACD;;IACD,OAAOJ,EAAE,CAACkB,KAAH,CAAS,IAAT,EAAeC,SAAf,CAAP,CAjBuB,CAiBU;EACtB,CAvBb;AAwBD;AAED,OAAM,SAAUL,cAAV,CAAyBM,QAAzB,EAA6CC,KAA7C,EAAmE;EACvE,MAAMC,YAAY,GAAGzB,SAAS,CAACyB,YAAV,CAAuBD,KAAvB,CAArB;EACA,MAAME,GAAG,GAAG,OAAOF,KAAP,KAAiB,QAAjB,GAA4BG,UAAU,CAACH,KAAD,CAAtC,GAAgDA,KAA5D;;EACA,IAAIC,YAAJ,EAAkB;IAChB,OAAOF,QAAQ,CAACK,eAAT,CAAyBF,GAAG,GAAG,GAA/B,CAAP;EACD;;EACD,OAAOH,QAAQ,CAACM,gBAAT,CAA0BH,GAA1B,CAAP;AACD","names":["NumberExt","Point","resolve","fn","view","magnet","ref","options","Element","refView","graph","renderer","findViewByElem","refPoint","isEdgeElement","distance","fixedAt","getPointAtEdge","getBBoxOfElement","getCenter","call","apply","arguments","edgeView","value","isPercentage","num","parseFloat","getPointAtRatio","getPointAtLength"],"sourceRoot":"","sources":["../../../src/registry/node-anchor/util.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}