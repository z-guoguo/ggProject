{"ast":null,"code":"/**\n * @fileoverview rect\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isArray } from '@antv/util';\nimport ShapeBase from './base';\nimport { SVG_ATTR_MAP } from '../constant';\nimport { parseRadius } from '../util/format';\n\nvar Rect =\n/** @class */\nfunction (_super) {\n  __extends(Rect, _super);\n\n  function Rect() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'rect';\n    _this.canFill = true;\n    _this.canStroke = true;\n    return _this;\n  }\n\n  Rect.prototype.getDefaultAttrs = function () {\n    var attrs = _super.prototype.getDefaultAttrs.call(this);\n\n    return __assign(__assign({}, attrs), {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      radius: 0\n    });\n  };\n\n  Rect.prototype.createPath = function (context, targetAttrs) {\n    var _this = this;\n\n    var attrs = this.attr();\n    var el = this.get('el'); // 加上状态量，用来标记 path 是否已组装\n\n    var completed = false; // 和组装 path 相关的绘图属性\n\n    var pathRelatedAttrs = ['x', 'y', 'width', 'height', 'radius'];\n    each(targetAttrs || attrs, function (value, attr) {\n      if (pathRelatedAttrs.indexOf(attr) !== -1 && !completed) {\n        el.setAttribute('d', _this._assembleRect(attrs));\n        completed = true;\n      } else if (pathRelatedAttrs.indexOf(attr) === -1 && SVG_ATTR_MAP[attr]) {\n        el.setAttribute(SVG_ATTR_MAP[attr], value);\n      }\n    });\n  };\n\n  Rect.prototype._assembleRect = function (attrs) {\n    var x = attrs.x;\n    var y = attrs.y;\n    var w = attrs.width;\n    var h = attrs.height;\n    var radius = attrs.radius;\n\n    if (!radius) {\n      return \"M \" + x + \",\" + y + \" l \" + w + \",0 l 0,\" + h + \" l\" + -w + \" 0 z\";\n    }\n\n    var r = parseRadius(radius);\n\n    if (isArray(radius)) {\n      if (radius.length === 1) {\n        r.r1 = r.r2 = r.r3 = r.r4 = radius[0];\n      } else if (radius.length === 2) {\n        r.r1 = r.r3 = radius[0];\n        r.r2 = r.r4 = radius[1];\n      } else if (radius.length === 3) {\n        r.r1 = radius[0];\n        r.r2 = r.r4 = radius[1];\n        r.r3 = radius[2];\n      } else {\n        r.r1 = radius[0];\n        r.r2 = radius[1];\n        r.r3 = radius[2];\n        r.r4 = radius[3];\n      }\n    } else {\n      r.r1 = r.r2 = r.r3 = r.r4 = radius;\n    }\n\n    var d = [[\"M \" + (x + r.r1) + \",\" + y], [\"l \" + (w - r.r1 - r.r2) + \",0\"], [\"a \" + r.r2 + \",\" + r.r2 + \",0,0,1,\" + r.r2 + \",\" + r.r2], [\"l 0,\" + (h - r.r2 - r.r3)], [\"a \" + r.r3 + \",\" + r.r3 + \",0,0,1,\" + -r.r3 + \",\" + r.r3], [\"l \" + (r.r3 + r.r4 - w) + \",0\"], [\"a \" + r.r4 + \",\" + r.r4 + \",0,0,1,\" + -r.r4 + \",\" + -r.r4], [\"l 0,\" + (r.r4 + r.r1 - h)], [\"a \" + r.r1 + \",\" + r.r1 + \",0,0,1,\" + r.r1 + \",\" + -r.r1], ['z']];\n    return d.join(' ');\n  };\n\n  return Rect;\n}(ShapeBase);\n\nexport default Rect;","map":{"version":3,"mappings":"AAAA;;;;;AAKA,SAASA,IAAT,EAAeC,OAAf,QAA8B,YAA9B;AACA,OAAOC,SAAP,MAAsB,QAAtB;AACA,SAASC,YAAT,QAA6B,aAA7B;AACA,SAASC,WAAT,QAA4B,gBAA5B;;AAEA;AAAA;AAAA;EAAmBC;;EAAnB;IAAA;;IACEC,aAAe,MAAf;IACAA,gBAAmB,IAAnB;IACAA,kBAAqB,IAArB;;EA2ED;;EAzECC;IACE,IAAMC,KAAK,GAAGC,iBAAMC,eAAN,CAAqBC,IAArB,CAAqB,IAArB,CAAd;;IACA,6BACKH,KADL,GACU;MACRI,CAAC,EAAE,CADK;MAERC,CAAC,EAAE,CAFK;MAGRC,KAAK,EAAE,CAHC;MAIRC,MAAM,EAAE,CAJA;MAKRC,MAAM,EAAE;IALA,CADV;EAQD,CAVD;;EAYAT,sCAAWU,OAAX,EAAoBC,WAApB,EAA+B;IAA/B;;IACE,IAAMV,KAAK,GAAG,KAAKW,IAAL,EAAd;IACA,IAAMC,EAAE,GAAG,KAAKC,GAAL,CAAS,IAAT,CAAX,CAF6B,CAG7B;;IACA,IAAIC,SAAS,GAAG,KAAhB,CAJ6B,CAK7B;;IACA,IAAMC,gBAAgB,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,OAAX,EAAoB,QAApB,EAA8B,QAA9B,CAAzB;IACAvB,IAAI,CAACkB,WAAW,IAAIV,KAAhB,EAAuB,UAACgB,KAAD,EAAQL,IAAR,EAAY;MACrC,IAAII,gBAAgB,CAACE,OAAjB,CAAyBN,IAAzB,MAAmC,CAAC,CAApC,IAAyC,CAACG,SAA9C,EAAyD;QACvDF,EAAE,CAACM,YAAH,CAAgB,GAAhB,EAAqBpB,KAAI,CAACqB,aAAL,CAAmBnB,KAAnB,CAArB;QACAc,SAAS,GAAG,IAAZ;MACD,CAHD,MAGO,IAAIC,gBAAgB,CAACE,OAAjB,CAAyBN,IAAzB,MAAmC,CAAC,CAApC,IAAyChB,YAAY,CAACgB,IAAD,CAAzD,EAAiE;QACtEC,EAAE,CAACM,YAAH,CAAgBvB,YAAY,CAACgB,IAAD,CAA5B,EAAoCK,KAApC;MACD;IACF,CAPG,CAAJ;EAQD,CAfD;;EAiBAjB,yCAAcC,KAAd,EAAmB;IACjB,IAAMI,CAAC,GAAGJ,KAAK,CAACI,CAAhB;IACA,IAAMC,CAAC,GAAGL,KAAK,CAACK,CAAhB;IACA,IAAMe,CAAC,GAAGpB,KAAK,CAACM,KAAhB;IACA,IAAMe,CAAC,GAAGrB,KAAK,CAACO,MAAhB;IACA,IAAMC,MAAM,GAAGR,KAAK,CAACQ,MAArB;;IAEA,IAAI,CAACA,MAAL,EAAa;MACX,OAAO,OAAKJ,CAAL,GAAM,GAAN,GAAUC,CAAV,GAAW,KAAX,GAAiBe,CAAjB,GAAkB,SAAlB,GAA4BC,CAA5B,GAA6B,IAA7B,GAAkC,CAACD,CAAnC,GAAoC,MAA3C;IACD;;IACD,IAAME,CAAC,GAAG1B,WAAW,CAACY,MAAD,CAArB;;IACA,IAAIf,OAAO,CAACe,MAAD,CAAX,EAAqB;MACnB,IAAIA,MAAM,CAACe,MAAP,KAAkB,CAAtB,EAAyB;QACvBD,CAAC,CAACE,EAAF,GAAOF,CAAC,CAACG,EAAF,GAAOH,CAAC,CAACI,EAAF,GAAOJ,CAAC,CAACK,EAAF,GAAOnB,MAAM,CAAC,CAAD,CAAlC;MACD,CAFD,MAEO,IAAIA,MAAM,CAACe,MAAP,KAAkB,CAAtB,EAAyB;QAC9BD,CAAC,CAACE,EAAF,GAAOF,CAAC,CAACI,EAAF,GAAOlB,MAAM,CAAC,CAAD,CAApB;QACAc,CAAC,CAACG,EAAF,GAAOH,CAAC,CAACK,EAAF,GAAOnB,MAAM,CAAC,CAAD,CAApB;MACD,CAHM,MAGA,IAAIA,MAAM,CAACe,MAAP,KAAkB,CAAtB,EAAyB;QAC9BD,CAAC,CAACE,EAAF,GAAOhB,MAAM,CAAC,CAAD,CAAb;QACAc,CAAC,CAACG,EAAF,GAAOH,CAAC,CAACK,EAAF,GAAOnB,MAAM,CAAC,CAAD,CAApB;QACAc,CAAC,CAACI,EAAF,GAAOlB,MAAM,CAAC,CAAD,CAAb;MACD,CAJM,MAIA;QACLc,CAAC,CAACE,EAAF,GAAOhB,MAAM,CAAC,CAAD,CAAb;QACAc,CAAC,CAACG,EAAF,GAAOjB,MAAM,CAAC,CAAD,CAAb;QACAc,CAAC,CAACI,EAAF,GAAOlB,MAAM,CAAC,CAAD,CAAb;QACAc,CAAC,CAACK,EAAF,GAAOnB,MAAM,CAAC,CAAD,CAAb;MACD;IACF,CAhBD,MAgBO;MACLc,CAAC,CAACE,EAAF,GAAOF,CAAC,CAACG,EAAF,GAAOH,CAAC,CAACI,EAAF,GAAOJ,CAAC,CAACK,EAAF,GAAOnB,MAA5B;IACD;;IACD,IAAMoB,CAAC,GAAG,CACR,CAAC,QAAKxB,CAAC,GAAGkB,CAAC,CAACE,EAAX,IAAa,GAAb,GAAiBnB,CAAlB,CADQ,EAER,CAAC,QAAKe,CAAC,GAAGE,CAAC,CAACE,EAAN,GAAWF,CAAC,CAACG,EAAlB,IAAoB,IAArB,CAFQ,EAGR,CAAC,OAAKH,CAAC,CAACG,EAAP,GAAS,GAAT,GAAaH,CAAC,CAACG,EAAf,GAAiB,SAAjB,GAA2BH,CAAC,CAACG,EAA7B,GAA+B,GAA/B,GAAmCH,CAAC,CAACG,EAAtC,CAHQ,EAIR,CAAC,UAAOJ,CAAC,GAAGC,CAAC,CAACG,EAAN,GAAWH,CAAC,CAACI,EAApB,CAAD,CAJQ,EAKR,CAAC,OAAKJ,CAAC,CAACI,EAAP,GAAS,GAAT,GAAaJ,CAAC,CAACI,EAAf,GAAiB,SAAjB,GAA2B,CAACJ,CAAC,CAACI,EAA9B,GAAgC,GAAhC,GAAoCJ,CAAC,CAACI,EAAvC,CALQ,EAMR,CAAC,QAAKJ,CAAC,CAACI,EAAF,GAAOJ,CAAC,CAACK,EAAT,GAAcP,CAAnB,IAAoB,IAArB,CANQ,EAOR,CAAC,OAAKE,CAAC,CAACK,EAAP,GAAS,GAAT,GAAaL,CAAC,CAACK,EAAf,GAAiB,SAAjB,GAA2B,CAACL,CAAC,CAACK,EAA9B,GAAgC,GAAhC,GAAoC,CAACL,CAAC,CAACK,EAAxC,CAPQ,EAQR,CAAC,UAAOL,CAAC,CAACK,EAAF,GAAOL,CAAC,CAACE,EAAT,GAAcH,CAArB,CAAD,CARQ,EASR,CAAC,OAAKC,CAAC,CAACE,EAAP,GAAS,GAAT,GAAaF,CAAC,CAACE,EAAf,GAAiB,SAAjB,GAA2BF,CAAC,CAACE,EAA7B,GAA+B,GAA/B,GAAmC,CAACF,CAAC,CAACE,EAAvC,CATQ,EAUR,CAAC,GAAD,CAVQ,CAAV;IAYA,OAAOI,CAAC,CAACC,IAAF,CAAO,GAAP,CAAP;EACD,CA3CD;;EA4CF;AAAC,CA9ED,CAAmBnC,SAAnB;;AAgFA,eAAeK,IAAf","names":["each","isArray","ShapeBase","SVG_ATTR_MAP","parseRadius","__extends","_this","Rect","attrs","_super","getDefaultAttrs","call","x","y","width","height","radius","context","targetAttrs","attr","el","get","completed","pathRelatedAttrs","value","indexOf","setAttribute","_assembleRect","w","h","r","length","r1","r2","r3","r4","d","join"],"sourceRoot":"","sources":["../../src/shape/rect.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}