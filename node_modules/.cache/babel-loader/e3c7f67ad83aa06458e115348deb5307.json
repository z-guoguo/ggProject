{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport { mix, isString } from '@antv/util';\nimport { registerNode, BaseGlobal as Global } from '@antv/g6-core';\nregisterNode('modelRect', {\n  // 自定义节点时的配置\n  options: {\n    size: [185, 70],\n    style: {\n      radius: 5,\n      stroke: '#69c0ff',\n      fill: '#ffffff',\n      lineWidth: Global.defaultNode.style.lineWidth,\n      fillOpacity: 1\n    },\n    // 文本样式配置\n    labelCfg: {\n      style: {\n        fill: '#595959',\n        fontSize: 14,\n        fontFamily: Global.windowFontFamily\n      },\n      offset: 30 // 距离左侧的 offset，没有设置 y 轴上移动的配置\n\n    },\n    descriptionCfg: {\n      style: {\n        fontSize: 12,\n        fill: '#bfbfbf',\n        fontFamily: Global.windowFontFamily\n      },\n      paddingTop: 0\n    },\n    preRect: {\n      show: true,\n      width: 4,\n      fill: '#40a9ff',\n      radius: 2\n    },\n    // 节点上左右上下四个方向上的链接circle配置\n    linkPoints: {\n      top: false,\n      right: false,\n      bottom: false,\n      left: false,\n      // circle的大小\n      size: 10,\n      lineWidth: 1,\n      fill: '#72CC4A',\n      stroke: '#72CC4A'\n    },\n    // 节点中icon配置\n    logoIcon: {\n      // 是否显示icon，值为 false 则不渲染icon\n      show: true,\n      x: 0,\n      y: 0,\n      // icon的地址，字符串类型\n      img: 'https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg',\n      width: 16,\n      height: 16,\n      // 用于调整图标的左右位置\n      offset: 0\n    },\n    // 节点中表示状态的icon配置\n    stateIcon: {\n      // 是否显示icon，值为 false 则不渲染icon\n      show: true,\n      x: 0,\n      y: 0,\n      // icon的地址，字符串类型\n      img: 'https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg',\n      width: 16,\n      height: 16,\n      // 用于调整图标的左右位置\n      offset: -5\n    },\n    // 连接点，默认为左右\n    // anchorPoints: [{ x: 0, y: 0.5 }, { x: 1, y: 0.5 }]\n    anchorPoints: [[0, 0.5], [1, 0.5]]\n  },\n  shapeType: 'modelRect',\n  drawShape: function drawShape(cfg, group) {\n    var _a = (this.mergeStyle || this.getOptions(cfg)).preRect,\n        preRect = _a === void 0 ? {} : _a;\n    var style = this.getShapeStyle(cfg);\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n    var keyShape = group.addShape('rect', {\n      attrs: style,\n      className: \"\".concat(this.type, \"-keyShape\"),\n      name: \"\".concat(this.type, \"-keyShape\"),\n      draggable: true\n    });\n    group['shapeMap'][\"\".concat(this.type, \"-keyShape\")] = keyShape;\n\n    var preRectShow = preRect.show,\n        preRectStyle = __rest(preRect, [\"show\"]);\n\n    if (preRectShow) {\n      group['shapeMap']['pre-rect'] = group.addShape('rect', {\n        attrs: __assign({\n          x: -width / 2,\n          y: -height / 2,\n          height: height\n        }, preRectStyle),\n        className: 'pre-rect',\n        name: 'pre-rect',\n        draggable: true\n      });\n    }\n\n    this.drawLogoIcon(cfg, group);\n    this.drawStateIcon(cfg, group);\n    this.drawLinkPoints(cfg, group);\n    return keyShape;\n  },\n\n  /**\n   * 绘制模型矩形左边的logo图标\n   * @param {Object} cfg 数据配置项\n   * @param {Group} group Group实例\n   */\n  drawLogoIcon: function drawLogoIcon(cfg, group) {\n    var _a = (this.mergeStyle || this.getOptions(cfg)).logoIcon,\n        logoIcon = _a === void 0 ? {} : _a;\n    var size = this.getSize(cfg);\n    var width = size[0];\n\n    if (logoIcon.show) {\n      var w = logoIcon.width,\n          h = logoIcon.height,\n          x = logoIcon.x,\n          y = logoIcon.y,\n          offset = logoIcon.offset,\n          text = logoIcon.text,\n          logoIconStyle = __rest(logoIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\", \"text\"]);\n\n      if (text) {\n        group['shapeMap']['rect-logo-icon'] = group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, logoIconStyle),\n          className: 'rect-logo-icon',\n          name: 'rect-logo-icon',\n          draggable: true\n        });\n      } else {\n        group['shapeMap']['rect-logo-icon'] = group.addShape('image', {\n          attrs: __assign(__assign({}, logoIconStyle), {\n            x: x || -width / 2 + w + offset,\n            y: y || -h / 2,\n            width: w,\n            height: h\n          }),\n          className: 'rect-logo-icon',\n          name: 'rect-logo-icon',\n          draggable: true\n        });\n      }\n    }\n  },\n\n  /**\n   * 绘制模型矩形右边的状态图标\n   * @param {Object} cfg 数据配置项\n   * @param {Group} group Group实例\n   */\n  drawStateIcon: function drawStateIcon(cfg, group) {\n    var _a = (this.mergeStyle || this.getOptions(cfg)).stateIcon,\n        stateIcon = _a === void 0 ? {} : _a;\n    var size = this.getSize(cfg);\n    var width = size[0];\n\n    if (stateIcon.show) {\n      var w = stateIcon.width,\n          h = stateIcon.height,\n          x = stateIcon.x,\n          y = stateIcon.y,\n          offset = stateIcon.offset,\n          text = stateIcon.text,\n          iconStyle = __rest(stateIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\", \"text\"]);\n\n      if (text) {\n        group['shapeMap']['rect-state-icon'] = group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, iconStyle),\n          className: 'rect-state-icon',\n          name: 'rect-state-icon',\n          draggable: true\n        });\n      } else {\n        group['shapeMap']['rect-state-icon'] = group.addShape('image', {\n          attrs: __assign(__assign({}, iconStyle), {\n            x: x || width / 2 - w + offset,\n            y: y || -h / 2,\n            width: w,\n            height: h\n          }),\n          className: 'rect-state-icon',\n          name: 'rect-state-icon',\n          draggable: true\n        });\n      }\n    }\n  },\n\n  /**\n   * 绘制节点上的LinkPoints\n   * @param {Object} cfg data数据配置项\n   * @param {Group} group Group实例\n   */\n  drawLinkPoints: function drawLinkPoints(cfg, group) {\n    var _a = (this.mergeStyle || this.getOptions(cfg)).linkPoints,\n        linkPoints = _a === void 0 ? {} : _a;\n\n    var top = linkPoints.top,\n        left = linkPoints.left,\n        right = linkPoints.right,\n        bottom = linkPoints.bottom,\n        markSize = linkPoints.size,\n        markR = linkPoints.r,\n        markStyle = __rest(linkPoints, [\"top\", \"left\", \"right\", \"bottom\", \"size\", \"r\"]);\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n\n    if (left) {\n      // left circle\n      group['shapeMap']['link-point-left'] = group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: -width / 2,\n          y: 0,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-left',\n        name: 'link-point-left',\n        isAnchorPoint: true\n      });\n    }\n\n    if (right) {\n      // right circle\n      group['shapeMap']['link-point-right'] = group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: width / 2,\n          y: 0,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-right',\n        name: 'link-point-right',\n        isAnchorPoint: true\n      });\n    }\n\n    if (top) {\n      // top circle\n      group['shapeMap']['link-point-top'] = group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: 0,\n          y: -height / 2,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-top',\n        name: 'link-point-top',\n        isAnchorPoint: true\n      });\n    }\n\n    if (bottom) {\n      // bottom circle\n      group['shapeMap']['link-point-bottom'] = group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: 0,\n          y: height / 2,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-bottom',\n        name: 'link-point-bottom',\n        isAnchorPoint: true\n      });\n    }\n  },\n  drawLabel: function drawLabel(cfg, group) {\n    var _a = this.getOptions(cfg),\n        _b = _a.labelCfg,\n        labelCfg = _b === void 0 ? {} : _b,\n        _c = _a.logoIcon,\n        logoIcon = _c === void 0 ? {} : _c,\n        _d = _a.descriptionCfg,\n        descriptionCfg = _d === void 0 ? {} : _d;\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var label = null;\n    var show = logoIcon.show,\n        w = logoIcon.width;\n    var offsetX = -width / 2 + labelCfg.offset;\n\n    if (show) {\n      offsetX = -width / 2 + w + labelCfg.offset;\n    }\n\n    var fontStyle = labelCfg.style;\n    var descriptionStyle = descriptionCfg.style,\n        descriptionPaddingTop = descriptionCfg.paddingTop;\n\n    if (isString(cfg.description)) {\n      label = group.addShape('text', {\n        attrs: __assign(__assign({}, fontStyle), {\n          x: offsetX,\n          y: -5,\n          text: cfg.label\n        }),\n        className: 'text-shape',\n        name: 'text-shape',\n        draggable: true,\n        labelRelated: true\n      });\n      group['shapeMap']['text-shape'] = label;\n      group['shapeMap']['rect-description'] = group.addShape('text', {\n        attrs: __assign(__assign({}, descriptionStyle), {\n          x: offsetX,\n          y: 17 + (descriptionPaddingTop || 0),\n          text: cfg.description\n        }),\n        className: 'rect-description',\n        name: 'rect-description',\n        draggable: true,\n        labelRelated: true\n      });\n    } else {\n      label = group.addShape('text', {\n        attrs: __assign(__assign({}, fontStyle), {\n          x: offsetX,\n          y: 7,\n          text: cfg.label\n        }),\n        className: 'text-shape',\n        name: 'text-shape',\n        draggable: true,\n        labelRelated: true\n      });\n      group['shapeMap']['text-shape'] = label;\n    }\n\n    return label;\n  },\n\n  /**\n   * 获取节点的样式，供基于该节点自定义时使用\n   * @param {Object} cfg 节点数据模型\n   * @return {Object} 节点的样式\n   */\n  getShapeStyle: function getShapeStyle(cfg) {\n    var defaultStyle = (this.mergeStyle || this.getOptions(cfg)).style;\n    var strokeStyle = {\n      stroke: cfg.color\n    }; // 如果设置了color，则覆盖默认的stroke属性\n\n    var style = mix({}, defaultStyle, strokeStyle);\n    var size = this.getSize(cfg);\n    var width = style.width || size[0];\n    var height = style.height || size[1];\n\n    var styles = __assign({\n      x: -width / 2,\n      y: -height / 2,\n      width: width,\n      height: height\n    }, style);\n\n    return styles;\n  },\n  update: function update(cfg, item) {\n    var _a = this.mergeStyle || this.getOptions(cfg),\n        _b = _a.style,\n        style = _b === void 0 ? {} : _b,\n        _c = _a.labelCfg,\n        labelCfg = _c === void 0 ? {} : _c,\n        _d = _a.descriptionCfg,\n        descriptionCfg = _d === void 0 ? {} : _d;\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n    var keyShape = item.get('keyShape');\n    keyShape.attr(__assign(__assign({}, style), {\n      x: -width / 2,\n      y: -height / 2,\n      width: width,\n      height: height\n    }));\n    var group = item.getContainer();\n    var logoIconShape = group['shapeMap']['rect-logo-icon'] || group.find(function (element) {\n      return element.get('className') === 'rect-logo-icon';\n    });\n    var currentLogoIconAttr = logoIconShape ? logoIconShape.attr() : {};\n    var logoIcon = mix({}, currentLogoIconAttr, cfg.logoIcon);\n    var w = logoIcon.width;\n\n    if (w === undefined) {\n      w = this.options.logoIcon.width;\n    }\n\n    var show = cfg.logoIcon ? cfg.logoIcon.show : undefined;\n    var offset = labelCfg.offset;\n    var offsetX = -width / 2 + w + offset;\n\n    if (!show && show !== undefined) {\n      offsetX = -width / 2 + offset;\n    }\n\n    var label = group['shapeMap']['node-label'] || group.find(function (element) {\n      return element.get('className') === 'node-label';\n    });\n    var description = group['shapeMap']['rect-description'] || group.find(function (element) {\n      return element.get('className') === 'rect-description';\n    });\n\n    if (cfg.label) {\n      if (!label) {\n        group['shapeMap']['node-label'] = group.addShape('text', {\n          attrs: __assign(__assign({}, labelCfg.style), {\n            x: offsetX,\n            y: cfg.description ? -5 : 7,\n            text: cfg.label\n          }),\n          className: 'node-label',\n          name: 'node-label',\n          draggable: true,\n          labelRelated: true\n        });\n      } else {\n        var cfgStyle = cfg.labelCfg ? cfg.labelCfg.style : {};\n        var labelStyle = mix({}, label.attr(), cfgStyle);\n        if (cfg.label) labelStyle.text = cfg.label;\n        labelStyle.x = offsetX;\n        if (isString(cfg.description)) labelStyle.y = -5;\n\n        if (description) {\n          description.resetMatrix();\n          description.attr({\n            x: offsetX\n          });\n        }\n\n        label.resetMatrix();\n        label.attr(labelStyle);\n      }\n    }\n\n    if (isString(cfg.description)) {\n      var paddingTop = descriptionCfg.paddingTop;\n\n      if (!description) {\n        group['shapeMap']['rect-description'] = group.addShape('text', {\n          attrs: __assign(__assign({}, descriptionCfg.style), {\n            x: offsetX,\n            y: 17 + (paddingTop || 0),\n            text: cfg.description\n          }),\n          className: 'rect-description',\n          name: 'rect-description',\n          draggable: true,\n          labelRelated: true\n        });\n      } else {\n        var cfgStyle = cfg.descriptionCfg ? cfg.descriptionCfg.style : {};\n        var descriptionStyle = mix({}, description.attr(), cfgStyle);\n        if (isString(cfg.description)) descriptionStyle.text = cfg.description;\n        descriptionStyle.x = offsetX;\n        description.resetMatrix();\n        description.attr(__assign(__assign({}, descriptionStyle), {\n          y: 17 + (paddingTop || 0)\n        }));\n      }\n    }\n\n    var preRectShape = group['shapeMap']['pre-rect'] || group.find(function (element) {\n      return element.get('className') === 'pre-rect';\n    });\n\n    if (preRectShape && !preRectShape.destroyed) {\n      var preRect = mix({}, preRectShape.attr(), cfg.preRect);\n      preRectShape.attr(__assign(__assign({}, preRect), {\n        x: -width / 2,\n        y: -height / 2,\n        height: height\n      }));\n    }\n\n    if (logoIconShape && !logoIconShape.destroyed) {\n      if (!show && show !== undefined) {\n        logoIconShape.remove();\n        delete group['shapeMap']['pre-rect'];\n      } else {\n        var logoW = logoIcon.width,\n            h = logoIcon.height,\n            x = logoIcon.x,\n            y = logoIcon.y,\n            logoOffset = logoIcon.offset,\n            logoIconStyle = __rest(logoIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\"]);\n\n        logoIconShape.attr(__assign(__assign({}, logoIconStyle), {\n          x: x || -width / 2 + logoW + logoOffset,\n          y: y || -h / 2,\n          width: logoW,\n          height: h\n        }));\n      }\n    } else if (show) {\n      this.drawLogoIcon(cfg, group);\n    }\n\n    var stateIconShape = group['shapeMap']['rect-state-icon'] || group.find(function (element) {\n      return element.get('className') === 'rect-state-icon';\n    });\n    var currentStateIconAttr = stateIconShape ? stateIconShape.attr() : {};\n    var stateIcon = mix({}, currentStateIconAttr, cfg.stateIcon);\n\n    if (stateIconShape) {\n      if (!stateIcon.show && stateIcon.show !== undefined) {\n        stateIconShape.remove();\n        delete group['shapeMap']['rect-state-icon'];\n      }\n\n      var stateW = stateIcon.width,\n          h = stateIcon.height,\n          x = stateIcon.x,\n          y = stateIcon.y,\n          stateOffset = stateIcon.offset,\n          stateIconStyle = __rest(stateIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\"]);\n\n      stateIconShape.attr(__assign(__assign({}, stateIconStyle), {\n        x: x || width / 2 - stateW + stateOffset,\n        y: y || -h / 2,\n        width: stateW,\n        height: h\n      }));\n    } else if (stateIcon.show) {\n      this.drawStateIcon(cfg, group);\n    }\n\n    this.updateLinkPoints(cfg, group);\n  }\n}, 'single-node');","map":{"version":3,"names":["__assign","__rest","mix","isString","registerNode","BaseGlobal","Global","options","size","style","radius","stroke","fill","lineWidth","defaultNode","fillOpacity","labelCfg","fontSize","fontFamily","windowFontFamily","offset","descriptionCfg","paddingTop","preRect","show","width","linkPoints","top","right","bottom","left","logoIcon","x","y","img","height","stateIcon","anchorPoints","shapeType","drawShape","cfg","group","_a","mergeStyle","getOptions","getShapeStyle","getSize","keyShape","addShape","attrs","className","concat","type","name","draggable","preRectShow","preRectStyle","drawLogoIcon","drawStateIcon","drawLinkPoints","w","h","text","logoIconStyle","textBaseline","textAlign","iconStyle","markSize","markR","r","markStyle","isAnchorPoint","drawLabel","_b","_c","_d","label","offsetX","fontStyle","descriptionStyle","descriptionPaddingTop","description","labelRelated","defaultStyle","strokeStyle","color","styles","update","item","get","attr","getContainer","logoIconShape","find","element","currentLogoIconAttr","undefined","cfgStyle","labelStyle","resetMatrix","preRectShape","destroyed","remove","logoW","logoOffset","stateIconShape","currentStateIconAttr","stateW","stateOffset","stateIconStyle","updateLinkPoints"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-element/es/nodes/modelRect.js"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport { mix, isString } from '@antv/util';\nimport { registerNode, BaseGlobal as Global } from '@antv/g6-core';\nregisterNode('modelRect', {\n  // 自定义节点时的配置\n  options: {\n    size: [185, 70],\n    style: {\n      radius: 5,\n      stroke: '#69c0ff',\n      fill: '#ffffff',\n      lineWidth: Global.defaultNode.style.lineWidth,\n      fillOpacity: 1\n    },\n    // 文本样式配置\n    labelCfg: {\n      style: {\n        fill: '#595959',\n        fontSize: 14,\n        fontFamily: Global.windowFontFamily\n      },\n      offset: 30 // 距离左侧的 offset，没有设置 y 轴上移动的配置\n\n    },\n    descriptionCfg: {\n      style: {\n        fontSize: 12,\n        fill: '#bfbfbf',\n        fontFamily: Global.windowFontFamily\n      },\n      paddingTop: 0\n    },\n    preRect: {\n      show: true,\n      width: 4,\n      fill: '#40a9ff',\n      radius: 2\n    },\n    // 节点上左右上下四个方向上的链接circle配置\n    linkPoints: {\n      top: false,\n      right: false,\n      bottom: false,\n      left: false,\n      // circle的大小\n      size: 10,\n      lineWidth: 1,\n      fill: '#72CC4A',\n      stroke: '#72CC4A'\n    },\n    // 节点中icon配置\n    logoIcon: {\n      // 是否显示icon，值为 false 则不渲染icon\n      show: true,\n      x: 0,\n      y: 0,\n      // icon的地址，字符串类型\n      img: 'https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg',\n      width: 16,\n      height: 16,\n      // 用于调整图标的左右位置\n      offset: 0\n    },\n    // 节点中表示状态的icon配置\n    stateIcon: {\n      // 是否显示icon，值为 false 则不渲染icon\n      show: true,\n      x: 0,\n      y: 0,\n      // icon的地址，字符串类型\n      img: 'https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg',\n      width: 16,\n      height: 16,\n      // 用于调整图标的左右位置\n      offset: -5\n    },\n    // 连接点，默认为左右\n    // anchorPoints: [{ x: 0, y: 0.5 }, { x: 1, y: 0.5 }]\n    anchorPoints: [[0, 0.5], [1, 0.5]]\n  },\n  shapeType: 'modelRect',\n  drawShape: function drawShape(cfg, group) {\n    var _a = (this.mergeStyle || this.getOptions(cfg)).preRect,\n        preRect = _a === void 0 ? {} : _a;\n    var style = this.getShapeStyle(cfg);\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n    var keyShape = group.addShape('rect', {\n      attrs: style,\n      className: \"\".concat(this.type, \"-keyShape\"),\n      name: \"\".concat(this.type, \"-keyShape\"),\n      draggable: true\n    });\n    group['shapeMap'][\"\".concat(this.type, \"-keyShape\")] = keyShape;\n\n    var preRectShow = preRect.show,\n        preRectStyle = __rest(preRect, [\"show\"]);\n\n    if (preRectShow) {\n      group['shapeMap']['pre-rect'] = group.addShape('rect', {\n        attrs: __assign({\n          x: -width / 2,\n          y: -height / 2,\n          height: height\n        }, preRectStyle),\n        className: 'pre-rect',\n        name: 'pre-rect',\n        draggable: true\n      });\n    }\n\n    this.drawLogoIcon(cfg, group);\n    this.drawStateIcon(cfg, group);\n    this.drawLinkPoints(cfg, group);\n    return keyShape;\n  },\n\n  /**\n   * 绘制模型矩形左边的logo图标\n   * @param {Object} cfg 数据配置项\n   * @param {Group} group Group实例\n   */\n  drawLogoIcon: function drawLogoIcon(cfg, group) {\n    var _a = (this.mergeStyle || this.getOptions(cfg)).logoIcon,\n        logoIcon = _a === void 0 ? {} : _a;\n    var size = this.getSize(cfg);\n    var width = size[0];\n\n    if (logoIcon.show) {\n      var w = logoIcon.width,\n          h = logoIcon.height,\n          x = logoIcon.x,\n          y = logoIcon.y,\n          offset = logoIcon.offset,\n          text = logoIcon.text,\n          logoIconStyle = __rest(logoIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\", \"text\"]);\n\n      if (text) {\n        group['shapeMap']['rect-logo-icon'] = group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, logoIconStyle),\n          className: 'rect-logo-icon',\n          name: 'rect-logo-icon',\n          draggable: true\n        });\n      } else {\n        group['shapeMap']['rect-logo-icon'] = group.addShape('image', {\n          attrs: __assign(__assign({}, logoIconStyle), {\n            x: x || -width / 2 + w + offset,\n            y: y || -h / 2,\n            width: w,\n            height: h\n          }),\n          className: 'rect-logo-icon',\n          name: 'rect-logo-icon',\n          draggable: true\n        });\n      }\n    }\n  },\n\n  /**\n   * 绘制模型矩形右边的状态图标\n   * @param {Object} cfg 数据配置项\n   * @param {Group} group Group实例\n   */\n  drawStateIcon: function drawStateIcon(cfg, group) {\n    var _a = (this.mergeStyle || this.getOptions(cfg)).stateIcon,\n        stateIcon = _a === void 0 ? {} : _a;\n    var size = this.getSize(cfg);\n    var width = size[0];\n\n    if (stateIcon.show) {\n      var w = stateIcon.width,\n          h = stateIcon.height,\n          x = stateIcon.x,\n          y = stateIcon.y,\n          offset = stateIcon.offset,\n          text = stateIcon.text,\n          iconStyle = __rest(stateIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\", \"text\"]);\n\n      if (text) {\n        group['shapeMap']['rect-state-icon'] = group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, iconStyle),\n          className: 'rect-state-icon',\n          name: 'rect-state-icon',\n          draggable: true\n        });\n      } else {\n        group['shapeMap']['rect-state-icon'] = group.addShape('image', {\n          attrs: __assign(__assign({}, iconStyle), {\n            x: x || width / 2 - w + offset,\n            y: y || -h / 2,\n            width: w,\n            height: h\n          }),\n          className: 'rect-state-icon',\n          name: 'rect-state-icon',\n          draggable: true\n        });\n      }\n    }\n  },\n\n  /**\n   * 绘制节点上的LinkPoints\n   * @param {Object} cfg data数据配置项\n   * @param {Group} group Group实例\n   */\n  drawLinkPoints: function drawLinkPoints(cfg, group) {\n    var _a = (this.mergeStyle || this.getOptions(cfg)).linkPoints,\n        linkPoints = _a === void 0 ? {} : _a;\n\n    var top = linkPoints.top,\n        left = linkPoints.left,\n        right = linkPoints.right,\n        bottom = linkPoints.bottom,\n        markSize = linkPoints.size,\n        markR = linkPoints.r,\n        markStyle = __rest(linkPoints, [\"top\", \"left\", \"right\", \"bottom\", \"size\", \"r\"]);\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n\n    if (left) {\n      // left circle\n      group['shapeMap']['link-point-left'] = group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: -width / 2,\n          y: 0,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-left',\n        name: 'link-point-left',\n        isAnchorPoint: true\n      });\n    }\n\n    if (right) {\n      // right circle\n      group['shapeMap']['link-point-right'] = group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: width / 2,\n          y: 0,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-right',\n        name: 'link-point-right',\n        isAnchorPoint: true\n      });\n    }\n\n    if (top) {\n      // top circle\n      group['shapeMap']['link-point-top'] = group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: 0,\n          y: -height / 2,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-top',\n        name: 'link-point-top',\n        isAnchorPoint: true\n      });\n    }\n\n    if (bottom) {\n      // bottom circle\n      group['shapeMap']['link-point-bottom'] = group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: 0,\n          y: height / 2,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-bottom',\n        name: 'link-point-bottom',\n        isAnchorPoint: true\n      });\n    }\n  },\n  drawLabel: function drawLabel(cfg, group) {\n    var _a = this.getOptions(cfg),\n        _b = _a.labelCfg,\n        labelCfg = _b === void 0 ? {} : _b,\n        _c = _a.logoIcon,\n        logoIcon = _c === void 0 ? {} : _c,\n        _d = _a.descriptionCfg,\n        descriptionCfg = _d === void 0 ? {} : _d;\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var label = null;\n    var show = logoIcon.show,\n        w = logoIcon.width;\n    var offsetX = -width / 2 + labelCfg.offset;\n\n    if (show) {\n      offsetX = -width / 2 + w + labelCfg.offset;\n    }\n\n    var fontStyle = labelCfg.style;\n    var descriptionStyle = descriptionCfg.style,\n        descriptionPaddingTop = descriptionCfg.paddingTop;\n\n    if (isString(cfg.description)) {\n      label = group.addShape('text', {\n        attrs: __assign(__assign({}, fontStyle), {\n          x: offsetX,\n          y: -5,\n          text: cfg.label\n        }),\n        className: 'text-shape',\n        name: 'text-shape',\n        draggable: true,\n        labelRelated: true\n      });\n      group['shapeMap']['text-shape'] = label;\n      group['shapeMap']['rect-description'] = group.addShape('text', {\n        attrs: __assign(__assign({}, descriptionStyle), {\n          x: offsetX,\n          y: 17 + (descriptionPaddingTop || 0),\n          text: cfg.description\n        }),\n        className: 'rect-description',\n        name: 'rect-description',\n        draggable: true,\n        labelRelated: true\n      });\n    } else {\n      label = group.addShape('text', {\n        attrs: __assign(__assign({}, fontStyle), {\n          x: offsetX,\n          y: 7,\n          text: cfg.label\n        }),\n        className: 'text-shape',\n        name: 'text-shape',\n        draggable: true,\n        labelRelated: true\n      });\n      group['shapeMap']['text-shape'] = label;\n    }\n\n    return label;\n  },\n\n  /**\n   * 获取节点的样式，供基于该节点自定义时使用\n   * @param {Object} cfg 节点数据模型\n   * @return {Object} 节点的样式\n   */\n  getShapeStyle: function getShapeStyle(cfg) {\n    var defaultStyle = (this.mergeStyle || this.getOptions(cfg)).style;\n    var strokeStyle = {\n      stroke: cfg.color\n    }; // 如果设置了color，则覆盖默认的stroke属性\n\n    var style = mix({}, defaultStyle, strokeStyle);\n    var size = this.getSize(cfg);\n    var width = style.width || size[0];\n    var height = style.height || size[1];\n\n    var styles = __assign({\n      x: -width / 2,\n      y: -height / 2,\n      width: width,\n      height: height\n    }, style);\n\n    return styles;\n  },\n  update: function update(cfg, item) {\n    var _a = this.mergeStyle || this.getOptions(cfg),\n        _b = _a.style,\n        style = _b === void 0 ? {} : _b,\n        _c = _a.labelCfg,\n        labelCfg = _c === void 0 ? {} : _c,\n        _d = _a.descriptionCfg,\n        descriptionCfg = _d === void 0 ? {} : _d;\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n    var keyShape = item.get('keyShape');\n    keyShape.attr(__assign(__assign({}, style), {\n      x: -width / 2,\n      y: -height / 2,\n      width: width,\n      height: height\n    }));\n    var group = item.getContainer();\n    var logoIconShape = group['shapeMap']['rect-logo-icon'] || group.find(function (element) {\n      return element.get('className') === 'rect-logo-icon';\n    });\n    var currentLogoIconAttr = logoIconShape ? logoIconShape.attr() : {};\n    var logoIcon = mix({}, currentLogoIconAttr, cfg.logoIcon);\n    var w = logoIcon.width;\n\n    if (w === undefined) {\n      w = this.options.logoIcon.width;\n    }\n\n    var show = cfg.logoIcon ? cfg.logoIcon.show : undefined;\n    var offset = labelCfg.offset;\n    var offsetX = -width / 2 + w + offset;\n\n    if (!show && show !== undefined) {\n      offsetX = -width / 2 + offset;\n    }\n\n    var label = group['shapeMap']['node-label'] || group.find(function (element) {\n      return element.get('className') === 'node-label';\n    });\n    var description = group['shapeMap']['rect-description'] || group.find(function (element) {\n      return element.get('className') === 'rect-description';\n    });\n\n    if (cfg.label) {\n      if (!label) {\n        group['shapeMap']['node-label'] = group.addShape('text', {\n          attrs: __assign(__assign({}, labelCfg.style), {\n            x: offsetX,\n            y: cfg.description ? -5 : 7,\n            text: cfg.label\n          }),\n          className: 'node-label',\n          name: 'node-label',\n          draggable: true,\n          labelRelated: true\n        });\n      } else {\n        var cfgStyle = cfg.labelCfg ? cfg.labelCfg.style : {};\n        var labelStyle = mix({}, label.attr(), cfgStyle);\n        if (cfg.label) labelStyle.text = cfg.label;\n        labelStyle.x = offsetX;\n        if (isString(cfg.description)) labelStyle.y = -5;\n\n        if (description) {\n          description.resetMatrix();\n          description.attr({\n            x: offsetX\n          });\n        }\n\n        label.resetMatrix();\n        label.attr(labelStyle);\n      }\n    }\n\n    if (isString(cfg.description)) {\n      var paddingTop = descriptionCfg.paddingTop;\n\n      if (!description) {\n        group['shapeMap']['rect-description'] = group.addShape('text', {\n          attrs: __assign(__assign({}, descriptionCfg.style), {\n            x: offsetX,\n            y: 17 + (paddingTop || 0),\n            text: cfg.description\n          }),\n          className: 'rect-description',\n          name: 'rect-description',\n          draggable: true,\n          labelRelated: true\n        });\n      } else {\n        var cfgStyle = cfg.descriptionCfg ? cfg.descriptionCfg.style : {};\n        var descriptionStyle = mix({}, description.attr(), cfgStyle);\n        if (isString(cfg.description)) descriptionStyle.text = cfg.description;\n        descriptionStyle.x = offsetX;\n        description.resetMatrix();\n        description.attr(__assign(__assign({}, descriptionStyle), {\n          y: 17 + (paddingTop || 0)\n        }));\n      }\n    }\n\n    var preRectShape = group['shapeMap']['pre-rect'] || group.find(function (element) {\n      return element.get('className') === 'pre-rect';\n    });\n\n    if (preRectShape && !preRectShape.destroyed) {\n      var preRect = mix({}, preRectShape.attr(), cfg.preRect);\n      preRectShape.attr(__assign(__assign({}, preRect), {\n        x: -width / 2,\n        y: -height / 2,\n        height: height\n      }));\n    }\n\n    if (logoIconShape && !logoIconShape.destroyed) {\n      if (!show && show !== undefined) {\n        logoIconShape.remove();\n        delete group['shapeMap']['pre-rect'];\n      } else {\n        var logoW = logoIcon.width,\n            h = logoIcon.height,\n            x = logoIcon.x,\n            y = logoIcon.y,\n            logoOffset = logoIcon.offset,\n            logoIconStyle = __rest(logoIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\"]);\n\n        logoIconShape.attr(__assign(__assign({}, logoIconStyle), {\n          x: x || -width / 2 + logoW + logoOffset,\n          y: y || -h / 2,\n          width: logoW,\n          height: h\n        }));\n      }\n    } else if (show) {\n      this.drawLogoIcon(cfg, group);\n    }\n\n    var stateIconShape = group['shapeMap']['rect-state-icon'] || group.find(function (element) {\n      return element.get('className') === 'rect-state-icon';\n    });\n    var currentStateIconAttr = stateIconShape ? stateIconShape.attr() : {};\n    var stateIcon = mix({}, currentStateIconAttr, cfg.stateIcon);\n\n    if (stateIconShape) {\n      if (!stateIcon.show && stateIcon.show !== undefined) {\n        stateIconShape.remove();\n        delete group['shapeMap']['rect-state-icon'];\n      }\n\n      var stateW = stateIcon.width,\n          h = stateIcon.height,\n          x = stateIcon.x,\n          y = stateIcon.y,\n          stateOffset = stateIcon.offset,\n          stateIconStyle = __rest(stateIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\"]);\n\n      stateIconShape.attr(__assign(__assign({}, stateIconStyle), {\n        x: x || width / 2 - stateW + stateOffset,\n        y: y || -h / 2,\n        width: stateW,\n        height: h\n      }));\n    } else if (stateIcon.show) {\n      this.drawStateIcon(cfg, group);\n    }\n\n    this.updateLinkPoints(cfg, group);\n  }\n}, 'single-node');"],"mappings":"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"},"metadata":{},"sourceType":"module"}