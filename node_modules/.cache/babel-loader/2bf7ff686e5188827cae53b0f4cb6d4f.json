{"ast":null,"code":"import Util from '../util';\nvar cloneEvent = Util.cloneEvent,\n    isNaN = Util.isNaN;\nvar abs = Math.abs;\nvar DRAG_OFFSET = 10;\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      direction: 'both',\n      enableOptimize: false,\n      // drag-canvas 可拖动的扩展范围，默认为 0，即最多可以拖动一屏的位置\n      // 当设置的值大于 0 时，即拖动可以超过一屏\n      // 当设置的值小于 0 时，相当于缩小了可拖动范围\n      // 具体实例可参考：https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IFfoS67_HssAAAAAAAAAAAAAARQnAQ\n      scalableRange: 0,\n      allowDragOnItem: false\n    };\n  },\n  getEvents: function getEvents() {\n    return {\n      'dragstart': 'onMouseDown',\n      'drag': 'onMouseMove',\n      'dragend': 'onMouseUp',\n      'canvas:click': 'onMouseUp',\n      'keyup': 'onKeyUp',\n      'focus': 'onKeyUp',\n      'keydown': 'onKeyDown',\n      'touchstart': 'onTouchStart',\n      'touchmove': 'onTouchMove',\n      'touchend': 'onMouseUp'\n    };\n  },\n  updateViewport: function updateViewport(e) {\n    var origin = this.origin;\n    var clientX = +e.clientX;\n    var clientY = +e.clientY;\n\n    if (isNaN(clientX) || isNaN(clientY)) {\n      return;\n    }\n\n    var dx = clientX - origin.x;\n    var dy = clientY - origin.y;\n\n    if (this.get('direction') === 'x') {\n      dy = 0;\n    } else if (this.get('direction') === 'y') {\n      dx = 0;\n    }\n\n    this.origin = {\n      x: clientX,\n      y: clientY\n    };\n    var width = this.graph.get('width');\n    var height = this.graph.get('height');\n    var graphCanvasBBox = this.graph.get('canvas').getCanvasBBox();\n    var expandWidth = this.scalableRange;\n    var expandHeight = this.scalableRange; // 若 scalableRange 是 0~1 的小数，则作为比例考虑\n\n    if (expandWidth < 1 && expandWidth > -1) {\n      expandWidth = width * expandWidth;\n      expandHeight = height * expandHeight;\n    }\n\n    if (graphCanvasBBox.minX <= width + expandWidth && graphCanvasBBox.minX + dx > width + expandWidth || graphCanvasBBox.maxX + expandWidth >= 0 && graphCanvasBBox.maxX + expandWidth + dx < 0) {\n      dx = 0;\n    }\n\n    if (graphCanvasBBox.minY <= height + expandHeight && graphCanvasBBox.minY + dy > height + expandHeight || graphCanvasBBox.maxY + expandHeight >= 0 && graphCanvasBBox.maxY + expandHeight + dy < 0) {\n      dy = 0;\n    }\n\n    this.graph.translate(dx, dy);\n  },\n  onTouchStart: function onTouchStart(e) {\n    var self = this;\n    var touches = e.originalEvent.touches;\n    var event1 = touches[0];\n    var event2 = touches[1]; // 如果是双指操作，不允许拖拽画布\n\n    if (event1 && event2) {\n      return;\n    }\n\n    e.preventDefault();\n    self.onMouseDown(e);\n  },\n  onMouseDown: function onMouseDown(e) {\n    var self = this;\n    var event = e.originalEvent; // TODO: 'name' doesn't exist on `IG6GraphEvent`, we should consider typing it so users get autocomplete and other benefits\n\n    if (event && e.name !== 'touchstart' && event.button !== 0) {\n      return;\n    }\n\n    if (e.name !== 'touchstart' && typeof window !== 'undefined' && window.event && !window.event.buttons && !window.event.button) {\n      return;\n    }\n\n    if (!this.shouldBegin.call(this, e)) {\n      return;\n    }\n\n    if (self.keydown) return;\n    var target = e.target;\n    var targetIsCanvas = target && target.isCanvas && target.isCanvas();\n    if (!this.allowDragOnItem && !targetIsCanvas) return;\n    self.origin = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    self.dragging = false;\n\n    if (this.enableOptimize) {\n      // 拖动 canvas 过程中隐藏所有的边及label\n      var graph = this.graph;\n      var edges = graph.getEdges();\n\n      for (var i = 0, len = edges.length; i < len; i++) {\n        var shapes = edges[i].get('group').get('children');\n        if (!shapes) continue;\n        shapes.forEach(function (shape) {\n          shape.set('ori-visibility', shape.get('ori-visibility') || shape.get('visible'));\n          shape.hide();\n        });\n      }\n\n      var nodes = graph.getNodes();\n\n      for (var j = 0, nodeLen = nodes.length; j < nodeLen; j++) {\n        var container = nodes[j].getContainer();\n        var children = container.get('children');\n\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n          var child = children_1[_i];\n          var isKeyShape = child.get('isKeyShape');\n\n          if (!isKeyShape) {\n            child.set('ori-visibility', child.get('ori-visibility') || child.get('visible'));\n            child.hide();\n          }\n        }\n      }\n    }\n  },\n  onTouchMove: function onTouchMove(e) {\n    var self = this;\n    var touches = e.originalEvent.touches;\n    var event1 = touches[0];\n    var event2 = touches[1]; // 如果是双指操作，不允许拖拽画布，结束拖拽\n\n    if (event1 && event2) {\n      this.onMouseUp(e);\n      return;\n    }\n\n    e.preventDefault();\n    self.onMouseMove(e);\n  },\n  onMouseMove: function onMouseMove(e) {\n    var graph = this.graph;\n    if (this.keydown) return;\n    var target = e.target;\n    var targetIsCanvas = target && target.isCanvas && target.isCanvas();\n    if (!this.allowDragOnItem && !targetIsCanvas) return;\n    e = cloneEvent(e);\n\n    if (!this.origin) {\n      return;\n    }\n\n    if (!this.dragging) {\n      if (abs(this.origin.x - e.clientX) + abs(this.origin.y - e.clientY) < DRAG_OFFSET) {\n        return;\n      }\n\n      if (this.shouldBegin.call(this, e)) {\n        e.type = 'dragstart';\n        graph.emit('canvas:dragstart', e);\n        this.originPosition = {\n          x: e.clientX,\n          y: e.clientY\n        };\n        this.dragging = true;\n      }\n    } else {\n      e.type = 'drag';\n      graph.emit('canvas:drag', e);\n    }\n\n    if (this.shouldUpdate.call(this, e)) {\n      this.updateViewport(e);\n    }\n  },\n  onMouseUp: function onMouseUp(e) {\n    var _a, _b;\n\n    var graph = this.graph;\n    if (this.keydown) return;\n    var currentZoom = graph.getZoom();\n    var modeController = graph.get('modeController');\n    var zoomCanvas = (_b = (_a = modeController === null || modeController === void 0 ? void 0 : modeController.modes[modeController.mode]) === null || _a === void 0 ? void 0 : _a.filter(function (behavior) {\n      return behavior.type === 'zoom-canvas';\n    })) === null || _b === void 0 ? void 0 : _b[0];\n    var optimizeZoom = zoomCanvas ? zoomCanvas.optimizeZoom || 0.1 : 0;\n\n    if (this.enableOptimize) {\n      // 拖动结束后显示所有的边\n      var edges = graph.getEdges();\n\n      for (var i = 0, len = edges.length; i < len; i++) {\n        var shapes = edges[i].get('group').get('children');\n        if (!shapes) continue;\n        shapes.forEach(function (shape) {\n          var oriVis = shape.get('ori-visibility');\n          shape.set('ori-visibility', undefined);\n          if (oriVis) shape.show();\n        });\n      }\n\n      if (currentZoom > optimizeZoom) {\n        var nodes = graph.getNodes();\n\n        for (var j = 0, nodeLen = nodes.length; j < nodeLen; j++) {\n          var container = nodes[j].getContainer();\n          var children = container.get('children');\n\n          for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n            var child = children_2[_i];\n            var isKeyShape = child.get('isKeyShape');\n\n            if (!isKeyShape) {\n              var oriVis = child.get('ori-visibility');\n              child.set('ori-visibility', undefined);\n              if (oriVis) child.show();\n            }\n          }\n        }\n      }\n    }\n\n    if (!this.dragging) {\n      this.origin = null;\n      return;\n    }\n\n    e = cloneEvent(e);\n\n    if (this.shouldEnd.call(this, e)) {\n      this.updateViewport(e);\n    }\n\n    e.type = 'dragend';\n    e.dx = e.clientX - this.originPosition.x;\n    e.dy = e.clientY - this.originPosition.y;\n    graph.emit('canvas:dragend', e);\n    this.endDrag();\n  },\n  endDrag: function endDrag() {\n    this.origin = null;\n    this.dragging = false;\n    this.dragbegin = false;\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    if (ALLOW_EVENTS.indexOf(code.toLowerCase()) > -1) {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    this.keydown = false;\n    this.origin = null;\n    this.dragging = false;\n    this.dragbegin = false;\n  }\n};","map":{"version":3,"names":["Util","cloneEvent","isNaN","abs","Math","DRAG_OFFSET","ALLOW_EVENTS","getDefaultCfg","direction","enableOptimize","scalableRange","allowDragOnItem","getEvents","updateViewport","e","origin","clientX","clientY","dx","x","dy","y","get","width","graph","height","graphCanvasBBox","getCanvasBBox","expandWidth","expandHeight","minX","maxX","minY","maxY","translate","onTouchStart","self","touches","originalEvent","event1","event2","preventDefault","onMouseDown","event","name","button","window","buttons","shouldBegin","call","keydown","target","targetIsCanvas","isCanvas","dragging","edges","getEdges","i","len","length","shapes","forEach","shape","set","hide","nodes","getNodes","j","nodeLen","container","getContainer","children","_i","children_1","child","isKeyShape","onTouchMove","onMouseUp","onMouseMove","type","emit","originPosition","shouldUpdate","_a","_b","currentZoom","getZoom","modeController","zoomCanvas","modes","mode","filter","behavior","optimizeZoom","oriVis","undefined","show","children_2","shouldEnd","endDrag","dragbegin","onKeyDown","code","key","indexOf","toLowerCase","onKeyUp"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-pc/es/behavior/drag-canvas.js"],"sourcesContent":["import Util from '../util';\nvar cloneEvent = Util.cloneEvent,\n    isNaN = Util.isNaN;\nvar abs = Math.abs;\nvar DRAG_OFFSET = 10;\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      direction: 'both',\n      enableOptimize: false,\n      // drag-canvas 可拖动的扩展范围，默认为 0，即最多可以拖动一屏的位置\n      // 当设置的值大于 0 时，即拖动可以超过一屏\n      // 当设置的值小于 0 时，相当于缩小了可拖动范围\n      // 具体实例可参考：https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IFfoS67_HssAAAAAAAAAAAAAARQnAQ\n      scalableRange: 0,\n      allowDragOnItem: false\n    };\n  },\n  getEvents: function getEvents() {\n    return {\n      'dragstart': 'onMouseDown',\n      'drag': 'onMouseMove',\n      'dragend': 'onMouseUp',\n      'canvas:click': 'onMouseUp',\n      'keyup': 'onKeyUp',\n      'focus': 'onKeyUp',\n      'keydown': 'onKeyDown',\n      'touchstart': 'onTouchStart',\n      'touchmove': 'onTouchMove',\n      'touchend': 'onMouseUp'\n    };\n  },\n  updateViewport: function updateViewport(e) {\n    var origin = this.origin;\n    var clientX = +e.clientX;\n    var clientY = +e.clientY;\n\n    if (isNaN(clientX) || isNaN(clientY)) {\n      return;\n    }\n\n    var dx = clientX - origin.x;\n    var dy = clientY - origin.y;\n\n    if (this.get('direction') === 'x') {\n      dy = 0;\n    } else if (this.get('direction') === 'y') {\n      dx = 0;\n    }\n\n    this.origin = {\n      x: clientX,\n      y: clientY\n    };\n    var width = this.graph.get('width');\n    var height = this.graph.get('height');\n    var graphCanvasBBox = this.graph.get('canvas').getCanvasBBox();\n    var expandWidth = this.scalableRange;\n    var expandHeight = this.scalableRange; // 若 scalableRange 是 0~1 的小数，则作为比例考虑\n\n    if (expandWidth < 1 && expandWidth > -1) {\n      expandWidth = width * expandWidth;\n      expandHeight = height * expandHeight;\n    }\n\n    if (graphCanvasBBox.minX <= width + expandWidth && graphCanvasBBox.minX + dx > width + expandWidth || graphCanvasBBox.maxX + expandWidth >= 0 && graphCanvasBBox.maxX + expandWidth + dx < 0) {\n      dx = 0;\n    }\n\n    if (graphCanvasBBox.minY <= height + expandHeight && graphCanvasBBox.minY + dy > height + expandHeight || graphCanvasBBox.maxY + expandHeight >= 0 && graphCanvasBBox.maxY + expandHeight + dy < 0) {\n      dy = 0;\n    }\n\n    this.graph.translate(dx, dy);\n  },\n  onTouchStart: function onTouchStart(e) {\n    var self = this;\n    var touches = e.originalEvent.touches;\n    var event1 = touches[0];\n    var event2 = touches[1]; // 如果是双指操作，不允许拖拽画布\n\n    if (event1 && event2) {\n      return;\n    }\n\n    e.preventDefault();\n    self.onMouseDown(e);\n  },\n  onMouseDown: function onMouseDown(e) {\n    var self = this;\n    var event = e.originalEvent; // TODO: 'name' doesn't exist on `IG6GraphEvent`, we should consider typing it so users get autocomplete and other benefits\n\n    if (event && e.name !== 'touchstart' && event.button !== 0) {\n      return;\n    }\n\n    if (e.name !== 'touchstart' && typeof window !== 'undefined' && window.event && !window.event.buttons && !window.event.button) {\n      return;\n    }\n\n    if (!this.shouldBegin.call(this, e)) {\n      return;\n    }\n\n    if (self.keydown) return;\n    var target = e.target;\n    var targetIsCanvas = target && target.isCanvas && target.isCanvas();\n    if (!this.allowDragOnItem && !targetIsCanvas) return;\n    self.origin = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    self.dragging = false;\n\n    if (this.enableOptimize) {\n      // 拖动 canvas 过程中隐藏所有的边及label\n      var graph = this.graph;\n      var edges = graph.getEdges();\n\n      for (var i = 0, len = edges.length; i < len; i++) {\n        var shapes = edges[i].get('group').get('children');\n        if (!shapes) continue;\n        shapes.forEach(function (shape) {\n          shape.set('ori-visibility', shape.get('ori-visibility') || shape.get('visible'));\n          shape.hide();\n        });\n      }\n\n      var nodes = graph.getNodes();\n\n      for (var j = 0, nodeLen = nodes.length; j < nodeLen; j++) {\n        var container = nodes[j].getContainer();\n        var children = container.get('children');\n\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n          var child = children_1[_i];\n          var isKeyShape = child.get('isKeyShape');\n\n          if (!isKeyShape) {\n            child.set('ori-visibility', child.get('ori-visibility') || child.get('visible'));\n            child.hide();\n          }\n        }\n      }\n    }\n  },\n  onTouchMove: function onTouchMove(e) {\n    var self = this;\n    var touches = e.originalEvent.touches;\n    var event1 = touches[0];\n    var event2 = touches[1]; // 如果是双指操作，不允许拖拽画布，结束拖拽\n\n    if (event1 && event2) {\n      this.onMouseUp(e);\n      return;\n    }\n\n    e.preventDefault();\n    self.onMouseMove(e);\n  },\n  onMouseMove: function onMouseMove(e) {\n    var graph = this.graph;\n    if (this.keydown) return;\n    var target = e.target;\n    var targetIsCanvas = target && target.isCanvas && target.isCanvas();\n    if (!this.allowDragOnItem && !targetIsCanvas) return;\n    e = cloneEvent(e);\n\n    if (!this.origin) {\n      return;\n    }\n\n    if (!this.dragging) {\n      if (abs(this.origin.x - e.clientX) + abs(this.origin.y - e.clientY) < DRAG_OFFSET) {\n        return;\n      }\n\n      if (this.shouldBegin.call(this, e)) {\n        e.type = 'dragstart';\n        graph.emit('canvas:dragstart', e);\n        this.originPosition = {\n          x: e.clientX,\n          y: e.clientY\n        };\n        this.dragging = true;\n      }\n    } else {\n      e.type = 'drag';\n      graph.emit('canvas:drag', e);\n    }\n\n    if (this.shouldUpdate.call(this, e)) {\n      this.updateViewport(e);\n    }\n  },\n  onMouseUp: function onMouseUp(e) {\n    var _a, _b;\n\n    var graph = this.graph;\n    if (this.keydown) return;\n    var currentZoom = graph.getZoom();\n    var modeController = graph.get('modeController');\n    var zoomCanvas = (_b = (_a = modeController === null || modeController === void 0 ? void 0 : modeController.modes[modeController.mode]) === null || _a === void 0 ? void 0 : _a.filter(function (behavior) {\n      return behavior.type === 'zoom-canvas';\n    })) === null || _b === void 0 ? void 0 : _b[0];\n    var optimizeZoom = zoomCanvas ? zoomCanvas.optimizeZoom || 0.1 : 0;\n\n    if (this.enableOptimize) {\n      // 拖动结束后显示所有的边\n      var edges = graph.getEdges();\n\n      for (var i = 0, len = edges.length; i < len; i++) {\n        var shapes = edges[i].get('group').get('children');\n        if (!shapes) continue;\n        shapes.forEach(function (shape) {\n          var oriVis = shape.get('ori-visibility');\n          shape.set('ori-visibility', undefined);\n          if (oriVis) shape.show();\n        });\n      }\n\n      if (currentZoom > optimizeZoom) {\n        var nodes = graph.getNodes();\n\n        for (var j = 0, nodeLen = nodes.length; j < nodeLen; j++) {\n          var container = nodes[j].getContainer();\n          var children = container.get('children');\n\n          for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n            var child = children_2[_i];\n            var isKeyShape = child.get('isKeyShape');\n\n            if (!isKeyShape) {\n              var oriVis = child.get('ori-visibility');\n              child.set('ori-visibility', undefined);\n              if (oriVis) child.show();\n            }\n          }\n        }\n      }\n    }\n\n    if (!this.dragging) {\n      this.origin = null;\n      return;\n    }\n\n    e = cloneEvent(e);\n\n    if (this.shouldEnd.call(this, e)) {\n      this.updateViewport(e);\n    }\n\n    e.type = 'dragend';\n    e.dx = e.clientX - this.originPosition.x;\n    e.dy = e.clientY - this.originPosition.y;\n    graph.emit('canvas:dragend', e);\n    this.endDrag();\n  },\n  endDrag: function endDrag() {\n    this.origin = null;\n    this.dragging = false;\n    this.dragbegin = false;\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    if (ALLOW_EVENTS.indexOf(code.toLowerCase()) > -1) {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    this.keydown = false;\n    this.origin = null;\n    this.dragging = false;\n    this.dragbegin = false;\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}