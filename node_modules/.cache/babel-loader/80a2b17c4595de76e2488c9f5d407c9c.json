{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { get, size, assign, each, isNumber } from '@antv/util';\nimport { ext } from '@antv/matrix-util';\nimport Trend from './trend';\nimport Handler from './handler';\nimport { isString } from '@antv/util';\nimport ControllerBtn from './controllerBtn';\nimport { VALUE_CHANGE, TIMELINE_START, TIMEBAR_CONFIG_CHANGE, PLAY_PAUSE_BTN, NEXT_STEP_BTN, PRE_STEP_BTN, TIMELINE_END } from './constant';\nvar transform = ext.transform;\n/**\n * 一些默认的样式配置\n */\n\nexport var BACKGROUND_STYLE = {\n  fill: '#416180',\n  opacity: 0.05\n};\nvar SIMPLE_BACKGROUND_STYLE = {\n  fill: '#416180',\n  opacity: 0.15,\n  radius: 5\n};\nexport var FOREGROUND_STYLE = {\n  fill: '#5B8FF9',\n  opacity: 0.3,\n  cursor: 'grab'\n};\nexport var DEFAULT_HANDLER_WIDTH = 2;\nexport var HANDLER_STYLE = {\n  width: DEFAULT_HANDLER_WIDTH,\n  height: 24\n};\nexport var TEXT_STYLE = {\n  textBaseline: 'middle',\n  fill: '#000',\n  opacity: 0.45\n};\nexport var TICK_LABEL_STYLE = {\n  textAlign: 'center',\n  textBaseline: 'top',\n  fill: '#607889',\n  opacity: 0.35\n};\nexport var TICK_LINE_STYLE = {\n  lineWidth: 1,\n  stroke: '#ccc'\n};\n\nvar TrendTimeBar =\n/** @class */\nfunction () {\n  function TrendTimeBar(cfg) {\n    var _this = this;\n\n    this.prevX = 0;\n\n    this.onMouseDown = function (handler) {\n      return function (e) {\n        // 1. 记录点击的滑块\n        _this.currentHandler = handler;\n        var event = e.originalEvent; // 2. 存储当前点击位置\n\n        event.stopPropagation();\n        event.preventDefault(); // 兼容移动端获取数据\n\n        _this.prevX = get(event, 'touches.0.pageX', event.pageX); // 3. 开始滑动的时候，绑定 move 和 up 事件\n\n        var containerDOM = _this.canvas.get('container');\n\n        containerDOM.addEventListener('mousemove', _this.onMouseMove);\n        containerDOM.addEventListener('mouseup', _this.onMouseUp);\n        containerDOM.addEventListener('mouseleave', _this.onMouseUp); // 移动端事件\n\n        containerDOM.addEventListener('touchmove', _this.onMouseMove);\n        containerDOM.addEventListener('touchend', _this.onMouseUp);\n        containerDOM.addEventListener('touchcancel', _this.onMouseUp);\n      };\n    };\n\n    this.onMouseMove = function (e) {\n      // 滑动过程中，计算偏移，更新滑块，然后 emit 数据出去\n      e.stopPropagation();\n      e.preventDefault();\n      var x = get(e, 'touches.0.pageX', e.pageX); // 横向的 slider 只处理 x\n\n      var offsetX = x - _this.prevX;\n\n      var offsetXRange = _this.adjustOffsetRange(offsetX / _this.width); // 更新 start end range 范围\n\n\n      _this.updateStartEnd(offsetXRange); // 更新 ui\n\n\n      _this.updateUI();\n\n      _this.prevX = x;\n    };\n\n    this.onMouseUp = function () {\n      // 结束之后，取消绑定的事件\n      if (_this.currentHandler) {\n        _this.currentHandler = undefined;\n      }\n\n      var containerDOM = _this.canvas.get('container');\n\n      if (containerDOM) {\n        containerDOM.removeEventListener('mousemove', _this.onMouseMove);\n        containerDOM.removeEventListener('mouseup', _this.onMouseUp); // 防止滑动到 canvas 外部之后，状态丢失\n\n        containerDOM.removeEventListener('mouseleave', _this.onMouseUp); // 移动端事件\n\n        containerDOM.removeEventListener('touchmove', _this.onMouseMove);\n        containerDOM.removeEventListener('touchend', _this.onMouseUp);\n        containerDOM.removeEventListener('touchcancel', _this.onMouseUp);\n      }\n    };\n\n    var _a = cfg.x,\n        x = _a === void 0 ? 0 : _a,\n        _b = cfg.y,\n        y = _b === void 0 ? 0 : _b,\n        _c = cfg.width,\n        width = _c === void 0 ? 100 : _c,\n        height = cfg.height,\n        _d = cfg.padding,\n        padding = _d === void 0 ? 10 : _d,\n        trendCfg = cfg.trendCfg,\n        _e = cfg.controllerCfg,\n        controllerCfg = _e === void 0 ? {\n      speed: 1\n    } : _e,\n        _f = cfg.backgroundStyle,\n        backgroundStyle = _f === void 0 ? {} : _f,\n        _g = cfg.foregroundStyle,\n        foregroundStyle = _g === void 0 ? {} : _g,\n        _h = cfg.handlerStyle,\n        handlerStyle = _h === void 0 ? {} : _h,\n        _j = cfg.textStyle,\n        textStyle = _j === void 0 ? {} : _j,\n        // 缩略轴的初始位置\n    _k = cfg.start,\n        // 缩略轴的初始位置\n    start = _k === void 0 ? 0 : _k,\n        _l = cfg.end,\n        end = _l === void 0 ? 1 : _l,\n        _m = cfg.minText,\n        minText = _m === void 0 ? '' : _m,\n        _o = cfg.maxText,\n        maxText = _o === void 0 ? '' : _o,\n        group = cfg.group,\n        graph = cfg.graph,\n        canvas = cfg.canvas,\n        _p = cfg.tick,\n        tick = _p === void 0 ? {\n      tickLabelStyle: {},\n      tickLineStyle: {},\n      tickLabelFormatter: function tickLabelFormatter(d) {\n        return d;\n      },\n      ticks: []\n    } : _p,\n        type = cfg.type;\n    this.graph = graph;\n    this.canvas = canvas;\n    this.group = group;\n    this.timeBarType = type; // position size\n\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.padding = padding;\n    this.ticks = tick.ticks;\n    this.trendCfg = trendCfg;\n    this.controllerCfg = controllerCfg;\n    this.currentSpeed = controllerCfg.speed || 1;\n    this.tickLabelFormatter = tick.tickLabelFormatter; // style\n\n    if (type === 'trend') {\n      this.backgroundStyle = __assign(__assign({}, BACKGROUND_STYLE), backgroundStyle);\n    } else if (type === 'simple') {\n      this.backgroundStyle = __assign(__assign({}, SIMPLE_BACKGROUND_STYLE), backgroundStyle);\n    }\n\n    this.foregroundStyle = __assign(__assign({}, FOREGROUND_STYLE), foregroundStyle);\n    this.handlerStyle = __assign(__assign({}, HANDLER_STYLE), handlerStyle);\n    this.textStyle = __assign(__assign({}, TEXT_STYLE), textStyle);\n    this.tickLabelStyle = __assign(__assign({}, TICK_LABEL_STYLE), tick.tickLabelStyle);\n    this.tickLineStyle = __assign(__assign({}, TICK_LINE_STYLE), tick.tickLineStyle);\n    this.currentMode = 'range'; // 初始信息\n\n    this.start = start;\n    this.end = end;\n    this.minText = minText;\n    this.maxText = maxText; // 初始化 fontFamily，如果有浏览器，取 body 上的字体，防止文字更新时局部渲染造成的重影\n\n    this.fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.renderSlider();\n  }\n  /**\n   * 更新配置\n   * @param cfg\n   */\n\n\n  TrendTimeBar.prototype.update = function (cfg) {\n    var x = cfg.x,\n        y = cfg.y,\n        width = cfg.width,\n        height = cfg.height,\n        minText = cfg.minText,\n        maxText = cfg.maxText,\n        start = cfg.start,\n        end = cfg.end; // start、end 只能是 0~1 范围\n\n    this.start = Math.min(1, Math.max(start, 0));\n    this.end = Math.min(1, Math.max(end, 0)); // 如果传了则更新，没有传则不更新\n    // @ts-ignore\n\n    assign(this, {\n      x: x,\n      y: y,\n      width: width,\n      height: height,\n      minText: minText,\n      maxText: maxText\n    }); // 更新 ui，不自动绘制\n\n    this.updateUI();\n  };\n\n  TrendTimeBar.prototype.setText = function (minText, maxText) {\n    this.minTextShape.attr('text', minText);\n    this.maxTextShape.attr('text', maxText);\n  };\n  /**\n   * 初始化组件结构\n   * @private\n   */\n\n\n  TrendTimeBar.prototype.renderSlider = function () {\n    var _this = this;\n\n    var _a = this,\n        width = _a.width,\n        height = _a.height,\n        timeBarType = _a.timeBarType; // 趋势图数据\n\n\n    if (timeBarType === 'trend' && size(get(this.trendCfg, 'data'))) {\n      var trendComponent = new Trend(__assign(__assign({\n        x: this.x,\n        y: this.y,\n        width: width,\n        height: height\n      }, this.trendCfg), {\n        group: this.group\n      }));\n      this.trendComponent = trendComponent;\n    }\n\n    var sliderGroup = this.group.addGroup({\n      name: 'slider-group'\n    }); // 1. 背景\n\n    sliderGroup.addShape('rect', {\n      attrs: __assign({\n        x: 0,\n        y: 0,\n        width: width,\n        height: height\n      }, this.backgroundStyle),\n      name: 'background'\n    });\n    var textGroup = this.group.addGroup(); // 2. 左右文字\n\n    if (timeBarType === 'trend') {\n      this.minTextShape = textGroup.addShape('text', {\n        attrs: __assign({\n          x: 0,\n          y: height / 2 + this.y,\n          textAlign: 'right',\n          text: this.minText,\n          silent: false,\n          fontFamily: this.fontFamily || 'Arial, sans-serif',\n          stroke: '#fff',\n          lineWidth: 5\n        }, this.textStyle),\n        capture: false,\n        name: 'min-text-shape'\n      });\n      this.maxTextShape = textGroup.addShape('text', {\n        attrs: __assign({\n          y: height / 2 + this.y,\n          textAlign: 'left',\n          text: this.maxText,\n          silent: false,\n          fontFamily: this.fontFamily || 'Arial, sans-serif',\n          stroke: '#fff',\n          lineWidth: 5\n        }, this.textStyle),\n        capture: false,\n        name: 'max-text-shape'\n      });\n    } else {\n      this.minTextShape = textGroup.addShape('text', {\n        attrs: __assign({\n          x: 0,\n          y: this.y - 10,\n          textAlign: 'center',\n          text: this.minText,\n          silent: false,\n          fontFamily: this.fontFamily || 'Arial, sans-serif',\n          stroke: '#fff',\n          lineWidth: 5\n        }, this.textStyle),\n        capture: false,\n        name: 'min-text-shape'\n      });\n      this.maxTextShape = textGroup.addShape('text', {\n        attrs: __assign({\n          y: this.y - 10,\n          textAlign: 'center',\n          text: this.maxText,\n          silent: false,\n          fontFamily: this.fontFamily || 'Arial, sans-serif',\n          stroke: '#fff',\n          lineWidth: 5\n        }, this.textStyle),\n        capture: false,\n        name: 'max-text-shape'\n      });\n    } // 3. 前景 选中背景框\n\n\n    this.foregroundShape = this.group.addGroup().addShape('rect', {\n      attrs: __assign({\n        x: 0,\n        y: this.y,\n        height: height\n      }, this.foregroundStyle),\n      name: 'foreground-shape'\n    });\n    this.foregroundShape.on('mousedown', function (e) {\n      e.target.attr('cursor', 'grabbing');\n    });\n    this.foregroundShape.on('mouseup', function (e) {\n      e.target.attr('cursor', _this.foregroundStyle.cursor || 'grab');\n    }); // 滑块相关的大小信息\n\n    var handlerWidth = get(this.handlerStyle, 'width', 2);\n    var handlerHeight = get(this.handlerStyle, 'height', 24);\n    var minHandleGroup = this.group.addGroup({\n      name: 'minHandlerShape'\n    }); // 4. 左右滑块\n\n    this.minHandlerShape = new Handler({\n      name: 'minHandlerShape',\n      group: minHandleGroup,\n      type: timeBarType,\n      x: this.x,\n      y: this.y,\n      width: handlerWidth,\n      height: handlerHeight,\n      style: this.handlerStyle\n    });\n    var maxHandleGroup = this.group.addGroup({\n      name: 'maxHandlerShape'\n    });\n    this.maxHandlerShape = new Handler({\n      name: 'maxHandlerShape',\n      group: maxHandleGroup,\n      type: timeBarType,\n      x: this.x,\n      y: this.y,\n      width: handlerWidth,\n      height: handlerHeight,\n      style: this.handlerStyle\n    }); // 缩略图下面的时间刻度\n\n    var tickData = this.ticks;\n    var interval = width / (tickData.length - 1);\n    this.tickPosList = [];\n\n    if (this.textList && this.textList.length) {\n      this.textList.forEach(function (text) {\n        text.destroy();\n      });\n    }\n\n    var lastX = -Infinity;\n    var rotate = this.tickLabelStyle.rotate;\n    delete this.tickLabelStyle.rotate;\n    this.textList = tickData.map(function (data, index) {\n      _this.tickPosList.push(_this.x + index * interval);\n\n      var label;\n\n      if (_this.tickLabelFormatter) {\n        label = _this.tickLabelFormatter(data);\n\n        if (!isString(label) && label) {\n          // return true\n          label = data.date;\n        }\n      } else {\n        label = data.date;\n      } // 文本刻度\n\n\n      var textX = _this.x + index * interval,\n          textY = _this.y + height + 5;\n\n      var text = _this.group.addShape('text', {\n        attrs: __assign({\n          x: textX,\n          y: textY,\n          text: label,\n          fontFamily: _this.fontFamily || 'Arial, sans-serif'\n        }, _this.tickLabelStyle),\n        name: 'tick-label'\n      });\n\n      if (isNumber(rotate) && index !== tickData.length - 1) {\n        var matrix = transform([1, 0, 0, 0, 1, 0, 0, 0, 1], [['t', -textX, -textY], ['r', rotate], ['t', textX - 5, textY + 2]]);\n        text.attr({\n          textAlign: 'left',\n          matrix: matrix\n        });\n      }\n\n      if (index === 0) {\n        text.attr({\n          textAlign: 'left'\n        });\n      } else if (index !== tickData.length - 1) {\n        text.attr({\n          textAlign: 'right'\n        });\n      } // 文本刻度上面的竖线\n\n\n      var line = _this.group.addShape('line', {\n        attrs: __assign({\n          x1: _this.x + index * interval,\n          y1: _this.y + height + 2,\n          x2: _this.x + index * interval,\n          y2: _this.y + height + 6\n        }, _this.tickLineStyle),\n        name: 'tick-line'\n      });\n\n      line.toBack();\n      var bbox = text.getBBox(); // 抽样，标签与标签间距不小于 10\n\n      if (bbox.minX > lastX) {\n        text.show();\n        line.show();\n        lastX = bbox.minX + bbox.width + 10;\n      } else {\n        text.hide();\n        line.hide();\n      }\n\n      return text;\n    }); // 渲染播放、快进和后退的控制按钮\n\n    this.controllerBtnGroup = new ControllerBtn(__assign({\n      group: this.group,\n      x: this.x,\n      y: this.y + height + 25,\n      width: width,\n      height: 35\n    }, this.controllerCfg)); // 初始化 minText 和 maxText，方便计算它们的 bbox\n\n    this.updateStartEnd(0); // 根据 start end 更新 ui 的位置信息\n\n    this.updateUI(); // 移动到对应的位置\n\n    sliderGroup.move(this.x, this.y); // 绑定事件鼠标事件\n\n    this.bindEvents();\n  };\n  /**\n   * 绑定事件：\n   *  - 点击\n   *  - 滑动\n   *  - 拖拽\n   *  - 滚动\n   * @private\n   */\n\n\n  TrendTimeBar.prototype.bindEvents = function () {\n    var _this = this; // 1. 左滑块的滑动\n\n\n    var minHandleShapeGroup = this.group.find(function (group) {\n      return group.get('name') === 'minHandlerShape';\n    });\n\n    if (minHandleShapeGroup) {\n      minHandleShapeGroup.on('minHandlerShape-handler:mousedown', this.onMouseDown(this.minHandlerShape));\n      minHandleShapeGroup.on('minHandlerShape-handler:touchstart', this.onMouseDown(this.minHandlerShape));\n    }\n\n    var maxHandleShapeGroup = this.group.find(function (group) {\n      return group.get('name') === 'maxHandlerShape';\n    }); // 2. 右滑块的滑动\n\n    if (maxHandleShapeGroup) {\n      maxHandleShapeGroup.on('maxHandlerShape-handler:mousedown', this.onMouseDown(this.maxHandlerShape));\n      maxHandleShapeGroup.on('maxHandlerShape-handler:touchstart', this.onMouseDown(this.maxHandlerShape));\n    } // 3. 前景选中区域\n\n\n    this.foregroundShape.on('mousedown', this.onMouseDown(this.foregroundShape));\n    this.foregroundShape.on('touchstart', this.onMouseDown(this.foregroundShape)); // 播放区按钮控制\n\n    /** 播放/暂停事件 */\n\n    this.group.on(\"\".concat(PLAY_PAUSE_BTN, \":click\"), function () {\n      _this.isPlay = !_this.isPlay;\n      _this.currentHandler = _this.maxHandlerShape;\n\n      _this.changePlayStatus();\n    }); // 处理前进一步的事件\n\n    this.group.on(\"\".concat(NEXT_STEP_BTN, \":click\"), function () {\n      _this.currentHandler = _this.maxHandlerShape;\n\n      _this.updateStartEnd(0.01);\n\n      _this.updateUI();\n    }); // 处理后退一步的事件\n\n    this.group.on(\"\".concat(PRE_STEP_BTN, \":click\"), function () {\n      _this.currentHandler = _this.maxHandlerShape;\n\n      _this.updateStartEnd(-0.01);\n\n      _this.updateUI();\n    });\n    this.group.on(TIMEBAR_CONFIG_CHANGE, function (_a) {\n      var type = _a.type,\n          speed = _a.speed;\n      _this.currentSpeed = speed;\n      _this.currentMode = type;\n\n      if (type === 'single') {\n        _this.minHandlerShape.hide();\n\n        _this.foregroundShape.hide();\n\n        _this.minTextShape.hide();\n      } else if (type === 'range') {\n        _this.minHandlerShape.show();\n\n        _this.foregroundShape.show();\n\n        _this.minTextShape.show();\n      }\n    });\n  };\n  /** 输入当前圆点位置，输出离哪个 tick 的位置最近 */\n\n\n  TrendTimeBar.prototype.adjustTickIndex = function (timeSelectX) {\n    for (var i = 0; i < this.tickPosList.length - 1; i++) {\n      if (this.tickPosList[i] <= timeSelectX && timeSelectX <= this.tickPosList[i + 1]) {\n        return Math.abs(this.tickPosList[i] - timeSelectX) < Math.abs(timeSelectX - this.tickPosList[i + 1]) ? i : i + 1;\n      }\n    }\n\n    return 0;\n  };\n  /**\n   * 调整 offsetRange，因为一些范围的限制\n   * @param offsetRange\n   */\n\n\n  TrendTimeBar.prototype.adjustOffsetRange = function (offsetRange) {\n    // 针对不同的滑动组件，处理的方式不同\n    switch (this.currentHandler) {\n      case this.minHandlerShape:\n        {\n          var min = 0 - this.start;\n          var max = 1 - this.start;\n          return Math.min(max, Math.max(min, offsetRange));\n        }\n\n      case this.maxHandlerShape:\n        {\n          var min = 0 - this.end;\n          var max = 1 - this.end;\n          return Math.min(max, Math.max(min, offsetRange));\n        }\n\n      case this.foregroundShape:\n        {\n          var min = 0 - this.start;\n          var max = 1 - this.end;\n          return Math.min(max, Math.max(min, offsetRange));\n        }\n\n      default:\n        return 0;\n    }\n  };\n  /**\n   * 更新起始、结束的控制块位置、文本、范围值（原始值）\n   * @param offsetRange\n   */\n\n\n  TrendTimeBar.prototype.updateStartEnd = function (offsetRange) {\n    var minData = this.ticks[this.adjustTickIndex(this.start * this.width)];\n    var maxData = this.ticks[this.adjustTickIndex(this.end * this.width)];\n\n    if (!this.currentHandler) {\n      this.minText = this.tickLabelFormatter ? this.tickLabelFormatter(minData) : minData === null || minData === void 0 ? void 0 : minData.date;\n      this.maxText = this.tickLabelFormatter ? this.tickLabelFormatter(maxData) : maxData === null || maxData === void 0 ? void 0 : maxData.date;\n      return;\n    } // 操作不同的组件，反馈不一样\n\n\n    switch (this.currentHandler) {\n      case this.minHandlerShape:\n        // 拖动最小滑块时使用当前最大值设置最大值的文本，以便恢复到默认值\n        this.maxText = this.maxTextShape.attr('text');\n        this.start += offsetRange;\n        this.minText = this.tickLabelFormatter ? this.tickLabelFormatter(minData) : minData.date;\n        break;\n\n      case this.maxHandlerShape:\n        // 拖动最大滑块时使用当前最小值设置最小值的文本，以便恢复到默认值\n        this.minText = this.minTextShape.attr('text');\n        this.end += offsetRange;\n        this.maxText = this.tickLabelFormatter ? this.tickLabelFormatter(maxData) : maxData.date;\n        break;\n\n      case this.foregroundShape:\n        this.start += offsetRange;\n        this.end += offsetRange;\n        this.minText = this.tickLabelFormatter ? this.tickLabelFormatter(minData) : minData.date;\n        this.maxText = this.tickLabelFormatter ? this.tickLabelFormatter(maxData) : maxData.date;\n        break;\n\n      default:\n        break;\n    }\n  };\n  /**\n   * 根据移动的比例来更新 ui，更新范围（0-1 范围的比例值）\n   * @private\n   */\n\n\n  TrendTimeBar.prototype.updateUI = function () {\n    var _this = this;\n\n    if (this.start < 0) {\n      this.start = 0;\n    }\n\n    if (this.end > 1) {\n      this.end = 1;\n    }\n\n    var min = this.x + this.start * this.width;\n    var max = this.x + this.end * this.width; // 1. foreground\n\n    this.foregroundShape.attr('x', min);\n    this.foregroundShape.attr('width', max - min); // 滑块相关的大小信息\n\n    var handlerWidth = get(this.handlerStyle, 'width', DEFAULT_HANDLER_WIDTH); // 设置文本\n\n    this.setText(this.minText, this.maxText);\n\n    var _a = this.dodgeText([min, max]),\n        minAttrs = _a[0],\n        maxAttrs = _a[1]; // 2. 左侧滑块和文字位置\n\n\n    this.minHandlerShape.setX(min - handlerWidth / 2);\n    each(minAttrs, function (v, k) {\n      return _this.minTextShape.attr(k, v);\n    }); // 3. 右侧滑块和文字位置\n\n    this.maxHandlerShape.setX(max - handlerWidth / 2);\n    each(maxAttrs, function (v, k) {\n      return _this.maxTextShape.attr(k, v);\n    });\n\n    if (this.currentMode === 'range') {\n      // 因为存储的 start、end 可能不一定是按大小存储的，所以排序一下，对外是 end >= start\n      this.graph.emit(VALUE_CHANGE, {\n        value: [this.start, this.end].sort()\n      });\n    } else if (this.currentMode === 'single') {\n      this.graph.emit(VALUE_CHANGE, {\n        value: [this.end, this.end]\n      });\n    }\n  };\n  /**\n   * 调整 text 的位置，自动躲避\n   * 根据位置，调整返回新的位置\n   * @param range\n   */\n\n\n  TrendTimeBar.prototype.dodgeText = function (range) {\n    var _a, _b;\n\n    var TEXTPADDING = 2;\n    var handlerWidth = get(this.handlerStyle, 'width', DEFAULT_HANDLER_WIDTH);\n    var minTextShape = this.minTextShape;\n    var maxTextShape = this.maxTextShape;\n    var min = range[0],\n        max = range[1];\n    var sorted = false; // 如果交换了位置，则对应的 min max 也交换\n\n    if (min > max) {\n      _a = [max, min], min = _a[0], max = _a[1];\n      _b = [maxTextShape, minTextShape], minTextShape = _b[0], maxTextShape = _b[1];\n      sorted = true;\n    } // 避让规则，优先显示在两侧，只有显示不下的时候，才显示在中间\n\n\n    var minBBox = minTextShape.getBBox();\n    var maxBBox = maxTextShape.getBBox();\n    var minAttrs = null;\n    var maxAttrs = null;\n\n    if (this.timeBarType === 'trend') {\n      minAttrs = min - minBBox.width < this.x + TEXTPADDING ? {\n        x: min + handlerWidth / 2 + TEXTPADDING,\n        textAlign: 'left'\n      } : {\n        x: min - handlerWidth / 2 - TEXTPADDING,\n        textAlign: 'right'\n      };\n      maxAttrs = max + maxBBox.width > this.x + this.width ? {\n        x: max - handlerWidth / 2 - TEXTPADDING,\n        textAlign: 'right'\n      } : {\n        x: max + handlerWidth / 2 + TEXTPADDING,\n        textAlign: 'left'\n      };\n    } else if (this.timeBarType === 'simple') {\n      minAttrs = minTextShape.attr('x') > minBBox.width // 左边滑块文本位置小于其宽度代表文字超过左边届\n      ? {\n        x: min,\n        textAlign: 'center'\n      } : {\n        x: min,\n        textAlign: 'left'\n      };\n      maxAttrs = maxTextShape.attr('x') > this.width - maxBBox.width // 有边滑块文本位置大于宽度代表文字超过右边界\n      ? {\n        x: max,\n        textAlign: 'right'\n      } : {\n        x: max,\n        textAlign: 'center'\n      };\n    }\n\n    return !sorted ? [minAttrs, maxAttrs] : [maxAttrs, minAttrs];\n  };\n\n  TrendTimeBar.prototype.startPlay = function () {\n    var _this = this;\n\n    return typeof window !== 'undefined' ? window.requestAnimationFrame(function () {\n      var _a = _this,\n          ticks = _a.ticks,\n          width = _a.width;\n      var speed = _this.currentSpeed;\n      var tickInterval = width / ticks.length;\n      var offsetX = tickInterval / ((10 - speed) * 1000 / 60);\n\n      var offsetXRange = _this.adjustOffsetRange(offsetX / _this.width);\n\n      _this.updateStartEnd(offsetXRange);\n\n      _this.updateUI();\n\n      if (_this.isPlay) {\n        _this.playHandler = _this.startPlay();\n      }\n    }) : undefined;\n  };\n\n  TrendTimeBar.prototype.changePlayStatus = function (isSync) {\n    if (isSync === void 0) {\n      isSync = true;\n    }\n\n    this.controllerBtnGroup.playButton.update({\n      isPlay: this.isPlay\n    });\n\n    if (this.isPlay) {\n      // 开始播放\n      this.playHandler = this.startPlay();\n      this.graph.emit(TIMELINE_START, null);\n    } else {\n      // 结束播放\n      if (this.playHandler) {\n        if (typeof window !== 'undefined') window.cancelAnimationFrame(this.playHandler);\n\n        if (isSync) {\n          this.graph.emit(TIMELINE_END, null);\n        }\n      }\n    }\n  };\n\n  TrendTimeBar.prototype.destory = function () {\n    this.graph.off(VALUE_CHANGE, function () {});\n    var group = this.group;\n    var minHandleShapeGroup = group.find(function (g) {\n      return g.get('name') === 'minHandlerShape';\n    });\n\n    if (minHandleShapeGroup) {\n      minHandleShapeGroup.off('minHandlerShape-handler:mousedown');\n      minHandleShapeGroup.off('minHandlerShape-handler:touchstart');\n      minHandleShapeGroup.destroy();\n    }\n\n    var maxHandleShapeGroup = group.find(function (g) {\n      return g.get('name') === 'maxHandlerShape';\n    }); // 2. 右滑块的滑动\n\n    if (maxHandleShapeGroup) {\n      maxHandleShapeGroup.off('maxHandlerShape-handler:mousedown');\n      maxHandleShapeGroup.off('maxHandlerShape-handler:touchstart');\n      maxHandleShapeGroup.destroy();\n    } // 3. 前景选中区域\n\n\n    this.foregroundShape.off('mousedown');\n    this.foregroundShape.off('touchstart');\n    this.foregroundShape.destroy();\n    group.off(\"\".concat(PLAY_PAUSE_BTN, \":click\"));\n    group.off(\"\".concat(NEXT_STEP_BTN, \":click\"));\n    group.off(\"\".concat(PRE_STEP_BTN, \":click\"));\n    group.off(TIMEBAR_CONFIG_CHANGE);\n    group.destroy();\n\n    if (this.trendComponent) {\n      this.trendComponent.destory();\n    }\n  };\n\n  return TrendTimeBar;\n}();\n\nexport default TrendTimeBar;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","get","size","each","isNumber","ext","Trend","Handler","isString","ControllerBtn","VALUE_CHANGE","TIMELINE_START","TIMEBAR_CONFIG_CHANGE","PLAY_PAUSE_BTN","NEXT_STEP_BTN","PRE_STEP_BTN","TIMELINE_END","transform","BACKGROUND_STYLE","fill","opacity","SIMPLE_BACKGROUND_STYLE","radius","FOREGROUND_STYLE","cursor","DEFAULT_HANDLER_WIDTH","HANDLER_STYLE","width","height","TEXT_STYLE","textBaseline","TICK_LABEL_STYLE","textAlign","TICK_LINE_STYLE","lineWidth","stroke","TrendTimeBar","cfg","_this","prevX","onMouseDown","handler","e","currentHandler","event","originalEvent","stopPropagation","preventDefault","pageX","containerDOM","canvas","addEventListener","onMouseMove","onMouseUp","x","offsetX","offsetXRange","adjustOffsetRange","updateStartEnd","updateUI","undefined","removeEventListener","_a","_b","y","_c","_d","padding","trendCfg","_e","controllerCfg","speed","_f","backgroundStyle","_g","foregroundStyle","_h","handlerStyle","_j","textStyle","_k","start","_l","end","_m","minText","_o","maxText","group","graph","_p","tick","tickLabelStyle","tickLineStyle","tickLabelFormatter","d","ticks","type","timeBarType","currentSpeed","currentMode","fontFamily","window","getComputedStyle","document","body","getPropertyValue","renderSlider","update","Math","min","max","setText","minTextShape","attr","maxTextShape","trendComponent","sliderGroup","addGroup","name","addShape","attrs","textGroup","text","silent","capture","foregroundShape","on","target","handlerWidth","handlerHeight","minHandleGroup","minHandlerShape","style","maxHandleGroup","maxHandlerShape","tickData","interval","tickPosList","textList","forEach","destroy","lastX","Infinity","rotate","map","data","index","push","label","date","textX","textY","matrix","line","x1","y1","x2","y2","toBack","bbox","getBBox","minX","show","hide","controllerBtnGroup","move","bindEvents","minHandleShapeGroup","find","maxHandleShapeGroup","concat","isPlay","changePlayStatus","adjustTickIndex","timeSelectX","abs","offsetRange","minData","maxData","dodgeText","minAttrs","maxAttrs","setX","v","k","emit","value","sort","range","TEXTPADDING","sorted","minBBox","maxBBox","startPlay","requestAnimationFrame","tickInterval","playHandler","isSync","playButton","cancelAnimationFrame","destory","off","g"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/timeBar/trendTimeBar.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { get, size, assign, each, isNumber } from '@antv/util';\nimport { ext } from '@antv/matrix-util';\nimport Trend from './trend';\nimport Handler from './handler';\nimport { isString } from '@antv/util';\nimport ControllerBtn from './controllerBtn';\nimport { VALUE_CHANGE, TIMELINE_START, TIMEBAR_CONFIG_CHANGE, PLAY_PAUSE_BTN, NEXT_STEP_BTN, PRE_STEP_BTN, TIMELINE_END } from './constant';\nvar transform = ext.transform;\n/**\n * 一些默认的样式配置\n */\n\nexport var BACKGROUND_STYLE = {\n  fill: '#416180',\n  opacity: 0.05\n};\nvar SIMPLE_BACKGROUND_STYLE = {\n  fill: '#416180',\n  opacity: 0.15,\n  radius: 5\n};\nexport var FOREGROUND_STYLE = {\n  fill: '#5B8FF9',\n  opacity: 0.3,\n  cursor: 'grab'\n};\nexport var DEFAULT_HANDLER_WIDTH = 2;\nexport var HANDLER_STYLE = {\n  width: DEFAULT_HANDLER_WIDTH,\n  height: 24\n};\nexport var TEXT_STYLE = {\n  textBaseline: 'middle',\n  fill: '#000',\n  opacity: 0.45\n};\nexport var TICK_LABEL_STYLE = {\n  textAlign: 'center',\n  textBaseline: 'top',\n  fill: '#607889',\n  opacity: 0.35\n};\nexport var TICK_LINE_STYLE = {\n  lineWidth: 1,\n  stroke: '#ccc'\n};\n\nvar TrendTimeBar =\n/** @class */\nfunction () {\n  function TrendTimeBar(cfg) {\n    var _this = this;\n\n    this.prevX = 0;\n\n    this.onMouseDown = function (handler) {\n      return function (e) {\n        // 1. 记录点击的滑块\n        _this.currentHandler = handler;\n        var event = e.originalEvent; // 2. 存储当前点击位置\n\n        event.stopPropagation();\n        event.preventDefault(); // 兼容移动端获取数据\n\n        _this.prevX = get(event, 'touches.0.pageX', event.pageX); // 3. 开始滑动的时候，绑定 move 和 up 事件\n\n        var containerDOM = _this.canvas.get('container');\n\n        containerDOM.addEventListener('mousemove', _this.onMouseMove);\n        containerDOM.addEventListener('mouseup', _this.onMouseUp);\n        containerDOM.addEventListener('mouseleave', _this.onMouseUp); // 移动端事件\n\n        containerDOM.addEventListener('touchmove', _this.onMouseMove);\n        containerDOM.addEventListener('touchend', _this.onMouseUp);\n        containerDOM.addEventListener('touchcancel', _this.onMouseUp);\n      };\n    };\n\n    this.onMouseMove = function (e) {\n      // 滑动过程中，计算偏移，更新滑块，然后 emit 数据出去\n      e.stopPropagation();\n      e.preventDefault();\n      var x = get(e, 'touches.0.pageX', e.pageX); // 横向的 slider 只处理 x\n\n      var offsetX = x - _this.prevX;\n\n      var offsetXRange = _this.adjustOffsetRange(offsetX / _this.width); // 更新 start end range 范围\n\n\n      _this.updateStartEnd(offsetXRange); // 更新 ui\n\n\n      _this.updateUI();\n\n      _this.prevX = x;\n    };\n\n    this.onMouseUp = function () {\n      // 结束之后，取消绑定的事件\n      if (_this.currentHandler) {\n        _this.currentHandler = undefined;\n      }\n\n      var containerDOM = _this.canvas.get('container');\n\n      if (containerDOM) {\n        containerDOM.removeEventListener('mousemove', _this.onMouseMove);\n        containerDOM.removeEventListener('mouseup', _this.onMouseUp); // 防止滑动到 canvas 外部之后，状态丢失\n\n        containerDOM.removeEventListener('mouseleave', _this.onMouseUp); // 移动端事件\n\n        containerDOM.removeEventListener('touchmove', _this.onMouseMove);\n        containerDOM.removeEventListener('touchend', _this.onMouseUp);\n        containerDOM.removeEventListener('touchcancel', _this.onMouseUp);\n      }\n    };\n\n    var _a = cfg.x,\n        x = _a === void 0 ? 0 : _a,\n        _b = cfg.y,\n        y = _b === void 0 ? 0 : _b,\n        _c = cfg.width,\n        width = _c === void 0 ? 100 : _c,\n        height = cfg.height,\n        _d = cfg.padding,\n        padding = _d === void 0 ? 10 : _d,\n        trendCfg = cfg.trendCfg,\n        _e = cfg.controllerCfg,\n        controllerCfg = _e === void 0 ? {\n      speed: 1\n    } : _e,\n        _f = cfg.backgroundStyle,\n        backgroundStyle = _f === void 0 ? {} : _f,\n        _g = cfg.foregroundStyle,\n        foregroundStyle = _g === void 0 ? {} : _g,\n        _h = cfg.handlerStyle,\n        handlerStyle = _h === void 0 ? {} : _h,\n        _j = cfg.textStyle,\n        textStyle = _j === void 0 ? {} : _j,\n        // 缩略轴的初始位置\n    _k = cfg.start,\n        // 缩略轴的初始位置\n    start = _k === void 0 ? 0 : _k,\n        _l = cfg.end,\n        end = _l === void 0 ? 1 : _l,\n        _m = cfg.minText,\n        minText = _m === void 0 ? '' : _m,\n        _o = cfg.maxText,\n        maxText = _o === void 0 ? '' : _o,\n        group = cfg.group,\n        graph = cfg.graph,\n        canvas = cfg.canvas,\n        _p = cfg.tick,\n        tick = _p === void 0 ? {\n      tickLabelStyle: {},\n      tickLineStyle: {},\n      tickLabelFormatter: function tickLabelFormatter(d) {\n        return d;\n      },\n      ticks: []\n    } : _p,\n        type = cfg.type;\n    this.graph = graph;\n    this.canvas = canvas;\n    this.group = group;\n    this.timeBarType = type; // position size\n\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.padding = padding;\n    this.ticks = tick.ticks;\n    this.trendCfg = trendCfg;\n    this.controllerCfg = controllerCfg;\n    this.currentSpeed = controllerCfg.speed || 1;\n    this.tickLabelFormatter = tick.tickLabelFormatter; // style\n\n    if (type === 'trend') {\n      this.backgroundStyle = __assign(__assign({}, BACKGROUND_STYLE), backgroundStyle);\n    } else if (type === 'simple') {\n      this.backgroundStyle = __assign(__assign({}, SIMPLE_BACKGROUND_STYLE), backgroundStyle);\n    }\n\n    this.foregroundStyle = __assign(__assign({}, FOREGROUND_STYLE), foregroundStyle);\n    this.handlerStyle = __assign(__assign({}, HANDLER_STYLE), handlerStyle);\n    this.textStyle = __assign(__assign({}, TEXT_STYLE), textStyle);\n    this.tickLabelStyle = __assign(__assign({}, TICK_LABEL_STYLE), tick.tickLabelStyle);\n    this.tickLineStyle = __assign(__assign({}, TICK_LINE_STYLE), tick.tickLineStyle);\n    this.currentMode = 'range'; // 初始信息\n\n    this.start = start;\n    this.end = end;\n    this.minText = minText;\n    this.maxText = maxText; // 初始化 fontFamily，如果有浏览器，取 body 上的字体，防止文字更新时局部渲染造成的重影\n\n    this.fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.renderSlider();\n  }\n  /**\n   * 更新配置\n   * @param cfg\n   */\n\n\n  TrendTimeBar.prototype.update = function (cfg) {\n    var x = cfg.x,\n        y = cfg.y,\n        width = cfg.width,\n        height = cfg.height,\n        minText = cfg.minText,\n        maxText = cfg.maxText,\n        start = cfg.start,\n        end = cfg.end; // start、end 只能是 0~1 范围\n\n    this.start = Math.min(1, Math.max(start, 0));\n    this.end = Math.min(1, Math.max(end, 0)); // 如果传了则更新，没有传则不更新\n    // @ts-ignore\n\n    assign(this, {\n      x: x,\n      y: y,\n      width: width,\n      height: height,\n      minText: minText,\n      maxText: maxText\n    }); // 更新 ui，不自动绘制\n\n    this.updateUI();\n  };\n\n  TrendTimeBar.prototype.setText = function (minText, maxText) {\n    this.minTextShape.attr('text', minText);\n    this.maxTextShape.attr('text', maxText);\n  };\n  /**\n   * 初始化组件结构\n   * @private\n   */\n\n\n  TrendTimeBar.prototype.renderSlider = function () {\n    var _this = this;\n\n    var _a = this,\n        width = _a.width,\n        height = _a.height,\n        timeBarType = _a.timeBarType; // 趋势图数据\n\n\n    if (timeBarType === 'trend' && size(get(this.trendCfg, 'data'))) {\n      var trendComponent = new Trend(__assign(__assign({\n        x: this.x,\n        y: this.y,\n        width: width,\n        height: height\n      }, this.trendCfg), {\n        group: this.group\n      }));\n      this.trendComponent = trendComponent;\n    }\n\n    var sliderGroup = this.group.addGroup({\n      name: 'slider-group'\n    }); // 1. 背景\n\n    sliderGroup.addShape('rect', {\n      attrs: __assign({\n        x: 0,\n        y: 0,\n        width: width,\n        height: height\n      }, this.backgroundStyle),\n      name: 'background'\n    });\n    var textGroup = this.group.addGroup(); // 2. 左右文字\n\n    if (timeBarType === 'trend') {\n      this.minTextShape = textGroup.addShape('text', {\n        attrs: __assign({\n          x: 0,\n          y: height / 2 + this.y,\n          textAlign: 'right',\n          text: this.minText,\n          silent: false,\n          fontFamily: this.fontFamily || 'Arial, sans-serif',\n          stroke: '#fff',\n          lineWidth: 5\n        }, this.textStyle),\n        capture: false,\n        name: 'min-text-shape'\n      });\n      this.maxTextShape = textGroup.addShape('text', {\n        attrs: __assign({\n          y: height / 2 + this.y,\n          textAlign: 'left',\n          text: this.maxText,\n          silent: false,\n          fontFamily: this.fontFamily || 'Arial, sans-serif',\n          stroke: '#fff',\n          lineWidth: 5\n        }, this.textStyle),\n        capture: false,\n        name: 'max-text-shape'\n      });\n    } else {\n      this.minTextShape = textGroup.addShape('text', {\n        attrs: __assign({\n          x: 0,\n          y: this.y - 10,\n          textAlign: 'center',\n          text: this.minText,\n          silent: false,\n          fontFamily: this.fontFamily || 'Arial, sans-serif',\n          stroke: '#fff',\n          lineWidth: 5\n        }, this.textStyle),\n        capture: false,\n        name: 'min-text-shape'\n      });\n      this.maxTextShape = textGroup.addShape('text', {\n        attrs: __assign({\n          y: this.y - 10,\n          textAlign: 'center',\n          text: this.maxText,\n          silent: false,\n          fontFamily: this.fontFamily || 'Arial, sans-serif',\n          stroke: '#fff',\n          lineWidth: 5\n        }, this.textStyle),\n        capture: false,\n        name: 'max-text-shape'\n      });\n    } // 3. 前景 选中背景框\n\n\n    this.foregroundShape = this.group.addGroup().addShape('rect', {\n      attrs: __assign({\n        x: 0,\n        y: this.y,\n        height: height\n      }, this.foregroundStyle),\n      name: 'foreground-shape'\n    });\n    this.foregroundShape.on('mousedown', function (e) {\n      e.target.attr('cursor', 'grabbing');\n    });\n    this.foregroundShape.on('mouseup', function (e) {\n      e.target.attr('cursor', _this.foregroundStyle.cursor || 'grab');\n    }); // 滑块相关的大小信息\n\n    var handlerWidth = get(this.handlerStyle, 'width', 2);\n    var handlerHeight = get(this.handlerStyle, 'height', 24);\n    var minHandleGroup = this.group.addGroup({\n      name: 'minHandlerShape'\n    }); // 4. 左右滑块\n\n    this.minHandlerShape = new Handler({\n      name: 'minHandlerShape',\n      group: minHandleGroup,\n      type: timeBarType,\n      x: this.x,\n      y: this.y,\n      width: handlerWidth,\n      height: handlerHeight,\n      style: this.handlerStyle\n    });\n    var maxHandleGroup = this.group.addGroup({\n      name: 'maxHandlerShape'\n    });\n    this.maxHandlerShape = new Handler({\n      name: 'maxHandlerShape',\n      group: maxHandleGroup,\n      type: timeBarType,\n      x: this.x,\n      y: this.y,\n      width: handlerWidth,\n      height: handlerHeight,\n      style: this.handlerStyle\n    }); // 缩略图下面的时间刻度\n\n    var tickData = this.ticks;\n    var interval = width / (tickData.length - 1);\n    this.tickPosList = [];\n\n    if (this.textList && this.textList.length) {\n      this.textList.forEach(function (text) {\n        text.destroy();\n      });\n    }\n\n    var lastX = -Infinity;\n    var rotate = this.tickLabelStyle.rotate;\n    delete this.tickLabelStyle.rotate;\n    this.textList = tickData.map(function (data, index) {\n      _this.tickPosList.push(_this.x + index * interval);\n\n      var label;\n\n      if (_this.tickLabelFormatter) {\n        label = _this.tickLabelFormatter(data);\n\n        if (!isString(label) && label) {\n          // return true\n          label = data.date;\n        }\n      } else {\n        label = data.date;\n      } // 文本刻度\n\n\n      var textX = _this.x + index * interval,\n          textY = _this.y + height + 5;\n\n      var text = _this.group.addShape('text', {\n        attrs: __assign({\n          x: textX,\n          y: textY,\n          text: label,\n          fontFamily: _this.fontFamily || 'Arial, sans-serif'\n        }, _this.tickLabelStyle),\n        name: 'tick-label'\n      });\n\n      if (isNumber(rotate) && index !== tickData.length - 1) {\n        var matrix = transform([1, 0, 0, 0, 1, 0, 0, 0, 1], [['t', -textX, -textY], ['r', rotate], ['t', textX - 5, textY + 2]]);\n        text.attr({\n          textAlign: 'left',\n          matrix: matrix\n        });\n      }\n\n      if (index === 0) {\n        text.attr({\n          textAlign: 'left'\n        });\n      } else if (index !== tickData.length - 1) {\n        text.attr({\n          textAlign: 'right'\n        });\n      } // 文本刻度上面的竖线\n\n\n      var line = _this.group.addShape('line', {\n        attrs: __assign({\n          x1: _this.x + index * interval,\n          y1: _this.y + height + 2,\n          x2: _this.x + index * interval,\n          y2: _this.y + height + 6\n        }, _this.tickLineStyle),\n        name: 'tick-line'\n      });\n\n      line.toBack();\n      var bbox = text.getBBox(); // 抽样，标签与标签间距不小于 10\n\n      if (bbox.minX > lastX) {\n        text.show();\n        line.show();\n        lastX = bbox.minX + bbox.width + 10;\n      } else {\n        text.hide();\n        line.hide();\n      }\n\n      return text;\n    }); // 渲染播放、快进和后退的控制按钮\n\n    this.controllerBtnGroup = new ControllerBtn(__assign({\n      group: this.group,\n      x: this.x,\n      y: this.y + height + 25,\n      width: width,\n      height: 35\n    }, this.controllerCfg)); // 初始化 minText 和 maxText，方便计算它们的 bbox\n\n    this.updateStartEnd(0); // 根据 start end 更新 ui 的位置信息\n\n    this.updateUI(); // 移动到对应的位置\n\n    sliderGroup.move(this.x, this.y); // 绑定事件鼠标事件\n\n    this.bindEvents();\n  };\n  /**\n   * 绑定事件：\n   *  - 点击\n   *  - 滑动\n   *  - 拖拽\n   *  - 滚动\n   * @private\n   */\n\n\n  TrendTimeBar.prototype.bindEvents = function () {\n    var _this = this; // 1. 左滑块的滑动\n\n\n    var minHandleShapeGroup = this.group.find(function (group) {\n      return group.get('name') === 'minHandlerShape';\n    });\n\n    if (minHandleShapeGroup) {\n      minHandleShapeGroup.on('minHandlerShape-handler:mousedown', this.onMouseDown(this.minHandlerShape));\n      minHandleShapeGroup.on('minHandlerShape-handler:touchstart', this.onMouseDown(this.minHandlerShape));\n    }\n\n    var maxHandleShapeGroup = this.group.find(function (group) {\n      return group.get('name') === 'maxHandlerShape';\n    }); // 2. 右滑块的滑动\n\n    if (maxHandleShapeGroup) {\n      maxHandleShapeGroup.on('maxHandlerShape-handler:mousedown', this.onMouseDown(this.maxHandlerShape));\n      maxHandleShapeGroup.on('maxHandlerShape-handler:touchstart', this.onMouseDown(this.maxHandlerShape));\n    } // 3. 前景选中区域\n\n\n    this.foregroundShape.on('mousedown', this.onMouseDown(this.foregroundShape));\n    this.foregroundShape.on('touchstart', this.onMouseDown(this.foregroundShape)); // 播放区按钮控制\n\n    /** 播放/暂停事件 */\n\n    this.group.on(\"\".concat(PLAY_PAUSE_BTN, \":click\"), function () {\n      _this.isPlay = !_this.isPlay;\n      _this.currentHandler = _this.maxHandlerShape;\n\n      _this.changePlayStatus();\n    }); // 处理前进一步的事件\n\n    this.group.on(\"\".concat(NEXT_STEP_BTN, \":click\"), function () {\n      _this.currentHandler = _this.maxHandlerShape;\n\n      _this.updateStartEnd(0.01);\n\n      _this.updateUI();\n    }); // 处理后退一步的事件\n\n    this.group.on(\"\".concat(PRE_STEP_BTN, \":click\"), function () {\n      _this.currentHandler = _this.maxHandlerShape;\n\n      _this.updateStartEnd(-0.01);\n\n      _this.updateUI();\n    });\n    this.group.on(TIMEBAR_CONFIG_CHANGE, function (_a) {\n      var type = _a.type,\n          speed = _a.speed;\n      _this.currentSpeed = speed;\n      _this.currentMode = type;\n\n      if (type === 'single') {\n        _this.minHandlerShape.hide();\n\n        _this.foregroundShape.hide();\n\n        _this.minTextShape.hide();\n      } else if (type === 'range') {\n        _this.minHandlerShape.show();\n\n        _this.foregroundShape.show();\n\n        _this.minTextShape.show();\n      }\n    });\n  };\n  /** 输入当前圆点位置，输出离哪个 tick 的位置最近 */\n\n\n  TrendTimeBar.prototype.adjustTickIndex = function (timeSelectX) {\n    for (var i = 0; i < this.tickPosList.length - 1; i++) {\n      if (this.tickPosList[i] <= timeSelectX && timeSelectX <= this.tickPosList[i + 1]) {\n        return Math.abs(this.tickPosList[i] - timeSelectX) < Math.abs(timeSelectX - this.tickPosList[i + 1]) ? i : i + 1;\n      }\n    }\n\n    return 0;\n  };\n  /**\n   * 调整 offsetRange，因为一些范围的限制\n   * @param offsetRange\n   */\n\n\n  TrendTimeBar.prototype.adjustOffsetRange = function (offsetRange) {\n    // 针对不同的滑动组件，处理的方式不同\n    switch (this.currentHandler) {\n      case this.minHandlerShape:\n        {\n          var min = 0 - this.start;\n          var max = 1 - this.start;\n          return Math.min(max, Math.max(min, offsetRange));\n        }\n\n      case this.maxHandlerShape:\n        {\n          var min = 0 - this.end;\n          var max = 1 - this.end;\n          return Math.min(max, Math.max(min, offsetRange));\n        }\n\n      case this.foregroundShape:\n        {\n          var min = 0 - this.start;\n          var max = 1 - this.end;\n          return Math.min(max, Math.max(min, offsetRange));\n        }\n\n      default:\n        return 0;\n    }\n  };\n  /**\n   * 更新起始、结束的控制块位置、文本、范围值（原始值）\n   * @param offsetRange\n   */\n\n\n  TrendTimeBar.prototype.updateStartEnd = function (offsetRange) {\n    var minData = this.ticks[this.adjustTickIndex(this.start * this.width)];\n    var maxData = this.ticks[this.adjustTickIndex(this.end * this.width)];\n\n    if (!this.currentHandler) {\n      this.minText = this.tickLabelFormatter ? this.tickLabelFormatter(minData) : minData === null || minData === void 0 ? void 0 : minData.date;\n      this.maxText = this.tickLabelFormatter ? this.tickLabelFormatter(maxData) : maxData === null || maxData === void 0 ? void 0 : maxData.date;\n      return;\n    } // 操作不同的组件，反馈不一样\n\n\n    switch (this.currentHandler) {\n      case this.minHandlerShape:\n        // 拖动最小滑块时使用当前最大值设置最大值的文本，以便恢复到默认值\n        this.maxText = this.maxTextShape.attr('text');\n        this.start += offsetRange;\n        this.minText = this.tickLabelFormatter ? this.tickLabelFormatter(minData) : minData.date;\n        break;\n\n      case this.maxHandlerShape:\n        // 拖动最大滑块时使用当前最小值设置最小值的文本，以便恢复到默认值\n        this.minText = this.minTextShape.attr('text');\n        this.end += offsetRange;\n        this.maxText = this.tickLabelFormatter ? this.tickLabelFormatter(maxData) : maxData.date;\n        break;\n\n      case this.foregroundShape:\n        this.start += offsetRange;\n        this.end += offsetRange;\n        this.minText = this.tickLabelFormatter ? this.tickLabelFormatter(minData) : minData.date;\n        this.maxText = this.tickLabelFormatter ? this.tickLabelFormatter(maxData) : maxData.date;\n        break;\n\n      default:\n        break;\n    }\n  };\n  /**\n   * 根据移动的比例来更新 ui，更新范围（0-1 范围的比例值）\n   * @private\n   */\n\n\n  TrendTimeBar.prototype.updateUI = function () {\n    var _this = this;\n\n    if (this.start < 0) {\n      this.start = 0;\n    }\n\n    if (this.end > 1) {\n      this.end = 1;\n    }\n\n    var min = this.x + this.start * this.width;\n    var max = this.x + this.end * this.width; // 1. foreground\n\n    this.foregroundShape.attr('x', min);\n    this.foregroundShape.attr('width', max - min); // 滑块相关的大小信息\n\n    var handlerWidth = get(this.handlerStyle, 'width', DEFAULT_HANDLER_WIDTH); // 设置文本\n\n    this.setText(this.minText, this.maxText);\n\n    var _a = this.dodgeText([min, max]),\n        minAttrs = _a[0],\n        maxAttrs = _a[1]; // 2. 左侧滑块和文字位置\n\n\n    this.minHandlerShape.setX(min - handlerWidth / 2);\n    each(minAttrs, function (v, k) {\n      return _this.minTextShape.attr(k, v);\n    }); // 3. 右侧滑块和文字位置\n\n    this.maxHandlerShape.setX(max - handlerWidth / 2);\n    each(maxAttrs, function (v, k) {\n      return _this.maxTextShape.attr(k, v);\n    });\n\n    if (this.currentMode === 'range') {\n      // 因为存储的 start、end 可能不一定是按大小存储的，所以排序一下，对外是 end >= start\n      this.graph.emit(VALUE_CHANGE, {\n        value: [this.start, this.end].sort()\n      });\n    } else if (this.currentMode === 'single') {\n      this.graph.emit(VALUE_CHANGE, {\n        value: [this.end, this.end]\n      });\n    }\n  };\n  /**\n   * 调整 text 的位置，自动躲避\n   * 根据位置，调整返回新的位置\n   * @param range\n   */\n\n\n  TrendTimeBar.prototype.dodgeText = function (range) {\n    var _a, _b;\n\n    var TEXTPADDING = 2;\n    var handlerWidth = get(this.handlerStyle, 'width', DEFAULT_HANDLER_WIDTH);\n    var minTextShape = this.minTextShape;\n    var maxTextShape = this.maxTextShape;\n    var min = range[0],\n        max = range[1];\n    var sorted = false; // 如果交换了位置，则对应的 min max 也交换\n\n    if (min > max) {\n      _a = [max, min], min = _a[0], max = _a[1];\n      _b = [maxTextShape, minTextShape], minTextShape = _b[0], maxTextShape = _b[1];\n      sorted = true;\n    } // 避让规则，优先显示在两侧，只有显示不下的时候，才显示在中间\n\n\n    var minBBox = minTextShape.getBBox();\n    var maxBBox = maxTextShape.getBBox();\n    var minAttrs = null;\n    var maxAttrs = null;\n\n    if (this.timeBarType === 'trend') {\n      minAttrs = min - minBBox.width < this.x + TEXTPADDING ? {\n        x: min + handlerWidth / 2 + TEXTPADDING,\n        textAlign: 'left'\n      } : {\n        x: min - handlerWidth / 2 - TEXTPADDING,\n        textAlign: 'right'\n      };\n      maxAttrs = max + maxBBox.width > this.x + this.width ? {\n        x: max - handlerWidth / 2 - TEXTPADDING,\n        textAlign: 'right'\n      } : {\n        x: max + handlerWidth / 2 + TEXTPADDING,\n        textAlign: 'left'\n      };\n    } else if (this.timeBarType === 'simple') {\n      minAttrs = minTextShape.attr('x') > minBBox.width // 左边滑块文本位置小于其宽度代表文字超过左边届\n      ? {\n        x: min,\n        textAlign: 'center'\n      } : {\n        x: min,\n        textAlign: 'left'\n      };\n      maxAttrs = maxTextShape.attr('x') > this.width - maxBBox.width // 有边滑块文本位置大于宽度代表文字超过右边界\n      ? {\n        x: max,\n        textAlign: 'right'\n      } : {\n        x: max,\n        textAlign: 'center'\n      };\n    }\n\n    return !sorted ? [minAttrs, maxAttrs] : [maxAttrs, minAttrs];\n  };\n\n  TrendTimeBar.prototype.startPlay = function () {\n    var _this = this;\n\n    return typeof window !== 'undefined' ? window.requestAnimationFrame(function () {\n      var _a = _this,\n          ticks = _a.ticks,\n          width = _a.width;\n      var speed = _this.currentSpeed;\n      var tickInterval = width / ticks.length;\n      var offsetX = tickInterval / ((10 - speed) * 1000 / 60);\n\n      var offsetXRange = _this.adjustOffsetRange(offsetX / _this.width);\n\n      _this.updateStartEnd(offsetXRange);\n\n      _this.updateUI();\n\n      if (_this.isPlay) {\n        _this.playHandler = _this.startPlay();\n      }\n    }) : undefined;\n  };\n\n  TrendTimeBar.prototype.changePlayStatus = function (isSync) {\n    if (isSync === void 0) {\n      isSync = true;\n    }\n\n    this.controllerBtnGroup.playButton.update({\n      isPlay: this.isPlay\n    });\n\n    if (this.isPlay) {\n      // 开始播放\n      this.playHandler = this.startPlay();\n      this.graph.emit(TIMELINE_START, null);\n    } else {\n      // 结束播放\n      if (this.playHandler) {\n        if (typeof window !== 'undefined') window.cancelAnimationFrame(this.playHandler);\n\n        if (isSync) {\n          this.graph.emit(TIMELINE_END, null);\n        }\n      }\n    }\n  };\n\n  TrendTimeBar.prototype.destory = function () {\n    this.graph.off(VALUE_CHANGE, function () {});\n    var group = this.group;\n    var minHandleShapeGroup = group.find(function (g) {\n      return g.get('name') === 'minHandlerShape';\n    });\n\n    if (minHandleShapeGroup) {\n      minHandleShapeGroup.off('minHandlerShape-handler:mousedown');\n      minHandleShapeGroup.off('minHandlerShape-handler:touchstart');\n      minHandleShapeGroup.destroy();\n    }\n\n    var maxHandleShapeGroup = group.find(function (g) {\n      return g.get('name') === 'maxHandlerShape';\n    }); // 2. 右滑块的滑动\n\n    if (maxHandleShapeGroup) {\n      maxHandleShapeGroup.off('maxHandlerShape-handler:mousedown');\n      maxHandleShapeGroup.off('maxHandlerShape-handler:touchstart');\n      maxHandleShapeGroup.destroy();\n    } // 3. 前景选中区域\n\n\n    this.foregroundShape.off('mousedown');\n    this.foregroundShape.off('touchstart');\n    this.foregroundShape.destroy();\n    group.off(\"\".concat(PLAY_PAUSE_BTN, \":click\"));\n    group.off(\"\".concat(NEXT_STEP_BTN, \":click\"));\n    group.off(\"\".concat(PRE_STEP_BTN, \":click\"));\n    group.off(TIMEBAR_CONFIG_CHANGE);\n    group.destroy();\n\n    if (this.trendComponent) {\n      this.trendComponent.destory();\n    }\n  };\n\n  return TrendTimeBar;\n}();\n\nexport default TrendTimeBar;"],"mappings":"AAAA,IAAIA,QAAQ,GAAG,QAAQ,KAAKA,QAAb,IAAyB,YAAY;EAClDA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,CAAV,EAAa;IACvC,KAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;MACnDD,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;MAEA,KAAK,IAAII,CAAT,IAAcL,CAAd,EAAiB;QACf,IAAIH,MAAM,CAACS,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EAAgDN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;MACjD;IACF;;IAED,OAAON,CAAP;EACD,CAVD;;EAYA,OAAOH,QAAQ,CAACa,KAAT,CAAe,IAAf,EAAqBN,SAArB,CAAP;AACD,CAdD;;AAgBA,SAASO,GAAT,EAAcC,IAAd,EAAoBb,MAApB,EAA4Bc,IAA5B,EAAkCC,QAAlC,QAAkD,YAAlD;AACA,SAASC,GAAT,QAAoB,mBAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,QAAT,QAAyB,YAAzB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,YAAT,EAAuBC,cAAvB,EAAuCC,qBAAvC,EAA8DC,cAA9D,EAA8EC,aAA9E,EAA6FC,YAA7F,EAA2GC,YAA3G,QAA+H,YAA/H;AACA,IAAIC,SAAS,GAAGZ,GAAG,CAACY,SAApB;AACA;AACA;AACA;;AAEA,OAAO,IAAIC,gBAAgB,GAAG;EAC5BC,IAAI,EAAE,SADsB;EAE5BC,OAAO,EAAE;AAFmB,CAAvB;AAIP,IAAIC,uBAAuB,GAAG;EAC5BF,IAAI,EAAE,SADsB;EAE5BC,OAAO,EAAE,IAFmB;EAG5BE,MAAM,EAAE;AAHoB,CAA9B;AAKA,OAAO,IAAIC,gBAAgB,GAAG;EAC5BJ,IAAI,EAAE,SADsB;EAE5BC,OAAO,EAAE,GAFmB;EAG5BI,MAAM,EAAE;AAHoB,CAAvB;AAKP,OAAO,IAAIC,qBAAqB,GAAG,CAA5B;AACP,OAAO,IAAIC,aAAa,GAAG;EACzBC,KAAK,EAAEF,qBADkB;EAEzBG,MAAM,EAAE;AAFiB,CAApB;AAIP,OAAO,IAAIC,UAAU,GAAG;EACtBC,YAAY,EAAE,QADQ;EAEtBX,IAAI,EAAE,MAFgB;EAGtBC,OAAO,EAAE;AAHa,CAAjB;AAKP,OAAO,IAAIW,gBAAgB,GAAG;EAC5BC,SAAS,EAAE,QADiB;EAE5BF,YAAY,EAAE,KAFc;EAG5BX,IAAI,EAAE,SAHsB;EAI5BC,OAAO,EAAE;AAJmB,CAAvB;AAMP,OAAO,IAAIa,eAAe,GAAG;EAC3BC,SAAS,EAAE,CADgB;EAE3BC,MAAM,EAAE;AAFmB,CAAtB;;AAKP,IAAIC,YAAY;AAChB;AACA,YAAY;EACV,SAASA,YAAT,CAAsBC,GAAtB,EAA2B;IACzB,IAAIC,KAAK,GAAG,IAAZ;;IAEA,KAAKC,KAAL,GAAa,CAAb;;IAEA,KAAKC,WAAL,GAAmB,UAAUC,OAAV,EAAmB;MACpC,OAAO,UAAUC,CAAV,EAAa;QAClB;QACAJ,KAAK,CAACK,cAAN,GAAuBF,OAAvB;QACA,IAAIG,KAAK,GAAGF,CAAC,CAACG,aAAd,CAHkB,CAGW;;QAE7BD,KAAK,CAACE,eAAN;QACAF,KAAK,CAACG,cAAN,GANkB,CAMM;;QAExBT,KAAK,CAACC,KAAN,GAActC,GAAG,CAAC2C,KAAD,EAAQ,iBAAR,EAA2BA,KAAK,CAACI,KAAjC,CAAjB,CARkB,CAQwC;;QAE1D,IAAIC,YAAY,GAAGX,KAAK,CAACY,MAAN,CAAajD,GAAb,CAAiB,WAAjB,CAAnB;;QAEAgD,YAAY,CAACE,gBAAb,CAA8B,WAA9B,EAA2Cb,KAAK,CAACc,WAAjD;QACAH,YAAY,CAACE,gBAAb,CAA8B,SAA9B,EAAyCb,KAAK,CAACe,SAA/C;QACAJ,YAAY,CAACE,gBAAb,CAA8B,YAA9B,EAA4Cb,KAAK,CAACe,SAAlD,EAdkB,CAc4C;;QAE9DJ,YAAY,CAACE,gBAAb,CAA8B,WAA9B,EAA2Cb,KAAK,CAACc,WAAjD;QACAH,YAAY,CAACE,gBAAb,CAA8B,UAA9B,EAA0Cb,KAAK,CAACe,SAAhD;QACAJ,YAAY,CAACE,gBAAb,CAA8B,aAA9B,EAA6Cb,KAAK,CAACe,SAAnD;MACD,CAnBD;IAoBD,CArBD;;IAuBA,KAAKD,WAAL,GAAmB,UAAUV,CAAV,EAAa;MAC9B;MACAA,CAAC,CAACI,eAAF;MACAJ,CAAC,CAACK,cAAF;MACA,IAAIO,CAAC,GAAGrD,GAAG,CAACyC,CAAD,EAAI,iBAAJ,EAAuBA,CAAC,CAACM,KAAzB,CAAX,CAJ8B,CAIc;;MAE5C,IAAIO,OAAO,GAAGD,CAAC,GAAGhB,KAAK,CAACC,KAAxB;;MAEA,IAAIiB,YAAY,GAAGlB,KAAK,CAACmB,iBAAN,CAAwBF,OAAO,GAAGjB,KAAK,CAACX,KAAxC,CAAnB,CAR8B,CAQqC;;;MAGnEW,KAAK,CAACoB,cAAN,CAAqBF,YAArB,EAX8B,CAWM;;;MAGpClB,KAAK,CAACqB,QAAN;;MAEArB,KAAK,CAACC,KAAN,GAAce,CAAd;IACD,CAjBD;;IAmBA,KAAKD,SAAL,GAAiB,YAAY;MAC3B;MACA,IAAIf,KAAK,CAACK,cAAV,EAA0B;QACxBL,KAAK,CAACK,cAAN,GAAuBiB,SAAvB;MACD;;MAED,IAAIX,YAAY,GAAGX,KAAK,CAACY,MAAN,CAAajD,GAAb,CAAiB,WAAjB,CAAnB;;MAEA,IAAIgD,YAAJ,EAAkB;QAChBA,YAAY,CAACY,mBAAb,CAAiC,WAAjC,EAA8CvB,KAAK,CAACc,WAApD;QACAH,YAAY,CAACY,mBAAb,CAAiC,SAAjC,EAA4CvB,KAAK,CAACe,SAAlD,EAFgB,CAE8C;;QAE9DJ,YAAY,CAACY,mBAAb,CAAiC,YAAjC,EAA+CvB,KAAK,CAACe,SAArD,EAJgB,CAIiD;;QAEjEJ,YAAY,CAACY,mBAAb,CAAiC,WAAjC,EAA8CvB,KAAK,CAACc,WAApD;QACAH,YAAY,CAACY,mBAAb,CAAiC,UAAjC,EAA6CvB,KAAK,CAACe,SAAnD;QACAJ,YAAY,CAACY,mBAAb,CAAiC,aAAjC,EAAgDvB,KAAK,CAACe,SAAtD;MACD;IACF,CAlBD;;IAoBA,IAAIS,EAAE,GAAGzB,GAAG,CAACiB,CAAb;IAAA,IACIA,CAAC,GAAGQ,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAD5B;IAAA,IAEIC,EAAE,GAAG1B,GAAG,CAAC2B,CAFb;IAAA,IAGIA,CAAC,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAH5B;IAAA,IAIIE,EAAE,GAAG5B,GAAG,CAACV,KAJb;IAAA,IAKIA,KAAK,GAAGsC,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EALlC;IAAA,IAMIrC,MAAM,GAAGS,GAAG,CAACT,MANjB;IAAA,IAOIsC,EAAE,GAAG7B,GAAG,CAAC8B,OAPb;IAAA,IAQIA,OAAO,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EARnC;IAAA,IASIE,QAAQ,GAAG/B,GAAG,CAAC+B,QATnB;IAAA,IAUIC,EAAE,GAAGhC,GAAG,CAACiC,aAVb;IAAA,IAWIA,aAAa,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB;MAClCE,KAAK,EAAE;IAD2B,CAAhB,GAEhBF,EAbJ;IAAA,IAcIG,EAAE,GAAGnC,GAAG,CAACoC,eAdb;IAAA,IAeIA,eAAe,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAf3C;IAAA,IAgBIE,EAAE,GAAGrC,GAAG,CAACsC,eAhBb;IAAA,IAiBIA,eAAe,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAjB3C;IAAA,IAkBIE,EAAE,GAAGvC,GAAG,CAACwC,YAlBb;IAAA,IAmBIA,YAAY,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAnBxC;IAAA,IAoBIE,EAAE,GAAGzC,GAAG,CAAC0C,SApBb;IAAA,IAqBIA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EArBrC;IAAA,IAsBI;IACJE,EAAE,GAAG3C,GAAG,CAAC4C,KAvBT;IAAA,IAwBI;IACJA,KAAK,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAzB5B;IAAA,IA0BIE,EAAE,GAAG7C,GAAG,CAAC8C,GA1Bb;IAAA,IA2BIA,GAAG,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EA3B9B;IAAA,IA4BIE,EAAE,GAAG/C,GAAG,CAACgD,OA5Bb;IAAA,IA6BIA,OAAO,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EA7BnC;IAAA,IA8BIE,EAAE,GAAGjD,GAAG,CAACkD,OA9Bb;IAAA,IA+BIA,OAAO,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EA/BnC;IAAA,IAgCIE,KAAK,GAAGnD,GAAG,CAACmD,KAhChB;IAAA,IAiCIC,KAAK,GAAGpD,GAAG,CAACoD,KAjChB;IAAA,IAkCIvC,MAAM,GAAGb,GAAG,CAACa,MAlCjB;IAAA,IAmCIwC,EAAE,GAAGrD,GAAG,CAACsD,IAnCb;IAAA,IAoCIA,IAAI,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB;MACzBE,cAAc,EAAE,EADS;MAEzBC,aAAa,EAAE,EAFU;MAGzBC,kBAAkB,EAAE,SAASA,kBAAT,CAA4BC,CAA5B,EAA+B;QACjD,OAAOA,CAAP;MACD,CALwB;MAMzBC,KAAK,EAAE;IANkB,CAAhB,GAOPN,EA3CJ;IAAA,IA4CIO,IAAI,GAAG5D,GAAG,CAAC4D,IA5Cf;IA6CA,KAAKR,KAAL,GAAaA,KAAb;IACA,KAAKvC,MAAL,GAAcA,MAAd;IACA,KAAKsC,KAAL,GAAaA,KAAb;IACA,KAAKU,WAAL,GAAmBD,IAAnB,CAnHyB,CAmHA;;IAEzB,KAAK3C,CAAL,GAASA,CAAT;IACA,KAAKU,CAAL,GAASA,CAAT;IACA,KAAKrC,KAAL,GAAaA,KAAb;IACA,KAAKC,MAAL,GAAcA,MAAd;IACA,KAAKuC,OAAL,GAAeA,OAAf;IACA,KAAK6B,KAAL,GAAaL,IAAI,CAACK,KAAlB;IACA,KAAK5B,QAAL,GAAgBA,QAAhB;IACA,KAAKE,aAAL,GAAqBA,aAArB;IACA,KAAK6B,YAAL,GAAoB7B,aAAa,CAACC,KAAd,IAAuB,CAA3C;IACA,KAAKuB,kBAAL,GAA0BH,IAAI,CAACG,kBAA/B,CA9HyB,CA8H0B;;IAEnD,IAAIG,IAAI,KAAK,OAAb,EAAsB;MACpB,KAAKxB,eAAL,GAAuBtF,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK+B,gBAAL,CAAT,EAAiCuD,eAAjC,CAA/B;IACD,CAFD,MAEO,IAAIwB,IAAI,KAAK,QAAb,EAAuB;MAC5B,KAAKxB,eAAL,GAAuBtF,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKkC,uBAAL,CAAT,EAAwCoD,eAAxC,CAA/B;IACD;;IAED,KAAKE,eAAL,GAAuBxF,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKoC,gBAAL,CAAT,EAAiCoD,eAAjC,CAA/B;IACA,KAAKE,YAAL,GAAoB1F,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKuC,aAAL,CAAT,EAA8BmD,YAA9B,CAA5B;IACA,KAAKE,SAAL,GAAiB5F,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK0C,UAAL,CAAT,EAA2BkD,SAA3B,CAAzB;IACA,KAAKa,cAAL,GAAsBzG,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK4C,gBAAL,CAAT,EAAiC4D,IAAI,CAACC,cAAtC,CAA9B;IACA,KAAKC,aAAL,GAAqB1G,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK8C,eAAL,CAAT,EAAgC0D,IAAI,CAACE,aAArC,CAA7B;IACA,KAAKO,WAAL,GAAmB,OAAnB,CA3IyB,CA2IG;;IAE5B,KAAKnB,KAAL,GAAaA,KAAb;IACA,KAAKE,GAAL,GAAWA,GAAX;IACA,KAAKE,OAAL,GAAeA,OAAf;IACA,KAAKE,OAAL,GAAeA,OAAf,CAhJyB,CAgJD;;IAExB,KAAKc,UAAL,GAAkB,OAAOC,MAAP,KAAkB,WAAlB,GAAgCA,MAAM,CAACC,gBAAP,CAAwBC,QAAQ,CAACC,IAAjC,EAAuC,IAAvC,EAA6CC,gBAA7C,CAA8D,aAA9D,KAAgF,mBAAhH,GAAsI,mBAAxJ;IACA,KAAKC,YAAL;EACD;EACD;AACF;AACA;AACA;;;EAGEvE,YAAY,CAACvC,SAAb,CAAuB+G,MAAvB,GAAgC,UAAUvE,GAAV,EAAe;IAC7C,IAAIiB,CAAC,GAAGjB,GAAG,CAACiB,CAAZ;IAAA,IACIU,CAAC,GAAG3B,GAAG,CAAC2B,CADZ;IAAA,IAEIrC,KAAK,GAAGU,GAAG,CAACV,KAFhB;IAAA,IAGIC,MAAM,GAAGS,GAAG,CAACT,MAHjB;IAAA,IAIIyD,OAAO,GAAGhD,GAAG,CAACgD,OAJlB;IAAA,IAKIE,OAAO,GAAGlD,GAAG,CAACkD,OALlB;IAAA,IAMIN,KAAK,GAAG5C,GAAG,CAAC4C,KANhB;IAAA,IAOIE,GAAG,GAAG9C,GAAG,CAAC8C,GAPd,CAD6C,CAQ1B;;IAEnB,KAAKF,KAAL,GAAa4B,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS9B,KAAT,EAAgB,CAAhB,CAAZ,CAAb;IACA,KAAKE,GAAL,GAAW0B,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS5B,GAAT,EAAc,CAAd,CAAZ,CAAX,CAX6C,CAWH;IAC1C;;IAEA9F,MAAM,CAAC,IAAD,EAAO;MACXiE,CAAC,EAAEA,CADQ;MAEXU,CAAC,EAAEA,CAFQ;MAGXrC,KAAK,EAAEA,KAHI;MAIXC,MAAM,EAAEA,MAJG;MAKXyD,OAAO,EAAEA,OALE;MAMXE,OAAO,EAAEA;IANE,CAAP,CAAN,CAd6C,CAqBzC;;IAEJ,KAAK5B,QAAL;EACD,CAxBD;;EA0BAvB,YAAY,CAACvC,SAAb,CAAuBmH,OAAvB,GAAiC,UAAU3B,OAAV,EAAmBE,OAAnB,EAA4B;IAC3D,KAAK0B,YAAL,CAAkBC,IAAlB,CAAuB,MAAvB,EAA+B7B,OAA/B;IACA,KAAK8B,YAAL,CAAkBD,IAAlB,CAAuB,MAAvB,EAA+B3B,OAA/B;EACD,CAHD;EAIA;AACF;AACA;AACA;;;EAGEnD,YAAY,CAACvC,SAAb,CAAuB8G,YAAvB,GAAsC,YAAY;IAChD,IAAIrE,KAAK,GAAG,IAAZ;;IAEA,IAAIwB,EAAE,GAAG,IAAT;IAAA,IACInC,KAAK,GAAGmC,EAAE,CAACnC,KADf;IAAA,IAEIC,MAAM,GAAGkC,EAAE,CAAClC,MAFhB;IAAA,IAGIsE,WAAW,GAAGpC,EAAE,CAACoC,WAHrB,CAHgD,CAMd;;;IAGlC,IAAIA,WAAW,KAAK,OAAhB,IAA2BhG,IAAI,CAACD,GAAG,CAAC,KAAKmE,QAAN,EAAgB,MAAhB,CAAJ,CAAnC,EAAiE;MAC/D,IAAIgD,cAAc,GAAG,IAAI9G,KAAJ,CAAUnB,QAAQ,CAACA,QAAQ,CAAC;QAC/CmE,CAAC,EAAE,KAAKA,CADuC;QAE/CU,CAAC,EAAE,KAAKA,CAFuC;QAG/CrC,KAAK,EAAEA,KAHwC;QAI/CC,MAAM,EAAEA;MAJuC,CAAD,EAK7C,KAAKwC,QALwC,CAAT,EAKpB;QACjBoB,KAAK,EAAE,KAAKA;MADK,CALoB,CAAlB,CAArB;MAQA,KAAK4B,cAAL,GAAsBA,cAAtB;IACD;;IAED,IAAIC,WAAW,GAAG,KAAK7B,KAAL,CAAW8B,QAAX,CAAoB;MACpCC,IAAI,EAAE;IAD8B,CAApB,CAAlB,CArBgD,CAuB5C;;IAEJF,WAAW,CAACG,QAAZ,CAAqB,MAArB,EAA6B;MAC3BC,KAAK,EAAEtI,QAAQ,CAAC;QACdmE,CAAC,EAAE,CADW;QAEdU,CAAC,EAAE,CAFW;QAGdrC,KAAK,EAAEA,KAHO;QAIdC,MAAM,EAAEA;MAJM,CAAD,EAKZ,KAAK6C,eALO,CADY;MAO3B8C,IAAI,EAAE;IAPqB,CAA7B;IASA,IAAIG,SAAS,GAAG,KAAKlC,KAAL,CAAW8B,QAAX,EAAhB,CAlCgD,CAkCT;;IAEvC,IAAIpB,WAAW,KAAK,OAApB,EAA6B;MAC3B,KAAKe,YAAL,GAAoBS,SAAS,CAACF,QAAV,CAAmB,MAAnB,EAA2B;QAC7CC,KAAK,EAAEtI,QAAQ,CAAC;UACdmE,CAAC,EAAE,CADW;UAEdU,CAAC,EAAEpC,MAAM,GAAG,CAAT,GAAa,KAAKoC,CAFP;UAGdhC,SAAS,EAAE,OAHG;UAId2F,IAAI,EAAE,KAAKtC,OAJG;UAKduC,MAAM,EAAE,KALM;UAMdvB,UAAU,EAAE,KAAKA,UAAL,IAAmB,mBANjB;UAOdlE,MAAM,EAAE,MAPM;UAQdD,SAAS,EAAE;QARG,CAAD,EASZ,KAAK6C,SATO,CAD8B;QAW7C8C,OAAO,EAAE,KAXoC;QAY7CN,IAAI,EAAE;MAZuC,CAA3B,CAApB;MAcA,KAAKJ,YAAL,GAAoBO,SAAS,CAACF,QAAV,CAAmB,MAAnB,EAA2B;QAC7CC,KAAK,EAAEtI,QAAQ,CAAC;UACd6E,CAAC,EAAEpC,MAAM,GAAG,CAAT,GAAa,KAAKoC,CADP;UAEdhC,SAAS,EAAE,MAFG;UAGd2F,IAAI,EAAE,KAAKpC,OAHG;UAIdqC,MAAM,EAAE,KAJM;UAKdvB,UAAU,EAAE,KAAKA,UAAL,IAAmB,mBALjB;UAMdlE,MAAM,EAAE,MANM;UAOdD,SAAS,EAAE;QAPG,CAAD,EAQZ,KAAK6C,SARO,CAD8B;QAU7C8C,OAAO,EAAE,KAVoC;QAW7CN,IAAI,EAAE;MAXuC,CAA3B,CAApB;IAaD,CA5BD,MA4BO;MACL,KAAKN,YAAL,GAAoBS,SAAS,CAACF,QAAV,CAAmB,MAAnB,EAA2B;QAC7CC,KAAK,EAAEtI,QAAQ,CAAC;UACdmE,CAAC,EAAE,CADW;UAEdU,CAAC,EAAE,KAAKA,CAAL,GAAS,EAFE;UAGdhC,SAAS,EAAE,QAHG;UAId2F,IAAI,EAAE,KAAKtC,OAJG;UAKduC,MAAM,EAAE,KALM;UAMdvB,UAAU,EAAE,KAAKA,UAAL,IAAmB,mBANjB;UAOdlE,MAAM,EAAE,MAPM;UAQdD,SAAS,EAAE;QARG,CAAD,EASZ,KAAK6C,SATO,CAD8B;QAW7C8C,OAAO,EAAE,KAXoC;QAY7CN,IAAI,EAAE;MAZuC,CAA3B,CAApB;MAcA,KAAKJ,YAAL,GAAoBO,SAAS,CAACF,QAAV,CAAmB,MAAnB,EAA2B;QAC7CC,KAAK,EAAEtI,QAAQ,CAAC;UACd6E,CAAC,EAAE,KAAKA,CAAL,GAAS,EADE;UAEdhC,SAAS,EAAE,QAFG;UAGd2F,IAAI,EAAE,KAAKpC,OAHG;UAIdqC,MAAM,EAAE,KAJM;UAKdvB,UAAU,EAAE,KAAKA,UAAL,IAAmB,mBALjB;UAMdlE,MAAM,EAAE,MANM;UAOdD,SAAS,EAAE;QAPG,CAAD,EAQZ,KAAK6C,SARO,CAD8B;QAU7C8C,OAAO,EAAE,KAVoC;QAW7CN,IAAI,EAAE;MAXuC,CAA3B,CAApB;IAaD,CA5F+C,CA4F9C;;;IAGF,KAAKO,eAAL,GAAuB,KAAKtC,KAAL,CAAW8B,QAAX,GAAsBE,QAAtB,CAA+B,MAA/B,EAAuC;MAC5DC,KAAK,EAAEtI,QAAQ,CAAC;QACdmE,CAAC,EAAE,CADW;QAEdU,CAAC,EAAE,KAAKA,CAFM;QAGdpC,MAAM,EAAEA;MAHM,CAAD,EAIZ,KAAK+C,eAJO,CAD6C;MAM5D4C,IAAI,EAAE;IANsD,CAAvC,CAAvB;IAQA,KAAKO,eAAL,CAAqBC,EAArB,CAAwB,WAAxB,EAAqC,UAAUrF,CAAV,EAAa;MAChDA,CAAC,CAACsF,MAAF,CAASd,IAAT,CAAc,QAAd,EAAwB,UAAxB;IACD,CAFD;IAGA,KAAKY,eAAL,CAAqBC,EAArB,CAAwB,SAAxB,EAAmC,UAAUrF,CAAV,EAAa;MAC9CA,CAAC,CAACsF,MAAF,CAASd,IAAT,CAAc,QAAd,EAAwB5E,KAAK,CAACqC,eAAN,CAAsBnD,MAAtB,IAAgC,MAAxD;IACD,CAFD,EA1GgD,CA4G5C;;IAEJ,IAAIyG,YAAY,GAAGhI,GAAG,CAAC,KAAK4E,YAAN,EAAoB,OAApB,EAA6B,CAA7B,CAAtB;IACA,IAAIqD,aAAa,GAAGjI,GAAG,CAAC,KAAK4E,YAAN,EAAoB,QAApB,EAA8B,EAA9B,CAAvB;IACA,IAAIsD,cAAc,GAAG,KAAK3C,KAAL,CAAW8B,QAAX,CAAoB;MACvCC,IAAI,EAAE;IADiC,CAApB,CAArB,CAhHgD,CAkH5C;;IAEJ,KAAKa,eAAL,GAAuB,IAAI7H,OAAJ,CAAY;MACjCgH,IAAI,EAAE,iBAD2B;MAEjC/B,KAAK,EAAE2C,cAF0B;MAGjClC,IAAI,EAAEC,WAH2B;MAIjC5C,CAAC,EAAE,KAAKA,CAJyB;MAKjCU,CAAC,EAAE,KAAKA,CALyB;MAMjCrC,KAAK,EAAEsG,YAN0B;MAOjCrG,MAAM,EAAEsG,aAPyB;MAQjCG,KAAK,EAAE,KAAKxD;IARqB,CAAZ,CAAvB;IAUA,IAAIyD,cAAc,GAAG,KAAK9C,KAAL,CAAW8B,QAAX,CAAoB;MACvCC,IAAI,EAAE;IADiC,CAApB,CAArB;IAGA,KAAKgB,eAAL,GAAuB,IAAIhI,OAAJ,CAAY;MACjCgH,IAAI,EAAE,iBAD2B;MAEjC/B,KAAK,EAAE8C,cAF0B;MAGjCrC,IAAI,EAAEC,WAH2B;MAIjC5C,CAAC,EAAE,KAAKA,CAJyB;MAKjCU,CAAC,EAAE,KAAKA,CALyB;MAMjCrC,KAAK,EAAEsG,YAN0B;MAOjCrG,MAAM,EAAEsG,aAPyB;MAQjCG,KAAK,EAAE,KAAKxD;IARqB,CAAZ,CAAvB,CAjIgD,CA0I5C;;IAEJ,IAAI2D,QAAQ,GAAG,KAAKxC,KAApB;IACA,IAAIyC,QAAQ,GAAG9G,KAAK,IAAI6G,QAAQ,CAAC7I,MAAT,GAAkB,CAAtB,CAApB;IACA,KAAK+I,WAAL,GAAmB,EAAnB;;IAEA,IAAI,KAAKC,QAAL,IAAiB,KAAKA,QAAL,CAAchJ,MAAnC,EAA2C;MACzC,KAAKgJ,QAAL,CAAcC,OAAd,CAAsB,UAAUjB,IAAV,EAAgB;QACpCA,IAAI,CAACkB,OAAL;MACD,CAFD;IAGD;;IAED,IAAIC,KAAK,GAAG,CAACC,QAAb;IACA,IAAIC,MAAM,GAAG,KAAKpD,cAAL,CAAoBoD,MAAjC;IACA,OAAO,KAAKpD,cAAL,CAAoBoD,MAA3B;IACA,KAAKL,QAAL,GAAgBH,QAAQ,CAACS,GAAT,CAAa,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;MAClD7G,KAAK,CAACoG,WAAN,CAAkBU,IAAlB,CAAuB9G,KAAK,CAACgB,CAAN,GAAU6F,KAAK,GAAGV,QAAzC;;MAEA,IAAIY,KAAJ;;MAEA,IAAI/G,KAAK,CAACwD,kBAAV,EAA8B;QAC5BuD,KAAK,GAAG/G,KAAK,CAACwD,kBAAN,CAAyBoD,IAAzB,CAAR;;QAEA,IAAI,CAAC1I,QAAQ,CAAC6I,KAAD,CAAT,IAAoBA,KAAxB,EAA+B;UAC7B;UACAA,KAAK,GAAGH,IAAI,CAACI,IAAb;QACD;MACF,CAPD,MAOO;QACLD,KAAK,GAAGH,IAAI,CAACI,IAAb;MACD,CAdiD,CAchD;;;MAGF,IAAIC,KAAK,GAAGjH,KAAK,CAACgB,CAAN,GAAU6F,KAAK,GAAGV,QAA9B;MAAA,IACIe,KAAK,GAAGlH,KAAK,CAAC0B,CAAN,GAAUpC,MAAV,GAAmB,CAD/B;;MAGA,IAAI+F,IAAI,GAAGrF,KAAK,CAACkD,KAAN,CAAYgC,QAAZ,CAAqB,MAArB,EAA6B;QACtCC,KAAK,EAAEtI,QAAQ,CAAC;UACdmE,CAAC,EAAEiG,KADW;UAEdvF,CAAC,EAAEwF,KAFW;UAGd7B,IAAI,EAAE0B,KAHQ;UAIdhD,UAAU,EAAE/D,KAAK,CAAC+D,UAAN,IAAoB;QAJlB,CAAD,EAKZ/D,KAAK,CAACsD,cALM,CADuB;QAOtC2B,IAAI,EAAE;MAPgC,CAA7B,CAAX;;MAUA,IAAInH,QAAQ,CAAC4I,MAAD,CAAR,IAAoBG,KAAK,KAAKX,QAAQ,CAAC7I,MAAT,GAAkB,CAApD,EAAuD;QACrD,IAAI8J,MAAM,GAAGxI,SAAS,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,CAAD,EAA8B,CAAC,CAAC,GAAD,EAAM,CAACsI,KAAP,EAAc,CAACC,KAAf,CAAD,EAAwB,CAAC,GAAD,EAAMR,MAAN,CAAxB,EAAuC,CAAC,GAAD,EAAMO,KAAK,GAAG,CAAd,EAAiBC,KAAK,GAAG,CAAzB,CAAvC,CAA9B,CAAtB;QACA7B,IAAI,CAACT,IAAL,CAAU;UACRlF,SAAS,EAAE,MADH;UAERyH,MAAM,EAAEA;QAFA,CAAV;MAID;;MAED,IAAIN,KAAK,KAAK,CAAd,EAAiB;QACfxB,IAAI,CAACT,IAAL,CAAU;UACRlF,SAAS,EAAE;QADH,CAAV;MAGD,CAJD,MAIO,IAAImH,KAAK,KAAKX,QAAQ,CAAC7I,MAAT,GAAkB,CAAhC,EAAmC;QACxCgI,IAAI,CAACT,IAAL,CAAU;UACRlF,SAAS,EAAE;QADH,CAAV;MAGD,CA9CiD,CA8ChD;;;MAGF,IAAI0H,IAAI,GAAGpH,KAAK,CAACkD,KAAN,CAAYgC,QAAZ,CAAqB,MAArB,EAA6B;QACtCC,KAAK,EAAEtI,QAAQ,CAAC;UACdwK,EAAE,EAAErH,KAAK,CAACgB,CAAN,GAAU6F,KAAK,GAAGV,QADR;UAEdmB,EAAE,EAAEtH,KAAK,CAAC0B,CAAN,GAAUpC,MAAV,GAAmB,CAFT;UAGdiI,EAAE,EAAEvH,KAAK,CAACgB,CAAN,GAAU6F,KAAK,GAAGV,QAHR;UAIdqB,EAAE,EAAExH,KAAK,CAAC0B,CAAN,GAAUpC,MAAV,GAAmB;QAJT,CAAD,EAKZU,KAAK,CAACuD,aALM,CADuB;QAOtC0B,IAAI,EAAE;MAPgC,CAA7B,CAAX;;MAUAmC,IAAI,CAACK,MAAL;MACA,IAAIC,IAAI,GAAGrC,IAAI,CAACsC,OAAL,EAAX,CA5DkD,CA4DvB;;MAE3B,IAAID,IAAI,CAACE,IAAL,GAAYpB,KAAhB,EAAuB;QACrBnB,IAAI,CAACwC,IAAL;QACAT,IAAI,CAACS,IAAL;QACArB,KAAK,GAAGkB,IAAI,CAACE,IAAL,GAAYF,IAAI,CAACrI,KAAjB,GAAyB,EAAjC;MACD,CAJD,MAIO;QACLgG,IAAI,CAACyC,IAAL;QACAV,IAAI,CAACU,IAAL;MACD;;MAED,OAAOzC,IAAP;IACD,CAxEe,CAAhB,CAzJgD,CAiO5C;;IAEJ,KAAK0C,kBAAL,GAA0B,IAAI5J,aAAJ,CAAkBtB,QAAQ,CAAC;MACnDqG,KAAK,EAAE,KAAKA,KADuC;MAEnDlC,CAAC,EAAE,KAAKA,CAF2C;MAGnDU,CAAC,EAAE,KAAKA,CAAL,GAASpC,MAAT,GAAkB,EAH8B;MAInDD,KAAK,EAAEA,KAJ4C;MAKnDC,MAAM,EAAE;IAL2C,CAAD,EAMjD,KAAK0C,aAN4C,CAA1B,CAA1B,CAnOgD,CAyOvB;;IAEzB,KAAKZ,cAAL,CAAoB,CAApB,EA3OgD,CA2OxB;;IAExB,KAAKC,QAAL,GA7OgD,CA6O/B;;IAEjB0D,WAAW,CAACiD,IAAZ,CAAiB,KAAKhH,CAAtB,EAAyB,KAAKU,CAA9B,EA/OgD,CA+Od;;IAElC,KAAKuG,UAAL;EACD,CAlPD;EAmPA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;EAGEnI,YAAY,CAACvC,SAAb,CAAuB0K,UAAvB,GAAoC,YAAY;IAC9C,IAAIjI,KAAK,GAAG,IAAZ,CAD8C,CAC5B;;;IAGlB,IAAIkI,mBAAmB,GAAG,KAAKhF,KAAL,CAAWiF,IAAX,CAAgB,UAAUjF,KAAV,EAAiB;MACzD,OAAOA,KAAK,CAACvF,GAAN,CAAU,MAAV,MAAsB,iBAA7B;IACD,CAFyB,CAA1B;;IAIA,IAAIuK,mBAAJ,EAAyB;MACvBA,mBAAmB,CAACzC,EAApB,CAAuB,mCAAvB,EAA4D,KAAKvF,WAAL,CAAiB,KAAK4F,eAAtB,CAA5D;MACAoC,mBAAmB,CAACzC,EAApB,CAAuB,oCAAvB,EAA6D,KAAKvF,WAAL,CAAiB,KAAK4F,eAAtB,CAA7D;IACD;;IAED,IAAIsC,mBAAmB,GAAG,KAAKlF,KAAL,CAAWiF,IAAX,CAAgB,UAAUjF,KAAV,EAAiB;MACzD,OAAOA,KAAK,CAACvF,GAAN,CAAU,MAAV,MAAsB,iBAA7B;IACD,CAFyB,CAA1B,CAb8C,CAe1C;;IAEJ,IAAIyK,mBAAJ,EAAyB;MACvBA,mBAAmB,CAAC3C,EAApB,CAAuB,mCAAvB,EAA4D,KAAKvF,WAAL,CAAiB,KAAK+F,eAAtB,CAA5D;MACAmC,mBAAmB,CAAC3C,EAApB,CAAuB,oCAAvB,EAA6D,KAAKvF,WAAL,CAAiB,KAAK+F,eAAtB,CAA7D;IACD,CApB6C,CAoB5C;;;IAGF,KAAKT,eAAL,CAAqBC,EAArB,CAAwB,WAAxB,EAAqC,KAAKvF,WAAL,CAAiB,KAAKsF,eAAtB,CAArC;IACA,KAAKA,eAAL,CAAqBC,EAArB,CAAwB,YAAxB,EAAsC,KAAKvF,WAAL,CAAiB,KAAKsF,eAAtB,CAAtC,EAxB8C,CAwBiC;;IAE/E;;IAEA,KAAKtC,KAAL,CAAWuC,EAAX,CAAc,GAAG4C,MAAH,CAAU9J,cAAV,EAA0B,QAA1B,CAAd,EAAmD,YAAY;MAC7DyB,KAAK,CAACsI,MAAN,GAAe,CAACtI,KAAK,CAACsI,MAAtB;MACAtI,KAAK,CAACK,cAAN,GAAuBL,KAAK,CAACiG,eAA7B;;MAEAjG,KAAK,CAACuI,gBAAN;IACD,CALD,EA5B8C,CAiC1C;;IAEJ,KAAKrF,KAAL,CAAWuC,EAAX,CAAc,GAAG4C,MAAH,CAAU7J,aAAV,EAAyB,QAAzB,CAAd,EAAkD,YAAY;MAC5DwB,KAAK,CAACK,cAAN,GAAuBL,KAAK,CAACiG,eAA7B;;MAEAjG,KAAK,CAACoB,cAAN,CAAqB,IAArB;;MAEApB,KAAK,CAACqB,QAAN;IACD,CAND,EAnC8C,CAyC1C;;IAEJ,KAAK6B,KAAL,CAAWuC,EAAX,CAAc,GAAG4C,MAAH,CAAU5J,YAAV,EAAwB,QAAxB,CAAd,EAAiD,YAAY;MAC3DuB,KAAK,CAACK,cAAN,GAAuBL,KAAK,CAACiG,eAA7B;;MAEAjG,KAAK,CAACoB,cAAN,CAAqB,CAAC,IAAtB;;MAEApB,KAAK,CAACqB,QAAN;IACD,CAND;IAOA,KAAK6B,KAAL,CAAWuC,EAAX,CAAcnH,qBAAd,EAAqC,UAAUkD,EAAV,EAAc;MACjD,IAAImC,IAAI,GAAGnC,EAAE,CAACmC,IAAd;MAAA,IACI1B,KAAK,GAAGT,EAAE,CAACS,KADf;MAEAjC,KAAK,CAAC6D,YAAN,GAAqB5B,KAArB;MACAjC,KAAK,CAAC8D,WAAN,GAAoBH,IAApB;;MAEA,IAAIA,IAAI,KAAK,QAAb,EAAuB;QACrB3D,KAAK,CAAC8F,eAAN,CAAsBgC,IAAtB;;QAEA9H,KAAK,CAACwF,eAAN,CAAsBsC,IAAtB;;QAEA9H,KAAK,CAAC2E,YAAN,CAAmBmD,IAAnB;MACD,CAND,MAMO,IAAInE,IAAI,KAAK,OAAb,EAAsB;QAC3B3D,KAAK,CAAC8F,eAAN,CAAsB+B,IAAtB;;QAEA7H,KAAK,CAACwF,eAAN,CAAsBqC,IAAtB;;QAEA7H,KAAK,CAAC2E,YAAN,CAAmBkD,IAAnB;MACD;IACF,CAnBD;EAoBD,CAtED;EAuEA;;;EAGA/H,YAAY,CAACvC,SAAb,CAAuBiL,eAAvB,GAAyC,UAAUC,WAAV,EAAuB;IAC9D,KAAK,IAAIvL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKkJ,WAAL,CAAiB/I,MAAjB,GAA0B,CAA9C,EAAiDH,CAAC,EAAlD,EAAsD;MACpD,IAAI,KAAKkJ,WAAL,CAAiBlJ,CAAjB,KAAuBuL,WAAvB,IAAsCA,WAAW,IAAI,KAAKrC,WAAL,CAAiBlJ,CAAC,GAAG,CAArB,CAAzD,EAAkF;QAChF,OAAOqH,IAAI,CAACmE,GAAL,CAAS,KAAKtC,WAAL,CAAiBlJ,CAAjB,IAAsBuL,WAA/B,IAA8ClE,IAAI,CAACmE,GAAL,CAASD,WAAW,GAAG,KAAKrC,WAAL,CAAiBlJ,CAAC,GAAG,CAArB,CAAvB,CAA9C,GAAgGA,CAAhG,GAAoGA,CAAC,GAAG,CAA/G;MACD;IACF;;IAED,OAAO,CAAP;EACD,CARD;EASA;AACF;AACA;AACA;;;EAGE4C,YAAY,CAACvC,SAAb,CAAuB4D,iBAAvB,GAA2C,UAAUwH,WAAV,EAAuB;IAChE;IACA,QAAQ,KAAKtI,cAAb;MACE,KAAK,KAAKyF,eAAV;QACE;UACE,IAAItB,GAAG,GAAG,IAAI,KAAK7B,KAAnB;UACA,IAAI8B,GAAG,GAAG,IAAI,KAAK9B,KAAnB;UACA,OAAO4B,IAAI,CAACC,GAAL,CAASC,GAAT,EAAcF,IAAI,CAACE,GAAL,CAASD,GAAT,EAAcmE,WAAd,CAAd,CAAP;QACD;;MAEH,KAAK,KAAK1C,eAAV;QACE;UACE,IAAIzB,GAAG,GAAG,IAAI,KAAK3B,GAAnB;UACA,IAAI4B,GAAG,GAAG,IAAI,KAAK5B,GAAnB;UACA,OAAO0B,IAAI,CAACC,GAAL,CAASC,GAAT,EAAcF,IAAI,CAACE,GAAL,CAASD,GAAT,EAAcmE,WAAd,CAAd,CAAP;QACD;;MAEH,KAAK,KAAKnD,eAAV;QACE;UACE,IAAIhB,GAAG,GAAG,IAAI,KAAK7B,KAAnB;UACA,IAAI8B,GAAG,GAAG,IAAI,KAAK5B,GAAnB;UACA,OAAO0B,IAAI,CAACC,GAAL,CAASC,GAAT,EAAcF,IAAI,CAACE,GAAL,CAASD,GAAT,EAAcmE,WAAd,CAAd,CAAP;QACD;;MAEH;QACE,OAAO,CAAP;IAvBJ;EAyBD,CA3BD;EA4BA;AACF;AACA;AACA;;;EAGE7I,YAAY,CAACvC,SAAb,CAAuB6D,cAAvB,GAAwC,UAAUuH,WAAV,EAAuB;IAC7D,IAAIC,OAAO,GAAG,KAAKlF,KAAL,CAAW,KAAK8E,eAAL,CAAqB,KAAK7F,KAAL,GAAa,KAAKtD,KAAvC,CAAX,CAAd;IACA,IAAIwJ,OAAO,GAAG,KAAKnF,KAAL,CAAW,KAAK8E,eAAL,CAAqB,KAAK3F,GAAL,GAAW,KAAKxD,KAArC,CAAX,CAAd;;IAEA,IAAI,CAAC,KAAKgB,cAAV,EAA0B;MACxB,KAAK0C,OAAL,GAAe,KAAKS,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBoF,OAAxB,CAA1B,GAA6DA,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAAC5B,IAAtI;MACA,KAAK/D,OAAL,GAAe,KAAKO,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBqF,OAAxB,CAA1B,GAA6DA,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAAC7B,IAAtI;MACA;IACD,CAR4D,CAQ3D;;;IAGF,QAAQ,KAAK3G,cAAb;MACE,KAAK,KAAKyF,eAAV;QACE;QACA,KAAK7C,OAAL,GAAe,KAAK4B,YAAL,CAAkBD,IAAlB,CAAuB,MAAvB,CAAf;QACA,KAAKjC,KAAL,IAAcgG,WAAd;QACA,KAAK5F,OAAL,GAAe,KAAKS,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBoF,OAAxB,CAA1B,GAA6DA,OAAO,CAAC5B,IAApF;QACA;;MAEF,KAAK,KAAKf,eAAV;QACE;QACA,KAAKlD,OAAL,GAAe,KAAK4B,YAAL,CAAkBC,IAAlB,CAAuB,MAAvB,CAAf;QACA,KAAK/B,GAAL,IAAY8F,WAAZ;QACA,KAAK1F,OAAL,GAAe,KAAKO,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBqF,OAAxB,CAA1B,GAA6DA,OAAO,CAAC7B,IAApF;QACA;;MAEF,KAAK,KAAKxB,eAAV;QACE,KAAK7C,KAAL,IAAcgG,WAAd;QACA,KAAK9F,GAAL,IAAY8F,WAAZ;QACA,KAAK5F,OAAL,GAAe,KAAKS,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBoF,OAAxB,CAA1B,GAA6DA,OAAO,CAAC5B,IAApF;QACA,KAAK/D,OAAL,GAAe,KAAKO,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBqF,OAAxB,CAA1B,GAA6DA,OAAO,CAAC7B,IAApF;QACA;;MAEF;QACE;IAvBJ;EAyBD,CApCD;EAqCA;AACF;AACA;AACA;;;EAGElH,YAAY,CAACvC,SAAb,CAAuB8D,QAAvB,GAAkC,YAAY;IAC5C,IAAIrB,KAAK,GAAG,IAAZ;;IAEA,IAAI,KAAK2C,KAAL,GAAa,CAAjB,EAAoB;MAClB,KAAKA,KAAL,GAAa,CAAb;IACD;;IAED,IAAI,KAAKE,GAAL,GAAW,CAAf,EAAkB;MAChB,KAAKA,GAAL,GAAW,CAAX;IACD;;IAED,IAAI2B,GAAG,GAAG,KAAKxD,CAAL,GAAS,KAAK2B,KAAL,GAAa,KAAKtD,KAArC;IACA,IAAIoF,GAAG,GAAG,KAAKzD,CAAL,GAAS,KAAK6B,GAAL,GAAW,KAAKxD,KAAnC,CAZ4C,CAYF;;IAE1C,KAAKmG,eAAL,CAAqBZ,IAArB,CAA0B,GAA1B,EAA+BJ,GAA/B;IACA,KAAKgB,eAAL,CAAqBZ,IAArB,CAA0B,OAA1B,EAAmCH,GAAG,GAAGD,GAAzC,EAf4C,CAeG;;IAE/C,IAAImB,YAAY,GAAGhI,GAAG,CAAC,KAAK4E,YAAN,EAAoB,OAApB,EAA6BpD,qBAA7B,CAAtB,CAjB4C,CAiB+B;;IAE3E,KAAKuF,OAAL,CAAa,KAAK3B,OAAlB,EAA2B,KAAKE,OAAhC;;IAEA,IAAIzB,EAAE,GAAG,KAAKsH,SAAL,CAAe,CAACtE,GAAD,EAAMC,GAAN,CAAf,CAAT;IAAA,IACIsE,QAAQ,GAAGvH,EAAE,CAAC,CAAD,CADjB;IAAA,IAEIwH,QAAQ,GAAGxH,EAAE,CAAC,CAAD,CAFjB,CArB4C,CAuBtB;;;IAGtB,KAAKsE,eAAL,CAAqBmD,IAArB,CAA0BzE,GAAG,GAAGmB,YAAY,GAAG,CAA/C;IACA9H,IAAI,CAACkL,QAAD,EAAW,UAAUG,CAAV,EAAaC,CAAb,EAAgB;MAC7B,OAAOnJ,KAAK,CAAC2E,YAAN,CAAmBC,IAAnB,CAAwBuE,CAAxB,EAA2BD,CAA3B,CAAP;IACD,CAFG,CAAJ,CA3B4C,CA6BxC;;IAEJ,KAAKjD,eAAL,CAAqBgD,IAArB,CAA0BxE,GAAG,GAAGkB,YAAY,GAAG,CAA/C;IACA9H,IAAI,CAACmL,QAAD,EAAW,UAAUE,CAAV,EAAaC,CAAb,EAAgB;MAC7B,OAAOnJ,KAAK,CAAC6E,YAAN,CAAmBD,IAAnB,CAAwBuE,CAAxB,EAA2BD,CAA3B,CAAP;IACD,CAFG,CAAJ;;IAIA,IAAI,KAAKpF,WAAL,KAAqB,OAAzB,EAAkC;MAChC;MACA,KAAKX,KAAL,CAAWiG,IAAX,CAAgBhL,YAAhB,EAA8B;QAC5BiL,KAAK,EAAE,CAAC,KAAK1G,KAAN,EAAa,KAAKE,GAAlB,EAAuByG,IAAvB;MADqB,CAA9B;IAGD,CALD,MAKO,IAAI,KAAKxF,WAAL,KAAqB,QAAzB,EAAmC;MACxC,KAAKX,KAAL,CAAWiG,IAAX,CAAgBhL,YAAhB,EAA8B;QAC5BiL,KAAK,EAAE,CAAC,KAAKxG,GAAN,EAAW,KAAKA,GAAhB;MADqB,CAA9B;IAGD;EACF,CA9CD;EA+CA;AACF;AACA;AACA;AACA;;;EAGE/C,YAAY,CAACvC,SAAb,CAAuBuL,SAAvB,GAAmC,UAAUS,KAAV,EAAiB;IAClD,IAAI/H,EAAJ,EAAQC,EAAR;;IAEA,IAAI+H,WAAW,GAAG,CAAlB;IACA,IAAI7D,YAAY,GAAGhI,GAAG,CAAC,KAAK4E,YAAN,EAAoB,OAApB,EAA6BpD,qBAA7B,CAAtB;IACA,IAAIwF,YAAY,GAAG,KAAKA,YAAxB;IACA,IAAIE,YAAY,GAAG,KAAKA,YAAxB;IACA,IAAIL,GAAG,GAAG+E,KAAK,CAAC,CAAD,CAAf;IAAA,IACI9E,GAAG,GAAG8E,KAAK,CAAC,CAAD,CADf;IAEA,IAAIE,MAAM,GAAG,KAAb,CATkD,CAS9B;;IAEpB,IAAIjF,GAAG,GAAGC,GAAV,EAAe;MACbjD,EAAE,GAAG,CAACiD,GAAD,EAAMD,GAAN,CAAL,EAAiBA,GAAG,GAAGhD,EAAE,CAAC,CAAD,CAAzB,EAA8BiD,GAAG,GAAGjD,EAAE,CAAC,CAAD,CAAtC;MACAC,EAAE,GAAG,CAACoD,YAAD,EAAeF,YAAf,CAAL,EAAmCA,YAAY,GAAGlD,EAAE,CAAC,CAAD,CAApD,EAAyDoD,YAAY,GAAGpD,EAAE,CAAC,CAAD,CAA1E;MACAgI,MAAM,GAAG,IAAT;IACD,CAfiD,CAehD;;;IAGF,IAAIC,OAAO,GAAG/E,YAAY,CAACgD,OAAb,EAAd;IACA,IAAIgC,OAAO,GAAG9E,YAAY,CAAC8C,OAAb,EAAd;IACA,IAAIoB,QAAQ,GAAG,IAAf;IACA,IAAIC,QAAQ,GAAG,IAAf;;IAEA,IAAI,KAAKpF,WAAL,KAAqB,OAAzB,EAAkC;MAChCmF,QAAQ,GAAGvE,GAAG,GAAGkF,OAAO,CAACrK,KAAd,GAAsB,KAAK2B,CAAL,GAASwI,WAA/B,GAA6C;QACtDxI,CAAC,EAAEwD,GAAG,GAAGmB,YAAY,GAAG,CAArB,GAAyB6D,WAD0B;QAEtD9J,SAAS,EAAE;MAF2C,CAA7C,GAGP;QACFsB,CAAC,EAAEwD,GAAG,GAAGmB,YAAY,GAAG,CAArB,GAAyB6D,WAD1B;QAEF9J,SAAS,EAAE;MAFT,CAHJ;MAOAsJ,QAAQ,GAAGvE,GAAG,GAAGkF,OAAO,CAACtK,KAAd,GAAsB,KAAK2B,CAAL,GAAS,KAAK3B,KAApC,GAA4C;QACrD2B,CAAC,EAAEyD,GAAG,GAAGkB,YAAY,GAAG,CAArB,GAAyB6D,WADyB;QAErD9J,SAAS,EAAE;MAF0C,CAA5C,GAGP;QACFsB,CAAC,EAAEyD,GAAG,GAAGkB,YAAY,GAAG,CAArB,GAAyB6D,WAD1B;QAEF9J,SAAS,EAAE;MAFT,CAHJ;IAOD,CAfD,MAeO,IAAI,KAAKkE,WAAL,KAAqB,QAAzB,EAAmC;MACxCmF,QAAQ,GAAGpE,YAAY,CAACC,IAAb,CAAkB,GAAlB,IAAyB8E,OAAO,CAACrK,KAAjC,CAAuC;MAAvC,EACT;QACA2B,CAAC,EAAEwD,GADH;QAEA9E,SAAS,EAAE;MAFX,CADS,GAIP;QACFsB,CAAC,EAAEwD,GADD;QAEF9E,SAAS,EAAE;MAFT,CAJJ;MAQAsJ,QAAQ,GAAGnE,YAAY,CAACD,IAAb,CAAkB,GAAlB,IAAyB,KAAKvF,KAAL,GAAasK,OAAO,CAACtK,KAA9C,CAAoD;MAApD,EACT;QACA2B,CAAC,EAAEyD,GADH;QAEA/E,SAAS,EAAE;MAFX,CADS,GAIP;QACFsB,CAAC,EAAEyD,GADD;QAEF/E,SAAS,EAAE;MAFT,CAJJ;IAQD;;IAED,OAAO,CAAC+J,MAAD,GAAU,CAACV,QAAD,EAAWC,QAAX,CAAV,GAAiC,CAACA,QAAD,EAAWD,QAAX,CAAxC;EACD,CA1DD;;EA4DAjJ,YAAY,CAACvC,SAAb,CAAuBqM,SAAvB,GAAmC,YAAY;IAC7C,IAAI5J,KAAK,GAAG,IAAZ;;IAEA,OAAO,OAAOgE,MAAP,KAAkB,WAAlB,GAAgCA,MAAM,CAAC6F,qBAAP,CAA6B,YAAY;MAC9E,IAAIrI,EAAE,GAAGxB,KAAT;MAAA,IACI0D,KAAK,GAAGlC,EAAE,CAACkC,KADf;MAAA,IAEIrE,KAAK,GAAGmC,EAAE,CAACnC,KAFf;MAGA,IAAI4C,KAAK,GAAGjC,KAAK,CAAC6D,YAAlB;MACA,IAAIiG,YAAY,GAAGzK,KAAK,GAAGqE,KAAK,CAACrG,MAAjC;MACA,IAAI4D,OAAO,GAAG6I,YAAY,IAAI,CAAC,KAAK7H,KAAN,IAAe,IAAf,GAAsB,EAA1B,CAA1B;;MAEA,IAAIf,YAAY,GAAGlB,KAAK,CAACmB,iBAAN,CAAwBF,OAAO,GAAGjB,KAAK,CAACX,KAAxC,CAAnB;;MAEAW,KAAK,CAACoB,cAAN,CAAqBF,YAArB;;MAEAlB,KAAK,CAACqB,QAAN;;MAEA,IAAIrB,KAAK,CAACsI,MAAV,EAAkB;QAChBtI,KAAK,CAAC+J,WAAN,GAAoB/J,KAAK,CAAC4J,SAAN,EAApB;MACD;IACF,CAjBsC,CAAhC,GAiBFtI,SAjBL;EAkBD,CArBD;;EAuBAxB,YAAY,CAACvC,SAAb,CAAuBgL,gBAAvB,GAA0C,UAAUyB,MAAV,EAAkB;IAC1D,IAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;MACrBA,MAAM,GAAG,IAAT;IACD;;IAED,KAAKjC,kBAAL,CAAwBkC,UAAxB,CAAmC3F,MAAnC,CAA0C;MACxCgE,MAAM,EAAE,KAAKA;IAD2B,CAA1C;;IAIA,IAAI,KAAKA,MAAT,EAAiB;MACf;MACA,KAAKyB,WAAL,GAAmB,KAAKH,SAAL,EAAnB;MACA,KAAKzG,KAAL,CAAWiG,IAAX,CAAgB/K,cAAhB,EAAgC,IAAhC;IACD,CAJD,MAIO;MACL;MACA,IAAI,KAAK0L,WAAT,EAAsB;QACpB,IAAI,OAAO/F,MAAP,KAAkB,WAAtB,EAAmCA,MAAM,CAACkG,oBAAP,CAA4B,KAAKH,WAAjC;;QAEnC,IAAIC,MAAJ,EAAY;UACV,KAAK7G,KAAL,CAAWiG,IAAX,CAAgB1K,YAAhB,EAA8B,IAA9B;QACD;MACF;IACF;EACF,CAvBD;;EAyBAoB,YAAY,CAACvC,SAAb,CAAuB4M,OAAvB,GAAiC,YAAY;IAC3C,KAAKhH,KAAL,CAAWiH,GAAX,CAAehM,YAAf,EAA6B,YAAY,CAAE,CAA3C;IACA,IAAI8E,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAIgF,mBAAmB,GAAGhF,KAAK,CAACiF,IAAN,CAAW,UAAUkC,CAAV,EAAa;MAChD,OAAOA,CAAC,CAAC1M,GAAF,CAAM,MAAN,MAAkB,iBAAzB;IACD,CAFyB,CAA1B;;IAIA,IAAIuK,mBAAJ,EAAyB;MACvBA,mBAAmB,CAACkC,GAApB,CAAwB,mCAAxB;MACAlC,mBAAmB,CAACkC,GAApB,CAAwB,oCAAxB;MACAlC,mBAAmB,CAAC3B,OAApB;IACD;;IAED,IAAI6B,mBAAmB,GAAGlF,KAAK,CAACiF,IAAN,CAAW,UAAUkC,CAAV,EAAa;MAChD,OAAOA,CAAC,CAAC1M,GAAF,CAAM,MAAN,MAAkB,iBAAzB;IACD,CAFyB,CAA1B,CAb2C,CAevC;;IAEJ,IAAIyK,mBAAJ,EAAyB;MACvBA,mBAAmB,CAACgC,GAApB,CAAwB,mCAAxB;MACAhC,mBAAmB,CAACgC,GAApB,CAAwB,oCAAxB;MACAhC,mBAAmB,CAAC7B,OAApB;IACD,CArB0C,CAqBzC;;;IAGF,KAAKf,eAAL,CAAqB4E,GAArB,CAAyB,WAAzB;IACA,KAAK5E,eAAL,CAAqB4E,GAArB,CAAyB,YAAzB;IACA,KAAK5E,eAAL,CAAqBe,OAArB;IACArD,KAAK,CAACkH,GAAN,CAAU,GAAG/B,MAAH,CAAU9J,cAAV,EAA0B,QAA1B,CAAV;IACA2E,KAAK,CAACkH,GAAN,CAAU,GAAG/B,MAAH,CAAU7J,aAAV,EAAyB,QAAzB,CAAV;IACA0E,KAAK,CAACkH,GAAN,CAAU,GAAG/B,MAAH,CAAU5J,YAAV,EAAwB,QAAxB,CAAV;IACAyE,KAAK,CAACkH,GAAN,CAAU9L,qBAAV;IACA4E,KAAK,CAACqD,OAAN;;IAEA,IAAI,KAAKzB,cAAT,EAAyB;MACvB,KAAKA,cAAL,CAAoBqF,OAApB;IACD;EACF,CApCD;;EAsCA,OAAOrK,YAAP;AACD,CA5yBD,EAFA;;AAgzBA,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}