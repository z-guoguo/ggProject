{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Rectangle } from '../geometry';\nimport { NumberExt, JQuery, Dom, Unit, Vector } from '../util';\nimport { Base } from './base';\nexport class PrintManager extends Base {\n  show(options = {}) {\n    const localOptions = Object.assign(Object.assign({}, PrintManager.defaultOptions), options);\n    const $pages = this.createPrintPages(localOptions);\n    localOptions.ready($pages, $pages => this.showPrintWindow($pages, localOptions), {\n      sheetSize: this.getSheetSize(localOptions)\n    });\n  }\n\n  get className() {\n    return this.view.prefixClassName('graph-print');\n  }\n\n  showPrintWindow($pages, options) {\n    if ($pages) {\n      const $body = JQuery(document.body);\n      const $container = JQuery(this.view.container);\n      const bodyClassName = this.view.prefixClassName('graph-printing');\n      $body.addClass(bodyClassName);\n      const $detached = $container.children().detach();\n      $pages.forEach($page => {\n        $page.removeClass(`${this.className}-preview`).addClass(`${this.className}-ready`).appendTo($body);\n      });\n      let ret = false;\n\n      const cb = () => {\n        if (!ret) {\n          ret = true;\n          $body.removeClass(bodyClassName);\n          $pages.forEach($page => $page.remove());\n          $container.append($detached);\n          JQuery(`#${this.styleSheetId}`).remove();\n          this.graph.trigger('after:print', options);\n          JQuery(window).off('afterprint', cb);\n        }\n      };\n\n      JQuery(window).one('afterprint', cb);\n      setTimeout(cb, 200);\n      window.print();\n    }\n  }\n\n  createPrintPage(pageArea, options) {\n    this.graph.trigger('before:print', options);\n    const $page = JQuery('<div/>').addClass(this.className);\n    const $wrap = JQuery('<div/>').addClass(this.view.prefixClassName('graph-print-inner')).css('position', 'relative');\n\n    if (options.size) {\n      $page.addClass(`${this.className}-size-${options.size}`);\n    }\n\n    const vSVG = Vector.create(this.view.svg).clone();\n    const vStage = vSVG.findOne(`.${this.view.prefixClassName('graph-svg-stage')}`);\n    $wrap.append(vSVG.node);\n    const sheetSize = this.getSheetSize(options);\n    const graphArea = this.graph.transform.getGraphArea();\n    const s = this.graph.transform.getScale();\n    const ts = this.graph.translate();\n    const matrix = Dom.createSVGMatrix().translate(ts.tx / s.sx, ts.ty / s.sy);\n    const info = this.getPageInfo(graphArea, pageArea, sheetSize);\n    const scale = info.scale;\n    const bbox = info.bbox;\n    $wrap.css({\n      left: 0,\n      top: 0\n    });\n    vSVG.attr({\n      width: bbox.width * scale,\n      height: bbox.height * scale,\n      style: 'position:relative',\n      viewBox: [bbox.x, bbox.y, bbox.width, bbox.height].join(' ')\n    });\n    vStage.attr('transform', Dom.matrixToTransformString(matrix));\n    $page.append($wrap);\n    $page.addClass(`${this.className}-preview`);\n    return {\n      $page,\n      sheetSize\n    };\n  }\n\n  createPrintPages(options) {\n    let ret;\n    const area = this.getPrintArea(options);\n    const $pages = [];\n\n    if (options.page) {\n      const pageSize = this.getPageSize(area, options.page);\n      const pageAreas = this.getPageAreas(area, pageSize);\n      pageAreas.forEach(pageArea => {\n        ret = this.createPrintPage(pageArea, options);\n        $pages.push(ret.$page);\n      });\n    } else {\n      ret = this.createPrintPage(area, options);\n      $pages.push(ret.$page);\n    }\n\n    if (ret) {\n      const size = {\n        width: ret.sheetSize.cssWidth,\n        height: ret.sheetSize.cssHeight\n      };\n      this.updatePrintStyle(size, options);\n    }\n\n    return $pages;\n  }\n\n  get styleSheetId() {\n    return this.view.prefixClassName('graph-print-style');\n  }\n\n  updatePrintStyle(size, options) {\n    const sizeCSS = Object.keys(size).reduce((memo, key) => `${memo} ${key}:${size[key]};`, '');\n    const margin = NumberExt.normalizeSides(options.margin);\n    const marginUnit = options.marginUnit || '';\n    const sheetUnit = options.sheetUnit || '';\n    const css = `\n      @media print {\n        .${this.className}.${this.className}-ready {\n          ${sizeCSS}\n        }\n\n        @page {\n          margin:\n          ${[margin.top + marginUnit, margin.right + marginUnit, margin.bottom + marginUnit, margin.left + marginUnit].join(' ')};\n          size: ${options.sheet.width + sheetUnit} ${options.sheet.height + sheetUnit};\n\n        .${this.className}.${this.className}-preview {\n          ${sizeCSS}\n        }\n      }`;\n    const id = this.styleSheetId;\n    const $style = JQuery(`#${id}`);\n\n    if ($style.length) {\n      $style.html(css);\n    } else {\n      JQuery('head').append(`'<style type=\"text/css\" id=\"${id}\">${css}</style>'`);\n    }\n  }\n\n  getPrintArea(options) {\n    let area = options.area;\n\n    if (!area) {\n      const padding = NumberExt.normalizeSides(options.padding);\n      area = this.graph.getContentArea().moveAndExpand({\n        x: -padding.left,\n        y: -padding.top,\n        width: padding.left + padding.right,\n        height: padding.top + padding.bottom\n      });\n    }\n\n    return area;\n  }\n\n  getPageSize(area, poster) {\n    if (typeof poster === 'object') {\n      const raw = poster;\n      const page = {\n        width: raw.width,\n        height: raw.height\n      };\n\n      if (page.width == null) {\n        page.width = Math.ceil(area.width / (raw.columns || 1));\n      }\n\n      if (page.height == null) {\n        page.height = Math.ceil(area.height / (raw.rows || 1));\n      }\n\n      return page;\n    }\n\n    return {\n      width: area.width,\n      height: area.height\n    };\n  }\n\n  getPageAreas(area, pageSize) {\n    const pages = [];\n    const width = pageSize.width;\n    const height = pageSize.height;\n\n    for (let w = 0, n = 0; w < area.height && n < 200; w += height, n += 1) {\n      for (let h = 0, m = 0; h < area.width && m < 200; h += width, m += 1) {\n        pages.push(new Rectangle(area.x + h, area.y + w, width, height));\n      }\n    }\n\n    return pages;\n  }\n\n  getSheetSize(options) {\n    const sheet = options.sheet;\n    const margin = NumberExt.normalizeSides(options.margin);\n    const marginUnit = options.marginUnit || '';\n    const sheetUnit = options.sheetUnit || '';\n    const cssWidth = // eslint-disable-next-line\n    `calc(${sheet.width}${sheetUnit} - ${margin.left + margin.right}${marginUnit})`;\n    const cssHeight = // eslint-disable-next-line\n    `calc(${sheet.height}${sheetUnit} - ${margin.top + margin.bottom}${marginUnit})`;\n    const ret = Unit.measure(cssWidth, cssHeight);\n    return {\n      cssWidth,\n      cssHeight,\n      width: ret.width,\n      height: ret.height\n    };\n  }\n\n  getPageInfo(graphArea, pageArea, sheetSize) {\n    const bbox = new Rectangle(pageArea.x - graphArea.x, pageArea.y - graphArea.y, pageArea.width, pageArea.height);\n    const pageRatio = bbox.width / bbox.height;\n    const graphRatio = sheetSize.width / sheetSize.height;\n    return {\n      bbox,\n      scale: graphRatio < pageRatio ? sheetSize.width / bbox.width : sheetSize.height / bbox.height,\n      fitHorizontal: graphRatio < pageRatio\n    };\n  }\n\n  dispose() {}\n\n}\n\n__decorate([Base.dispose()], PrintManager.prototype, \"dispose\", null);\n\n(function (PrintManager) {\n  PrintManager.defaultOptions = {\n    page: false,\n    sheet: {\n      width: 210,\n      height: 297\n    },\n    sheetUnit: 'mm',\n    margin: 0.4,\n    marginUnit: 'in',\n    padding: 5,\n    ready: ($pages, readyToPrint) => readyToPrint($pages)\n  };\n})(PrintManager || (PrintManager = {}));","map":{"version":3,"mappings":"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","names":["Rectangle","NumberExt","JQuery","Dom","Unit","Vector","Base","PrintManager","show","options","localOptions","Object","defaultOptions","$pages","createPrintPages","ready","showPrintWindow","sheetSize","getSheetSize","className","view","prefixClassName","$body","document","body","$container","container","bodyClassName","addClass","$detached","children","detach","forEach","$page","removeClass","appendTo","ret","cb","remove","append","styleSheetId","graph","trigger","window","off","one","setTimeout","print","createPrintPage","pageArea","$wrap","css","size","vSVG","create","svg","clone","vStage","findOne","node","graphArea","transform","getGraphArea","s","getScale","ts","translate","matrix","createSVGMatrix","tx","sx","ty","sy","info","getPageInfo","scale","bbox","left","top","attr","width","height","style","viewBox","x","y","join","matrixToTransformString","area","getPrintArea","page","pageSize","getPageSize","pageAreas","getPageAreas","push","cssWidth","cssHeight","updatePrintStyle","sizeCSS","keys","reduce","memo","key","margin","normalizeSides","marginUnit","sheetUnit","right","bottom","sheet","id","$style","length","html","padding","getContentArea","moveAndExpand","poster","raw","Math","ceil","columns","rows","pages","w","n","h","m","measure","pageRatio","graphRatio","fitHorizontal","dispose","__decorate","readyToPrint"],"sourceRoot":"","sources":["../../src/graph/print.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}