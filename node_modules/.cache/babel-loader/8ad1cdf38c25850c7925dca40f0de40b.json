{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n/**\n * 基于 G 的刻度时间轴组件\n */\n\n\nimport { ext } from '@antv/matrix-util';\nimport { isNumber, isString } from '@antv/util';\nimport TimeBarTooltip from './timeBarTooltip';\nimport ControllerBtn from './controllerBtn';\nimport { VALUE_CHANGE, TIMELINE_START, TIMELINE_END, PLAY_PAUSE_BTN, NEXT_STEP_BTN, PRE_STEP_BTN, TIMEBAR_CONFIG_CHANGE } from './constant';\nvar transform = ext.transform;\nvar DEFAULT_SELECTEDTICK_STYLE = {\n  fill: '#5B8FF9'\n};\nvar DEFAULT_UNSELECTEDTICK_STYLE = {\n  fill: '#e6e8e9'\n};\n\nvar TimeBarSlice =\n/** @class */\nfunction () {\n  function TimeBarSlice(cfgs) {\n    this.frameCount = 0;\n    this.fontFamily = 'Arial, sans-serif';\n    var graph = cfgs.graph,\n        canvas = cfgs.canvas,\n        group = cfgs.group,\n        width = cfgs.width,\n        height = cfgs.height,\n        padding = cfgs.padding,\n        data = cfgs.data,\n        start = cfgs.start,\n        end = cfgs.end,\n        _a = cfgs.x,\n        x = _a === void 0 ? 0 : _a,\n        _b = cfgs.y,\n        y = _b === void 0 ? 0 : _b,\n        tickLabelFormatter = cfgs.tickLabelFormatter,\n        _c = cfgs.selectedTickStyle,\n        selectedTickStyle = _c === void 0 ? DEFAULT_SELECTEDTICK_STYLE : _c,\n        _d = cfgs.unselectedTickStyle,\n        unselectedTickStyle = _d === void 0 ? DEFAULT_UNSELECTEDTICK_STYLE : _d,\n        tooltipBackgroundColor = cfgs.tooltipBackgroundColor,\n        tooltipFomatter = cfgs.tooltipFomatter,\n        tickLabelStyle = cfgs.tickLabelStyle;\n    this.graph = graph;\n    this.group = group;\n    this.sliceGroup = group.addGroup({\n      name: 'slice-group'\n    });\n    this.canvas = canvas;\n    this.width = width;\n    this.height = height;\n    this.padding = padding;\n    this.data = data;\n    this.start = start;\n    this.end = end;\n    this.tickLabelFormatter = tickLabelFormatter;\n    this.tickLabelStyle = tickLabelStyle || {};\n    this.selectedTickStyle = selectedTickStyle;\n    this.unselectedTickStyle = unselectedTickStyle;\n    this.x = x;\n    this.y = y;\n    this.tooltipBackgroundColor = tooltipBackgroundColor;\n    this.tooltipFomatter = tooltipFomatter; // 初始化 fontFamily，如果有浏览器，取 body 上的字体，防止文字更新时局部渲染造成的重影\n\n    this.fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.renderSlices();\n    this.initEvent();\n  }\n\n  TimeBarSlice.prototype.renderSlices = function () {\n    var _this = this;\n\n    var _a = this,\n        width = _a.width,\n        height = _a.height,\n        padding = _a.padding,\n        data = _a.data,\n        start = _a.start,\n        end = _a.end,\n        tickLabelFormatter = _a.tickLabelFormatter,\n        selectedTickStyle = _a.selectedTickStyle,\n        unselectedTickStyle = _a.unselectedTickStyle,\n        tickLabelStyle = _a.tickLabelStyle;\n\n    var realWidth = width - 2 * padding;\n    var fontSize = 10;\n    var labelLineHeight = 4;\n    var labelAreaHeight = 3 * padding + labelLineHeight + fontSize;\n    var ticksAreaHeight = height - labelAreaHeight - 2 * padding;\n    var gap = 2;\n    var ticksLength = data.length;\n    var tickWidth = (realWidth - gap * (ticksLength - 1)) / ticksLength;\n    this.tickWidth = tickWidth;\n    var sliceGroup = this.sliceGroup;\n    var tickRects = [];\n    var labels = [];\n    var startTickId = Math.round(ticksLength * start);\n    var endTickId = Math.round(ticksLength * end);\n    this.startTickRectId = startTickId;\n    this.endTickRectId = endTickId;\n    var rotate = tickLabelStyle.rotate;\n    delete tickLabelStyle.rotate;\n    data.forEach(function (d, i) {\n      // draw the tick rects\n      var selected = i >= startTickId && i <= endTickId;\n      var tickStyle = selected ? selectedTickStyle : unselectedTickStyle;\n      var rect = sliceGroup.addShape('rect', {\n        attrs: __assign({\n          x: padding + i * (tickWidth + gap),\n          y: padding,\n          width: tickWidth,\n          height: ticksAreaHeight\n        }, tickStyle),\n        draggable: true,\n        name: \"tick-rect-\".concat(i)\n      }); // draw the pick tick rects\n\n      var pickRect = sliceGroup.addShape('rect', {\n        attrs: {\n          x: padding + i * tickWidth + gap * (2 * i - 1) / 2,\n          y: padding,\n          width: i === 0 || i === ticksLength - 1 ? tickWidth + gap / 2 : tickWidth + gap,\n          height: ticksAreaHeight,\n          fill: '#fff',\n          opacity: 0\n        },\n        draggable: true,\n        name: \"pick-rect-\".concat(i)\n      });\n      pickRect.toFront();\n      var rectBBox = rect.getBBox();\n      var centerX = (rectBBox.minX + rectBBox.maxX) / 2;\n      tickRects.push({\n        rect: rect,\n        pickRect: pickRect,\n        value: d.date,\n        x: centerX,\n        y: rectBBox.minY\n      });\n      var label;\n\n      if (tickLabelFormatter) {\n        label = tickLabelFormatter(d);\n\n        if (!isString(label) && label) {\n          // return true\n          label = d.date;\n        }\n      } else if (i % Math.round(ticksLength / 10) === 0) {\n        label = d.date;\n      }\n\n      if (label) {\n        labels.push(label); // draw tick lines\n\n        var lineStartY = rectBBox.maxY + padding * 2;\n        sliceGroup.addShape('line', {\n          attrs: {\n            stroke: '#BFBFBF',\n            x1: centerX,\n            y1: lineStartY,\n            x2: centerX,\n            y2: lineStartY + labelLineHeight\n          },\n          name: 'tick-line'\n        });\n        var labelStartY = lineStartY + labelLineHeight + padding;\n        var text = sliceGroup.addShape('text', {\n          attrs: __assign({\n            fill: '#8c8c8c',\n            stroke: '#fff',\n            lineWidth: 1,\n            x: centerX,\n            y: labelStartY,\n            textAlign: 'center',\n            text: label,\n            textBaseline: 'top',\n            fontSize: 10,\n            fontFamily: _this.fontFamily || 'Arial, sans-serif'\n          }, tickLabelStyle),\n          capture: false,\n          name: 'tick-label'\n        });\n        var textBBox = text.getBBox();\n\n        if (textBBox.maxX > width) {\n          text.attr('textAlign', 'right');\n        } else if (textBBox.minX < 0) {\n          text.attr('textAlign', 'left');\n        }\n\n        if (isNumber(rotate) && labels.length !== 10) {\n          var matrix = transform([1, 0, 0, 0, 1, 0, 0, 0, 1], [['t', -centerX, -labelStartY], ['r', rotate], ['t', centerX - 5, labelStartY + 2]]);\n          text.attr({\n            textAlign: 'left',\n            matrix: matrix\n          });\n        }\n\n        if (labels.length === 1) {\n          text.attr({\n            textAlign: 'left'\n          });\n        } else if (labels.length === 10) {\n          text.attr({\n            textAlign: 'right'\n          });\n        } // draw tick labels\n\n      }\n    });\n    this.tickRects = tickRects; // 渲染播放、快进和后退的控制按钮\n\n    var group = this.group;\n    this.currentSpeed = 1;\n    this.controllerBtnGroup = new ControllerBtn({\n      group: group,\n      x: this.x,\n      y: this.y + height + 5,\n      width: width,\n      height: 40,\n      hideTimeTypeController: true,\n      speed: this.currentSpeed,\n      fontFamily: this.fontFamily || 'Arial, sans-serif'\n    });\n  };\n\n  TimeBarSlice.prototype.initEvent = function () {\n    var _this = this;\n\n    var sliceGroup = this.sliceGroup;\n    sliceGroup.on('click', function (e) {\n      var targetRect = e.target;\n      if (targetRect.get('type') !== 'rect' || !targetRect.get('name')) return;\n      var id = parseInt(targetRect.get('name').split('-')[2], 10);\n\n      if (!isNaN(id)) {\n        var tickRects_1 = _this.tickRects; // cancel the selected ticks\n\n        var unselectedTickStyle_1 = _this.unselectedTickStyle;\n        tickRects_1.forEach(function (tickRect) {\n          tickRect.rect.attr(unselectedTickStyle_1);\n        });\n        var selectedTickStyle = _this.selectedTickStyle;\n        tickRects_1[id].rect.attr(selectedTickStyle);\n        _this.startTickRectId = id;\n        _this.endTickRectId = id;\n        var ticksLength = tickRects_1.length;\n        var start = id / ticksLength;\n\n        _this.graph.emit(VALUE_CHANGE, {\n          value: [start, start]\n        });\n      }\n    });\n    sliceGroup.on('dragstart', function (e) {\n      var tickRects = _this.tickRects; // cancel the selected ticks\n\n      var unselectedTickStyle = _this.unselectedTickStyle;\n      tickRects.forEach(function (tickRect) {\n        tickRect.rect.attr(unselectedTickStyle);\n      });\n      var targetRect = e.target;\n      var id = parseInt(targetRect.get('name').split('-')[2], 10);\n      var selectedTickStyle = _this.selectedTickStyle;\n      tickRects[id].rect.attr(selectedTickStyle);\n      _this.startTickRectId = id;\n      var ticksLength = tickRects.length;\n      var start = id / ticksLength;\n\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, start]\n      });\n\n      _this.dragging = true;\n    });\n    sliceGroup.on('dragover', function (e) {\n      if (!_this.dragging) return;\n      if (e.target.get('type') !== 'rect') return;\n      var id = parseInt(e.target.get('name').split('-')[2], 10);\n      var startTickRectId = _this.startTickRectId;\n      var tickRects = _this.tickRects;\n      var selectedTickStyle = _this.selectedTickStyle;\n      var unselectedTickStyle = _this.unselectedTickStyle;\n\n      for (var i = 0; i < tickRects.length; i++) {\n        var style = i >= startTickRectId && i <= id ? selectedTickStyle : unselectedTickStyle;\n        tickRects[i].rect.attr(style);\n      }\n\n      var ticksLength = tickRects.length;\n      _this.endTickRectId = id;\n      var start = startTickRectId / ticksLength;\n      var end = id / ticksLength;\n\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    });\n    sliceGroup.on('drop', function (e) {\n      if (!_this.dragging) return;\n      _this.dragging = false;\n      if (e.target.get('type') !== 'rect') return;\n      var startTickRectId = _this.startTickRectId;\n      var id = parseInt(e.target.get('name').split('-')[2], 10);\n      if (id < startTickRectId) return;\n      var selectedTickStyle = _this.selectedTickStyle;\n      var tickRects = _this.tickRects;\n      tickRects[id].rect.attr(selectedTickStyle);\n      _this.endTickRectId = id;\n      var ticksLength = tickRects.length;\n      var start = startTickRectId / ticksLength;\n      var end = id / ticksLength;\n\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    }); // tooltip\n\n    var _a = this,\n        tooltipBackgroundColor = _a.tooltipBackgroundColor,\n        tooltipFomatter = _a.tooltipFomatter,\n        canvas = _a.canvas;\n\n    var tooltip = new TimeBarTooltip({\n      container: canvas.get('container'),\n      backgroundColor: tooltipBackgroundColor\n    });\n    var tickRects = this.tickRects;\n    tickRects.forEach(function (tickRect) {\n      var pickRect = tickRect.pickRect;\n      pickRect.on('mouseenter', function (e) {\n        var rect = e.target;\n        if (rect.get('type') !== 'rect') return;\n        var id = parseInt(rect.get('name').split('-')[2], 10);\n        var clientPoint = canvas.getClientByPoint(tickRects[id].x, tickRects[id].y);\n        tooltip.show({\n          x: tickRects[id].x,\n          y: tickRects[id].y,\n          clientX: clientPoint.x,\n          clientY: clientPoint.y,\n          text: tooltipFomatter ? tooltipFomatter(tickRects[id].value) : tickRects[id].value\n        });\n      });\n      pickRect.on('mouseleave', function (e) {\n        tooltip.hide();\n      });\n    }); // play controller events\n\n    var group = this.group; // 播放区按钮控制\n\n    /** 播放/暂停事件 */\n\n    group.on(\"\".concat(PLAY_PAUSE_BTN, \":click\"), function () {\n      _this.isPlay = !_this.isPlay;\n\n      _this.changePlayStatus();\n    }); // 处理前进一步的事件\n\n    group.on(\"\".concat(NEXT_STEP_BTN, \":click\"), function () {\n      _this.updateStartEnd(1);\n    }); // 处理后退一步的事件\n\n    group.on(\"\".concat(PRE_STEP_BTN, \":click\"), function () {\n      _this.updateStartEnd(-1);\n    });\n    group.on(TIMEBAR_CONFIG_CHANGE, function (_a) {\n      var type = _a.type,\n          speed = _a.speed;\n      _this.currentSpeed = speed;\n    });\n  };\n\n  TimeBarSlice.prototype.changePlayStatus = function (isSync) {\n    if (isSync === void 0) {\n      isSync = true;\n    }\n\n    this.controllerBtnGroup.playButton.update({\n      isPlay: this.isPlay\n    });\n\n    if (this.isPlay) {\n      // 开始播放\n      this.playHandler = this.startPlay();\n      this.graph.emit(TIMELINE_START, null);\n    } else {\n      // 结束播放\n      if (this.playHandler) {\n        if (typeof window !== 'undefined') window.cancelAnimationFrame(this.playHandler);\n\n        if (isSync) {\n          this.graph.emit(TIMELINE_END, null);\n        }\n      }\n    }\n  };\n\n  TimeBarSlice.prototype.startPlay = function () {\n    var _this = this;\n\n    return typeof window !== 'undefined' ? window.requestAnimationFrame(function () {\n      var speed = _this.currentSpeed; // 一分钟刷新一次\n\n      if (_this.frameCount % (60 / speed) === 0) {\n        _this.frameCount = 0;\n\n        _this.updateStartEnd(1);\n      }\n\n      _this.frameCount++;\n\n      if (_this.isPlay) {\n        _this.playHandler = _this.startPlay();\n      }\n    }) : undefined;\n  };\n\n  TimeBarSlice.prototype.updateStartEnd = function (sign) {\n    var self = this;\n    var tickRects = this.tickRects;\n    var ticksLength = tickRects.length;\n    var unselectedTickStyle = this.unselectedTickStyle;\n    var selectedTickStyle = this.selectedTickStyle;\n    var previousEndTickRectId = self.endTickRectId;\n\n    if (sign > 0) {\n      self.endTickRectId++;\n    } else {\n      tickRects[self.endTickRectId].rect.attr(unselectedTickStyle);\n      self.endTickRectId--;\n    } // 若此时 start 与 end 不同，范围前进/后退/播放\n\n\n    if (previousEndTickRectId !== self.startTickRectId) {\n      if (self.endTickRectId < self.startTickRectId) {\n        self.startTickRectId = self.endTickRectId;\n      }\n    } else {\n      // 否则是单帧的前进/后退/播放\n      for (var i = self.startTickRectId; i <= self.endTickRectId - 1; i++) {\n        tickRects[i].rect.attr(unselectedTickStyle);\n      }\n\n      self.startTickRectId = self.endTickRectId;\n    }\n\n    if (tickRects[self.endTickRectId]) {\n      tickRects[self.endTickRectId].rect.attr(selectedTickStyle);\n      var start = self.startTickRectId / ticksLength;\n      var end = self.endTickRectId / ticksLength;\n      this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    }\n  };\n\n  TimeBarSlice.prototype.destory = function () {\n    this.graph.off(VALUE_CHANGE, function () {});\n    var group = this.sliceGroup;\n    group.off('click');\n    group.off('dragstart');\n    group.off('dragover');\n    group.off('drop');\n    this.tickRects.forEach(function (tickRect) {\n      var pickRect = tickRect.pickRect;\n      pickRect.off('mouseenter');\n      pickRect.off('mouseleave');\n    });\n    this.tickRects.length = 0;\n    group.off(\"\".concat(PLAY_PAUSE_BTN, \":click\"));\n    group.off(\"\".concat(NEXT_STEP_BTN, \":click\"));\n    group.off(\"\".concat(PRE_STEP_BTN, \":click\"));\n    group.off(TIMEBAR_CONFIG_CHANGE);\n    this.sliceGroup.destroy();\n  };\n\n  return TimeBarSlice;\n}();\n\nexport default TimeBarSlice;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","ext","isNumber","isString","TimeBarTooltip","ControllerBtn","VALUE_CHANGE","TIMELINE_START","TIMELINE_END","PLAY_PAUSE_BTN","NEXT_STEP_BTN","PRE_STEP_BTN","TIMEBAR_CONFIG_CHANGE","transform","DEFAULT_SELECTEDTICK_STYLE","fill","DEFAULT_UNSELECTEDTICK_STYLE","TimeBarSlice","cfgs","frameCount","fontFamily","graph","canvas","group","width","height","padding","data","start","end","_a","x","_b","y","tickLabelFormatter","_c","selectedTickStyle","_d","unselectedTickStyle","tooltipBackgroundColor","tooltipFomatter","tickLabelStyle","sliceGroup","addGroup","name","window","getComputedStyle","document","body","getPropertyValue","renderSlices","initEvent","_this","realWidth","fontSize","labelLineHeight","labelAreaHeight","ticksAreaHeight","gap","ticksLength","tickWidth","tickRects","labels","startTickId","Math","round","endTickId","startTickRectId","endTickRectId","rotate","forEach","d","selected","tickStyle","rect","addShape","attrs","draggable","concat","pickRect","opacity","toFront","rectBBox","getBBox","centerX","minX","maxX","push","value","date","minY","label","lineStartY","maxY","stroke","x1","y1","x2","y2","labelStartY","text","lineWidth","textAlign","textBaseline","capture","textBBox","attr","matrix","currentSpeed","controllerBtnGroup","hideTimeTypeController","speed","on","e","targetRect","target","get","id","parseInt","split","isNaN","tickRects_1","unselectedTickStyle_1","tickRect","emit","dragging","style","tooltip","container","backgroundColor","clientPoint","getClientByPoint","show","clientX","clientY","hide","isPlay","changePlayStatus","updateStartEnd","type","isSync","playButton","update","playHandler","startPlay","cancelAnimationFrame","requestAnimationFrame","undefined","sign","self","previousEndTickRectId","destory","off","destroy"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/timeBar/timeBarSlice.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n/**\n * 基于 G 的刻度时间轴组件\n */\n\n\nimport { ext } from '@antv/matrix-util';\nimport { isNumber, isString } from '@antv/util';\nimport TimeBarTooltip from './timeBarTooltip';\nimport ControllerBtn from './controllerBtn';\nimport { VALUE_CHANGE, TIMELINE_START, TIMELINE_END, PLAY_PAUSE_BTN, NEXT_STEP_BTN, PRE_STEP_BTN, TIMEBAR_CONFIG_CHANGE } from './constant';\nvar transform = ext.transform;\nvar DEFAULT_SELECTEDTICK_STYLE = {\n  fill: '#5B8FF9'\n};\nvar DEFAULT_UNSELECTEDTICK_STYLE = {\n  fill: '#e6e8e9'\n};\n\nvar TimeBarSlice =\n/** @class */\nfunction () {\n  function TimeBarSlice(cfgs) {\n    this.frameCount = 0;\n    this.fontFamily = 'Arial, sans-serif';\n    var graph = cfgs.graph,\n        canvas = cfgs.canvas,\n        group = cfgs.group,\n        width = cfgs.width,\n        height = cfgs.height,\n        padding = cfgs.padding,\n        data = cfgs.data,\n        start = cfgs.start,\n        end = cfgs.end,\n        _a = cfgs.x,\n        x = _a === void 0 ? 0 : _a,\n        _b = cfgs.y,\n        y = _b === void 0 ? 0 : _b,\n        tickLabelFormatter = cfgs.tickLabelFormatter,\n        _c = cfgs.selectedTickStyle,\n        selectedTickStyle = _c === void 0 ? DEFAULT_SELECTEDTICK_STYLE : _c,\n        _d = cfgs.unselectedTickStyle,\n        unselectedTickStyle = _d === void 0 ? DEFAULT_UNSELECTEDTICK_STYLE : _d,\n        tooltipBackgroundColor = cfgs.tooltipBackgroundColor,\n        tooltipFomatter = cfgs.tooltipFomatter,\n        tickLabelStyle = cfgs.tickLabelStyle;\n    this.graph = graph;\n    this.group = group;\n    this.sliceGroup = group.addGroup({\n      name: 'slice-group'\n    });\n    this.canvas = canvas;\n    this.width = width;\n    this.height = height;\n    this.padding = padding;\n    this.data = data;\n    this.start = start;\n    this.end = end;\n    this.tickLabelFormatter = tickLabelFormatter;\n    this.tickLabelStyle = tickLabelStyle || {};\n    this.selectedTickStyle = selectedTickStyle;\n    this.unselectedTickStyle = unselectedTickStyle;\n    this.x = x;\n    this.y = y;\n    this.tooltipBackgroundColor = tooltipBackgroundColor;\n    this.tooltipFomatter = tooltipFomatter; // 初始化 fontFamily，如果有浏览器，取 body 上的字体，防止文字更新时局部渲染造成的重影\n\n    this.fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.renderSlices();\n    this.initEvent();\n  }\n\n  TimeBarSlice.prototype.renderSlices = function () {\n    var _this = this;\n\n    var _a = this,\n        width = _a.width,\n        height = _a.height,\n        padding = _a.padding,\n        data = _a.data,\n        start = _a.start,\n        end = _a.end,\n        tickLabelFormatter = _a.tickLabelFormatter,\n        selectedTickStyle = _a.selectedTickStyle,\n        unselectedTickStyle = _a.unselectedTickStyle,\n        tickLabelStyle = _a.tickLabelStyle;\n\n    var realWidth = width - 2 * padding;\n    var fontSize = 10;\n    var labelLineHeight = 4;\n    var labelAreaHeight = 3 * padding + labelLineHeight + fontSize;\n    var ticksAreaHeight = height - labelAreaHeight - 2 * padding;\n    var gap = 2;\n    var ticksLength = data.length;\n    var tickWidth = (realWidth - gap * (ticksLength - 1)) / ticksLength;\n    this.tickWidth = tickWidth;\n    var sliceGroup = this.sliceGroup;\n    var tickRects = [];\n    var labels = [];\n    var startTickId = Math.round(ticksLength * start);\n    var endTickId = Math.round(ticksLength * end);\n    this.startTickRectId = startTickId;\n    this.endTickRectId = endTickId;\n    var rotate = tickLabelStyle.rotate;\n    delete tickLabelStyle.rotate;\n    data.forEach(function (d, i) {\n      // draw the tick rects\n      var selected = i >= startTickId && i <= endTickId;\n      var tickStyle = selected ? selectedTickStyle : unselectedTickStyle;\n      var rect = sliceGroup.addShape('rect', {\n        attrs: __assign({\n          x: padding + i * (tickWidth + gap),\n          y: padding,\n          width: tickWidth,\n          height: ticksAreaHeight\n        }, tickStyle),\n        draggable: true,\n        name: \"tick-rect-\".concat(i)\n      }); // draw the pick tick rects\n\n      var pickRect = sliceGroup.addShape('rect', {\n        attrs: {\n          x: padding + i * tickWidth + gap * (2 * i - 1) / 2,\n          y: padding,\n          width: i === 0 || i === ticksLength - 1 ? tickWidth + gap / 2 : tickWidth + gap,\n          height: ticksAreaHeight,\n          fill: '#fff',\n          opacity: 0\n        },\n        draggable: true,\n        name: \"pick-rect-\".concat(i)\n      });\n      pickRect.toFront();\n      var rectBBox = rect.getBBox();\n      var centerX = (rectBBox.minX + rectBBox.maxX) / 2;\n      tickRects.push({\n        rect: rect,\n        pickRect: pickRect,\n        value: d.date,\n        x: centerX,\n        y: rectBBox.minY\n      });\n      var label;\n\n      if (tickLabelFormatter) {\n        label = tickLabelFormatter(d);\n\n        if (!isString(label) && label) {\n          // return true\n          label = d.date;\n        }\n      } else if (i % Math.round(ticksLength / 10) === 0) {\n        label = d.date;\n      }\n\n      if (label) {\n        labels.push(label); // draw tick lines\n\n        var lineStartY = rectBBox.maxY + padding * 2;\n        sliceGroup.addShape('line', {\n          attrs: {\n            stroke: '#BFBFBF',\n            x1: centerX,\n            y1: lineStartY,\n            x2: centerX,\n            y2: lineStartY + labelLineHeight\n          },\n          name: 'tick-line'\n        });\n        var labelStartY = lineStartY + labelLineHeight + padding;\n        var text = sliceGroup.addShape('text', {\n          attrs: __assign({\n            fill: '#8c8c8c',\n            stroke: '#fff',\n            lineWidth: 1,\n            x: centerX,\n            y: labelStartY,\n            textAlign: 'center',\n            text: label,\n            textBaseline: 'top',\n            fontSize: 10,\n            fontFamily: _this.fontFamily || 'Arial, sans-serif'\n          }, tickLabelStyle),\n          capture: false,\n          name: 'tick-label'\n        });\n        var textBBox = text.getBBox();\n\n        if (textBBox.maxX > width) {\n          text.attr('textAlign', 'right');\n        } else if (textBBox.minX < 0) {\n          text.attr('textAlign', 'left');\n        }\n\n        if (isNumber(rotate) && labels.length !== 10) {\n          var matrix = transform([1, 0, 0, 0, 1, 0, 0, 0, 1], [['t', -centerX, -labelStartY], ['r', rotate], ['t', centerX - 5, labelStartY + 2]]);\n          text.attr({\n            textAlign: 'left',\n            matrix: matrix\n          });\n        }\n\n        if (labels.length === 1) {\n          text.attr({\n            textAlign: 'left'\n          });\n        } else if (labels.length === 10) {\n          text.attr({\n            textAlign: 'right'\n          });\n        } // draw tick labels\n\n      }\n    });\n    this.tickRects = tickRects; // 渲染播放、快进和后退的控制按钮\n\n    var group = this.group;\n    this.currentSpeed = 1;\n    this.controllerBtnGroup = new ControllerBtn({\n      group: group,\n      x: this.x,\n      y: this.y + height + 5,\n      width: width,\n      height: 40,\n      hideTimeTypeController: true,\n      speed: this.currentSpeed,\n      fontFamily: this.fontFamily || 'Arial, sans-serif'\n    });\n  };\n\n  TimeBarSlice.prototype.initEvent = function () {\n    var _this = this;\n\n    var sliceGroup = this.sliceGroup;\n    sliceGroup.on('click', function (e) {\n      var targetRect = e.target;\n      if (targetRect.get('type') !== 'rect' || !targetRect.get('name')) return;\n      var id = parseInt(targetRect.get('name').split('-')[2], 10);\n\n      if (!isNaN(id)) {\n        var tickRects_1 = _this.tickRects; // cancel the selected ticks\n\n        var unselectedTickStyle_1 = _this.unselectedTickStyle;\n        tickRects_1.forEach(function (tickRect) {\n          tickRect.rect.attr(unselectedTickStyle_1);\n        });\n        var selectedTickStyle = _this.selectedTickStyle;\n        tickRects_1[id].rect.attr(selectedTickStyle);\n        _this.startTickRectId = id;\n        _this.endTickRectId = id;\n        var ticksLength = tickRects_1.length;\n        var start = id / ticksLength;\n\n        _this.graph.emit(VALUE_CHANGE, {\n          value: [start, start]\n        });\n      }\n    });\n    sliceGroup.on('dragstart', function (e) {\n      var tickRects = _this.tickRects; // cancel the selected ticks\n\n      var unselectedTickStyle = _this.unselectedTickStyle;\n      tickRects.forEach(function (tickRect) {\n        tickRect.rect.attr(unselectedTickStyle);\n      });\n      var targetRect = e.target;\n      var id = parseInt(targetRect.get('name').split('-')[2], 10);\n      var selectedTickStyle = _this.selectedTickStyle;\n      tickRects[id].rect.attr(selectedTickStyle);\n      _this.startTickRectId = id;\n      var ticksLength = tickRects.length;\n      var start = id / ticksLength;\n\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, start]\n      });\n\n      _this.dragging = true;\n    });\n    sliceGroup.on('dragover', function (e) {\n      if (!_this.dragging) return;\n      if (e.target.get('type') !== 'rect') return;\n      var id = parseInt(e.target.get('name').split('-')[2], 10);\n      var startTickRectId = _this.startTickRectId;\n      var tickRects = _this.tickRects;\n      var selectedTickStyle = _this.selectedTickStyle;\n      var unselectedTickStyle = _this.unselectedTickStyle;\n\n      for (var i = 0; i < tickRects.length; i++) {\n        var style = i >= startTickRectId && i <= id ? selectedTickStyle : unselectedTickStyle;\n        tickRects[i].rect.attr(style);\n      }\n\n      var ticksLength = tickRects.length;\n      _this.endTickRectId = id;\n      var start = startTickRectId / ticksLength;\n      var end = id / ticksLength;\n\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    });\n    sliceGroup.on('drop', function (e) {\n      if (!_this.dragging) return;\n      _this.dragging = false;\n      if (e.target.get('type') !== 'rect') return;\n      var startTickRectId = _this.startTickRectId;\n      var id = parseInt(e.target.get('name').split('-')[2], 10);\n      if (id < startTickRectId) return;\n      var selectedTickStyle = _this.selectedTickStyle;\n      var tickRects = _this.tickRects;\n      tickRects[id].rect.attr(selectedTickStyle);\n      _this.endTickRectId = id;\n      var ticksLength = tickRects.length;\n      var start = startTickRectId / ticksLength;\n      var end = id / ticksLength;\n\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    }); // tooltip\n\n    var _a = this,\n        tooltipBackgroundColor = _a.tooltipBackgroundColor,\n        tooltipFomatter = _a.tooltipFomatter,\n        canvas = _a.canvas;\n\n    var tooltip = new TimeBarTooltip({\n      container: canvas.get('container'),\n      backgroundColor: tooltipBackgroundColor\n    });\n    var tickRects = this.tickRects;\n    tickRects.forEach(function (tickRect) {\n      var pickRect = tickRect.pickRect;\n      pickRect.on('mouseenter', function (e) {\n        var rect = e.target;\n        if (rect.get('type') !== 'rect') return;\n        var id = parseInt(rect.get('name').split('-')[2], 10);\n        var clientPoint = canvas.getClientByPoint(tickRects[id].x, tickRects[id].y);\n        tooltip.show({\n          x: tickRects[id].x,\n          y: tickRects[id].y,\n          clientX: clientPoint.x,\n          clientY: clientPoint.y,\n          text: tooltipFomatter ? tooltipFomatter(tickRects[id].value) : tickRects[id].value\n        });\n      });\n      pickRect.on('mouseleave', function (e) {\n        tooltip.hide();\n      });\n    }); // play controller events\n\n    var group = this.group; // 播放区按钮控制\n\n    /** 播放/暂停事件 */\n\n    group.on(\"\".concat(PLAY_PAUSE_BTN, \":click\"), function () {\n      _this.isPlay = !_this.isPlay;\n\n      _this.changePlayStatus();\n    }); // 处理前进一步的事件\n\n    group.on(\"\".concat(NEXT_STEP_BTN, \":click\"), function () {\n      _this.updateStartEnd(1);\n    }); // 处理后退一步的事件\n\n    group.on(\"\".concat(PRE_STEP_BTN, \":click\"), function () {\n      _this.updateStartEnd(-1);\n    });\n    group.on(TIMEBAR_CONFIG_CHANGE, function (_a) {\n      var type = _a.type,\n          speed = _a.speed;\n      _this.currentSpeed = speed;\n    });\n  };\n\n  TimeBarSlice.prototype.changePlayStatus = function (isSync) {\n    if (isSync === void 0) {\n      isSync = true;\n    }\n\n    this.controllerBtnGroup.playButton.update({\n      isPlay: this.isPlay\n    });\n\n    if (this.isPlay) {\n      // 开始播放\n      this.playHandler = this.startPlay();\n      this.graph.emit(TIMELINE_START, null);\n    } else {\n      // 结束播放\n      if (this.playHandler) {\n        if (typeof window !== 'undefined') window.cancelAnimationFrame(this.playHandler);\n\n        if (isSync) {\n          this.graph.emit(TIMELINE_END, null);\n        }\n      }\n    }\n  };\n\n  TimeBarSlice.prototype.startPlay = function () {\n    var _this = this;\n\n    return typeof window !== 'undefined' ? window.requestAnimationFrame(function () {\n      var speed = _this.currentSpeed; // 一分钟刷新一次\n\n      if (_this.frameCount % (60 / speed) === 0) {\n        _this.frameCount = 0;\n\n        _this.updateStartEnd(1);\n      }\n\n      _this.frameCount++;\n\n      if (_this.isPlay) {\n        _this.playHandler = _this.startPlay();\n      }\n    }) : undefined;\n  };\n\n  TimeBarSlice.prototype.updateStartEnd = function (sign) {\n    var self = this;\n    var tickRects = this.tickRects;\n    var ticksLength = tickRects.length;\n    var unselectedTickStyle = this.unselectedTickStyle;\n    var selectedTickStyle = this.selectedTickStyle;\n    var previousEndTickRectId = self.endTickRectId;\n\n    if (sign > 0) {\n      self.endTickRectId++;\n    } else {\n      tickRects[self.endTickRectId].rect.attr(unselectedTickStyle);\n      self.endTickRectId--;\n    } // 若此时 start 与 end 不同，范围前进/后退/播放\n\n\n    if (previousEndTickRectId !== self.startTickRectId) {\n      if (self.endTickRectId < self.startTickRectId) {\n        self.startTickRectId = self.endTickRectId;\n      }\n    } else {\n      // 否则是单帧的前进/后退/播放\n      for (var i = self.startTickRectId; i <= self.endTickRectId - 1; i++) {\n        tickRects[i].rect.attr(unselectedTickStyle);\n      }\n\n      self.startTickRectId = self.endTickRectId;\n    }\n\n    if (tickRects[self.endTickRectId]) {\n      tickRects[self.endTickRectId].rect.attr(selectedTickStyle);\n      var start = self.startTickRectId / ticksLength;\n      var end = self.endTickRectId / ticksLength;\n      this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    }\n  };\n\n  TimeBarSlice.prototype.destory = function () {\n    this.graph.off(VALUE_CHANGE, function () {});\n    var group = this.sliceGroup;\n    group.off('click');\n    group.off('dragstart');\n    group.off('dragover');\n    group.off('drop');\n    this.tickRects.forEach(function (tickRect) {\n      var pickRect = tickRect.pickRect;\n      pickRect.off('mouseenter');\n      pickRect.off('mouseleave');\n    });\n    this.tickRects.length = 0;\n    group.off(\"\".concat(PLAY_PAUSE_BTN, \":click\"));\n    group.off(\"\".concat(NEXT_STEP_BTN, \":click\"));\n    group.off(\"\".concat(PRE_STEP_BTN, \":click\"));\n    group.off(TIMEBAR_CONFIG_CHANGE);\n    this.sliceGroup.destroy();\n  };\n\n  return TimeBarSlice;\n}();\n\nexport default TimeBarSlice;"],"mappings":"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"},"metadata":{},"sourceType":"module"}