{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.includes.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport Base from '../base';\nimport { isArray, isNumber, uniqueId } from '@antv/util';\nimport { Util } from '@antv/g6-core';\nimport { Canvas } from '@antv/g-canvas';\nvar ALLOW_EVENTS = ['click', 'mouseenter'];\n\nvar Legend =\n/** @class */\nfunction (_super) {\n  __extends(Legend, _super);\n\n  function Legend(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Legend.prototype.getDefaultCfgs = function () {\n    return {\n      data: {},\n      position: 'top',\n      padding: 8,\n      margin: 8,\n      offsetX: 0,\n      offsetY: 0,\n      layout: 'horizontal',\n      flipPage: false,\n      containerStyle: {},\n      align: undefined,\n      horiSep: 8,\n      vertiSep: 8,\n      filter: {\n        enable: false,\n        trigger: 'click'\n      }\n    };\n  };\n\n  Legend.prototype.init = function () {\n    this.formatArray('padding');\n    this.formatArray('margin');\n    var filter = this.get('filter') || {};\n    var multiple = filter.multiple;\n    if (multiple && filter.trigger === 'mouseenter') this.set('multiple', false);\n    var align = this.get('align');\n\n    if (!align) {\n      var positions = this.get('position').split('-');\n      if (positions.includes('left')) align = 'left';\n      if (positions.includes('right')) align = 'right';else align = 'center';\n      this.set('align', align);\n    }\n\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = createDom(\"<div class='g6-legend-container' style=\\\"position: absolute;\\\"></div>\");\n    graphContainer.appendChild(container);\n    this.set('container', container);\n    var size = this.render();\n    modifyCSS(container, this.getContainerPos(size));\n    this.bindEvents();\n  };\n\n  Legend.prototype.getContainerPos = function (size) {\n    if (size === void 0) {\n      size = [0, 0];\n    }\n\n    var self = this;\n    var graph = self.get('graph');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    var margin = this.get('margin');\n    var positions = this.get('position').split('-');\n    var posIdxMap = {\n      'top': 0,\n      'right': 1,\n      'bottom': 2,\n      'left': 3\n    };\n    var x = 0,\n        y = 0;\n    var containerCSS = {\n      left: (graph.getWidth() - size[0]) / 2 + x,\n      top: (graph.getHeight() - size[1]) / 2 + y\n    };\n    positions.forEach(function (pos) {\n      var marginValue = margin[posIdxMap[pos]];\n      var key = pos;\n\n      switch (pos) {\n        case 'top':\n          marginValue += y;\n          break;\n\n        case 'left':\n          marginValue += x;\n          break;\n\n        case 'bottom':\n          marginValue = graph.getHeight() - size[1] - marginValue + y;\n          key = 'top';\n          break;\n\n        default:\n          marginValue = graph.getWidth() - size[0] - marginValue + x;\n          key = 'left';\n          break;\n      }\n\n      containerCSS[key] = marginValue;\n    });\n    containerCSS.top += offsetY + graph.getContainer().offsetTop;\n    containerCSS.left += offsetX + graph.getContainer().offsetLeft;\n    Object.keys(containerCSS).forEach(function (key) {\n      containerCSS[key] = \"\".concat(containerCSS[key], \"px\");\n    });\n    return containerCSS;\n  }; // class-methods-use-this\n\n\n  Legend.prototype.bindEvents = function () {\n    var self = this;\n    var filter = self.get('filter');\n    if (!filter || !filter.enable) return;\n    var trigger = filter.trigger || 'click';\n\n    if (!ALLOW_EVENTS.includes(trigger)) {\n      console.warn('Trigger for legend filterling must be \\'click\\' or \\'mouseenter\\', \\'click\\' will take effect by default.');\n      trigger = 'click';\n    }\n\n    var lc = self.get('legendCanvas');\n\n    if (trigger === 'mouseenter') {\n      lc.on('node-container:mouseenter', function (e) {\n        return self.filterData(e);\n      });\n      lc.on('node-container:mouseleave', function (e) {\n        self.clearFilter();\n        self.clearActiveLegend();\n      });\n    } else {\n      lc.on('node-container:click', function (e) {\n        return self.filterData(e);\n      });\n      lc.on('click', function (e) {\n        if (e.target && e.target.isCanvas && e.target.isCanvas()) {\n          self.clearFilter();\n          self.clearActiveLegend();\n        }\n      });\n    }\n  };\n  /**\n   * 更新 legend 数据，开放给用户控制\n   * @param param\n   */\n\n\n  Legend.prototype.changeData = function (data) {\n    this.set('data', data);\n    var size = this.render();\n    modifyCSS(this.get('container'), this.getContainerPos(size));\n  };\n\n  Legend.prototype.activateLegend = function (shape) {\n    var filter = this.get('filter');\n    var multiple = filter === null || filter === void 0 ? void 0 : filter.multiple;\n    if (!multiple) this.clearActiveLegend();\n    var shapeGroup = shape.get('parent'); // 若被高亮元素已经处于 active 状态，则取消它的 active 状态\n    // 并根据目前是否有其他 active 状态的元素决定是否要设置为 inactive 状态\n\n    if (shapeGroup.get('active')) {\n      shapeGroup.set('active', false);\n      if (this.findLegendItemsByState('active').length) shapeGroup.set('inactive', true);\n    } else {\n      shapeGroup.set('inactive', false);\n      shapeGroup.set('active', true);\n    } // 当目前有元素为 active 状态时，将非 active 的元素设置为 inactive\n\n\n    if (this.findLegendItemsByState('active').length) {\n      this.findLegendItemsByState('active', 'all', false).forEach(function (subGroup) {\n        subGroup.set('inactive', true);\n      });\n    } else {\n      this.clearActiveLegend();\n    } // 设置样式\n\n\n    var stateStyles = (filter === null || filter === void 0 ? void 0 : filter.legendStateStyles) || {};\n    var legendInactive = (stateStyles === null || stateStyles === void 0 ? void 0 : stateStyles.inactive) || {\n      opacity: 0.5,\n      'text-shape': {\n        opacity: 0.5\n      }\n    };\n    var legendTextInactive = legendInactive['text-shape'] || {};\n    this.findLegendItemsByState('inactive').forEach(function (subGroup) {\n      var _a = subGroup.get('children'),\n          keyShape = _a[0],\n          text = _a[1];\n\n      keyShape.attr(__assign(__assign({}, keyShape.get('oriAttrs')), legendInactive));\n      text.attr(__assign(__assign({}, text.get('oriAttrs')), legendTextInactive));\n    });\n    var legendActive = (stateStyles === null || stateStyles === void 0 ? void 0 : stateStyles.active) || {\n      stroke: '#000',\n      lineWidth: 2,\n      'text-shape': {\n        fontWeight: 'bold'\n      }\n    };\n    var legendTextActive = legendActive['text-shape'] || {};\n    this.findLegendItemsByState('active').forEach(function (subGroup) {\n      var _a = subGroup.get('children'),\n          keyShape = _a[0],\n          text = _a[1];\n\n      keyShape.attr(__assign(__assign({}, keyShape.get('oriAttrs')), legendActive));\n      text.attr(__assign(__assign({}, text.get('oriAttrs')), legendTextActive));\n    });\n  };\n\n  Legend.prototype.findLegendItemsByState = function (stateName, type, value) {\n    if (type === void 0) {\n      type = 'all';\n    }\n\n    if (value === void 0) {\n      value = true;\n    }\n\n    var group = this.get('legendCanvas').find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    if (type === 'node') return nodeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    });\n    if (type === 'edge') return edgeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    });\n    return nodeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    }).concat(edgeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    }));\n  };\n\n  Legend.prototype.clearActiveLegend = function () {\n    var lg = this.get('legendCanvas');\n    var group = lg.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var groups = [group.find(function (e) {\n      return e.get('name') === 'node-group';\n    }), group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    })];\n    groups.forEach(function (itemGroup) {\n      itemGroup.get('children').forEach(function (subGroup) {\n        subGroup.set('active', false);\n        subGroup.set('inactive', false);\n\n        var _a = subGroup.get('children'),\n            keyShape = _a[0],\n            text = _a[1];\n\n        keyShape.attr(keyShape.get('oriAttrs'));\n        text.attr(text.get('oriAttrs'));\n      });\n    });\n  };\n  /**\n   * 高亮和置灰图例，并过滤主图元素\n   * @param param\n   */\n\n\n  Legend.prototype.filterData = function (e) {\n    var filter = this.get('filter');\n    var filterFunctions = filter === null || filter === void 0 ? void 0 : filter.filterFunctions;\n    if (!filter || !filterFunctions) return;\n    var lc = this.get('legendCanvas');\n    var graph = this.get('graph');\n    var activeState = filter.graphActiveState || 'active';\n    var inactiveState = filter.graphInactiveState || 'inactive';\n    var multiple = filter.multiple;\n    this.clearFilter();\n    if (!multiple) this.clearActiveLegend(); // 设置 legend 的高亮状态\n\n    this.activateLegend(e.target);\n    var group = lc.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    var activeNodeLegend = nodeGroup.get('children').filter(function (e) {\n      return e.get('active');\n    });\n    var activeEdgeLegend = edgeGroup.get('children').filter(function (e) {\n      return e.get('active');\n    });\n    var activeCount = 0;\n    var typeFuncs = ['getNodes', 'getEdges'];\n    typeFuncs.forEach(function (typeFunc) {\n      graph[typeFunc]().forEach(function (graphItem) {\n        var active = false;\n        var activeLegend = typeFunc === 'getNodes' ? activeNodeLegend : activeEdgeLegend;\n        activeLegend.forEach(function (itemGroup) {\n          var func = filterFunctions[itemGroup.get('id')];\n          active = active || func(graphItem.getModel());\n        });\n\n        if (active) {\n          graph.setItemState(graphItem, inactiveState, false);\n          graph.setItemState(graphItem, activeState, true);\n          activeCount++;\n        } else {\n          graph.setItemState(graphItem, activeState, false);\n          graph.setItemState(graphItem, inactiveState, true);\n        }\n      });\n    });\n    if (!activeCount) typeFuncs.forEach(function (typeFunc) {\n      graph[typeFunc]().forEach(function (graphItem) {\n        graph.clearItemStates(graphItem, [inactiveState]);\n      });\n    });\n  };\n  /**\n   * 清除主图相关状态\n   * @param param\n   */\n\n\n  Legend.prototype.clearFilter = function () {\n    // 清除 legend 的高亮状态\n    var graph = this.get('graph');\n    var filter = this.get('filter');\n    if (!filter) return;\n    var activeState = filter.graphActiveState || 'active';\n    var inactiveState = filter.graphInactiveState || 'inactive';\n    graph.getNodes().forEach(function (node) {\n      graph.clearItemStates(node, [activeState, inactiveState]);\n    });\n    graph.getEdges().forEach(function (edge) {\n      graph.clearItemStates(edge, [activeState, inactiveState]);\n    });\n  };\n  /**\n   * 渲染 legend 图\n   * @param param\n   */\n\n\n  Legend.prototype.render = function () {\n    var _this = this;\n\n    this.processData();\n    var lc = this.get('legendCanvas');\n\n    if (!lc) {\n      lc = new Canvas({\n        container: this.get('container'),\n        width: 200,\n        height: 200\n      });\n    } else {\n      lc.clear();\n    }\n\n    var group = lc.addGroup({\n      name: 'root'\n    });\n    var nodeGroup = group.addGroup({\n      name: 'node-group'\n    });\n    var edgeGroup = group.addGroup({\n      name: 'edge-group'\n    });\n    this.set('legendCanvas', lc);\n    var itemsData = this.get('itemsData');\n    var itemTypes = ['nodes', 'edges'];\n    var itemGroup = [nodeGroup, edgeGroup];\n    itemTypes.forEach(function (itemType, i) {\n      itemsData[itemType].forEach(function (data) {\n        var _a;\n\n        var subGroup = itemGroup[i].addGroup({\n          id: data.id,\n          name: 'node-container'\n        });\n        var attrs;\n        var shapeType = data.type;\n\n        var _b = _this.getShapeSize(data),\n            width = _b.width,\n            height = _b.height,\n            r = _b.r;\n\n        var style = _this.getStyle(itemType.substr(0, 4), data);\n\n        switch (data.type) {\n          case 'circle':\n            attrs = {\n              r: r,\n              x: 0,\n              y: 0\n            };\n            break;\n\n          case 'rect':\n            attrs = {\n              width: width,\n              height: height,\n              x: -width / 2,\n              y: -height / 2\n            };\n            break;\n\n          case 'ellipse':\n            attrs = {\n              r1: width,\n              r2: height,\n              x: 0,\n              y: 0\n            };\n            break;\n\n          case 'line':\n            attrs = {\n              x1: -width / 2,\n              y1: 0,\n              x2: width / 2,\n              y2: 0\n            };\n            shapeType = 'line';\n            break;\n\n          case 'quadratic':\n            attrs = {\n              path: [['M', -width / 2, 0], ['Q', 0, width / 2, width / 2, 0]]\n            };\n            shapeType = 'path';\n            break;\n\n          case 'cubic':\n            attrs = {\n              path: [['M', -width / 2, 0], ['C', -width / 6, width / 2, width / 6, -width / 2, width / 2, 0]]\n            };\n            shapeType = 'path';\n            break;\n\n          default:\n            attrs = {\n              r: r,\n              x: 0,\n              y: 0\n            };\n            break;\n        }\n\n        var keyShape = subGroup.addShape(shapeType, {\n          attrs: __assign(__assign({}, attrs), style),\n          name: \"\".concat(data.type, \"-node-keyShape\"),\n          oriAttrs: __assign({\n            opacity: 1\n          }, style)\n        });\n\n        if (data.label) {\n          var keyShapeBBox = keyShape.getBBox();\n          var labelStyle = ((_a = data.labelCfg) === null || _a === void 0 ? void 0 : _a.style) || {};\n\n          var attrs_1 = __assign({\n            textAlign: 'begin',\n            fontSize: 12,\n            textBaseline: 'middle',\n            fill: '#000',\n            opacity: 1,\n            fontWeight: 'normal'\n          }, labelStyle);\n\n          subGroup.addShape('text', {\n            attrs: __assign({\n              x: keyShapeBBox.maxX + 4,\n              y: 0,\n              text: data.label\n            }, attrs_1),\n            className: 'legend-label',\n            name: \"\".concat(data.type, \"-node-text\"),\n            oriAttrs: attrs_1\n          });\n        }\n      });\n    });\n    var padding = this.get('padding');\n    var titleShape;\n    var titleGroup = group.find(function (e) {\n      return e.get('name') === 'title-container';\n    });\n    var titleGroupBBox = {\n      height: 0,\n      maxY: 0,\n      width: 0\n    };\n\n    if (this.get('title')) {\n      if (!titleGroup) {\n        titleGroup = group.addGroup({\n          name: 'title-container'\n        });\n      }\n\n      var defaultTitleStyle = {\n        fontSize: 20,\n        fontFamily: 'Arial',\n        fontWeight: 300,\n        textBaseline: 'top',\n        textAlign: 'center',\n        fill: \"#000\",\n        x: 0,\n        y: padding[0]\n      };\n      var titleConfig = this.get('titleConfig') || {};\n      var style = Object.assign(defaultTitleStyle, titleConfig.style || {});\n      titleShape = titleGroup.addShape('text', {\n        attrs: __assign({\n          text: this.get('title')\n        }, style)\n      });\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      titleGroup.setMatrix([1, 0, 0, 0, 1, 0, titleConfig.offsetX, titleConfig.offsetY, 1]);\n    }\n\n    this.layoutItems();\n    var lcBBox = group.getCanvasBBox();\n    var nodeGroupBBox = nodeGroup.getCanvasBBox(); // 若有图形超过边界的情况，平移回来\n\n    var nodeGroupBeginX = nodeGroupBBox.minX < 0 ? Math.abs(nodeGroupBBox.minX) + padding[3] : padding[3];\n    var nodeGroupBeginY = titleGroupBBox.maxY < nodeGroupBBox.minY ? Math.abs(titleGroupBBox.maxY - nodeGroupBBox.minY) + padding[0] : titleGroupBBox.maxY + padding[0];\n    var nodeGroupMatrix = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n    nodeGroup.setMatrix(nodeGroupMatrix);\n    lcBBox = group.getCanvasBBox();\n    var size = [lcBBox.minX + lcBBox.width + padding[1], lcBBox.minY + lcBBox.height + padding[2]]; // 根据 size 和 titleConfig 调整 title 位置，再调整 nodeGroup 位置\n\n    if (titleShape) {\n      var titleConfig = __assign({\n        position: 'center',\n        offsetX: 0,\n        offsetY: 0\n      }, this.get('titleConfig'));\n\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      var titleGroupMatrix = titleGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n\n      if (titleConfig.position === 'center') {\n        titleGroupMatrix[6] = size[0] / 2 + titleConfig.offsetX;\n      } else if (titleConfig.position === 'right') {\n        titleGroupMatrix[6] = size[0] - padding[3] + titleConfig.offsetX;\n        titleShape.attr({\n          textAlign: 'right'\n        });\n      } else {\n        titleGroupMatrix[6] = padding[3] + titleConfig.offsetX;\n        titleShape.attr({\n          textAlign: 'left'\n        });\n      }\n\n      titleGroup.setMatrix(titleGroupMatrix);\n      titleGroupBBox = titleGroup.getCanvasBBox(); // 若有图形超过边界的情况，平移回来\n\n      nodeGroupBeginX = nodeGroupBBox.minX < 0 ? Math.abs(nodeGroupBBox.minX) + padding[3] : padding[3];\n      nodeGroupBeginY = nodeGroupBBox.minY < titleGroupBBox.maxY ? Math.abs(titleGroupBBox.maxY - nodeGroupBBox.minY) + padding[0] : titleGroupBBox.maxY + padding[0];\n      nodeGroupMatrix = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n      nodeGroup.setMatrix(nodeGroupMatrix);\n      var edgeGroupMatrix_1 = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n      if (this.get('layout') === 'vertical') edgeGroupMatrix_1[6] += nodeGroupBBox.maxX + this.get('horiSep');else edgeGroupMatrix_1[7] += nodeGroupBBox.maxY + this.get('vertiSep');\n      edgeGroup.setMatrix(edgeGroupMatrix_1);\n    } else {\n      // 没有 title，也需要平移 edgeGroup\n      nodeGroupBBox = nodeGroup.getCanvasBBox();\n      var edgeGroupMatrix_2 = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      if (this.get('layout') === 'vertical') edgeGroupMatrix_2[6] += nodeGroupMatrix[6] + nodeGroupBBox.maxX + this.get('horiSep');else edgeGroupMatrix_2[7] += nodeGroupMatrix[7] + nodeGroupBBox.maxY + this.get('vertiSep');\n      edgeGroup.setMatrix(edgeGroupMatrix_2);\n    }\n\n    lcBBox = group.getCanvasBBox();\n    nodeGroupBBox = nodeGroup.getCanvasBBox();\n    nodeGroupMatrix = nodeGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var edgeGroupMatrix = edgeGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var edgeGroupBBox = edgeGroup.getCanvasBBox();\n    size = [Math.max(nodeGroupBBox.width + nodeGroupMatrix[6], edgeGroupBBox.width + edgeGroupMatrix[6]) + padding[1], Math.max(nodeGroupBBox.height + nodeGroupMatrix[7], edgeGroupBBox.height + edgeGroupMatrix[7]) + padding[2]];\n    lc.changeSize(size[0], size[1]); // 更新容器背景样式\n\n    var containerStyle = this.get('containerStyle');\n    var viewportMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var beginPos = Util.invertMatrix({\n      x: 0,\n      y: 0\n    }, viewportMatrix);\n    var backRect = group.addShape('rect', {\n      attrs: __assign({\n        x: beginPos.x + (containerStyle.lineWidth || 1),\n        y: beginPos.y + (containerStyle.lineWidth || 1),\n        width: size[0] - 2 * (containerStyle.lineWidth || 1),\n        height: size[1] - 2 * (containerStyle.lineWidth || 1),\n        fill: \"#f00\",\n        stroke: '#000',\n        lineWidth: 1,\n        opacity: 0.5\n      }, containerStyle),\n      name: 'legend-back-rect',\n      capture: false\n    });\n    backRect.toBack();\n    return size;\n  };\n\n  Legend.prototype.layoutItems = function () {\n    var lc = this.get('legendCanvas');\n    var horiSep = this.get('horiSep');\n    var vertiSep = this.get('vertiSep');\n    var layout = this.get('layout');\n    var align = this.get('align');\n    var begin = [0, 0];\n    var group = lc.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    var nodeLegendSize = {\n      min: 0,\n      max: -Infinity\n    };\n    var rowMaxY = -Infinity;\n    nodeGroup.get('children').forEach(function (cNodeGroup, i) {\n      if (i === 0) nodeLegendSize.min = begin[0];\n      var keyShape = cNodeGroup.get('children')[0];\n      var bbox = cNodeGroup.getCanvasBBox();\n\n      var _a = keyShape.getBBox(),\n          keyShapeWidth = _a.width,\n          keyShapeHeight = _a.height;\n\n      var curHeight = 0,\n          x = 0,\n          y = 0;\n\n      if (layout === 'vertical') {\n        x = begin[1];\n        y = begin[0] + keyShapeWidth / 2;\n        begin[0] = y + bbox.height + vertiSep;\n        curHeight = bbox.maxX + x + keyShapeWidth / 2;\n      } else {\n        x = begin[0] + keyShapeWidth / 2;\n        y = begin[1];\n        begin[0] = x + bbox.width + horiSep;\n        curHeight = bbox.maxY + y + keyShapeHeight / 2;\n      }\n\n      if (begin[0] > nodeLegendSize.max) nodeLegendSize.max = begin[0];\n      if (curHeight > rowMaxY) rowMaxY = curHeight;\n      cNodeGroup.setMatrix([1, 0, 0, 0, 1, 0, x, y, 1]);\n    });\n    var nw = nodeLegendSize.max - nodeLegendSize.min;\n    var edgeLegendSize = {\n      min: 0,\n      max: -Infinity\n    };\n    var nodeGroupBBox = nodeGroup.getCanvasBBox();\n    begin[0] = 0;\n    begin[1] = layout === 'vertical' ? nodeGroupBBox.maxX + horiSep : nodeGroupBBox.maxY + vertiSep;\n    edgeGroup.get('children').forEach(function (subGroup, i) {\n      if (i === 0) edgeLegendSize.min = begin[0];\n      var keyShape = subGroup.get('children')[0];\n      var bbox = subGroup.getCanvasBBox();\n\n      var _a = keyShape.getBBox(),\n          keyShapeWidth = _a.width,\n          keyShapeHeight = _a.height;\n\n      var x = 0,\n          y = 0;\n\n      if (layout === 'vertical') {\n        x = begin[1];\n        y = begin[0];\n        begin[0] = y + bbox.height + vertiSep;\n        subGroup.setMatrix([1, 0, 0, 0, 1, 0, 0, y + keyShapeHeight / 2, 1]);\n      } else {\n        x = begin[0];\n        y = begin[1];\n        begin[0] = x + bbox.width + horiSep;\n        subGroup.setMatrix([1, 0, 0, 0, 1, 0, x + keyShapeWidth / 2, 0, 1]);\n      }\n\n      if (begin[0] > edgeLegendSize.max) edgeLegendSize.max = begin[0];\n    });\n    var ew = edgeLegendSize.max - edgeLegendSize.min;\n\n    if (align && align !== '' && align !== 'left') {\n      var widthDiff = nw - ew;\n      var movement_1 = align === 'center' ? Math.abs(widthDiff) / 2 : Math.abs(widthDiff);\n      var shouldAdjustGroup = widthDiff < 0 ? nodeGroup : edgeGroup;\n      shouldAdjustGroup.get('children').forEach(function (subGroup) {\n        var matrix = subGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n        if (layout === 'vertical') matrix[7] += movement_1;else matrix[6] += movement_1;\n        subGroup.setMatrix(matrix);\n      });\n    }\n  };\n\n  Legend.prototype.processData = function () {\n    var data = this.get('data');\n    var itemsData = {\n      nodes: [],\n      edges: []\n    };\n\n    if (data.nodes) {\n      data.nodes.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      data.nodes.forEach(function (node) {\n        var _a, _b, _c, _d, _e;\n\n        var size = node.size || [((_a = node.style) === null || _a === void 0 ? void 0 : _a.width) || ((_b = node.style) === null || _b === void 0 ? void 0 : _b.r) || 8, ((_c = node.style) === null || _c === void 0 ? void 0 : _c.height) || ((_d = node.style) === null || _d === void 0 ? void 0 : _d.r) || 8];\n        var labelStyle = ((_e = node.labelCfg) === null || _e === void 0 ? void 0 : _e.style) || {};\n        itemsData.nodes.push({\n          id: node.id || uniqueId(),\n          type: node.type || 'circle',\n          style: __assign({}, node.style),\n          order: node.order,\n          label: node.label,\n          itemType: 'node',\n          size: size,\n          labelCfg: {\n            position: 'right',\n            style: __assign({\n              fontFamily: \"Arial\"\n            }, labelStyle)\n          }\n        });\n      });\n    }\n\n    if (data.edges) {\n      data.edges.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      data.edges.forEach(function (edge) {\n        var _a, _b;\n\n        var type = edge.type || 'line';\n        if (edge.type === 'cubic-horizontal') type = 'cubic';\n        var labelStyle = ((_a = edge.labelCfg) === null || _a === void 0 ? void 0 : _a.style) || {};\n        var size = edge.size || [((_b = edge.style) === null || _b === void 0 ? void 0 : _b.width) || 8, 1];\n        itemsData.edges.push({\n          id: edge.id || uniqueId(),\n          type: type,\n          size: size,\n          style: __assign({\n            lineWidth: isArray(size) ? size[1] : 1\n          }, edge.style),\n          order: edge.order,\n          label: edge.label,\n          itemType: 'edge',\n          labelCfg: {\n            position: 'right',\n            style: __assign({\n              fontFamily: \"Arial\"\n            }, labelStyle)\n          }\n        });\n      });\n    }\n\n    this.set('itemsData', itemsData);\n  };\n\n  Legend.prototype.getContainer = function () {\n    return this.get('container');\n  };\n\n  Legend.prototype.formatArray = function (key) {\n    var value = this.get(key);\n    if (isNumber(value)) this.set(key, [value, value, value, value]);else if (isArray(value)) {\n      switch (value.length) {\n        case 0:\n          this.set(key, [0, 0, 0, 0]);\n          break;\n\n        case 1:\n          this.set(key, [value[0], value[0], value[0], value[0]]);\n          break;\n\n        case 2:\n          this.set(key, [value[0], value[1], value[0], value[1]]);\n          break;\n\n        case 3:\n          this.set(key, [value[0], value[1], value[2], value[1]]);\n          break;\n\n        default:\n          break;\n      }\n    }\n    return this.get(key);\n  };\n\n  Legend.prototype.getShapeSize = function (data) {\n    var width, height, r;\n\n    if (data.size) {\n      if (isArray(data.size)) {\n        width = data.size[0];\n        height = data.size[1] || data.size[0];\n        r = data.size[0] / 2;\n      } else if (isNumber(data.size)) {\n        width = data.size;\n        height = data.size;\n        r = data.size / 2;\n      }\n    }\n\n    if (data.style) {\n      if (data.style.width) width = data.style.width;\n      if (data.style.height) height = data.style.height;\n      if (data.style.r) r = data.style.r;\n    }\n\n    if (!r) r = 5;\n    if (!width) width = r;\n    if (!height) height = r;\n    return {\n      width: width,\n      height: height,\n      r: r\n    };\n  };\n\n  Legend.prototype.getStyle = function (type, data) {\n    var defaultStyle = type === 'node' ? {\n      fill: '#ccc',\n      lineWidth: 0\n    } : {\n      stroke: '#000',\n      lineWidth: 1\n    };\n    return __assign(__assign({}, defaultStyle), data.style || {});\n  };\n\n  Legend.prototype.destroy = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = this.get('container');\n    graphContainer.removeChild(container);\n  };\n\n  return Legend;\n}(Base);\n\nexport default Legend;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","modifyCSS","createDom","Base","isArray","isNumber","uniqueId","Util","Canvas","ALLOW_EVENTS","Legend","_super","config","getDefaultCfgs","data","position","padding","margin","offsetX","offsetY","layout","flipPage","containerStyle","align","undefined","horiSep","vertiSep","filter","enable","trigger","init","formatArray","get","multiple","set","positions","split","includes","graph","graphContainer","container","appendChild","size","render","getContainerPos","bindEvents","self","posIdxMap","x","y","containerCSS","left","getWidth","top","getHeight","forEach","pos","marginValue","key","getContainer","offsetTop","offsetLeft","keys","concat","console","warn","lc","on","e","filterData","clearFilter","clearActiveLegend","target","isCanvas","changeData","activateLegend","shape","shapeGroup","findLegendItemsByState","subGroup","stateStyles","legendStateStyles","legendInactive","inactive","opacity","legendTextInactive","_a","keyShape","text","attr","legendActive","active","stroke","lineWidth","fontWeight","legendTextActive","stateName","type","value","group","find","nodeGroup","edgeGroup","g","lg","groups","itemGroup","filterFunctions","activeState","graphActiveState","inactiveState","graphInactiveState","activeNodeLegend","activeEdgeLegend","activeCount","typeFuncs","typeFunc","graphItem","activeLegend","func","getModel","setItemState","clearItemStates","getNodes","node","getEdges","edge","_this","processData","width","height","clear","addGroup","name","itemsData","itemTypes","itemType","id","attrs","shapeType","_b","getShapeSize","r","style","getStyle","substr","r1","r2","x1","y1","x2","y2","path","addShape","oriAttrs","label","keyShapeBBox","getBBox","labelStyle","labelCfg","attrs_1","textAlign","fontSize","textBaseline","fill","maxX","className","titleShape","titleGroup","titleGroupBBox","maxY","defaultTitleStyle","fontFamily","titleConfig","getCanvasBBox","setMatrix","layoutItems","lcBBox","nodeGroupBBox","nodeGroupBeginX","minX","Math","abs","nodeGroupBeginY","minY","nodeGroupMatrix","titleGroupMatrix","getMatrix","edgeGroupMatrix_1","edgeGroupMatrix_2","edgeGroupMatrix","edgeGroupBBox","max","changeSize","viewportMatrix","beginPos","invertMatrix","backRect","capture","toBack","begin","nodeLegendSize","min","Infinity","rowMaxY","cNodeGroup","bbox","keyShapeWidth","keyShapeHeight","curHeight","nw","edgeLegendSize","ew","widthDiff","movement_1","shouldAdjustGroup","matrix","nodes","edges","sort","a","order","_c","_d","_e","push","defaultStyle","destroy","removeChild"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/legend/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport Base from '../base';\nimport { isArray, isNumber, uniqueId } from '@antv/util';\nimport { Util } from '@antv/g6-core';\nimport { Canvas } from '@antv/g-canvas';\nvar ALLOW_EVENTS = ['click', 'mouseenter'];\n\nvar Legend =\n/** @class */\nfunction (_super) {\n  __extends(Legend, _super);\n\n  function Legend(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Legend.prototype.getDefaultCfgs = function () {\n    return {\n      data: {},\n      position: 'top',\n      padding: 8,\n      margin: 8,\n      offsetX: 0,\n      offsetY: 0,\n      layout: 'horizontal',\n      flipPage: false,\n      containerStyle: {},\n      align: undefined,\n      horiSep: 8,\n      vertiSep: 8,\n      filter: {\n        enable: false,\n        trigger: 'click'\n      }\n    };\n  };\n\n  Legend.prototype.init = function () {\n    this.formatArray('padding');\n    this.formatArray('margin');\n    var filter = this.get('filter') || {};\n    var multiple = filter.multiple;\n    if (multiple && filter.trigger === 'mouseenter') this.set('multiple', false);\n    var align = this.get('align');\n\n    if (!align) {\n      var positions = this.get('position').split('-');\n      if (positions.includes('left')) align = 'left';\n      if (positions.includes('right')) align = 'right';else align = 'center';\n      this.set('align', align);\n    }\n\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = createDom(\"<div class='g6-legend-container' style=\\\"position: absolute;\\\"></div>\");\n    graphContainer.appendChild(container);\n    this.set('container', container);\n    var size = this.render();\n    modifyCSS(container, this.getContainerPos(size));\n    this.bindEvents();\n  };\n\n  Legend.prototype.getContainerPos = function (size) {\n    if (size === void 0) {\n      size = [0, 0];\n    }\n\n    var self = this;\n    var graph = self.get('graph');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    var margin = this.get('margin');\n    var positions = this.get('position').split('-');\n    var posIdxMap = {\n      'top': 0,\n      'right': 1,\n      'bottom': 2,\n      'left': 3\n    };\n    var x = 0,\n        y = 0;\n    var containerCSS = {\n      left: (graph.getWidth() - size[0]) / 2 + x,\n      top: (graph.getHeight() - size[1]) / 2 + y\n    };\n    positions.forEach(function (pos) {\n      var marginValue = margin[posIdxMap[pos]];\n      var key = pos;\n\n      switch (pos) {\n        case 'top':\n          marginValue += y;\n          break;\n\n        case 'left':\n          marginValue += x;\n          break;\n\n        case 'bottom':\n          marginValue = graph.getHeight() - size[1] - marginValue + y;\n          key = 'top';\n          break;\n\n        default:\n          marginValue = graph.getWidth() - size[0] - marginValue + x;\n          key = 'left';\n          break;\n      }\n\n      containerCSS[key] = marginValue;\n    });\n    containerCSS.top += offsetY + graph.getContainer().offsetTop;\n    containerCSS.left += offsetX + graph.getContainer().offsetLeft;\n    Object.keys(containerCSS).forEach(function (key) {\n      containerCSS[key] = \"\".concat(containerCSS[key], \"px\");\n    });\n    return containerCSS;\n  }; // class-methods-use-this\n\n\n  Legend.prototype.bindEvents = function () {\n    var self = this;\n    var filter = self.get('filter');\n    if (!filter || !filter.enable) return;\n    var trigger = filter.trigger || 'click';\n\n    if (!ALLOW_EVENTS.includes(trigger)) {\n      console.warn('Trigger for legend filterling must be \\'click\\' or \\'mouseenter\\', \\'click\\' will take effect by default.');\n      trigger = 'click';\n    }\n\n    var lc = self.get('legendCanvas');\n\n    if (trigger === 'mouseenter') {\n      lc.on('node-container:mouseenter', function (e) {\n        return self.filterData(e);\n      });\n      lc.on('node-container:mouseleave', function (e) {\n        self.clearFilter();\n        self.clearActiveLegend();\n      });\n    } else {\n      lc.on('node-container:click', function (e) {\n        return self.filterData(e);\n      });\n      lc.on('click', function (e) {\n        if (e.target && e.target.isCanvas && e.target.isCanvas()) {\n          self.clearFilter();\n          self.clearActiveLegend();\n        }\n      });\n    }\n  };\n  /**\n   * 更新 legend 数据，开放给用户控制\n   * @param param\n   */\n\n\n  Legend.prototype.changeData = function (data) {\n    this.set('data', data);\n    var size = this.render();\n    modifyCSS(this.get('container'), this.getContainerPos(size));\n  };\n\n  Legend.prototype.activateLegend = function (shape) {\n    var filter = this.get('filter');\n    var multiple = filter === null || filter === void 0 ? void 0 : filter.multiple;\n    if (!multiple) this.clearActiveLegend();\n    var shapeGroup = shape.get('parent'); // 若被高亮元素已经处于 active 状态，则取消它的 active 状态\n    // 并根据目前是否有其他 active 状态的元素决定是否要设置为 inactive 状态\n\n    if (shapeGroup.get('active')) {\n      shapeGroup.set('active', false);\n      if (this.findLegendItemsByState('active').length) shapeGroup.set('inactive', true);\n    } else {\n      shapeGroup.set('inactive', false);\n      shapeGroup.set('active', true);\n    } // 当目前有元素为 active 状态时，将非 active 的元素设置为 inactive\n\n\n    if (this.findLegendItemsByState('active').length) {\n      this.findLegendItemsByState('active', 'all', false).forEach(function (subGroup) {\n        subGroup.set('inactive', true);\n      });\n    } else {\n      this.clearActiveLegend();\n    } // 设置样式\n\n\n    var stateStyles = (filter === null || filter === void 0 ? void 0 : filter.legendStateStyles) || {};\n    var legendInactive = (stateStyles === null || stateStyles === void 0 ? void 0 : stateStyles.inactive) || {\n      opacity: 0.5,\n      'text-shape': {\n        opacity: 0.5\n      }\n    };\n    var legendTextInactive = legendInactive['text-shape'] || {};\n    this.findLegendItemsByState('inactive').forEach(function (subGroup) {\n      var _a = subGroup.get('children'),\n          keyShape = _a[0],\n          text = _a[1];\n\n      keyShape.attr(__assign(__assign({}, keyShape.get('oriAttrs')), legendInactive));\n      text.attr(__assign(__assign({}, text.get('oriAttrs')), legendTextInactive));\n    });\n    var legendActive = (stateStyles === null || stateStyles === void 0 ? void 0 : stateStyles.active) || {\n      stroke: '#000',\n      lineWidth: 2,\n      'text-shape': {\n        fontWeight: 'bold'\n      }\n    };\n    var legendTextActive = legendActive['text-shape'] || {};\n    this.findLegendItemsByState('active').forEach(function (subGroup) {\n      var _a = subGroup.get('children'),\n          keyShape = _a[0],\n          text = _a[1];\n\n      keyShape.attr(__assign(__assign({}, keyShape.get('oriAttrs')), legendActive));\n      text.attr(__assign(__assign({}, text.get('oriAttrs')), legendTextActive));\n    });\n  };\n\n  Legend.prototype.findLegendItemsByState = function (stateName, type, value) {\n    if (type === void 0) {\n      type = 'all';\n    }\n\n    if (value === void 0) {\n      value = true;\n    }\n\n    var group = this.get('legendCanvas').find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    if (type === 'node') return nodeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    });\n    if (type === 'edge') return edgeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    });\n    return nodeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    }).concat(edgeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    }));\n  };\n\n  Legend.prototype.clearActiveLegend = function () {\n    var lg = this.get('legendCanvas');\n    var group = lg.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var groups = [group.find(function (e) {\n      return e.get('name') === 'node-group';\n    }), group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    })];\n    groups.forEach(function (itemGroup) {\n      itemGroup.get('children').forEach(function (subGroup) {\n        subGroup.set('active', false);\n        subGroup.set('inactive', false);\n\n        var _a = subGroup.get('children'),\n            keyShape = _a[0],\n            text = _a[1];\n\n        keyShape.attr(keyShape.get('oriAttrs'));\n        text.attr(text.get('oriAttrs'));\n      });\n    });\n  };\n  /**\n   * 高亮和置灰图例，并过滤主图元素\n   * @param param\n   */\n\n\n  Legend.prototype.filterData = function (e) {\n    var filter = this.get('filter');\n    var filterFunctions = filter === null || filter === void 0 ? void 0 : filter.filterFunctions;\n    if (!filter || !filterFunctions) return;\n    var lc = this.get('legendCanvas');\n    var graph = this.get('graph');\n    var activeState = filter.graphActiveState || 'active';\n    var inactiveState = filter.graphInactiveState || 'inactive';\n    var multiple = filter.multiple;\n    this.clearFilter();\n    if (!multiple) this.clearActiveLegend(); // 设置 legend 的高亮状态\n\n    this.activateLegend(e.target);\n    var group = lc.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    var activeNodeLegend = nodeGroup.get('children').filter(function (e) {\n      return e.get('active');\n    });\n    var activeEdgeLegend = edgeGroup.get('children').filter(function (e) {\n      return e.get('active');\n    });\n    var activeCount = 0;\n    var typeFuncs = ['getNodes', 'getEdges'];\n    typeFuncs.forEach(function (typeFunc) {\n      graph[typeFunc]().forEach(function (graphItem) {\n        var active = false;\n        var activeLegend = typeFunc === 'getNodes' ? activeNodeLegend : activeEdgeLegend;\n        activeLegend.forEach(function (itemGroup) {\n          var func = filterFunctions[itemGroup.get('id')];\n          active = active || func(graphItem.getModel());\n        });\n\n        if (active) {\n          graph.setItemState(graphItem, inactiveState, false);\n          graph.setItemState(graphItem, activeState, true);\n          activeCount++;\n        } else {\n          graph.setItemState(graphItem, activeState, false);\n          graph.setItemState(graphItem, inactiveState, true);\n        }\n      });\n    });\n    if (!activeCount) typeFuncs.forEach(function (typeFunc) {\n      graph[typeFunc]().forEach(function (graphItem) {\n        graph.clearItemStates(graphItem, [inactiveState]);\n      });\n    });\n  };\n  /**\n   * 清除主图相关状态\n   * @param param\n   */\n\n\n  Legend.prototype.clearFilter = function () {\n    // 清除 legend 的高亮状态\n    var graph = this.get('graph');\n    var filter = this.get('filter');\n    if (!filter) return;\n    var activeState = filter.graphActiveState || 'active';\n    var inactiveState = filter.graphInactiveState || 'inactive';\n    graph.getNodes().forEach(function (node) {\n      graph.clearItemStates(node, [activeState, inactiveState]);\n    });\n    graph.getEdges().forEach(function (edge) {\n      graph.clearItemStates(edge, [activeState, inactiveState]);\n    });\n  };\n  /**\n   * 渲染 legend 图\n   * @param param\n   */\n\n\n  Legend.prototype.render = function () {\n    var _this = this;\n\n    this.processData();\n    var lc = this.get('legendCanvas');\n\n    if (!lc) {\n      lc = new Canvas({\n        container: this.get('container'),\n        width: 200,\n        height: 200\n      });\n    } else {\n      lc.clear();\n    }\n\n    var group = lc.addGroup({\n      name: 'root'\n    });\n    var nodeGroup = group.addGroup({\n      name: 'node-group'\n    });\n    var edgeGroup = group.addGroup({\n      name: 'edge-group'\n    });\n    this.set('legendCanvas', lc);\n    var itemsData = this.get('itemsData');\n    var itemTypes = ['nodes', 'edges'];\n    var itemGroup = [nodeGroup, edgeGroup];\n    itemTypes.forEach(function (itemType, i) {\n      itemsData[itemType].forEach(function (data) {\n        var _a;\n\n        var subGroup = itemGroup[i].addGroup({\n          id: data.id,\n          name: 'node-container'\n        });\n        var attrs;\n        var shapeType = data.type;\n\n        var _b = _this.getShapeSize(data),\n            width = _b.width,\n            height = _b.height,\n            r = _b.r;\n\n        var style = _this.getStyle(itemType.substr(0, 4), data);\n\n        switch (data.type) {\n          case 'circle':\n            attrs = {\n              r: r,\n              x: 0,\n              y: 0\n            };\n            break;\n\n          case 'rect':\n            attrs = {\n              width: width,\n              height: height,\n              x: -width / 2,\n              y: -height / 2\n            };\n            break;\n\n          case 'ellipse':\n            attrs = {\n              r1: width,\n              r2: height,\n              x: 0,\n              y: 0\n            };\n            break;\n\n          case 'line':\n            attrs = {\n              x1: -width / 2,\n              y1: 0,\n              x2: width / 2,\n              y2: 0\n            };\n            shapeType = 'line';\n            break;\n\n          case 'quadratic':\n            attrs = {\n              path: [['M', -width / 2, 0], ['Q', 0, width / 2, width / 2, 0]]\n            };\n            shapeType = 'path';\n            break;\n\n          case 'cubic':\n            attrs = {\n              path: [['M', -width / 2, 0], ['C', -width / 6, width / 2, width / 6, -width / 2, width / 2, 0]]\n            };\n            shapeType = 'path';\n            break;\n\n          default:\n            attrs = {\n              r: r,\n              x: 0,\n              y: 0\n            };\n            break;\n        }\n\n        var keyShape = subGroup.addShape(shapeType, {\n          attrs: __assign(__assign({}, attrs), style),\n          name: \"\".concat(data.type, \"-node-keyShape\"),\n          oriAttrs: __assign({\n            opacity: 1\n          }, style)\n        });\n\n        if (data.label) {\n          var keyShapeBBox = keyShape.getBBox();\n          var labelStyle = ((_a = data.labelCfg) === null || _a === void 0 ? void 0 : _a.style) || {};\n\n          var attrs_1 = __assign({\n            textAlign: 'begin',\n            fontSize: 12,\n            textBaseline: 'middle',\n            fill: '#000',\n            opacity: 1,\n            fontWeight: 'normal'\n          }, labelStyle);\n\n          subGroup.addShape('text', {\n            attrs: __assign({\n              x: keyShapeBBox.maxX + 4,\n              y: 0,\n              text: data.label\n            }, attrs_1),\n            className: 'legend-label',\n            name: \"\".concat(data.type, \"-node-text\"),\n            oriAttrs: attrs_1\n          });\n        }\n      });\n    });\n    var padding = this.get('padding');\n    var titleShape;\n    var titleGroup = group.find(function (e) {\n      return e.get('name') === 'title-container';\n    });\n    var titleGroupBBox = {\n      height: 0,\n      maxY: 0,\n      width: 0\n    };\n\n    if (this.get('title')) {\n      if (!titleGroup) {\n        titleGroup = group.addGroup({\n          name: 'title-container'\n        });\n      }\n\n      var defaultTitleStyle = {\n        fontSize: 20,\n        fontFamily: 'Arial',\n        fontWeight: 300,\n        textBaseline: 'top',\n        textAlign: 'center',\n        fill: \"#000\",\n        x: 0,\n        y: padding[0]\n      };\n      var titleConfig = this.get('titleConfig') || {};\n      var style = Object.assign(defaultTitleStyle, titleConfig.style || {});\n      titleShape = titleGroup.addShape('text', {\n        attrs: __assign({\n          text: this.get('title')\n        }, style)\n      });\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      titleGroup.setMatrix([1, 0, 0, 0, 1, 0, titleConfig.offsetX, titleConfig.offsetY, 1]);\n    }\n\n    this.layoutItems();\n    var lcBBox = group.getCanvasBBox();\n    var nodeGroupBBox = nodeGroup.getCanvasBBox(); // 若有图形超过边界的情况，平移回来\n\n    var nodeGroupBeginX = nodeGroupBBox.minX < 0 ? Math.abs(nodeGroupBBox.minX) + padding[3] : padding[3];\n    var nodeGroupBeginY = titleGroupBBox.maxY < nodeGroupBBox.minY ? Math.abs(titleGroupBBox.maxY - nodeGroupBBox.minY) + padding[0] : titleGroupBBox.maxY + padding[0];\n    var nodeGroupMatrix = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n    nodeGroup.setMatrix(nodeGroupMatrix);\n    lcBBox = group.getCanvasBBox();\n    var size = [lcBBox.minX + lcBBox.width + padding[1], lcBBox.minY + lcBBox.height + padding[2]]; // 根据 size 和 titleConfig 调整 title 位置，再调整 nodeGroup 位置\n\n    if (titleShape) {\n      var titleConfig = __assign({\n        position: 'center',\n        offsetX: 0,\n        offsetY: 0\n      }, this.get('titleConfig'));\n\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      var titleGroupMatrix = titleGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n\n      if (titleConfig.position === 'center') {\n        titleGroupMatrix[6] = size[0] / 2 + titleConfig.offsetX;\n      } else if (titleConfig.position === 'right') {\n        titleGroupMatrix[6] = size[0] - padding[3] + titleConfig.offsetX;\n        titleShape.attr({\n          textAlign: 'right'\n        });\n      } else {\n        titleGroupMatrix[6] = padding[3] + titleConfig.offsetX;\n        titleShape.attr({\n          textAlign: 'left'\n        });\n      }\n\n      titleGroup.setMatrix(titleGroupMatrix);\n      titleGroupBBox = titleGroup.getCanvasBBox(); // 若有图形超过边界的情况，平移回来\n\n      nodeGroupBeginX = nodeGroupBBox.minX < 0 ? Math.abs(nodeGroupBBox.minX) + padding[3] : padding[3];\n      nodeGroupBeginY = nodeGroupBBox.minY < titleGroupBBox.maxY ? Math.abs(titleGroupBBox.maxY - nodeGroupBBox.minY) + padding[0] : titleGroupBBox.maxY + padding[0];\n      nodeGroupMatrix = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n      nodeGroup.setMatrix(nodeGroupMatrix);\n      var edgeGroupMatrix_1 = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n      if (this.get('layout') === 'vertical') edgeGroupMatrix_1[6] += nodeGroupBBox.maxX + this.get('horiSep');else edgeGroupMatrix_1[7] += nodeGroupBBox.maxY + this.get('vertiSep');\n      edgeGroup.setMatrix(edgeGroupMatrix_1);\n    } else {\n      // 没有 title，也需要平移 edgeGroup\n      nodeGroupBBox = nodeGroup.getCanvasBBox();\n      var edgeGroupMatrix_2 = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      if (this.get('layout') === 'vertical') edgeGroupMatrix_2[6] += nodeGroupMatrix[6] + nodeGroupBBox.maxX + this.get('horiSep');else edgeGroupMatrix_2[7] += nodeGroupMatrix[7] + nodeGroupBBox.maxY + this.get('vertiSep');\n      edgeGroup.setMatrix(edgeGroupMatrix_2);\n    }\n\n    lcBBox = group.getCanvasBBox();\n    nodeGroupBBox = nodeGroup.getCanvasBBox();\n    nodeGroupMatrix = nodeGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var edgeGroupMatrix = edgeGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var edgeGroupBBox = edgeGroup.getCanvasBBox();\n    size = [Math.max(nodeGroupBBox.width + nodeGroupMatrix[6], edgeGroupBBox.width + edgeGroupMatrix[6]) + padding[1], Math.max(nodeGroupBBox.height + nodeGroupMatrix[7], edgeGroupBBox.height + edgeGroupMatrix[7]) + padding[2]];\n    lc.changeSize(size[0], size[1]); // 更新容器背景样式\n\n    var containerStyle = this.get('containerStyle');\n    var viewportMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var beginPos = Util.invertMatrix({\n      x: 0,\n      y: 0\n    }, viewportMatrix);\n    var backRect = group.addShape('rect', {\n      attrs: __assign({\n        x: beginPos.x + (containerStyle.lineWidth || 1),\n        y: beginPos.y + (containerStyle.lineWidth || 1),\n        width: size[0] - 2 * (containerStyle.lineWidth || 1),\n        height: size[1] - 2 * (containerStyle.lineWidth || 1),\n        fill: \"#f00\",\n        stroke: '#000',\n        lineWidth: 1,\n        opacity: 0.5\n      }, containerStyle),\n      name: 'legend-back-rect',\n      capture: false\n    });\n    backRect.toBack();\n    return size;\n  };\n\n  Legend.prototype.layoutItems = function () {\n    var lc = this.get('legendCanvas');\n    var horiSep = this.get('horiSep');\n    var vertiSep = this.get('vertiSep');\n    var layout = this.get('layout');\n    var align = this.get('align');\n    var begin = [0, 0];\n    var group = lc.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    var nodeLegendSize = {\n      min: 0,\n      max: -Infinity\n    };\n    var rowMaxY = -Infinity;\n    nodeGroup.get('children').forEach(function (cNodeGroup, i) {\n      if (i === 0) nodeLegendSize.min = begin[0];\n      var keyShape = cNodeGroup.get('children')[0];\n      var bbox = cNodeGroup.getCanvasBBox();\n\n      var _a = keyShape.getBBox(),\n          keyShapeWidth = _a.width,\n          keyShapeHeight = _a.height;\n\n      var curHeight = 0,\n          x = 0,\n          y = 0;\n\n      if (layout === 'vertical') {\n        x = begin[1];\n        y = begin[0] + keyShapeWidth / 2;\n        begin[0] = y + bbox.height + vertiSep;\n        curHeight = bbox.maxX + x + keyShapeWidth / 2;\n      } else {\n        x = begin[0] + keyShapeWidth / 2;\n        y = begin[1];\n        begin[0] = x + bbox.width + horiSep;\n        curHeight = bbox.maxY + y + keyShapeHeight / 2;\n      }\n\n      if (begin[0] > nodeLegendSize.max) nodeLegendSize.max = begin[0];\n      if (curHeight > rowMaxY) rowMaxY = curHeight;\n      cNodeGroup.setMatrix([1, 0, 0, 0, 1, 0, x, y, 1]);\n    });\n    var nw = nodeLegendSize.max - nodeLegendSize.min;\n    var edgeLegendSize = {\n      min: 0,\n      max: -Infinity\n    };\n    var nodeGroupBBox = nodeGroup.getCanvasBBox();\n    begin[0] = 0;\n    begin[1] = layout === 'vertical' ? nodeGroupBBox.maxX + horiSep : nodeGroupBBox.maxY + vertiSep;\n    edgeGroup.get('children').forEach(function (subGroup, i) {\n      if (i === 0) edgeLegendSize.min = begin[0];\n      var keyShape = subGroup.get('children')[0];\n      var bbox = subGroup.getCanvasBBox();\n\n      var _a = keyShape.getBBox(),\n          keyShapeWidth = _a.width,\n          keyShapeHeight = _a.height;\n\n      var x = 0,\n          y = 0;\n\n      if (layout === 'vertical') {\n        x = begin[1];\n        y = begin[0];\n        begin[0] = y + bbox.height + vertiSep;\n        subGroup.setMatrix([1, 0, 0, 0, 1, 0, 0, y + keyShapeHeight / 2, 1]);\n      } else {\n        x = begin[0];\n        y = begin[1];\n        begin[0] = x + bbox.width + horiSep;\n        subGroup.setMatrix([1, 0, 0, 0, 1, 0, x + keyShapeWidth / 2, 0, 1]);\n      }\n\n      if (begin[0] > edgeLegendSize.max) edgeLegendSize.max = begin[0];\n    });\n    var ew = edgeLegendSize.max - edgeLegendSize.min;\n\n    if (align && align !== '' && align !== 'left') {\n      var widthDiff = nw - ew;\n      var movement_1 = align === 'center' ? Math.abs(widthDiff) / 2 : Math.abs(widthDiff);\n      var shouldAdjustGroup = widthDiff < 0 ? nodeGroup : edgeGroup;\n      shouldAdjustGroup.get('children').forEach(function (subGroup) {\n        var matrix = subGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n        if (layout === 'vertical') matrix[7] += movement_1;else matrix[6] += movement_1;\n        subGroup.setMatrix(matrix);\n      });\n    }\n  };\n\n  Legend.prototype.processData = function () {\n    var data = this.get('data');\n    var itemsData = {\n      nodes: [],\n      edges: []\n    };\n\n    if (data.nodes) {\n      data.nodes.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      data.nodes.forEach(function (node) {\n        var _a, _b, _c, _d, _e;\n\n        var size = node.size || [((_a = node.style) === null || _a === void 0 ? void 0 : _a.width) || ((_b = node.style) === null || _b === void 0 ? void 0 : _b.r) || 8, ((_c = node.style) === null || _c === void 0 ? void 0 : _c.height) || ((_d = node.style) === null || _d === void 0 ? void 0 : _d.r) || 8];\n        var labelStyle = ((_e = node.labelCfg) === null || _e === void 0 ? void 0 : _e.style) || {};\n        itemsData.nodes.push({\n          id: node.id || uniqueId(),\n          type: node.type || 'circle',\n          style: __assign({}, node.style),\n          order: node.order,\n          label: node.label,\n          itemType: 'node',\n          size: size,\n          labelCfg: {\n            position: 'right',\n            style: __assign({\n              fontFamily: \"Arial\"\n            }, labelStyle)\n          }\n        });\n      });\n    }\n\n    if (data.edges) {\n      data.edges.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      data.edges.forEach(function (edge) {\n        var _a, _b;\n\n        var type = edge.type || 'line';\n        if (edge.type === 'cubic-horizontal') type = 'cubic';\n        var labelStyle = ((_a = edge.labelCfg) === null || _a === void 0 ? void 0 : _a.style) || {};\n        var size = edge.size || [((_b = edge.style) === null || _b === void 0 ? void 0 : _b.width) || 8, 1];\n        itemsData.edges.push({\n          id: edge.id || uniqueId(),\n          type: type,\n          size: size,\n          style: __assign({\n            lineWidth: isArray(size) ? size[1] : 1\n          }, edge.style),\n          order: edge.order,\n          label: edge.label,\n          itemType: 'edge',\n          labelCfg: {\n            position: 'right',\n            style: __assign({\n              fontFamily: \"Arial\"\n            }, labelStyle)\n          }\n        });\n      });\n    }\n\n    this.set('itemsData', itemsData);\n  };\n\n  Legend.prototype.getContainer = function () {\n    return this.get('container');\n  };\n\n  Legend.prototype.formatArray = function (key) {\n    var value = this.get(key);\n    if (isNumber(value)) this.set(key, [value, value, value, value]);else if (isArray(value)) {\n      switch (value.length) {\n        case 0:\n          this.set(key, [0, 0, 0, 0]);\n          break;\n\n        case 1:\n          this.set(key, [value[0], value[0], value[0], value[0]]);\n          break;\n\n        case 2:\n          this.set(key, [value[0], value[1], value[0], value[1]]);\n          break;\n\n        case 3:\n          this.set(key, [value[0], value[1], value[2], value[1]]);\n          break;\n\n        default:\n          break;\n      }\n    }\n    return this.get(key);\n  };\n\n  Legend.prototype.getShapeSize = function (data) {\n    var width, height, r;\n\n    if (data.size) {\n      if (isArray(data.size)) {\n        width = data.size[0];\n        height = data.size[1] || data.size[0];\n        r = data.size[0] / 2;\n      } else if (isNumber(data.size)) {\n        width = data.size;\n        height = data.size;\n        r = data.size / 2;\n      }\n    }\n\n    if (data.style) {\n      if (data.style.width) width = data.style.width;\n      if (data.style.height) height = data.style.height;\n      if (data.style.r) r = data.style.r;\n    }\n\n    if (!r) r = 5;\n    if (!width) width = r;\n    if (!height) height = r;\n    return {\n      width: width,\n      height: height,\n      r: r\n    };\n  };\n\n  Legend.prototype.getStyle = function (type, data) {\n    var defaultStyle = type === 'node' ? {\n      fill: '#ccc',\n      lineWidth: 0\n    } : {\n      stroke: '#000',\n      lineWidth: 1\n    };\n    return __assign(__assign({}, defaultStyle), data.style || {});\n  };\n\n  Legend.prototype.destroy = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = this.get('container');\n    graphContainer.removeChild(container);\n  };\n\n  return Legend;\n}(Base);\n\nexport default Legend;"],"mappings":"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"},"metadata":{},"sourceType":"module"}