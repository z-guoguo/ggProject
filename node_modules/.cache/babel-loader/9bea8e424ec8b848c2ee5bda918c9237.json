{"ast":null,"code":"import { each, isArray } from '@antv/util';\nvar SPACES = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\nvar PATH_COMMAND = new RegExp(\"([a-z])[\" + SPACES + \",]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[\" + SPACES + \"]*,?[\" + SPACES + \"]*)+)\", 'ig');\nvar PATH_VALUES = new RegExp(\"(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[\" + SPACES + \"]*,?[\" + SPACES + \"]*\", 'ig'); // Parse given path string into an array of arrays of path segments\n\nvar parsePathString = function (pathString) {\n  if (!pathString) {\n    return null;\n  }\n\n  if (isArray(pathString)) {\n    return pathString;\n  }\n\n  var paramCounts = {\n    a: 7,\n    c: 6,\n    o: 2,\n    h: 1,\n    l: 2,\n    m: 2,\n    r: 4,\n    q: 4,\n    s: 4,\n    t: 2,\n    v: 1,\n    u: 3,\n    z: 0\n  };\n  var data = [];\n  String(pathString).replace(PATH_COMMAND, function (a, b, c) {\n    var params = [];\n    var name = b.toLowerCase();\n    c.replace(PATH_VALUES, function (a, b) {\n      b && params.push(+b);\n    });\n\n    if (name === 'm' && params.length > 2) {\n      data.push([b].concat(params.splice(0, 2)));\n      name = 'l';\n      b = b === 'm' ? 'l' : 'L';\n    }\n\n    if (name === 'o' && params.length === 1) {\n      data.push([b, params[0]]);\n    }\n\n    if (name === 'r') {\n      data.push([b].concat(params));\n    } else {\n      while (params.length >= paramCounts[name]) {\n        data.push([b].concat(params.splice(0, paramCounts[name])));\n\n        if (!paramCounts[name]) {\n          break;\n        }\n      }\n    }\n\n    return pathString;\n  });\n  return data;\n}; // http://schepers.cc/getting-to-the-point\n\n\nvar catmullRomToBezier = function (crp, z) {\n  var d = []; // @ts-ignore\n\n  for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\n    var p = [{\n      x: +crp[i - 2],\n      y: +crp[i - 1]\n    }, {\n      x: +crp[i],\n      y: +crp[i + 1]\n    }, {\n      x: +crp[i + 2],\n      y: +crp[i + 3]\n    }, {\n      x: +crp[i + 4],\n      y: +crp[i + 5]\n    }];\n\n    if (z) {\n      if (!i) {\n        p[0] = {\n          x: +crp[iLen - 2],\n          y: +crp[iLen - 1]\n        };\n      } else if (iLen - 4 === i) {\n        p[3] = {\n          x: +crp[0],\n          y: +crp[1]\n        };\n      } else if (iLen - 2 === i) {\n        p[2] = {\n          x: +crp[0],\n          y: +crp[1]\n        };\n        p[3] = {\n          x: +crp[2],\n          y: +crp[3]\n        };\n      }\n    } else {\n      if (iLen - 4 === i) {\n        p[3] = p[2];\n      } else if (!i) {\n        p[0] = {\n          x: +crp[i],\n          y: +crp[i + 1]\n        };\n      }\n    }\n\n    d.push(['C', (-p[0].x + 6 * p[1].x + p[2].x) / 6, (-p[0].y + 6 * p[1].y + p[2].y) / 6, (p[1].x + 6 * p[2].x - p[3].x) / 6, (p[1].y + 6 * p[2].y - p[3].y) / 6, p[2].x, p[2].y]);\n  }\n\n  return d;\n};\n\nvar ellipsePath = function (x, y, rx, ry, a) {\n  var res = [];\n\n  if (a === null && ry === null) {\n    ry = rx;\n  }\n\n  x = +x;\n  y = +y;\n  rx = +rx;\n  ry = +ry;\n\n  if (a !== null) {\n    var rad = Math.PI / 180;\n    var x1 = x + rx * Math.cos(-ry * rad);\n    var x2 = x + rx * Math.cos(-a * rad);\n    var y1 = y + rx * Math.sin(-ry * rad);\n    var y2 = y + rx * Math.sin(-a * rad);\n    res = [['M', x1, y1], ['A', rx, rx, 0, +(a - ry > 180), 0, x2, y2]];\n  } else {\n    res = [['M', x, y], ['m', 0, -ry], ['a', rx, ry, 0, 1, 1, 0, 2 * ry], ['a', rx, ry, 0, 1, 1, 0, -2 * ry], ['z']];\n  }\n\n  return res;\n};\n\nvar pathToAbsolute = function (pathArray) {\n  pathArray = parsePathString(pathArray);\n\n  if (!pathArray || !pathArray.length) {\n    return [['M', 0, 0]];\n  }\n\n  var res = [];\n  var x = 0;\n  var y = 0;\n  var mx = 0;\n  var my = 0;\n  var start = 0;\n  var pa0;\n  var dots;\n\n  if (pathArray[0][0] === 'M') {\n    x = +pathArray[0][1];\n    y = +pathArray[0][2];\n    mx = x;\n    my = y;\n    start++;\n    res[0] = ['M', x, y];\n  }\n\n  var crz = pathArray.length === 3 && pathArray[0][0] === 'M' && pathArray[1][0].toUpperCase() === 'R' && pathArray[2][0].toUpperCase() === 'Z';\n\n  for (var r = void 0, pa = void 0, i = start, ii = pathArray.length; i < ii; i++) {\n    res.push(r = []);\n    pa = pathArray[i];\n    pa0 = pa[0];\n\n    if (pa0 !== pa0.toUpperCase()) {\n      r[0] = pa0.toUpperCase();\n\n      switch (r[0]) {\n        case 'A':\n          r[1] = pa[1];\n          r[2] = pa[2];\n          r[3] = pa[3];\n          r[4] = pa[4];\n          r[5] = pa[5];\n          r[6] = +pa[6] + x;\n          r[7] = +pa[7] + y;\n          break;\n\n        case 'V':\n          r[1] = +pa[1] + y;\n          break;\n\n        case 'H':\n          r[1] = +pa[1] + x;\n          break;\n\n        case 'R':\n          dots = [x, y].concat(pa.slice(1));\n\n          for (var j = 2, jj = dots.length; j < jj; j++) {\n            dots[j] = +dots[j] + x;\n            dots[++j] = +dots[j] + y;\n          }\n\n          res.pop();\n          res = res.concat(catmullRomToBezier(dots, crz));\n          break;\n\n        case 'O':\n          res.pop();\n          dots = ellipsePath(x, y, pa[1], pa[2]);\n          dots.push(dots[0]);\n          res = res.concat(dots);\n          break;\n\n        case 'U':\n          res.pop();\n          res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));\n          r = ['U'].concat(res[res.length - 1].slice(-2));\n          break;\n\n        case 'M':\n          mx = +pa[1] + x;\n          my = +pa[2] + y;\n          break;\n        // for lint\n\n        default:\n          for (var j = 1, jj = pa.length; j < jj; j++) {\n            r[j] = +pa[j] + (j % 2 ? x : y);\n          }\n\n      }\n    } else if (pa0 === 'R') {\n      dots = [x, y].concat(pa.slice(1));\n      res.pop();\n      res = res.concat(catmullRomToBezier(dots, crz));\n      r = ['R'].concat(pa.slice(-2));\n    } else if (pa0 === 'O') {\n      res.pop();\n      dots = ellipsePath(x, y, pa[1], pa[2]);\n      dots.push(dots[0]);\n      res = res.concat(dots);\n    } else if (pa0 === 'U') {\n      res.pop();\n      res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));\n      r = ['U'].concat(res[res.length - 1].slice(-2));\n    } else {\n      for (var k = 0, kk = pa.length; k < kk; k++) {\n        r[k] = pa[k];\n      }\n    }\n\n    pa0 = pa0.toUpperCase();\n\n    if (pa0 !== 'O') {\n      switch (r[0]) {\n        case 'Z':\n          x = +mx;\n          y = +my;\n          break;\n\n        case 'H':\n          x = r[1];\n          break;\n\n        case 'V':\n          y = r[1];\n          break;\n\n        case 'M':\n          mx = r[r.length - 2];\n          my = r[r.length - 1];\n          break;\n        // for lint\n\n        default:\n          x = r[r.length - 2];\n          y = r[r.length - 1];\n      }\n    }\n  }\n\n  return res;\n};\n\nvar l2c = function (x1, y1, x2, y2) {\n  return [x1, y1, x2, y2, x2, y2];\n};\n\nvar q2c = function (x1, y1, ax, ay, x2, y2) {\n  var _13 = 1 / 3;\n\n  var _23 = 2 / 3;\n\n  return [_13 * x1 + _23 * ax, _13 * y1 + _23 * ay, _13 * x2 + _23 * ax, _13 * y2 + _23 * ay, x2, y2];\n};\n\nvar a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n  // for more information of where this math came from visit:\n  // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n  if (rx === ry) {\n    rx += 1;\n  }\n\n  var _120 = Math.PI * 120 / 180;\n\n  var rad = Math.PI / 180 * (+angle || 0);\n  var res = [];\n  var xy;\n  var f1;\n  var f2;\n  var cx;\n  var cy;\n\n  var rotate = function (x, y, rad) {\n    var X = x * Math.cos(rad) - y * Math.sin(rad);\n    var Y = x * Math.sin(rad) + y * Math.cos(rad);\n    return {\n      x: X,\n      y: Y\n    };\n  };\n\n  if (!recursive) {\n    xy = rotate(x1, y1, -rad);\n    x1 = xy.x;\n    y1 = xy.y;\n    xy = rotate(x2, y2, -rad);\n    x2 = xy.x;\n    y2 = xy.y;\n\n    if (x1 === x2 && y1 === y2) {\n      // 若弧的起始点和终点重叠则错开一点\n      x2 += 1;\n      y2 += 1;\n    } // const cos = Math.cos(Math.PI / 180 * angle);\n    // const sin = Math.sin(Math.PI / 180 * angle);\n\n\n    var x = (x1 - x2) / 2;\n    var y = (y1 - y2) / 2;\n    var h = x * x / (rx * rx) + y * y / (ry * ry);\n\n    if (h > 1) {\n      h = Math.sqrt(h);\n      rx = h * rx;\n      ry = h * ry;\n    }\n\n    var rx2 = rx * rx;\n    var ry2 = ry * ry;\n    var k = (large_arc_flag === sweep_flag ? -1 : 1) * Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n    cx = k * rx * y / ry + (x1 + x2) / 2;\n    cy = k * -ry * x / rx + (y1 + y2) / 2; // @ts-ignore\n\n    f1 = Math.asin(((y1 - cy) / ry).toFixed(9)); // @ts-ignore\n\n    f2 = Math.asin(((y2 - cy) / ry).toFixed(9));\n    f1 = x1 < cx ? Math.PI - f1 : f1;\n    f2 = x2 < cx ? Math.PI - f2 : f2;\n    f1 < 0 && (f1 = Math.PI * 2 + f1);\n    f2 < 0 && (f2 = Math.PI * 2 + f2);\n\n    if (sweep_flag && f1 > f2) {\n      f1 = f1 - Math.PI * 2;\n    }\n\n    if (!sweep_flag && f2 > f1) {\n      f2 = f2 - Math.PI * 2;\n    }\n  } else {\n    f1 = recursive[0];\n    f2 = recursive[1];\n    cx = recursive[2];\n    cy = recursive[3];\n  }\n\n  var df = f2 - f1;\n\n  if (Math.abs(df) > _120) {\n    var f2old = f2;\n    var x2old = x2;\n    var y2old = y2;\n    f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n    x2 = cx + rx * Math.cos(f2);\n    y2 = cy + ry * Math.sin(f2);\n    res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n  }\n\n  df = f2 - f1;\n  var c1 = Math.cos(f1);\n  var s1 = Math.sin(f1);\n  var c2 = Math.cos(f2);\n  var s2 = Math.sin(f2);\n  var t = Math.tan(df / 4);\n  var hx = 4 / 3 * rx * t;\n  var hy = 4 / 3 * ry * t;\n  var m1 = [x1, y1];\n  var m2 = [x1 + hx * s1, y1 - hy * c1];\n  var m3 = [x2 + hx * s2, y2 - hy * c2];\n  var m4 = [x2, y2];\n  m2[0] = 2 * m1[0] - m2[0];\n  m2[1] = 2 * m1[1] - m2[1];\n\n  if (recursive) {\n    return [m2, m3, m4].concat(res);\n  }\n\n  res = [m2, m3, m4].concat(res).join().split(',');\n  var newres = [];\n\n  for (var i = 0, ii = res.length; i < ii; i++) {\n    newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n  }\n\n  return newres;\n};\n\nvar pathToCurve = function (path, path2) {\n  var p = pathToAbsolute(path);\n  var p2 = path2 && pathToAbsolute(path2);\n  var attrs = {\n    x: 0,\n    y: 0,\n    bx: 0,\n    by: 0,\n    X: 0,\n    Y: 0,\n    qx: null,\n    qy: null\n  };\n  var attrs2 = {\n    x: 0,\n    y: 0,\n    bx: 0,\n    by: 0,\n    X: 0,\n    Y: 0,\n    qx: null,\n    qy: null\n  };\n  var pcoms1 = []; // path commands of original path p\n\n  var pcoms2 = []; // path commands of original path p2\n\n  var pfirst = ''; // temporary holder for original path command\n\n  var pcom = ''; // holder for previous path command of original path\n\n  var ii;\n\n  var processPath = function (path, d, pcom) {\n    var nx;\n    var ny;\n\n    if (!path) {\n      return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n    }\n\n    !(path[0] in {\n      T: 1,\n      Q: 1\n    }) && (d.qx = d.qy = null);\n\n    switch (path[0]) {\n      case 'M':\n        d.X = path[1];\n        d.Y = path[2];\n        break;\n\n      case 'A':\n        path = ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n        break;\n\n      case 'S':\n        if (pcom === 'C' || pcom === 'S') {\n          // In \"S\" case we have to take into account, if the previous command is C/S.\n          nx = d.x * 2 - d.bx; // And reflect the previous\n\n          ny = d.y * 2 - d.by; // command's control point relative to the current point.\n        } else {\n          // or some else or nothing\n          nx = d.x;\n          ny = d.y;\n        }\n\n        path = ['C', nx, ny].concat(path.slice(1));\n        break;\n\n      case 'T':\n        if (pcom === 'Q' || pcom === 'T') {\n          // In \"T\" case we have to take into account, if the previous command is Q/T.\n          d.qx = d.x * 2 - d.qx; // And make a reflection similar\n\n          d.qy = d.y * 2 - d.qy; // to case \"S\".\n        } else {\n          // or something else or nothing\n          d.qx = d.x;\n          d.qy = d.y;\n        }\n\n        path = ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n        break;\n\n      case 'Q':\n        d.qx = path[1];\n        d.qy = path[2];\n        path = ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n        break;\n\n      case 'L':\n        path = ['C'].concat(l2c(d.x, d.y, path[1], path[2]));\n        break;\n\n      case 'H':\n        path = ['C'].concat(l2c(d.x, d.y, path[1], d.y));\n        break;\n\n      case 'V':\n        path = ['C'].concat(l2c(d.x, d.y, d.x, path[1]));\n        break;\n\n      case 'Z':\n        path = ['C'].concat(l2c(d.x, d.y, d.X, d.Y));\n        break;\n\n      default:\n        break;\n    }\n\n    return path;\n  };\n\n  var fixArc = function (pp, i) {\n    if (pp[i].length > 7) {\n      pp[i].shift();\n      var pi = pp[i];\n\n      while (pi.length) {\n        pcoms1[i] = 'A'; // if created multiple C:s, their original seg is saved\n\n        p2 && (pcoms2[i] = 'A'); // the same as above\n\n        pp.splice(i++, 0, ['C'].concat(pi.splice(0, 6)));\n      }\n\n      pp.splice(i, 1);\n      ii = Math.max(p.length, p2 && p2.length || 0);\n    }\n  };\n\n  var fixM = function (path1, path2, a1, a2, i) {\n    if (path1 && path2 && path1[i][0] === 'M' && path2[i][0] !== 'M') {\n      path2.splice(i, 0, ['M', a2.x, a2.y]);\n      a1.bx = 0;\n      a1.by = 0;\n      a1.x = path1[i][1];\n      a1.y = path1[i][2];\n      ii = Math.max(p.length, p2 && p2.length || 0);\n    }\n  };\n\n  ii = Math.max(p.length, p2 && p2.length || 0);\n\n  for (var i = 0; i < ii; i++) {\n    p[i] && (pfirst = p[i][0]); // save current path command\n\n    if (pfirst !== 'C') {\n      // C is not saved yet, because it may be result of conversion\n      pcoms1[i] = pfirst; // Save current path command\n\n      i && (pcom = pcoms1[i - 1]); // Get previous path command pcom\n    }\n\n    p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\n\n    if (pcoms1[i] !== 'A' && pfirst === 'C') pcoms1[i] = 'C'; // A is the only command\n    // which may produce multiple C:s\n    // so we have to make sure that C is also C in original path\n\n    fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1\n\n    if (p2) {\n      // the same procedures is done to p2\n      p2[i] && (pfirst = p2[i][0]);\n\n      if (pfirst !== 'C') {\n        pcoms2[i] = pfirst;\n        i && (pcom = pcoms2[i - 1]);\n      }\n\n      p2[i] = processPath(p2[i], attrs2, pcom);\n\n      if (pcoms2[i] !== 'A' && pfirst === 'C') {\n        pcoms2[i] = 'C';\n      }\n\n      fixArc(p2, i);\n    }\n\n    fixM(p, p2, attrs, attrs2, i);\n    fixM(p2, p, attrs2, attrs, i);\n    var seg = p[i];\n    var seg2 = p2 && p2[i];\n    var seglen = seg.length;\n    var seg2len = p2 && seg2.length;\n    attrs.x = seg[seglen - 2];\n    attrs.y = seg[seglen - 1];\n    attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n    attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n    attrs2.bx = p2 && (parseFloat(seg2[seg2len - 4]) || attrs2.x);\n    attrs2.by = p2 && (parseFloat(seg2[seg2len - 3]) || attrs2.y);\n    attrs2.x = p2 && seg2[seg2len - 2];\n    attrs2.y = p2 && seg2[seg2len - 1];\n  }\n\n  return p2 ? [p, p2] : p;\n};\n\nvar p2s = /,?([a-z]),?/gi;\n\nvar parsePathArray = function (path) {\n  return path.join(',').replace(p2s, '$1');\n};\n\nvar base3 = function (t, p1, p2, p3, p4) {\n  var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4;\n  var t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\n  return t * t2 - 3 * p1 + 3 * p2;\n};\n\nvar bezlen = function (x1, y1, x2, y2, x3, y3, x4, y4, z) {\n  if (z === null) {\n    z = 1;\n  }\n\n  z = z > 1 ? 1 : z < 0 ? 0 : z;\n  var z2 = z / 2;\n  var n = 12;\n  var Tvalues = [-0.1252, 0.1252, -0.3678, 0.3678, -0.5873, 0.5873, -0.7699, 0.7699, -0.9041, 0.9041, -0.9816, 0.9816];\n  var Cvalues = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472];\n  var sum = 0;\n\n  for (var i = 0; i < n; i++) {\n    var ct = z2 * Tvalues[i] + z2;\n    var xbase = base3(ct, x1, x2, x3, x4);\n    var ybase = base3(ct, y1, y2, y3, y4);\n    var comb = xbase * xbase + ybase * ybase;\n    sum += Cvalues[i] * Math.sqrt(comb);\n  }\n\n  return z2 * sum;\n};\n\nvar curveDim = function (x0, y0, x1, y1, x2, y2, x3, y3) {\n  var tvalues = [];\n  var bounds = [[], []];\n  var a;\n  var b;\n  var c;\n  var t;\n\n  for (var i = 0; i < 2; ++i) {\n    if (i === 0) {\n      b = 6 * x0 - 12 * x1 + 6 * x2;\n      a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n      c = 3 * x1 - 3 * x0;\n    } else {\n      b = 6 * y0 - 12 * y1 + 6 * y2;\n      a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n      c = 3 * y1 - 3 * y0;\n    }\n\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) < 1e-12) {\n        continue;\n      }\n\n      t = -c / b;\n\n      if (t > 0 && t < 1) {\n        tvalues.push(t);\n      }\n\n      continue;\n    }\n\n    var b2ac = b * b - 4 * c * a;\n    var sqrtb2ac = Math.sqrt(b2ac);\n\n    if (b2ac < 0) {\n      continue;\n    }\n\n    var t1 = (-b + sqrtb2ac) / (2 * a);\n\n    if (t1 > 0 && t1 < 1) {\n      tvalues.push(t1);\n    }\n\n    var t2 = (-b - sqrtb2ac) / (2 * a);\n\n    if (t2 > 0 && t2 < 1) {\n      tvalues.push(t2);\n    }\n  }\n\n  var j = tvalues.length;\n  var jlen = j;\n  var mt;\n\n  while (j--) {\n    t = tvalues[j];\n    mt = 1 - t;\n    bounds[0][j] = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;\n    bounds[1][j] = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;\n  }\n\n  bounds[0][jlen] = x0;\n  bounds[1][jlen] = y0;\n  bounds[0][jlen + 1] = x3;\n  bounds[1][jlen + 1] = y3;\n  bounds[0].length = bounds[1].length = jlen + 2;\n  return {\n    min: {\n      x: Math.min.apply(0, bounds[0]),\n      y: Math.min.apply(0, bounds[1])\n    },\n    max: {\n      x: Math.max.apply(0, bounds[0]),\n      y: Math.max.apply(0, bounds[1])\n    }\n  };\n};\n\nvar intersect = function (x1, y1, x2, y2, x3, y3, x4, y4) {\n  if (Math.max(x1, x2) < Math.min(x3, x4) || Math.min(x1, x2) > Math.max(x3, x4) || Math.max(y1, y2) < Math.min(y3, y4) || Math.min(y1, y2) > Math.max(y3, y4)) {\n    return;\n  }\n\n  var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4);\n  var ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4);\n  var denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n  if (!denominator) {\n    return;\n  }\n\n  var px = nx / denominator;\n  var py = ny / denominator;\n  var px2 = +px.toFixed(2);\n  var py2 = +py.toFixed(2);\n\n  if (px2 < +Math.min(x1, x2).toFixed(2) || px2 > +Math.max(x1, x2).toFixed(2) || px2 < +Math.min(x3, x4).toFixed(2) || px2 > +Math.max(x3, x4).toFixed(2) || py2 < +Math.min(y1, y2).toFixed(2) || py2 > +Math.max(y1, y2).toFixed(2) || py2 < +Math.min(y3, y4).toFixed(2) || py2 > +Math.max(y3, y4).toFixed(2)) {\n    return;\n  }\n\n  return {\n    x: px,\n    y: py\n  };\n};\n\nvar isPointInsideBBox = function (bbox, x, y) {\n  return x >= bbox.x && x <= bbox.x + bbox.width && y >= bbox.y && y <= bbox.y + bbox.height;\n};\n\nvar rectPath = function (x, y, w, h, r) {\n  if (r) {\n    return [['M', +x + +r, y], ['l', w - r * 2, 0], ['a', r, r, 0, 0, 1, r, r], ['l', 0, h - r * 2], ['a', r, r, 0, 0, 1, -r, r], ['l', r * 2 - w, 0], ['a', r, r, 0, 0, 1, -r, -r], ['l', 0, r * 2 - h], ['a', r, r, 0, 0, 1, r, -r], ['z']];\n  }\n\n  var res = [['M', x, y], ['l', w, 0], ['l', 0, h], ['l', -w, 0], ['z']]; // @ts-ignore\n\n  res.parsePathArray = parsePathArray;\n  return res;\n};\n\nvar box = function (x, y, width, height) {\n  if (x === null) {\n    x = y = width = height = 0;\n  }\n\n  if (y === null) {\n    y = x.y;\n    width = x.width;\n    height = x.height;\n    x = x.x;\n  }\n\n  return {\n    x: x,\n    y: y,\n    width: width,\n    w: width,\n    height: height,\n    h: height,\n    x2: x + width,\n    y2: y + height,\n    cx: x + width / 2,\n    cy: y + height / 2,\n    r1: Math.min(width, height) / 2,\n    r2: Math.max(width, height) / 2,\n    r0: Math.sqrt(width * width + height * height) / 2,\n    path: rectPath(x, y, width, height),\n    vb: [x, y, width, height].join(' ')\n  };\n};\n\nvar isBBoxIntersect = function (bbox1, bbox2) {\n  bbox1 = box(bbox1);\n  bbox2 = box(bbox2);\n  return isPointInsideBBox(bbox2, bbox1.x, bbox1.y) || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y) || isPointInsideBBox(bbox2, bbox1.x, bbox1.y2) || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y2) || isPointInsideBBox(bbox1, bbox2.x, bbox2.y) || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y) || isPointInsideBBox(bbox1, bbox2.x, bbox2.y2) || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y2) || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x) && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\n};\n\nvar bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n  if (!isArray(p1x)) {\n    p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\n  }\n\n  var bbox = curveDim.apply(null, p1x);\n  return box(bbox.min.x, bbox.min.y, bbox.max.x - bbox.min.x, bbox.max.y - bbox.min.y);\n};\n\nvar findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n  var t1 = 1 - t;\n  var t13 = Math.pow(t1, 3);\n  var t12 = Math.pow(t1, 2);\n  var t2 = t * t;\n  var t3 = t2 * t;\n  var x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x;\n  var y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y;\n  var mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x);\n  var my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y);\n  var nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x);\n  var ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y);\n  var ax = t1 * p1x + t * c1x;\n  var ay = t1 * p1y + t * c1y;\n  var cx = t1 * c2x + t * p2x;\n  var cy = t1 * c2y + t * p2y;\n  var alpha = 90 - Math.atan2(mx - nx, my - ny) * 180 / Math.PI; // (mx > nx || my < ny) && (alpha += 180);\n\n  return {\n    x: x,\n    y: y,\n    m: {\n      x: mx,\n      y: my\n    },\n    n: {\n      x: nx,\n      y: ny\n    },\n    start: {\n      x: ax,\n      y: ay\n    },\n    end: {\n      x: cx,\n      y: cy\n    },\n    alpha: alpha\n  };\n};\n\nvar interHelper = function (bez1, bez2, justCount) {\n  var bbox1 = bezierBBox(bez1);\n  var bbox2 = bezierBBox(bez2);\n\n  if (!isBBoxIntersect(bbox1, bbox2)) {\n    return justCount ? 0 : [];\n  }\n\n  var l1 = bezlen.apply(0, bez1);\n  var l2 = bezlen.apply(0, bez2);\n  var n1 = ~~(l1 / 8);\n  var n2 = ~~(l2 / 8);\n  var dots1 = [];\n  var dots2 = [];\n  var xy = {};\n  var res = justCount ? 0 : [];\n\n  for (var i = 0; i < n1 + 1; i++) {\n    var d = findDotsAtSegment.apply(0, bez1.concat(i / n1));\n    dots1.push({\n      x: d.x,\n      y: d.y,\n      t: i / n1\n    });\n  }\n\n  for (var i = 0; i < n2 + 1; i++) {\n    var d = findDotsAtSegment.apply(0, bez2.concat(i / n2));\n    dots2.push({\n      x: d.x,\n      y: d.y,\n      t: i / n2\n    });\n  }\n\n  for (var i = 0; i < n1; i++) {\n    for (var j = 0; j < n2; j++) {\n      var di = dots1[i];\n      var di1 = dots1[i + 1];\n      var dj = dots2[j];\n      var dj1 = dots2[j + 1];\n      var ci = Math.abs(di1.x - di.x) < 0.001 ? 'y' : 'x';\n      var cj = Math.abs(dj1.x - dj.x) < 0.001 ? 'y' : 'x';\n      var is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\n\n      if (is) {\n        if (xy[is.x.toFixed(4)] === is.y.toFixed(4)) {\n          continue;\n        }\n\n        xy[is.x.toFixed(4)] = is.y.toFixed(4);\n        var t1 = di.t + Math.abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t);\n        var t2 = dj.t + Math.abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\n\n        if (t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1) {\n          if (justCount) {\n            // @ts-ignore\n            res += 1;\n          } else {\n            // @ts-ignore\n            res.push({\n              x: is.x,\n              y: is.y,\n              t1: t1,\n              t2: t2\n            });\n          }\n        }\n      }\n    }\n  }\n\n  return res;\n};\n\nvar interPathHelper = function (path1, path2, justCount) {\n  path1 = pathToCurve(path1);\n  path2 = pathToCurve(path2);\n  var x1;\n  var y1;\n  var x2;\n  var y2;\n  var x1m;\n  var y1m;\n  var x2m;\n  var y2m;\n  var bez1;\n  var bez2;\n  var res = justCount ? 0 : [];\n\n  for (var i = 0, ii = path1.length; i < ii; i++) {\n    var pi = path1[i];\n\n    if (pi[0] === 'M') {\n      x1 = x1m = pi[1];\n      y1 = y1m = pi[2];\n    } else {\n      if (pi[0] === 'C') {\n        bez1 = [x1, y1].concat(pi.slice(1));\n        x1 = bez1[6];\n        y1 = bez1[7];\n      } else {\n        bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\n        x1 = x1m;\n        y1 = y1m;\n      }\n\n      for (var j = 0, jj = path2.length; j < jj; j++) {\n        var pj = path2[j];\n\n        if (pj[0] === 'M') {\n          x2 = x2m = pj[1];\n          y2 = y2m = pj[2];\n        } else {\n          if (pj[0] === 'C') {\n            bez2 = [x2, y2].concat(pj.slice(1));\n            x2 = bez2[6];\n            y2 = bez2[7];\n          } else {\n            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\n            x2 = x2m;\n            y2 = y2m;\n          }\n\n          var intr = interHelper(bez1, bez2, justCount);\n\n          if (justCount) {\n            // @ts-ignore\n            res += intr;\n          } else {\n            // @ts-ignore\n            for (var k = 0, kk = intr.length; k < kk; k++) {\n              intr[k].segment1 = i;\n              intr[k].segment2 = j;\n              intr[k].bez1 = bez1;\n              intr[k].bez2 = bez2;\n            } // @ts-ignore\n\n\n            res = res.concat(intr);\n          }\n        }\n      }\n    }\n  }\n\n  return res;\n};\n\nvar intersection = function (path1, path2) {\n  return interPathHelper(path1, path2);\n};\n\nfunction decasteljau(points, t) {\n  var left = [];\n  var right = [];\n\n  function recurse(points, t) {\n    if (points.length === 1) {\n      left.push(points[0]);\n      right.push(points[0]);\n    } else {\n      var middlePoints = [];\n\n      for (var i = 0; i < points.length - 1; i++) {\n        if (i === 0) {\n          left.push(points[0]);\n        }\n\n        if (i === points.length - 2) {\n          right.push(points[i + 1]);\n        }\n\n        middlePoints[i] = [(1 - t) * points[i][0] + t * points[i + 1][0], (1 - t) * points[i][1] + t * points[i + 1][1]];\n      }\n\n      recurse(middlePoints, t);\n    }\n  }\n\n  if (points.length) {\n    recurse(points, t);\n  }\n\n  return {\n    left: left,\n    right: right.reverse()\n  };\n}\n\nfunction splitCurve(start, end, count) {\n  var points = [[start[1], start[2]]];\n  count = count || 2;\n  var segments = [];\n\n  if (end[0] === 'A') {\n    points.push(end[6]);\n    points.push(end[7]);\n  } else if (end[0] === 'C') {\n    points.push([end[1], end[2]]);\n    points.push([end[3], end[4]]);\n    points.push([end[5], end[6]]);\n  } else if (end[0] === 'S' || end[0] === 'Q') {\n    points.push([end[1], end[2]]);\n    points.push([end[3], end[4]]);\n  } else {\n    points.push([end[1], end[2]]);\n  }\n\n  var leftSegments = points;\n  var t = 1 / count;\n\n  for (var i = 0; i < count - 1; i++) {\n    var rt = t / (1 - t * i);\n    var split = decasteljau(leftSegments, rt);\n    segments.push(split.left);\n    leftSegments = split.right;\n  }\n\n  segments.push(leftSegments);\n  var result = segments.map(function (segment) {\n    var cmd = [];\n\n    if (segment.length === 4) {\n      cmd.push('C');\n      cmd = cmd.concat(segment[2]);\n    }\n\n    if (segment.length >= 3) {\n      if (segment.length === 3) {\n        cmd.push('Q');\n      }\n\n      cmd = cmd.concat(segment[1]);\n    }\n\n    if (segment.length === 2) {\n      cmd.push('L');\n    }\n\n    cmd = cmd.concat(segment[segment.length - 1]);\n    return cmd;\n  });\n  return result;\n}\n\nvar splitSegment = function (start, end, count) {\n  if (count === 1) {\n    return [[].concat(start)];\n  }\n\n  var segments = [];\n\n  if (end[0] === 'L' || end[0] === 'C' || end[0] === 'Q') {\n    segments = segments.concat(splitCurve(start, end, count));\n  } else {\n    var temp = [].concat(start);\n\n    if (temp[0] === 'M') {\n      temp[0] = 'L';\n    }\n\n    for (var i = 0; i <= count - 1; i++) {\n      segments.push(temp);\n    }\n  }\n\n  return segments;\n};\n\nvar fillPath = function (source, target) {\n  if (source.length === 1) {\n    return source;\n  }\n\n  var sourceLen = source.length - 1;\n  var targetLen = target.length - 1;\n  var ratio = sourceLen / targetLen;\n  var segmentsToFill = [];\n\n  if (source.length === 1 && source[0][0] === 'M') {\n    for (var i = 0; i < targetLen - sourceLen; i++) {\n      source.push(source[0]);\n    }\n\n    return source;\n  }\n\n  for (var i = 0; i < targetLen; i++) {\n    var index = Math.floor(ratio * i);\n    segmentsToFill[index] = (segmentsToFill[index] || 0) + 1;\n  }\n\n  var filled = segmentsToFill.reduce(function (filled, count, i) {\n    if (i === sourceLen) {\n      return filled.concat(source[sourceLen]);\n    }\n\n    return filled.concat(splitSegment(source[i], source[i + 1], count));\n  }, []);\n  filled.unshift(source[0]);\n\n  if (target[targetLen] === 'Z' || target[targetLen] === 'z') {\n    filled.push('Z');\n  }\n\n  return filled;\n};\n\nvar isEqual = function (obj1, obj2) {\n  if (obj1.length !== obj2.length) {\n    return false;\n  }\n\n  var result = true;\n  each(obj1, function (item, i) {\n    if (item !== obj2[i]) {\n      result = false;\n      return false;\n    }\n  });\n  return result;\n};\n\nfunction getMinDiff(del, add, modify) {\n  var type = null;\n  var min = modify;\n\n  if (add < min) {\n    min = add;\n    type = 'add';\n  }\n\n  if (del < min) {\n    min = del;\n    type = 'del';\n  }\n\n  return {\n    type: type,\n    min: min\n  };\n}\n/*\n * https://en.wikipedia.org/wiki/Levenshtein_distance\n * 计算两条path的编辑距离\n */\n\n\nvar levenshteinDistance = function (source, target) {\n  var sourceLen = source.length;\n  var targetLen = target.length;\n  var sourceSegment;\n  var targetSegment;\n  var temp = 0;\n\n  if (sourceLen === 0 || targetLen === 0) {\n    return null;\n  }\n\n  var dist = [];\n\n  for (var i = 0; i <= sourceLen; i++) {\n    dist[i] = [];\n    dist[i][0] = {\n      min: i\n    };\n  }\n\n  for (var j = 0; j <= targetLen; j++) {\n    dist[0][j] = {\n      min: j\n    };\n  }\n\n  for (var i = 1; i <= sourceLen; i++) {\n    sourceSegment = source[i - 1];\n\n    for (var j = 1; j <= targetLen; j++) {\n      targetSegment = target[j - 1];\n\n      if (isEqual(sourceSegment, targetSegment)) {\n        temp = 0;\n      } else {\n        temp = 1;\n      }\n\n      var del = dist[i - 1][j].min + 1;\n      var add = dist[i][j - 1].min + 1;\n      var modify = dist[i - 1][j - 1].min + temp;\n      dist[i][j] = getMinDiff(del, add, modify);\n    }\n  }\n\n  return dist;\n};\n\nvar fillPathByDiff = function (source, target) {\n  var diffMatrix = levenshteinDistance(source, target);\n  var sourceLen = source.length;\n  var targetLen = target.length;\n  var changes = [];\n  var index = 1;\n  var minPos = 1; // 如果source和target不是完全不相等\n\n  if (diffMatrix[sourceLen][targetLen].min !== sourceLen) {\n    // 获取从source到target所需改动\n    for (var i = 1; i <= sourceLen; i++) {\n      var min = diffMatrix[i][i].min;\n      minPos = i;\n\n      for (var j = index; j <= targetLen; j++) {\n        if (diffMatrix[i][j].min < min) {\n          min = diffMatrix[i][j].min;\n          minPos = j;\n        }\n      }\n\n      index = minPos;\n\n      if (diffMatrix[i][index].type) {\n        changes.push({\n          index: i - 1,\n          type: diffMatrix[i][index].type\n        });\n      }\n    } // 对source进行增删path\n\n\n    for (var i = changes.length - 1; i >= 0; i--) {\n      index = changes[i].index;\n\n      if (changes[i].type === 'add') {\n        source.splice(index, 0, [].concat(source[index]));\n      } else {\n        source.splice(index, 1);\n      }\n    }\n  } // source尾部补齐\n\n\n  sourceLen = source.length;\n  var diff = targetLen - sourceLen;\n\n  if (sourceLen < targetLen) {\n    for (var i = 0; i < diff; i++) {\n      if (source[sourceLen - 1][0] === 'z' || source[sourceLen - 1][0] === 'Z') {\n        source.splice(sourceLen - 2, 0, source[sourceLen - 2]);\n      } else {\n        source.push(source[sourceLen - 1]);\n      }\n\n      sourceLen += 1;\n    }\n  }\n\n  return source;\n}; // 将两个点均分成count个点\n\n\nfunction _splitPoints(points, former, count) {\n  var result = [].concat(points);\n  var index;\n  var t = 1 / (count + 1);\n\n  var formerEnd = _getSegmentPoints(former)[0];\n\n  for (var i = 1; i <= count; i++) {\n    t *= i;\n    index = Math.floor(points.length * t);\n\n    if (index === 0) {\n      result.unshift([formerEnd[0] * t + points[index][0] * (1 - t), formerEnd[1] * t + points[index][1] * (1 - t)]);\n    } else {\n      result.splice(index, 0, [formerEnd[0] * t + points[index][0] * (1 - t), formerEnd[1] * t + points[index][1] * (1 - t)]);\n    }\n  }\n\n  return result;\n}\n/*\n * 抽取pathSegment中的关键点\n * M,L,A,Q,H,V一个端点\n * Q, S抽取一个端点，一个控制点\n * C抽取一个端点，两个控制点\n */\n\n\nfunction _getSegmentPoints(segment) {\n  var points = [];\n\n  switch (segment[0]) {\n    case 'M':\n      points.push([segment[1], segment[2]]);\n      break;\n\n    case 'L':\n      points.push([segment[1], segment[2]]);\n      break;\n\n    case 'A':\n      points.push([segment[6], segment[7]]);\n      break;\n\n    case 'Q':\n      points.push([segment[3], segment[4]]);\n      points.push([segment[1], segment[2]]);\n      break;\n\n    case 'T':\n      points.push([segment[1], segment[2]]);\n      break;\n\n    case 'C':\n      points.push([segment[5], segment[6]]);\n      points.push([segment[1], segment[2]]);\n      points.push([segment[3], segment[4]]);\n      break;\n\n    case 'S':\n      points.push([segment[3], segment[4]]);\n      points.push([segment[1], segment[2]]);\n      break;\n\n    case 'H':\n      points.push([segment[1], segment[1]]);\n      break;\n\n    case 'V':\n      points.push([segment[1], segment[1]]);\n      break;\n\n    default:\n  }\n\n  return points;\n}\n\nvar formatPath = function (fromPath, toPath) {\n  if (fromPath.length <= 1) {\n    return fromPath;\n  }\n\n  var points;\n\n  for (var i = 0; i < toPath.length; i++) {\n    if (fromPath[i][0] !== toPath[i][0]) {\n      // 获取fromPath的pathSegment的端点，根据toPath的指令对其改造\n      points = _getSegmentPoints(fromPath[i]);\n\n      switch (toPath[i][0]) {\n        case 'M':\n          fromPath[i] = ['M'].concat(points[0]);\n          break;\n\n        case 'L':\n          fromPath[i] = ['L'].concat(points[0]);\n          break;\n\n        case 'A':\n          fromPath[i] = [].concat(toPath[i]);\n          fromPath[i][6] = points[0][0];\n          fromPath[i][7] = points[0][1];\n          break;\n\n        case 'Q':\n          if (points.length < 2) {\n            if (i > 0) {\n              points = _splitPoints(points, fromPath[i - 1], 1);\n            } else {\n              fromPath[i] = toPath[i];\n              break;\n            }\n          }\n\n          fromPath[i] = ['Q'].concat(points.reduce(function (arr, i) {\n            return arr.concat(i);\n          }, []));\n          break;\n\n        case 'T':\n          fromPath[i] = ['T'].concat(points[0]);\n          break;\n\n        case 'C':\n          if (points.length < 3) {\n            if (i > 0) {\n              points = _splitPoints(points, fromPath[i - 1], 2);\n            } else {\n              fromPath[i] = toPath[i];\n              break;\n            }\n          }\n\n          fromPath[i] = ['C'].concat(points.reduce(function (arr, i) {\n            return arr.concat(i);\n          }, []));\n          break;\n\n        case 'S':\n          if (points.length < 2) {\n            if (i > 0) {\n              points = _splitPoints(points, fromPath[i - 1], 1);\n            } else {\n              fromPath[i] = toPath[i];\n              break;\n            }\n          }\n\n          fromPath[i] = ['S'].concat(points.reduce(function (arr, i) {\n            return arr.concat(i);\n          }, []));\n          break;\n\n        default:\n          fromPath[i] = toPath[i];\n      }\n    }\n  }\n\n  return fromPath;\n};\n\nexport { catmullRomToBezier, fillPath, fillPathByDiff, formatPath, intersection, parsePathArray, parsePathString, pathToAbsolute, pathToCurve, rectPath };","map":{"version":3,"mappings":"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","names":["each","isArray","SPACES","PATH_COMMAND","RegExp","PATH_VALUES","parsePathString","pathString","paramCounts","a","c","o","h","l","m","r","q","s","t","v","u","z","data","String","replace","b","params","name","toLowerCase","push","length","concat","splice","catmullRomToBezier","crp","d","i","iLen","p","x","y","ellipsePath","rx","ry","res","rad","Math","PI","x1","cos","x2","y1","sin","y2","pathToAbsolute","pathArray","mx","my","start","pa0","dots","crz","toUpperCase","pa","ii","slice","j","jj","pop","k","kk","l2c","q2c","ax","ay","_13","_23","a2c","angle","large_arc_flag","sweep_flag","recursive","_120","xy","f1","f2","cx","cy","rotate","X","Y","sqrt","rx2","ry2","abs","asin","toFixed","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","join","split","newres","pathToCurve","path","path2","p2","attrs","bx","by","qx","qy","attrs2","pcoms1","pcoms2","pfirst","pcom","processPath","nx","ny","T","Q","apply","fixArc","pp","shift","pi","max","fixM","path1","a1","a2","seg","seg2","seglen","seg2len","parseFloat","p2s","parsePathArray","base3","p1","p3","p4","t1","t2","bezlen","x3","y3","x4","y4","z2","n","Tvalues","Cvalues","sum","ct","xbase","ybase","comb","curveDim","x0","y0","tvalues","bounds","b2ac","sqrtb2ac","jlen","mt","min","intersect","denominator","px","py","px2","py2","isPointInsideBBox","bbox","width","height","rectPath","w","box","r1","r2","r0","vb","isBBoxIntersect","bbox1","bbox2","bezierBBox","p1x","p1y","c1x","c1y","c2x","c2y","p2x","p2y","findDotsAtSegment","t13","pow","t12","t3","alpha","atan2","end","interHelper","bez1","bez2","justCount","l1","l2","n1","n2","dots1","dots2","di","di1","dj","dj1","ci","cj","is","interPathHelper","x1m","y1m","x2m","y2m","pj","intr","segment1","segment2","intersection","decasteljau","points","left","right","recurse","middlePoints","reverse","splitCurve","count","segments","leftSegments","rt","result","map","segment","cmd","splitSegment","temp","fillPath","source","target","sourceLen","targetLen","ratio","segmentsToFill","index","floor","filled","reduce","unshift","isEqual","obj1","obj2","item","getMinDiff","del","add","modify","type","levenshteinDistance","sourceSegment","targetSegment","dist","fillPathByDiff","diffMatrix","changes","minPos","diff","_splitPoints","former","formerEnd","_getSegmentPoints","formatPath","fromPath","toPath","arr"],"sourceRoot":"","sources":["../../src/util/path.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}