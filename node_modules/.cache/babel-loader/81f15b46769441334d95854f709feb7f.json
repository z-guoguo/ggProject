{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Target = void 0;\n\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\n\nvar id_1 = require(\"../utils/id\");\n\nvar metadata_1 = require(\"./metadata\");\n\nvar queryable_string_1 = require(\"./queryable_string\");\n\nvar Target = function () {\n  function Target(type, name, serviceIdentifier, namedOrTagged) {\n    this.id = id_1.id();\n    this.type = type;\n    this.serviceIdentifier = serviceIdentifier;\n    this.name = new queryable_string_1.QueryableString(name || \"\");\n    this.metadata = new Array();\n    var metadataItem = null;\n\n    if (typeof namedOrTagged === \"string\") {\n      metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n    } else if (namedOrTagged instanceof metadata_1.Metadata) {\n      metadataItem = namedOrTagged;\n    }\n\n    if (metadataItem !== null) {\n      this.metadata.push(metadataItem);\n    }\n  }\n\n  Target.prototype.hasTag = function (key) {\n    for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n      var m = _a[_i];\n\n      if (m.key === key) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Target.prototype.isArray = function () {\n    return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n  };\n\n  Target.prototype.matchesArray = function (name) {\n    return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n  };\n\n  Target.prototype.isNamed = function () {\n    return this.hasTag(METADATA_KEY.NAMED_TAG);\n  };\n\n  Target.prototype.isTagged = function () {\n    return this.metadata.some(function (metadata) {\n      return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) {\n        return metadata.key !== key;\n      });\n    });\n  };\n\n  Target.prototype.isOptional = function () {\n    return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n  };\n\n  Target.prototype.getNamedTag = function () {\n    if (this.isNamed()) {\n      return this.metadata.filter(function (m) {\n        return m.key === METADATA_KEY.NAMED_TAG;\n      })[0];\n    }\n\n    return null;\n  };\n\n  Target.prototype.getCustomTags = function () {\n    if (this.isTagged()) {\n      return this.metadata.filter(function (metadata) {\n        return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) {\n          return metadata.key !== key;\n        });\n      });\n    } else {\n      return null;\n    }\n  };\n\n  Target.prototype.matchesNamedTag = function (name) {\n    return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n  };\n\n  Target.prototype.matchesTag = function (key) {\n    var _this = this;\n\n    return function (value) {\n      for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n        var m = _a[_i];\n\n        if (m.key === key && m.value === value) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n  };\n\n  return Target;\n}();\n\nexports.Target = Target;","map":{"version":3,"mappings":"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","names":["type","name","serviceIdentifier","namedOrTagged","id","id_1","queryable_string_1","metadata","Array","metadataItem","metadata_1","METADATA_KEY","NAMED_TAG","push","Target","key","_i","m","hasTag","MULTI_INJECT_TAG","matchesTag","some","NON_CUSTOM_TAG_KEYS","every","OPTIONAL_TAG","isNamed","filter","isTagged","value","exports"],"sourceRoot":"","sources":["../../src/planning/target.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}