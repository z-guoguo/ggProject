{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport JQuery from 'jquery';\nimport { ObjectExt, StringExt, Dom, Vector } from '../util'; // eslint-disable-next-line\n\nexport var Markup;\n\n(function (Markup) {\n  function isJSONMarkup(markup) {\n    return markup != null && !isStringMarkup(markup);\n  }\n\n  Markup.isJSONMarkup = isJSONMarkup;\n\n  function isStringMarkup(markup) {\n    return markup != null && typeof markup === 'string';\n  }\n\n  Markup.isStringMarkup = isStringMarkup;\n\n  function clone(markup) {\n    return markup == null || isStringMarkup(markup) ? markup : ObjectExt.cloneDeep(markup);\n  }\n\n  Markup.clone = clone;\n  /**\n   * Removes blank space in markup to prevent create empty text node.\n   */\n\n  function sanitize(markup) {\n    return `${markup}`.trim().replace(/[\\r|\\n]/g, ' ').replace(/>\\s+</g, '><');\n  }\n\n  Markup.sanitize = sanitize;\n\n  function parseStringMarkup(markup) {\n    const fragment = document.createDocumentFragment();\n    const groups = {};\n    const selectors = {};\n    const sanitized = sanitize(markup);\n    const nodes = StringExt.sanitizeHTML(sanitized, {\n      raw: true\n    });\n    nodes.forEach(node => {\n      fragment.appendChild(node);\n    });\n    return {\n      fragment,\n      selectors,\n      groups\n    };\n  }\n\n  Markup.parseStringMarkup = parseStringMarkup;\n\n  function parseJSONMarkup(markup, options = {\n    ns: Dom.ns.svg\n  }) {\n    const fragment = document.createDocumentFragment();\n    const groups = {};\n    const selectors = {};\n    const queue = [{\n      markup: Array.isArray(markup) ? markup : [markup],\n      parent: fragment,\n      ns: options.ns\n    }];\n\n    while (queue.length > 0) {\n      const item = queue.pop();\n      let ns = item.ns || Dom.ns.svg;\n      const defines = item.markup;\n      const parentNode = item.parent;\n      defines.forEach(define => {\n        // tagName\n        const tagName = define.tagName;\n\n        if (!tagName) {\n          throw new TypeError('Invalid tagName');\n        } // ns\n\n\n        if (define.ns) {\n          ns = define.ns;\n        }\n\n        const svg = ns === Dom.ns.svg;\n        const node = ns ? Dom.createElementNS(tagName, ns) : Dom.createElement(tagName); // attrs\n\n        const attrs = define.attrs;\n\n        if (attrs) {\n          if (svg) {\n            Dom.attr(node, Dom.kebablizeAttrs(attrs));\n          } else {\n            JQuery(node).attr(attrs);\n          }\n        } // style\n\n\n        const style = define.style;\n\n        if (style) {\n          JQuery(node).css(style);\n        } // classname\n\n\n        const className = define.className;\n\n        if (className != null) {\n          node.setAttribute('class', Array.isArray(className) ? className.join(' ') : className);\n        } // textContent\n\n\n        if (define.textContent) {\n          node.textContent = define.textContent;\n        } // selector\n\n\n        const selector = define.selector;\n\n        if (selector != null) {\n          if (selectors[selector]) {\n            throw new TypeError('Selector must be unique');\n          }\n\n          selectors[selector] = node;\n        } // group\n\n\n        if (define.groupSelector) {\n          let nodeGroups = define.groupSelector;\n\n          if (!Array.isArray(nodeGroups)) {\n            nodeGroups = [nodeGroups];\n          }\n\n          nodeGroups.forEach(name => {\n            if (!groups[name]) {\n              groups[name] = [];\n            }\n\n            groups[name].push(node);\n          });\n        }\n\n        parentNode.appendChild(node); // children\n\n        const children = define.children;\n\n        if (Array.isArray(children)) {\n          queue.push({\n            ns,\n            markup: children,\n            parent: node\n          });\n        }\n      });\n    }\n\n    Object.keys(groups).forEach(groupName => {\n      if (selectors[groupName]) {\n        throw new Error('Ambiguous group selector');\n      }\n\n      selectors[groupName] = groups[groupName];\n    });\n    return {\n      fragment,\n      selectors,\n      groups\n    };\n  }\n\n  Markup.parseJSONMarkup = parseJSONMarkup;\n\n  function createContainer(firstChild) {\n    return firstChild instanceof SVGElement ? Dom.createSvgElement('g') : Dom.createElement('div');\n  }\n\n  function renderMarkup(markup) {\n    if (isStringMarkup(markup)) {\n      const nodes = Vector.createVectors(markup);\n      const count = nodes.length;\n\n      if (count === 1) {\n        return {\n          elem: nodes[0].node\n        };\n      }\n\n      if (count > 1) {\n        const elem = createContainer(nodes[0].node);\n        nodes.forEach(node => {\n          elem.appendChild(node.node);\n        });\n        return {\n          elem\n        };\n      }\n\n      return {};\n    }\n\n    const result = parseJSONMarkup(markup);\n    const fragment = result.fragment;\n    let elem = null;\n\n    if (fragment.childNodes.length > 1) {\n      elem = createContainer(fragment.firstChild);\n      elem.appendChild(fragment);\n    } else {\n      elem = fragment.firstChild;\n    }\n\n    return {\n      elem,\n      selectors: result.selectors\n    };\n  }\n\n  Markup.renderMarkup = renderMarkup;\n\n  function parseLabelStringMarkup(markup) {\n    const children = Vector.createVectors(markup);\n    const fragment = document.createDocumentFragment();\n\n    for (let i = 0, n = children.length; i < n; i += 1) {\n      const currentChild = children[i].node;\n      fragment.appendChild(currentChild);\n    }\n\n    return {\n      fragment,\n      selectors: {}\n    };\n  }\n\n  Markup.parseLabelStringMarkup = parseLabelStringMarkup;\n})(Markup || (Markup = {})); // eslint-disable-next-line\n\n\n(function (Markup) {\n  function getSelector(elem, stop, prev) {\n    if (elem != null) {\n      let selector;\n      const tagName = elem.tagName.toLowerCase();\n\n      if (elem === stop) {\n        if (typeof prev === 'string') {\n          selector = `> ${tagName} > ${prev}`;\n        } else {\n          selector = `> ${tagName}`;\n        }\n\n        return selector;\n      }\n\n      const parent = elem.parentNode;\n\n      if (parent && parent.childNodes.length > 1) {\n        const nth = Dom.index(elem) + 1;\n        selector = `${tagName}:nth-child(${nth})`;\n      } else {\n        selector = tagName;\n      }\n\n      if (prev) {\n        selector += ` > ${prev}`;\n      }\n\n      return getSelector(elem.parentNode, stop, selector);\n    }\n\n    return prev;\n  }\n\n  Markup.getSelector = getSelector;\n\n  function parseNode(node, root, ns) {\n    if (node.nodeName === '#text') {\n      return null;\n    }\n\n    let selector = null;\n    let groupSelector = null; // let classNames: string | null = null\n\n    let attrs = null;\n    let isCSSSelector = false;\n    const markup = {\n      tagName: node.tagName\n    };\n\n    if (node.attributes) {\n      attrs = {};\n\n      for (let i = 0, l = node.attributes.length; i < l; i += 1) {\n        const attr = node.attributes[i];\n        const name = attr.nodeName;\n        const value = attr.nodeValue;\n\n        if (name === 'selector') {\n          selector = value;\n        } else if (name === 'groupSelector') {\n          groupSelector = value;\n        } else if (name === 'class') {\n          markup.attrs = {\n            class: value\n          };\n        } else {\n          attrs[name] = value;\n        }\n      }\n    }\n\n    if (selector == null) {\n      isCSSSelector = true;\n      selector = getSelector(node, root);\n    }\n\n    if (node.namespaceURI) {\n      markup.ns = node.namespaceURI;\n    }\n\n    if (markup.ns == null) {\n      if (['body', 'div', 'section', 'main', 'nav', 'footer', 'span', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'ul', 'ol', 'dl', 'center', 'strong', 'pre', 'form', 'select', 'textarea', 'fieldset', 'marquee', 'bgsound', 'iframe', 'frameset'].includes(node.tagName)) {\n        markup.ns = Dom.ns.xhtml;\n      } else if (ns) {\n        markup.ns = ns;\n      }\n    }\n\n    if (selector) {\n      markup.selector = selector;\n    }\n\n    if (groupSelector != null) {\n      markup.groupSelector = groupSelector;\n    }\n\n    return {\n      markup,\n      attrs,\n      isCSSSelector\n    };\n  }\n\n  function xml2json(xml) {\n    const sanitized = Markup.sanitize(xml);\n    const doc = Dom.parseXML(sanitized, {\n      mimeType: 'image/svg+xml'\n    });\n    const nodes = Array.prototype.slice.call(doc.childNodes);\n    const attrMap = {};\n    const markupMap = new WeakMap();\n\n    const parse = (node, root, ns) => {\n      const data = parseNode(node, root, ns);\n\n      if (data == null) {\n        const parent = markupMap.get(node.parentNode);\n\n        if (parent && node.textContent) {\n          parent.textContent = node.textContent;\n        }\n      } else {\n        const {\n          markup,\n          attrs,\n          isCSSSelector\n        } = data;\n        markupMap.set(node, markup);\n\n        if (markup.selector && attrs != null) {\n          if (Object.keys(attrs).length) {\n            attrMap[markup.selector] = attrs;\n          }\n\n          if (isCSSSelector) {\n            delete markup.selector;\n          }\n        }\n\n        if (node.childNodes && node.childNodes.length > 0) {\n          for (let i = 0, l = node.childNodes.length; i < l; i += 1) {\n            const child = node.childNodes[i];\n            const childMarkup = parse(child, root, markup.ns);\n\n            if (childMarkup) {\n              if (markup.children == null) {\n                markup.children = [];\n              }\n\n              markup.children.push(childMarkup);\n            }\n          }\n        }\n\n        return markup;\n      }\n    };\n\n    const markup = nodes.map(node => parse(node, node)).filter(mk => mk != null);\n    return {\n      markup,\n      attrs: attrMap\n    };\n  }\n\n  Markup.xml2json = xml2json;\n})(Markup || (Markup = {})); // eslint-disable-next-line\n\n\n(function (Markup) {\n  function getPortContainerMarkup() {\n    return 'g';\n  }\n\n  Markup.getPortContainerMarkup = getPortContainerMarkup;\n\n  function getPortMarkup() {\n    return {\n      tagName: 'circle',\n      selector: 'circle',\n      attrs: {\n        r: 10,\n        fill: '#FFFFFF',\n        stroke: '#000000'\n      }\n    };\n  }\n\n  Markup.getPortMarkup = getPortMarkup;\n\n  function getPortLabelMarkup() {\n    return {\n      tagName: 'text',\n      selector: 'text',\n      attrs: {\n        fill: '#000000'\n      }\n    };\n  }\n\n  Markup.getPortLabelMarkup = getPortLabelMarkup;\n})(Markup || (Markup = {})); // eslint-disable-next-line\n\n\n(function (Markup) {\n  function getEdgeMarkup() {\n    return Markup.sanitize(`\n    <path class=\"connection\" stroke=\"black\" d=\"M 0 0 0 0\"/>\n    <path class=\"source-marker\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>\n    <path class=\"target-marker\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>\n    <path class=\"connection-wrap\" d=\"M 0 0 0 0\"/>\n    <g class=\"labels\"/>\n    <g class=\"vertices\"/>\n    <g class=\"arrowheads\"/>\n    <g class=\"tools\"/>\n  `);\n  }\n\n  Markup.getEdgeMarkup = getEdgeMarkup;\n\n  function getEdgeToolMarkup() {\n    return Markup.sanitize(`\n    <g class=\"edge-tool\">\n      <g class=\"tool-remove\" event=\"edge:remove\">\n        <circle r=\"11\" />\n        <path transform=\"scale(.8) translate(-16, -16)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\" />\n        <title>Remove edge.</title>\n      </g>\n      <g class=\"tool-options\" event=\"edge:options\">\n        <circle r=\"11\" transform=\"translate(25)\"/>\n        <path fill=\"white\" transform=\"scale(.55) translate(29, -16)\" d=\"M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z\"/>\n        <title>Edge options.</title>\n      </g>\n    </g>\n  `);\n  }\n\n  Markup.getEdgeToolMarkup = getEdgeToolMarkup;\n\n  function getEdgeVertexMarkup() {\n    return Markup.sanitize(`\n    <g class=\"vertex-group\" transform=\"translate(<%= x %>, <%= y %>)\">\n      <circle class=\"vertex\" data-index=\"<%= index %>\" r=\"10\" />\n      <path class=\"vertex-remove-area\" data-index=\"<%= index %>\" d=\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\" transform=\"translate(5, -33)\"/>\n      <path class=\"vertex-remove\" data-index=\"<%= index %>\" transform=\"scale(.8) translate(9.5, -37)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\">\n      <title>Remove vertex.</title>\n      </path>\n    </g>\n  `);\n  }\n\n  Markup.getEdgeVertexMarkup = getEdgeVertexMarkup;\n\n  function getEdgeArrowheadMarkup() {\n    return Markup.sanitize(`\n    <g class=\"arrowhead-group arrowhead-group-<%= end %>\">\n      <path class=\"arrowhead\" data-terminal=\"<%= end %>\" d=\"M 26 0 L 0 13 L 26 26 z\" />\n    </g>\n  `);\n  }\n\n  Markup.getEdgeArrowheadMarkup = getEdgeArrowheadMarkup;\n})(Markup || (Markup = {})); // eslint-disable-next-line\n\n\n(function (Markup) {\n  function getForeignObjectMarkup(bare = false) {\n    return {\n      tagName: 'foreignObject',\n      selector: 'fo',\n      children: [{\n        ns: Dom.ns.xhtml,\n        tagName: 'body',\n        selector: 'foBody',\n        attrs: {\n          xmlns: Dom.ns.xhtml\n        },\n        style: {\n          width: '100%',\n          height: '100%',\n          background: 'transparent'\n        },\n        children: bare ? [] : [{\n          tagName: 'div',\n          selector: 'foContent',\n          style: {\n            width: '100%',\n            height: '100%'\n          }\n        }]\n      }]\n    };\n  }\n\n  Markup.getForeignObjectMarkup = getForeignObjectMarkup;\n})(Markup || (Markup = {}));","map":{"version":3,"mappings":"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","names":["JQuery","ObjectExt","StringExt","Dom","Vector","Markup","isJSONMarkup","markup","isStringMarkup","clone","cloneDeep","sanitize","trim","replace","parseStringMarkup","fragment","document","createDocumentFragment","groups","selectors","sanitized","nodes","sanitizeHTML","raw","forEach","node","appendChild","parseJSONMarkup","options","ns","svg","queue","Array","isArray","parent","length","item","pop","defines","parentNode","define","tagName","TypeError","createElementNS","createElement","attrs","attr","kebablizeAttrs","style","css","className","setAttribute","join","textContent","selector","groupSelector","nodeGroups","name","push","children","Object","keys","groupName","Error","createContainer","firstChild","SVGElement","createSvgElement","renderMarkup","createVectors","count","elem","result","childNodes","parseLabelStringMarkup","i","n","currentChild","getSelector","stop","prev","toLowerCase","nth","index","parseNode","root","nodeName","isCSSSelector","attributes","l","value","nodeValue","class","namespaceURI","includes","xhtml","xml2json","xml","doc","parseXML","mimeType","prototype","slice","call","attrMap","markupMap","WeakMap","parse","data","get","set","child","childMarkup","map","filter","mk","getPortContainerMarkup","getPortMarkup","r","fill","stroke","getPortLabelMarkup","getEdgeMarkup","getEdgeToolMarkup","getEdgeVertexMarkup","getEdgeArrowheadMarkup","getForeignObjectMarkup","bare","xmlns","width","height","background"],"sourceRoot":"","sources":["../../src/view/markup.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}