{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport { isFunction, groupBy } from '@antv/util';\nimport { isNaN, calculationItemsBBox } from '../../util/base';\n\nvar LayoutController =\n/** @class */\nfunction () {\n  function LayoutController(graph) {\n    this.graph = graph;\n    this.layoutCfg = graph.get('layout') || {};\n    this.layoutType = this.getLayoutType();\n    this.layoutMethods = [];\n    this.initLayout();\n  } // eslint-disable-next-line class-methods-use-this\n\n\n  LayoutController.prototype.initLayout = function () {// no data before rendering\n  };\n\n  LayoutController.prototype.getLayoutType = function () {\n    return this.getLayoutCfgType(this.layoutCfg);\n  };\n\n  LayoutController.prototype.getLayoutCfgType = function (layoutCfg) {\n    var type = layoutCfg.type; // type should be top priority\n\n    if (type) {\n      return type;\n    }\n\n    var pipes = layoutCfg.pipes;\n\n    if (Array.isArray(pipes)) {\n      return pipes.map(function (pipe) {\n        return (pipe === null || pipe === void 0 ? void 0 : pipe.type) || '';\n      });\n    }\n\n    return null;\n  };\n\n  LayoutController.prototype.isLayoutTypeSame = function (cfg) {\n    var current = this.getLayoutCfgType(cfg);\n    var preHasPipies = Array.isArray(this.layoutType);\n    var currentHasPipes = Array.isArray(current); // already has pipes, and the new one is pipes\n\n    if (preHasPipies && currentHasPipes) {\n      return this.layoutType.every(function (type, index) {\n        return type === current[index];\n      });\n    } // only one of the pre and current is pipes\n\n\n    if (Array.isArray(current) || Array.isArray(this.layoutType)) {\n      return false;\n    } // both of the pre and current are not pipes\n\n\n    return (cfg === null || cfg === void 0 ? void 0 : cfg.type) === this.layoutType;\n  }; // 绘制\n\n\n  LayoutController.prototype.refreshLayout = function () {\n    var _a = this,\n        graph = _a.graph,\n        layoutType = _a.layoutType;\n\n    if (!graph) return;\n\n    if (graph.get('animate')) {\n      graph.positionsAnimate(layoutType === 'comboCombined');\n    } else {\n      graph.refreshPositions(layoutType === 'comboCombined');\n    }\n  }; // 更换布局\n\n\n  LayoutController.prototype.changeLayout = function (cfg) {\n    this.layoutCfg = cfg;\n    this.layoutType = cfg.type || this.layoutType;\n    this.destoryLayoutMethods();\n    this.layout();\n  }; // 更换数据\n\n\n  LayoutController.prototype.changeData = function (success) {\n    this.destoryLayoutMethods();\n    this.layout(success);\n  };\n\n  LayoutController.prototype.destoryLayoutMethods = function () {\n    var layoutMethods = this.layoutMethods;\n    layoutMethods === null || layoutMethods === void 0 ? void 0 : layoutMethods.forEach(function (layoutMethod) {\n      layoutMethod.destroy();\n    });\n    this.layoutMethods = [];\n  }; // 销毁布局，不能使用 this.destroy，因为 controller 还需要被使用，只是把布局算法销毁\n\n\n  LayoutController.prototype.destroyLayout = function () {\n    var graph = this.graph;\n    this.destoryLayoutMethods();\n    graph.set('layout', undefined);\n    this.layoutCfg = undefined;\n    this.layoutType = undefined;\n    this.layoutMethods = undefined;\n  }; // 从 this.graph 获取数据\n\n\n  LayoutController.prototype.setDataFromGraph = function () {\n    var nodes = [];\n    var hiddenNodes = [];\n    var edges = [];\n    var hiddenEdges = [];\n    var comboEdges = [];\n    var combos = [];\n    var hiddenCombos = [];\n    var nodeItems = this.graph.getNodes();\n    var edgeItems = this.graph.getEdges();\n    var comboItems = this.graph.getCombos();\n    var nodeLength = nodeItems.length;\n\n    for (var i = 0; i < nodeLength; i++) {\n      var nodeItem = nodeItems[i];\n      if (!nodeItem || nodeItem.destroyed) continue;\n      var model = nodeItem.getModel();\n\n      if (!nodeItem.isVisible()) {\n        hiddenNodes.push(model);\n        continue;\n      }\n\n      nodes.push(model);\n    }\n\n    var edgeLength = edgeItems.length;\n\n    for (var i = 0; i < edgeLength; i++) {\n      var edgeItem = edgeItems[i];\n      if (!edgeItem || edgeItem.destroyed) continue;\n      var model = edgeItem.getModel();\n\n      if (!edgeItem.isVisible()) {\n        hiddenEdges.push(model);\n        continue;\n      }\n\n      if (!model.isComboEdge) edges.push(model);else comboEdges.push(model);\n    }\n\n    var comboLength = comboItems.length;\n\n    for (var i = 0; i < comboLength; i++) {\n      var comboItem = comboItems[i];\n      if (comboItem.destroyed) continue;\n      var model = comboItem.getModel();\n\n      if (!comboItem.isVisible()) {\n        hiddenCombos.push(model);\n        continue;\n      }\n\n      combos.push(model);\n    }\n\n    return {\n      nodes: nodes,\n      hiddenNodes: hiddenNodes,\n      edges: edges,\n      hiddenEdges: hiddenEdges,\n      combos: combos,\n      hiddenCombos: hiddenCombos,\n      comboEdges: comboEdges\n    };\n  }; // 重新布局\n\n\n  LayoutController.prototype.relayout = function (reloadData) {\n    var _this = this;\n\n    var _a = this,\n        graph = _a.graph,\n        layoutMethods = _a.layoutMethods,\n        layoutCfg = _a.layoutCfg;\n\n    if (reloadData) {\n      this.data = this.setDataFromGraph();\n      var nodes = this.data.nodes;\n\n      if (!nodes) {\n        return false;\n      }\n\n      this.initPositions(layoutCfg.center, nodes);\n    }\n\n    graph.emit('beforelayout');\n    var start = Promise.resolve();\n    layoutMethods === null || layoutMethods === void 0 ? void 0 : layoutMethods.forEach(function (layoutMethod, index) {\n      var currentCfg = layoutCfg[index] || layoutCfg;\n      start = start.then(function () {\n        var _a;\n\n        var relayoutPromise = _this.execLayoutMethod(layoutMethod, currentCfg);\n\n        if (index === layoutMethods.length - 1) {\n          (_a = layoutCfg.onAllLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(layoutCfg);\n        }\n\n        return relayoutPromise;\n      });\n    });\n  }; // 筛选参与布局的nodes和edges\n\n\n  LayoutController.prototype.filterLayoutData = function (data, cfg) {\n    var nodes = data.nodes,\n        edges = data.edges,\n        rest = __rest(data, [\"nodes\", \"edges\"]);\n\n    if (!nodes) {\n      return data;\n    }\n\n    var nodesFilter;\n    var edegsFilter;\n\n    if (isFunction(cfg === null || cfg === void 0 ? void 0 : cfg.nodesFilter)) {\n      nodesFilter = cfg.nodesFilter;\n    } else {\n      nodesFilter = function nodesFilter() {\n        return true;\n      };\n    }\n\n    var fNodes = nodes.filter(nodesFilter);\n\n    if (isFunction(cfg === null || cfg === void 0 ? void 0 : cfg.edgesFilter)) {\n      edegsFilter = cfg.edgesFilter;\n    } else {\n      var nodesMap_1 = fNodes.reduce(function (acc, cur) {\n        acc[cur.id] = true;\n        return acc;\n      }, {});\n\n      edegsFilter = function edegsFilter(edge) {\n        return nodesMap_1[edge.source] && nodesMap_1[edge.target];\n      };\n    }\n\n    return __assign({\n      nodes: fNodes,\n      edges: edges.filter(edegsFilter)\n    }, rest);\n  };\n\n  LayoutController.prototype.getLayoutBBox = function (nodes) {\n    var graph = this.graph;\n    var graphGroupNodes = groupBy(graph.getNodes(), function (n) {\n      return n.getModel().layoutOrder;\n    });\n    var layoutNodes = Object.values(graphGroupNodes).map(function (value) {\n      var bbox = calculationItemsBBox(value);\n      bbox.size = [bbox.width, bbox.height];\n      return bbox;\n    });\n    var groupNodes = Object.values(groupBy(nodes, 'layoutOrder'));\n    return {\n      groupNodes: groupNodes,\n      layoutNodes: layoutNodes\n    };\n  }; // 控制布局动画\n  // eslint-disable-next-line class-methods-use-this\n\n\n  LayoutController.prototype.layoutAnimate = function () {}; // 将当前节点的平均中心移动到原点\n\n\n  LayoutController.prototype.moveToZero = function () {\n    var graph = this.graph;\n    var data = graph.get('data');\n    var nodes = data.nodes;\n\n    if (nodes[0].x === undefined || nodes[0].x === null || isNaN(nodes[0].x)) {\n      return;\n    }\n\n    var meanCenter = [0, 0];\n    var nodeLength = nodes.length;\n\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      meanCenter[0] += node.x;\n      meanCenter[1] += node.y;\n    }\n\n    meanCenter[0] /= nodes.length;\n    meanCenter[1] /= nodes.length;\n\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      node.x -= meanCenter[0];\n      node.y -= meanCenter[1];\n    }\n  }; // 初始化节点到 center 附近\n\n\n  LayoutController.prototype.initPositions = function (center, nodes) {\n    var graph = this.graph;\n\n    if (!nodes) {\n      return false;\n    }\n\n    var nodeLength = nodes ? nodes.length : 0;\n    if (!nodeLength) return;\n    var width = graph.get('width') * 0.85;\n    var height = graph.get('height') * 0.85;\n    var horiNum = Math.ceil(Math.sqrt(nodeLength) * (width / height));\n    var vertiNum = Math.ceil(nodeLength / horiNum);\n    var horiGap = width / (horiNum - 1);\n    var vertiGap = height / (vertiNum - 1);\n    if (!isFinite(horiGap) || !horiGap) horiGap = 0;\n    if (!isFinite(vertiGap) || !horiGap) vertiGap = 0;\n    var beginX = center[0] - width / 2;\n    var beginY = center[1] - height / 2;\n    var allHavePos = true;\n\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n\n      if (isNaN(+node.x)) {\n        allHavePos = false;\n        node.x = i % horiNum * horiGap + beginX;\n      }\n\n      if (isNaN(+node.y)) {\n        allHavePos = false;\n        node.y = Math.floor(i / horiNum) * vertiGap + beginY;\n      }\n    }\n\n    return allHavePos;\n  };\n\n  LayoutController.prototype.destroy = function () {\n    this.graph = null;\n    this.destoryLayoutMethods();\n    this.destroyed = true;\n  };\n\n  return LayoutController;\n}();\n\nexport default LayoutController;","map":{"version":3,"names":["__assign","__rest","isFunction","groupBy","isNaN","calculationItemsBBox","LayoutController","graph","layoutCfg","get","layoutType","getLayoutType","layoutMethods","initLayout","prototype","getLayoutCfgType","type","pipes","Array","isArray","map","pipe","isLayoutTypeSame","cfg","current","preHasPipies","currentHasPipes","every","index","refreshLayout","_a","positionsAnimate","refreshPositions","changeLayout","destoryLayoutMethods","layout","changeData","success","forEach","layoutMethod","destroy","destroyLayout","set","undefined","setDataFromGraph","nodes","hiddenNodes","edges","hiddenEdges","comboEdges","combos","hiddenCombos","nodeItems","getNodes","edgeItems","getEdges","comboItems","getCombos","nodeLength","length","i","nodeItem","destroyed","model","getModel","isVisible","push","edgeLength","edgeItem","isComboEdge","comboLength","comboItem","relayout","reloadData","_this","data","initPositions","center","emit","start","Promise","resolve","currentCfg","then","relayoutPromise","execLayoutMethod","onAllLayoutEnd","call","filterLayoutData","rest","nodesFilter","edegsFilter","fNodes","filter","edgesFilter","nodesMap_1","reduce","acc","cur","id","edge","source","target","getLayoutBBox","graphGroupNodes","n","layoutOrder","layoutNodes","Object","values","value","bbox","size","width","height","groupNodes","layoutAnimate","moveToZero","x","meanCenter","node","y","horiNum","Math","ceil","sqrt","vertiNum","horiGap","vertiGap","isFinite","beginX","beginY","allHavePos","floor"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-core/es/graph/controller/layout.js"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport { isFunction, groupBy } from '@antv/util';\nimport { isNaN, calculationItemsBBox } from '../../util/base';\n\nvar LayoutController =\n/** @class */\nfunction () {\n  function LayoutController(graph) {\n    this.graph = graph;\n    this.layoutCfg = graph.get('layout') || {};\n    this.layoutType = this.getLayoutType();\n    this.layoutMethods = [];\n    this.initLayout();\n  } // eslint-disable-next-line class-methods-use-this\n\n\n  LayoutController.prototype.initLayout = function () {// no data before rendering\n  };\n\n  LayoutController.prototype.getLayoutType = function () {\n    return this.getLayoutCfgType(this.layoutCfg);\n  };\n\n  LayoutController.prototype.getLayoutCfgType = function (layoutCfg) {\n    var type = layoutCfg.type; // type should be top priority\n\n    if (type) {\n      return type;\n    }\n\n    var pipes = layoutCfg.pipes;\n\n    if (Array.isArray(pipes)) {\n      return pipes.map(function (pipe) {\n        return (pipe === null || pipe === void 0 ? void 0 : pipe.type) || '';\n      });\n    }\n\n    return null;\n  };\n\n  LayoutController.prototype.isLayoutTypeSame = function (cfg) {\n    var current = this.getLayoutCfgType(cfg);\n    var preHasPipies = Array.isArray(this.layoutType);\n    var currentHasPipes = Array.isArray(current); // already has pipes, and the new one is pipes\n\n    if (preHasPipies && currentHasPipes) {\n      return this.layoutType.every(function (type, index) {\n        return type === current[index];\n      });\n    } // only one of the pre and current is pipes\n\n\n    if (Array.isArray(current) || Array.isArray(this.layoutType)) {\n      return false;\n    } // both of the pre and current are not pipes\n\n\n    return (cfg === null || cfg === void 0 ? void 0 : cfg.type) === this.layoutType;\n  }; // 绘制\n\n\n  LayoutController.prototype.refreshLayout = function () {\n    var _a = this,\n        graph = _a.graph,\n        layoutType = _a.layoutType;\n\n    if (!graph) return;\n\n    if (graph.get('animate')) {\n      graph.positionsAnimate(layoutType === 'comboCombined');\n    } else {\n      graph.refreshPositions(layoutType === 'comboCombined');\n    }\n  }; // 更换布局\n\n\n  LayoutController.prototype.changeLayout = function (cfg) {\n    this.layoutCfg = cfg;\n    this.layoutType = cfg.type || this.layoutType;\n    this.destoryLayoutMethods();\n    this.layout();\n  }; // 更换数据\n\n\n  LayoutController.prototype.changeData = function (success) {\n    this.destoryLayoutMethods();\n    this.layout(success);\n  };\n\n  LayoutController.prototype.destoryLayoutMethods = function () {\n    var layoutMethods = this.layoutMethods;\n    layoutMethods === null || layoutMethods === void 0 ? void 0 : layoutMethods.forEach(function (layoutMethod) {\n      layoutMethod.destroy();\n    });\n    this.layoutMethods = [];\n  }; // 销毁布局，不能使用 this.destroy，因为 controller 还需要被使用，只是把布局算法销毁\n\n\n  LayoutController.prototype.destroyLayout = function () {\n    var graph = this.graph;\n    this.destoryLayoutMethods();\n    graph.set('layout', undefined);\n    this.layoutCfg = undefined;\n    this.layoutType = undefined;\n    this.layoutMethods = undefined;\n  }; // 从 this.graph 获取数据\n\n\n  LayoutController.prototype.setDataFromGraph = function () {\n    var nodes = [];\n    var hiddenNodes = [];\n    var edges = [];\n    var hiddenEdges = [];\n    var comboEdges = [];\n    var combos = [];\n    var hiddenCombos = [];\n    var nodeItems = this.graph.getNodes();\n    var edgeItems = this.graph.getEdges();\n    var comboItems = this.graph.getCombos();\n    var nodeLength = nodeItems.length;\n\n    for (var i = 0; i < nodeLength; i++) {\n      var nodeItem = nodeItems[i];\n      if (!nodeItem || nodeItem.destroyed) continue;\n      var model = nodeItem.getModel();\n\n      if (!nodeItem.isVisible()) {\n        hiddenNodes.push(model);\n        continue;\n      }\n\n      nodes.push(model);\n    }\n\n    var edgeLength = edgeItems.length;\n\n    for (var i = 0; i < edgeLength; i++) {\n      var edgeItem = edgeItems[i];\n      if (!edgeItem || edgeItem.destroyed) continue;\n      var model = edgeItem.getModel();\n\n      if (!edgeItem.isVisible()) {\n        hiddenEdges.push(model);\n        continue;\n      }\n\n      if (!model.isComboEdge) edges.push(model);else comboEdges.push(model);\n    }\n\n    var comboLength = comboItems.length;\n\n    for (var i = 0; i < comboLength; i++) {\n      var comboItem = comboItems[i];\n      if (comboItem.destroyed) continue;\n      var model = comboItem.getModel();\n\n      if (!comboItem.isVisible()) {\n        hiddenCombos.push(model);\n        continue;\n      }\n\n      combos.push(model);\n    }\n\n    return {\n      nodes: nodes,\n      hiddenNodes: hiddenNodes,\n      edges: edges,\n      hiddenEdges: hiddenEdges,\n      combos: combos,\n      hiddenCombos: hiddenCombos,\n      comboEdges: comboEdges\n    };\n  }; // 重新布局\n\n\n  LayoutController.prototype.relayout = function (reloadData) {\n    var _this = this;\n\n    var _a = this,\n        graph = _a.graph,\n        layoutMethods = _a.layoutMethods,\n        layoutCfg = _a.layoutCfg;\n\n    if (reloadData) {\n      this.data = this.setDataFromGraph();\n      var nodes = this.data.nodes;\n\n      if (!nodes) {\n        return false;\n      }\n\n      this.initPositions(layoutCfg.center, nodes);\n    }\n\n    graph.emit('beforelayout');\n    var start = Promise.resolve();\n    layoutMethods === null || layoutMethods === void 0 ? void 0 : layoutMethods.forEach(function (layoutMethod, index) {\n      var currentCfg = layoutCfg[index] || layoutCfg;\n      start = start.then(function () {\n        var _a;\n\n        var relayoutPromise = _this.execLayoutMethod(layoutMethod, currentCfg);\n\n        if (index === layoutMethods.length - 1) {\n          (_a = layoutCfg.onAllLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(layoutCfg);\n        }\n\n        return relayoutPromise;\n      });\n    });\n  }; // 筛选参与布局的nodes和edges\n\n\n  LayoutController.prototype.filterLayoutData = function (data, cfg) {\n    var nodes = data.nodes,\n        edges = data.edges,\n        rest = __rest(data, [\"nodes\", \"edges\"]);\n\n    if (!nodes) {\n      return data;\n    }\n\n    var nodesFilter;\n    var edegsFilter;\n\n    if (isFunction(cfg === null || cfg === void 0 ? void 0 : cfg.nodesFilter)) {\n      nodesFilter = cfg.nodesFilter;\n    } else {\n      nodesFilter = function nodesFilter() {\n        return true;\n      };\n    }\n\n    var fNodes = nodes.filter(nodesFilter);\n\n    if (isFunction(cfg === null || cfg === void 0 ? void 0 : cfg.edgesFilter)) {\n      edegsFilter = cfg.edgesFilter;\n    } else {\n      var nodesMap_1 = fNodes.reduce(function (acc, cur) {\n        acc[cur.id] = true;\n        return acc;\n      }, {});\n\n      edegsFilter = function edegsFilter(edge) {\n        return nodesMap_1[edge.source] && nodesMap_1[edge.target];\n      };\n    }\n\n    return __assign({\n      nodes: fNodes,\n      edges: edges.filter(edegsFilter)\n    }, rest);\n  };\n\n  LayoutController.prototype.getLayoutBBox = function (nodes) {\n    var graph = this.graph;\n    var graphGroupNodes = groupBy(graph.getNodes(), function (n) {\n      return n.getModel().layoutOrder;\n    });\n    var layoutNodes = Object.values(graphGroupNodes).map(function (value) {\n      var bbox = calculationItemsBBox(value);\n      bbox.size = [bbox.width, bbox.height];\n      return bbox;\n    });\n    var groupNodes = Object.values(groupBy(nodes, 'layoutOrder'));\n    return {\n      groupNodes: groupNodes,\n      layoutNodes: layoutNodes\n    };\n  }; // 控制布局动画\n  // eslint-disable-next-line class-methods-use-this\n\n\n  LayoutController.prototype.layoutAnimate = function () {}; // 将当前节点的平均中心移动到原点\n\n\n  LayoutController.prototype.moveToZero = function () {\n    var graph = this.graph;\n    var data = graph.get('data');\n    var nodes = data.nodes;\n\n    if (nodes[0].x === undefined || nodes[0].x === null || isNaN(nodes[0].x)) {\n      return;\n    }\n\n    var meanCenter = [0, 0];\n    var nodeLength = nodes.length;\n\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      meanCenter[0] += node.x;\n      meanCenter[1] += node.y;\n    }\n\n    meanCenter[0] /= nodes.length;\n    meanCenter[1] /= nodes.length;\n\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      node.x -= meanCenter[0];\n      node.y -= meanCenter[1];\n    }\n  }; // 初始化节点到 center 附近\n\n\n  LayoutController.prototype.initPositions = function (center, nodes) {\n    var graph = this.graph;\n\n    if (!nodes) {\n      return false;\n    }\n\n    var nodeLength = nodes ? nodes.length : 0;\n    if (!nodeLength) return;\n    var width = graph.get('width') * 0.85;\n    var height = graph.get('height') * 0.85;\n    var horiNum = Math.ceil(Math.sqrt(nodeLength) * (width / height));\n    var vertiNum = Math.ceil(nodeLength / horiNum);\n    var horiGap = width / (horiNum - 1);\n    var vertiGap = height / (vertiNum - 1);\n    if (!isFinite(horiGap) || !horiGap) horiGap = 0;\n    if (!isFinite(vertiGap) || !horiGap) vertiGap = 0;\n    var beginX = center[0] - width / 2;\n    var beginY = center[1] - height / 2;\n    var allHavePos = true;\n\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n\n      if (isNaN(+node.x)) {\n        allHavePos = false;\n        node.x = i % horiNum * horiGap + beginX;\n      }\n\n      if (isNaN(+node.y)) {\n        allHavePos = false;\n        node.y = Math.floor(i / horiNum) * vertiGap + beginY;\n      }\n    }\n\n    return allHavePos;\n  };\n\n  LayoutController.prototype.destroy = function () {\n    this.graph = null;\n    this.destoryLayoutMethods();\n    this.destroyed = true;\n  };\n\n  return LayoutController;\n}();\n\nexport default LayoutController;"],"mappings":"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"},"metadata":{},"sourceType":"module"}