{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { ObjectExt } from '../../util';\nimport { Base } from '../base';\nexport function getMarkup(tagName, noText = false) {\n  return `<g class=\"rotatable\"><g class=\"scalable\"><${tagName}/></g>${noText ? '' : '<text/>'}</g>`;\n}\nexport function getName(name) {\n  return `basic.${name}`;\n}\nexport function getImageUrlHook(attrName = 'xlink:href') {\n  const hook = metadata => {\n    const {\n      imageUrl,\n      imageWidth,\n      imageHeight\n    } = metadata,\n          others = __rest(metadata, [\"imageUrl\", \"imageWidth\", \"imageHeight\"]);\n\n    if (imageUrl != null || imageWidth != null || imageHeight != null) {\n      const apply = () => {\n        if (others.attrs) {\n          const image = others.attrs.image;\n\n          if (imageUrl != null) {\n            image[attrName] = imageUrl;\n          }\n\n          if (imageWidth != null) {\n            image.width = imageWidth;\n          }\n\n          if (imageHeight != null) {\n            image.height = imageHeight;\n          }\n\n          others.attrs.image = image;\n        }\n      };\n\n      if (others.attrs) {\n        if (others.attrs.image == null) {\n          others.attrs.image = {};\n        }\n\n        apply();\n      } else {\n        others.attrs = {\n          image: {}\n        };\n        apply();\n      }\n    }\n\n    return others;\n  };\n\n  return hook;\n}\nexport function createShape(shape, config, options = {}) {\n  const name = getName(shape);\n  const defaults = {\n    constructorName: name,\n    attrs: {\n      '.': {\n        fill: '#ffffff',\n        stroke: 'none'\n      },\n      [shape]: {\n        fill: '#ffffff',\n        stroke: '#000000'\n      }\n    }\n  };\n\n  if (!options.ignoreMarkup) {\n    defaults.markup = getMarkup(shape, options.noText === true);\n  }\n\n  const base = options.parent || Base;\n  return base.define(ObjectExt.merge(defaults, config, {\n    shape: name\n  }));\n}","map":{"version":3,"mappings":";;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,YAA1B;AAGA,SAASC,IAAT,QAAqB,SAArB;AAEA,OAAM,SAAUC,SAAV,CAAoBC,OAApB,EAAqCC,MAAM,GAAG,KAA9C,EAAmD;EACvD,OAAO,6CAA6CD,OAAO,SACzDC,MAAM,GAAG,EAAH,GAAQ,SAChB,MAFA;AAGD;AAED,OAAM,SAAUC,OAAV,CAAkBC,IAAlB,EAA8B;EAClC,OAAO,SAASA,IAAI,EAApB;AACD;AAED,OAAM,SAAUC,eAAV,CAA0BC,QAAQ,GAAG,YAArC,EAAiD;EACrD,MAAMC,IAAI,GAAmBC,QAAD,IAAa;IACvC,MAAM;MAAEC,QAAF;MAAYC,UAAZ;MAAwBC;IAAxB,IAAmDH,QAAzD;IAAA,MAA8CI,MAAM,UAAKJ,QAAL,EAA9C,yCAA8C,CAApD;;IACA,IAAIC,QAAQ,IAAI,IAAZ,IAAoBC,UAAU,IAAI,IAAlC,IAA0CC,WAAW,IAAI,IAA7D,EAAmE;MACjE,MAAME,KAAK,GAAG,MAAK;QACjB,IAAID,MAAM,CAACE,KAAX,EAAkB;UAChB,MAAMC,KAAK,GAAGH,MAAM,CAACE,KAAP,CAAaC,KAA3B;;UACA,IAAIN,QAAQ,IAAI,IAAhB,EAAsB;YACpBM,KAAK,CAACT,QAAD,CAAL,GAAkBG,QAAlB;UACD;;UACD,IAAIC,UAAU,IAAI,IAAlB,EAAwB;YACtBK,KAAK,CAACC,KAAN,GAAcN,UAAd;UACD;;UACD,IAAIC,WAAW,IAAI,IAAnB,EAAyB;YACvBI,KAAK,CAACE,MAAN,GAAeN,WAAf;UACD;;UACDC,MAAM,CAACE,KAAP,CAAaC,KAAb,GAAqBA,KAArB;QACD;MACF,CAdD;;MAgBA,IAAIH,MAAM,CAACE,KAAX,EAAkB;QAChB,IAAIF,MAAM,CAACE,KAAP,CAAaC,KAAb,IAAsB,IAA1B,EAAgC;UAC9BH,MAAM,CAACE,KAAP,CAAaC,KAAb,GAAqB,EAArB;QACD;;QACDF,KAAK;MACN,CALD,MAKO;QACLD,MAAM,CAACE,KAAP,GAAe;UACbC,KAAK,EAAE;QADM,CAAf;QAGAF,KAAK;MACN;IACF;;IAED,OAAOD,MAAP;EACD,CAjCD;;EAmCA,OAAOL,IAAP;AACD;AAED,OAAM,SAAUW,WAAV,CACJC,KADI,EAEJC,MAFI,EAGJC,UAII,EAPA,EAOE;EAEN,MAAMjB,IAAI,GAAGD,OAAO,CAACgB,KAAD,CAApB;EACA,MAAMG,QAAQ,GAAgB;IAC5BC,eAAe,EAAEnB,IADW;IAE5BU,KAAK,EAAE;MACL,KAAK;QACHU,IAAI,EAAE,SADH;QAEHC,MAAM,EAAE;MAFL,CADA;MAKL,CAACN,KAAD,GAAS;QACPK,IAAI,EAAE,SADC;QAEPC,MAAM,EAAE;MAFD;IALJ;EAFqB,CAA9B;;EAcA,IAAI,CAACJ,OAAO,CAACK,YAAb,EAA2B;IACzBJ,QAAQ,CAACK,MAAT,GAAkB3B,SAAS,CAACmB,KAAD,EAAQE,OAAO,CAACnB,MAAR,KAAmB,IAA3B,CAA3B;EACD;;EAED,MAAM0B,IAAI,GAAGP,OAAO,CAACQ,MAAR,IAAkB9B,IAA/B;EACA,OAAO6B,IAAI,CAACE,MAAL,CACLhC,SAAS,CAACiC,KAAV,CAAgBT,QAAhB,EAA0BF,MAA1B,EAAkC;IAAED,KAAK,EAAEf;EAAT,CAAlC,CADK,CAAP;AAGD","names":["ObjectExt","Base","getMarkup","tagName","noText","getName","name","getImageUrlHook","attrName","hook","metadata","imageUrl","imageWidth","imageHeight","others","apply","attrs","image","width","height","createShape","shape","config","options","defaults","constructorName","fill","stroke","ignoreMarkup","markup","base","parent","define","merge"],"sourceRoot":"","sources":["../../../src/shape/basic/util.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}