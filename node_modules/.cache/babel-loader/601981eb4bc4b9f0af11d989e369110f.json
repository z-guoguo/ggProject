{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nvar DEFAULT_TRIGGER = 'click';\nvar ALLOW_EVENTS = ['click', 'dblclick'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      /**\n       * 发生收缩/扩展变化时的回调\n       */\n      trigger: DEFAULT_TRIGGER,\n      onChange: function onChange() {}\n    };\n  },\n  getEvents: function getEvents() {\n    var _a;\n\n    var trigger; // 检测输入是否合法\n\n    if (ALLOW_EVENTS.includes(this.trigger)) {\n      trigger = this.trigger;\n    } else {\n      trigger = DEFAULT_TRIGGER; // eslint-disable-next-line no-console\n\n      console.warn(\"Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'\");\n    }\n\n    return _a = {}, _a[\"node:\".concat(trigger)] = 'onNodeClick', // 支持移动端事件\n    _a.touchstart = 'onNodeClick', _a;\n  },\n  onNodeClick: function onNodeClick(e) {\n    var item = e.item;\n    if (!item) return; // 如果节点进行过更新，model 会进行 merge，直接改 model 就不能改布局，所以需要去改源数据\n\n    var sourceData = this.graph.findDataById(item.get('id'));\n\n    if (!sourceData) {\n      return;\n    }\n\n    var children = sourceData.children; // 叶子节点的收缩和展开没有意义\n\n    if (!children || children.length === 0) {\n      return;\n    }\n\n    var collapsed = !sourceData.collapsed;\n\n    if (!this.shouldBegin(e, collapsed)) {\n      return;\n    }\n\n    sourceData.collapsed = collapsed;\n    item.getModel().collapsed = collapsed;\n    this.graph.emit('itemcollapsed', {\n      item: e.item,\n      collapsed: collapsed\n    });\n\n    if (!this.shouldUpdate(e, collapsed)) {\n      return;\n    }\n\n    this.onChange(item, collapsed);\n    this.graph.layout();\n  }\n};","map":{"version":3,"names":["DEFAULT_TRIGGER","ALLOW_EVENTS","getDefaultCfg","trigger","onChange","getEvents","_a","includes","console","warn","concat","touchstart","onNodeClick","e","item","sourceData","graph","findDataById","get","children","length","collapsed","shouldBegin","getModel","emit","shouldUpdate","layout"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-pc/es/behavior/collapse-expand.js"],"sourcesContent":["var DEFAULT_TRIGGER = 'click';\nvar ALLOW_EVENTS = ['click', 'dblclick'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      /**\n       * 发生收缩/扩展变化时的回调\n       */\n      trigger: DEFAULT_TRIGGER,\n      onChange: function onChange() {}\n    };\n  },\n  getEvents: function getEvents() {\n    var _a;\n\n    var trigger; // 检测输入是否合法\n\n    if (ALLOW_EVENTS.includes(this.trigger)) {\n      trigger = this.trigger;\n    } else {\n      trigger = DEFAULT_TRIGGER; // eslint-disable-next-line no-console\n\n      console.warn(\"Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'\");\n    }\n\n    return _a = {}, _a[\"node:\".concat(trigger)] = 'onNodeClick', // 支持移动端事件\n    _a.touchstart = 'onNodeClick', _a;\n  },\n  onNodeClick: function onNodeClick(e) {\n    var item = e.item;\n    if (!item) return; // 如果节点进行过更新，model 会进行 merge，直接改 model 就不能改布局，所以需要去改源数据\n\n    var sourceData = this.graph.findDataById(item.get('id'));\n\n    if (!sourceData) {\n      return;\n    }\n\n    var children = sourceData.children; // 叶子节点的收缩和展开没有意义\n\n    if (!children || children.length === 0) {\n      return;\n    }\n\n    var collapsed = !sourceData.collapsed;\n\n    if (!this.shouldBegin(e, collapsed)) {\n      return;\n    }\n\n    sourceData.collapsed = collapsed;\n    item.getModel().collapsed = collapsed;\n    this.graph.emit('itemcollapsed', {\n      item: e.item,\n      collapsed: collapsed\n    });\n\n    if (!this.shouldUpdate(e, collapsed)) {\n      return;\n    }\n\n    this.onChange(item, collapsed);\n    this.graph.layout();\n  }\n};"],"mappings":";AAAA,IAAIA,eAAe,GAAG,OAAtB;AACA,IAAIC,YAAY,GAAG,CAAC,OAAD,EAAU,UAAV,CAAnB;AACA,eAAe;EACbC,aAAa,EAAE,SAASA,aAAT,GAAyB;IACtC,OAAO;MACL;AACN;AACA;MACMC,OAAO,EAAEH,eAJJ;MAKLI,QAAQ,EAAE,SAASA,QAAT,GAAoB,CAAE;IAL3B,CAAP;EAOD,CATY;EAUbC,SAAS,EAAE,SAASA,SAAT,GAAqB;IAC9B,IAAIC,EAAJ;;IAEA,IAAIH,OAAJ,CAH8B,CAGjB;;IAEb,IAAIF,YAAY,CAACM,QAAb,CAAsB,KAAKJ,OAA3B,CAAJ,EAAyC;MACvCA,OAAO,GAAG,KAAKA,OAAf;IACD,CAFD,MAEO;MACLA,OAAO,GAAGH,eAAV,CADK,CACsB;;MAE3BQ,OAAO,CAACC,IAAR,CAAa,mEAAb;IACD;;IAED,OAAOH,EAAE,GAAG,EAAL,EAASA,EAAE,CAAC,QAAQI,MAAR,CAAeP,OAAf,CAAD,CAAF,GAA8B,aAAvC,EAAsD;IAC7DG,EAAE,CAACK,UAAH,GAAgB,aADT,EACwBL,EAD/B;EAED,CAzBY;EA0BbM,WAAW,EAAE,SAASA,WAAT,CAAqBC,CAArB,EAAwB;IACnC,IAAIC,IAAI,GAAGD,CAAC,CAACC,IAAb;IACA,IAAI,CAACA,IAAL,EAAW,OAFwB,CAEhB;;IAEnB,IAAIC,UAAU,GAAG,KAAKC,KAAL,CAAWC,YAAX,CAAwBH,IAAI,CAACI,GAAL,CAAS,IAAT,CAAxB,CAAjB;;IAEA,IAAI,CAACH,UAAL,EAAiB;MACf;IACD;;IAED,IAAII,QAAQ,GAAGJ,UAAU,CAACI,QAA1B,CAVmC,CAUC;;IAEpC,IAAI,CAACA,QAAD,IAAaA,QAAQ,CAACC,MAAT,KAAoB,CAArC,EAAwC;MACtC;IACD;;IAED,IAAIC,SAAS,GAAG,CAACN,UAAU,CAACM,SAA5B;;IAEA,IAAI,CAAC,KAAKC,WAAL,CAAiBT,CAAjB,EAAoBQ,SAApB,CAAL,EAAqC;MACnC;IACD;;IAEDN,UAAU,CAACM,SAAX,GAAuBA,SAAvB;IACAP,IAAI,CAACS,QAAL,GAAgBF,SAAhB,GAA4BA,SAA5B;IACA,KAAKL,KAAL,CAAWQ,IAAX,CAAgB,eAAhB,EAAiC;MAC/BV,IAAI,EAAED,CAAC,CAACC,IADuB;MAE/BO,SAAS,EAAEA;IAFoB,CAAjC;;IAKA,IAAI,CAAC,KAAKI,YAAL,CAAkBZ,CAAlB,EAAqBQ,SAArB,CAAL,EAAsC;MACpC;IACD;;IAED,KAAKjB,QAAL,CAAcU,IAAd,EAAoBO,SAApB;IACA,KAAKL,KAAL,CAAWU,MAAX;EACD;AA7DY,CAAf"},"metadata":{},"sourceType":"module"}