{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { deepMix } from '@antv/util';\nimport { ext } from '@antv/matrix-util';\nimport Button from './timeButton';\nimport { TIMEBAR_CONFIG_CHANGE, PRE_STEP_BTN, NEXT_STEP_BTN } from './constant';\nvar transform = ext.transform;\nvar DEFAULT_RECT_FILL = '#aaa';\nvar DEFAULT_RECT_STROKE = 'green';\nvar DEFAULT_PLAYBTN_STYLE = {\n  fill: '#aaa',\n  fillOpacity: 0.35,\n  stroke: '#aaa'\n};\nvar DEFAULT_PREBTN_STYLE = {\n  fill: '#fff'\n};\nvar DEFAULT_NEXTBTN_STYLE = {\n  fill: 'green'\n};\nvar DEFAULT_SPEED_CONTROLLER_STYLE = {\n  pointer: {\n    fill: '#aaa',\n    lineWidth: 0\n  },\n  scroller: {\n    stroke: '#aaa',\n    fill: '#aaa',\n    lineWidth: 1,\n    lineAppendWidth: 5,\n    cursor: 'pointer'\n  },\n  text: {\n    fill: '#aaa',\n    textBaseline: 'top'\n  }\n};\nvar DEFAULT_TIMETYPE_CONTROLLER_STYLE = {\n  check: {\n    stroke: 'green',\n    lineWidth: 3\n  },\n  box: {\n    fill: '#fff',\n    stroke: '#aaa',\n    lineWidth: 2,\n    radius: 3,\n    width: 12,\n    height: 12\n  },\n  text: {\n    fill: '#aaa',\n    fontSize: 12,\n    textBaseline: 'top'\n  }\n};\nvar DEFAULT_CONTROLLER_CONFIG = {\n  speed: 1,\n  loop: false,\n  fill: '#fff',\n  stroke: '#fff',\n  hideTimeTypeController: false,\n  preBtnStyle: {\n    fill: '#aaa',\n    stroke: '#aaa'\n  },\n  nextBtnStyle: {\n    fill: '#aaa',\n    stroke: '#aaa'\n  },\n  playBtnStyle: {\n    fill: '#aaa',\n    stroke: '#aaa',\n    fillOpacity: 0.05\n  },\n  speedControllerStyle: DEFAULT_SPEED_CONTROLLER_STYLE,\n  timeTypeControllerStyle: DEFAULT_TIMETYPE_CONTROLLER_STYLE\n};\nvar SPEED_CONTROLLER_OFFSET = 110;\nvar TOGGLE_MODEL_OFFSET = 50;\n\nvar ControllerBtn =\n/** @class */\nfunction () {\n  function ControllerBtn(cfg) {\n    this.controllerCfg = deepMix({}, DEFAULT_CONTROLLER_CONFIG, cfg);\n    this.group = cfg.group;\n    this.controllerGroup = this.group.addGroup({\n      name: 'controller-group'\n    });\n    this.speedAxisY = [];\n    this.currentSpeed = this.controllerCfg.speed;\n    this.currentType = 'range';\n    this.fontFamily = cfg.fontFamily || 'Arial, sans-serif';\n    this.init();\n  }\n\n  ControllerBtn.prototype.init = function () {\n    this.renderPlayButton();\n  };\n  /** 获取播放键 marker path */\n\n\n  ControllerBtn.prototype.getNextMarkerPath = function (x, y, len) {\n    return [['M', x, y - len], ['L', x + len, y], ['L', x, y + len], ['Z', x, y - len], ['M', x, y], ['L', x - len, y - len], ['L', x - len, y + len], ['Z']];\n  };\n\n  ControllerBtn.prototype.getPreMarkerPath = function (x, y, len) {\n    return [['M', x, y - len], ['L', x - len, y], ['L', x, y + len], ['L', x, y - len], ['M', x, y], ['L', x + len, y - len], ['L', x + len, y + len], ['Z']];\n  };\n\n  ControllerBtn.prototype.renderPlayButton = function () {\n    var controllerCfg = this.controllerCfg;\n    var width = controllerCfg.width,\n        height = controllerCfg.height,\n        x = controllerCfg.x,\n        y = controllerCfg.y,\n        hideTimeTypeController = controllerCfg.hideTimeTypeController,\n        _a = controllerCfg.fill,\n        fill = _a === void 0 ? DEFAULT_RECT_FILL : _a,\n        _b = controllerCfg.stroke,\n        stroke = _b === void 0 ? DEFAULT_RECT_STROKE : _b,\n        _c = controllerCfg.containerStyle,\n        containerStyle = _c === void 0 ? {} : _c;\n\n    var playBtnStyle = __assign(__assign({}, DEFAULT_PLAYBTN_STYLE), controllerCfg.playBtnStyle || {});\n\n    var preBtnStyle = __assign(__assign({}, DEFAULT_PREBTN_STYLE), controllerCfg.preBtnStyle || {});\n\n    var nextBtnStyle = __assign(__assign({}, DEFAULT_NEXTBTN_STYLE), controllerCfg.nextBtnStyle || {});\n\n    var r = height / 2 - 5;\n    var realY = y + 10; // 绘制最外层的矩形包围框\n\n    var container = this.controllerGroup.addShape('rect', {\n      attrs: __assign({\n        x: x,\n        y: realY,\n        width: width,\n        height: height,\n        stroke: stroke,\n        fill: fill\n      }, containerStyle),\n      name: 'container-rect'\n    });\n\n    if (this.playButton) {\n      this.playButton.update({\n        x: width / 2,\n        y: realY,\n        r: r\n      });\n    } else {\n      this.playButton = new Button({\n        group: this.controllerGroup,\n        x: width / 2,\n        y: realY + r + 5,\n        r: r,\n        isPlay: this.isPlay,\n        style: playBtnStyle\n      });\n    } // 后退按钮\n\n\n    var prePaddingX = preBtnStyle.offsetX || 0;\n    var prePaddingY = preBtnStyle.offsetY || 0;\n    var preR = (preBtnStyle.scale || 1) * r;\n    this.controllerGroup.addShape('path', {\n      attrs: __assign({\n        path: this.getPreMarkerPath(width / 2 - 5 * r + prePaddingX, realY + r + 5 + prePaddingY, preR * 0.5)\n      }, preBtnStyle),\n      name: PRE_STEP_BTN\n    }); // 前进按钮\n\n    var nxtPaddingX = nextBtnStyle.offsetX || 0;\n    var nxtPaddingY = nextBtnStyle.offsetY || 0;\n    var nxtR = (nextBtnStyle.scale || 1) * r;\n    this.controllerGroup.addShape('path', {\n      attrs: __assign({\n        path: this.getNextMarkerPath(width / 2 + 5 * r + nxtPaddingX, realY + r + 5 + nxtPaddingY, nxtR * 0.5)\n      }, nextBtnStyle),\n      name: NEXT_STEP_BTN\n    });\n    container.toBack(); // 调节speed的按钮\n\n    this.renderSpeedBtn();\n\n    if (!hideTimeTypeController) {\n      this.renderToggleTime();\n    }\n\n    this.bindEvent(); // 根据配置的 scale、offsetX，offsetY 缩放和移动控制栏\n\n    var _d = this.controllerCfg.scale,\n        scale = _d === void 0 ? 1 : _d;\n    var currentBBox = this.controllerGroup.getCanvasBBox();\n    var centerX = (currentBBox.maxX + currentBBox.minX) / 2;\n    var centerY = (currentBBox.maxY + currentBBox.minY) / 2;\n    var matrix = transform([1, 0, 0, 0, 1, 0, 0, 0, 1], [['t', -centerX, -centerY], ['s', scale, scale], ['t', centerX, centerY]]);\n    this.controllerGroup.setMatrix(matrix);\n  };\n\n  ControllerBtn.prototype.renderSpeedBtn = function () {\n    var _a = this.controllerCfg,\n        y = _a.y,\n        width = _a.width,\n        hideTimeTypeController = _a.hideTimeTypeController;\n\n    var speedControllerStyle = __assign(__assign({}, DEFAULT_SPEED_CONTROLLER_STYLE), this.controllerCfg.speedControllerStyle || {});\n\n    var _b = speedControllerStyle.scroller,\n        scroller = _b === void 0 ? {} : _b,\n        _c = speedControllerStyle.text,\n        text = _c === void 0 ? {} : _c,\n        _d = speedControllerStyle.pointer,\n        pointer = _d === void 0 ? {} : _d,\n        _e = speedControllerStyle.scale,\n        scale = _e === void 0 ? 1 : _e,\n        _f = speedControllerStyle.offsetX,\n        offsetX = _f === void 0 ? 0 : _f,\n        _g = speedControllerStyle.offsetY,\n        offsetY = _g === void 0 ? 0 : _g;\n    var speedGroup = this.controllerGroup.addGroup({\n      name: 'speed-group'\n    });\n    this.speedGroup = speedGroup;\n    var speedNum = [];\n    var maxSpeed = 5;\n    this.speedAxisY = [19, 22, 26, 32, 39]; // 增加speed刻度\n\n    for (var i = 0; i < 5; i++) {\n      var axisY = y + this.speedAxisY[i]; // 灰色刻度\n\n      var startX = width - (!hideTimeTypeController ? SPEED_CONTROLLER_OFFSET : TOGGLE_MODEL_OFFSET);\n      speedGroup.addShape('line', {\n        attrs: __assign({\n          x1: startX,\n          x2: startX + 15,\n          y1: axisY,\n          y2: axisY\n        }, scroller),\n        speed: maxSpeed,\n        name: 'speed-rect'\n      });\n      this.speedAxisY[i] = axisY;\n      speedNum.push(maxSpeed);\n      maxSpeed = maxSpeed - 1;\n    } // 速度文本\n\n\n    this.speedText = speedGroup.addShape('text', {\n      attrs: __assign({\n        x: width - (!hideTimeTypeController ? SPEED_CONTROLLER_OFFSET : TOGGLE_MODEL_OFFSET) + 20,\n        y: this.speedAxisY[0] + 4,\n        text: \"1.0X\",\n        fontFamily: this.fontFamily || 'Arial, sans-serif'\n      }, text),\n      name: 'speed-text'\n    });\n    this.speedPoint = speedGroup.addShape('path', {\n      attrs: __assign({\n        path: this.getPointerPath(width - (!hideTimeTypeController ? SPEED_CONTROLLER_OFFSET : TOGGLE_MODEL_OFFSET), 0),\n        matrix: [1, 0, 0, 0, 1, 0, 0, this.speedAxisY[4], 1]\n      }, pointer),\n      name: 'speed-pointer'\n    }); // 根据配置在 speedControllerStyle 中的 scale offsetX offsetY 缩放和移动速度控制器\n\n    var currentBBox = this.speedGroup.getCanvasBBox();\n    var centerX = (currentBBox.maxX + currentBBox.minX) / 2;\n    var centerY = (currentBBox.maxY + currentBBox.minY) / 2;\n    var matrix = this.speedGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    matrix = transform(matrix, [['t', -centerX, -centerY], ['s', scale, scale], ['t', centerX + offsetX * scale, centerY + offsetY * scale]]);\n    this.speedGroup.setMatrix(matrix);\n  };\n\n  ControllerBtn.prototype.getPointerPath = function (x, y) {\n    return [['M', x, y], ['L', x - 10, y - 4], ['L', x - 10, y + 4], ['Z']];\n  };\n\n  ControllerBtn.prototype.renderToggleTime = function () {\n    var _a;\n\n    var width = this.controllerCfg.width;\n\n    var timeTypeControllerStyle = __assign(__assign({}, DEFAULT_TIMETYPE_CONTROLLER_STYLE), this.controllerCfg.timeTypeControllerStyle || {});\n\n    var _b = timeTypeControllerStyle.scale,\n        scale = _b === void 0 ? 1 : _b,\n        _c = timeTypeControllerStyle.offsetX,\n        offsetX = _c === void 0 ? 0 : _c,\n        _d = timeTypeControllerStyle.offsetY,\n        offsetY = _d === void 0 ? 0 : _d,\n        _e = timeTypeControllerStyle.box,\n        box = _e === void 0 ? {} : _e,\n        _f = timeTypeControllerStyle.check,\n        check = _f === void 0 ? {} : _f,\n        _g = timeTypeControllerStyle.text,\n        text = _g === void 0 ? {} : _g;\n    this.toggleGroup = this.controllerGroup.addGroup({\n      name: 'toggle-group'\n    });\n    this.toggleGroup.addShape('rect', {\n      attrs: __assign({\n        x: width - TOGGLE_MODEL_OFFSET,\n        y: this.speedAxisY[0] + 3.5\n      }, box),\n      isChecked: false,\n      name: 'toggle-model'\n    });\n    this.checkedIcon = this.toggleGroup.addShape('path', {\n      attrs: __assign({\n        path: [['M', width - TOGGLE_MODEL_OFFSET + 3, this.speedAxisY[1] + 6], ['L', width - TOGGLE_MODEL_OFFSET + 7, this.speedAxisY[1] + 10], ['L', width - TOGGLE_MODEL_OFFSET + 12, this.speedAxisY[1] + 4]]\n      }, check),\n      capture: false,\n      name: 'check-icon'\n    });\n    this.checkedIcon.hide();\n    this.checkedText = this.toggleGroup.addShape('text', {\n      attrs: __assign({\n        text: ((_a = this.controllerCfg) === null || _a === void 0 ? void 0 : _a.timePointControllerText) || '单一时间',\n        x: width - TOGGLE_MODEL_OFFSET + 15,\n        y: this.speedAxisY[0] + 4,\n        fontFamily: typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif'\n      }, text),\n      name: 'checked-text'\n    }); // 根据配置在 timeTypeControllerStyle 中的 scale offsetX offsetY 缩放和移动速度控制器\n\n    var currentBBox = this.toggleGroup.getCanvasBBox();\n    var centerX = (currentBBox.maxX + currentBBox.minX) / 2;\n    var centerY = (currentBBox.maxY + currentBBox.minY) / 2;\n    var matrix = this.toggleGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    matrix = transform(matrix, [['t', -centerX, -centerY], ['s', scale, scale], ['t', centerX + offsetX * scale, centerY + offsetY * scale]]);\n    this.toggleGroup.setMatrix(matrix);\n  };\n\n  ControllerBtn.prototype.bindEvent = function () {\n    var _this = this;\n\n    this.speedGroup.on('speed-rect:click', function (evt) {\n      var currentPointerY = evt.target.attr('y1');\n\n      var pointerMatrix = _this.speedPoint.attr('matrix');\n\n      var currentYIdx = _this.speedAxisY.indexOf(pointerMatrix[7] || 0);\n\n      var targetYIdx = _this.speedAxisY.indexOf(currentPointerY);\n\n      var yDiff = _this.speedAxisY[targetYIdx] - _this.speedAxisY[currentYIdx];\n      pointerMatrix = transform(pointerMatrix, [['t', 0, yDiff]]);\n\n      _this.speedPoint.setMatrix(pointerMatrix);\n\n      _this.currentSpeed = _this.speedAxisY.length - targetYIdx;\n\n      _this.speedText.attr('text', \"\".concat(_this.currentSpeed, \".0X\"));\n\n      _this.group.emit(TIMEBAR_CONFIG_CHANGE, {\n        speed: _this.currentSpeed,\n        type: _this.currentType\n      });\n    });\n    this.speedGroup.on('mousewheel', function (evt) {\n      evt.preventDefault();\n      var pointerMatrix = _this.speedPoint.attr('matrix') || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      var currentPointerY = pointerMatrix[7];\n\n      var currentYIdx = _this.speedAxisY.indexOf(currentPointerY);\n\n      if (currentYIdx === -1) {\n        // 找到最近的一个 y\n        var minDist_1 = Infinity;\n\n        _this.speedAxisY.forEach(function (y, idx) {\n          var dist = Math.abs(y - currentPointerY);\n\n          if (minDist_1 > dist) {\n            minDist_1 = dist;\n            currentYIdx = idx;\n          }\n        });\n      }\n\n      if (evt.originalEvent.deltaY > 0) currentYIdx = Math.max(0, currentYIdx - 1);else currentYIdx = Math.min(_this.speedAxisY.length - 1, currentYIdx + 1);\n      var yDiff = _this.speedAxisY[currentYIdx] - currentPointerY;\n      pointerMatrix = transform(pointerMatrix, [['t', 0, yDiff]]);\n\n      _this.speedPoint.setMatrix(pointerMatrix);\n\n      _this.currentSpeed = _this.speedAxisY.length - currentYIdx;\n\n      _this.speedText.attr('text', \"\".concat(_this.currentSpeed, \".0X\"));\n\n      _this.group.emit(TIMEBAR_CONFIG_CHANGE, {\n        speed: _this.currentSpeed,\n        type: _this.currentType\n      });\n    });\n\n    if (this.toggleGroup) {\n      this.toggleGroup.on('toggle-model:click', function (evt) {\n        var _a, _b;\n\n        var isChecked = evt.target.get('isChecked');\n\n        if (!isChecked) {\n          _this.checkedIcon.show();\n\n          _this.checkedText.attr('text', ((_a = _this.controllerCfg) === null || _a === void 0 ? void 0 : _a.timeRangeControllerText) || '时间范围');\n\n          _this.currentType = 'single';\n        } else {\n          _this.checkedIcon.hide();\n\n          _this.checkedText.attr('text', ((_b = _this.controllerCfg) === null || _b === void 0 ? void 0 : _b.timePointControllerText) || '单一时间');\n\n          _this.currentType = 'range';\n        }\n\n        evt.target.set('isChecked', !isChecked);\n\n        _this.group.emit(TIMEBAR_CONFIG_CHANGE, {\n          type: _this.currentType,\n          speed: _this.currentSpeed\n        });\n      });\n    }\n  };\n\n  ControllerBtn.prototype.destroy = function () {\n    this.speedGroup.off('speed-rect:click');\n\n    if (this.toggleGroup) {\n      this.toggleGroup.off('toggle-model:click');\n      this.toggleGroup.destroy();\n    }\n\n    this.speedGroup.destroy();\n  };\n\n  return ControllerBtn;\n}();\n\nexport default ControllerBtn;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","deepMix","ext","Button","TIMEBAR_CONFIG_CHANGE","PRE_STEP_BTN","NEXT_STEP_BTN","transform","DEFAULT_RECT_FILL","DEFAULT_RECT_STROKE","DEFAULT_PLAYBTN_STYLE","fill","fillOpacity","stroke","DEFAULT_PREBTN_STYLE","DEFAULT_NEXTBTN_STYLE","DEFAULT_SPEED_CONTROLLER_STYLE","pointer","lineWidth","scroller","lineAppendWidth","cursor","text","textBaseline","DEFAULT_TIMETYPE_CONTROLLER_STYLE","check","box","radius","width","height","fontSize","DEFAULT_CONTROLLER_CONFIG","speed","loop","hideTimeTypeController","preBtnStyle","nextBtnStyle","playBtnStyle","speedControllerStyle","timeTypeControllerStyle","SPEED_CONTROLLER_OFFSET","TOGGLE_MODEL_OFFSET","ControllerBtn","cfg","controllerCfg","group","controllerGroup","addGroup","name","speedAxisY","currentSpeed","currentType","fontFamily","init","renderPlayButton","getNextMarkerPath","x","y","len","getPreMarkerPath","_a","_b","_c","containerStyle","r","realY","container","addShape","attrs","playButton","update","isPlay","style","prePaddingX","offsetX","prePaddingY","offsetY","preR","scale","path","nxtPaddingX","nxtPaddingY","nxtR","toBack","renderSpeedBtn","renderToggleTime","bindEvent","_d","currentBBox","getCanvasBBox","centerX","maxX","minX","centerY","maxY","minY","matrix","setMatrix","_e","_f","_g","speedGroup","speedNum","maxSpeed","axisY","startX","x1","x2","y1","y2","push","speedText","speedPoint","getPointerPath","getMatrix","toggleGroup","isChecked","checkedIcon","capture","hide","checkedText","timePointControllerText","window","getComputedStyle","document","body","getPropertyValue","_this","on","evt","currentPointerY","target","attr","pointerMatrix","currentYIdx","indexOf","targetYIdx","yDiff","concat","emit","type","preventDefault","minDist_1","Infinity","forEach","idx","dist","Math","abs","originalEvent","deltaY","max","min","get","show","timeRangeControllerText","set","destroy","off"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-plugin/es/timeBar/controllerBtn.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { deepMix } from '@antv/util';\nimport { ext } from '@antv/matrix-util';\nimport Button from './timeButton';\nimport { TIMEBAR_CONFIG_CHANGE, PRE_STEP_BTN, NEXT_STEP_BTN } from './constant';\nvar transform = ext.transform;\nvar DEFAULT_RECT_FILL = '#aaa';\nvar DEFAULT_RECT_STROKE = 'green';\nvar DEFAULT_PLAYBTN_STYLE = {\n  fill: '#aaa',\n  fillOpacity: 0.35,\n  stroke: '#aaa'\n};\nvar DEFAULT_PREBTN_STYLE = {\n  fill: '#fff'\n};\nvar DEFAULT_NEXTBTN_STYLE = {\n  fill: 'green'\n};\nvar DEFAULT_SPEED_CONTROLLER_STYLE = {\n  pointer: {\n    fill: '#aaa',\n    lineWidth: 0\n  },\n  scroller: {\n    stroke: '#aaa',\n    fill: '#aaa',\n    lineWidth: 1,\n    lineAppendWidth: 5,\n    cursor: 'pointer'\n  },\n  text: {\n    fill: '#aaa',\n    textBaseline: 'top'\n  }\n};\nvar DEFAULT_TIMETYPE_CONTROLLER_STYLE = {\n  check: {\n    stroke: 'green',\n    lineWidth: 3\n  },\n  box: {\n    fill: '#fff',\n    stroke: '#aaa',\n    lineWidth: 2,\n    radius: 3,\n    width: 12,\n    height: 12\n  },\n  text: {\n    fill: '#aaa',\n    fontSize: 12,\n    textBaseline: 'top'\n  }\n};\nvar DEFAULT_CONTROLLER_CONFIG = {\n  speed: 1,\n  loop: false,\n  fill: '#fff',\n  stroke: '#fff',\n  hideTimeTypeController: false,\n  preBtnStyle: {\n    fill: '#aaa',\n    stroke: '#aaa'\n  },\n  nextBtnStyle: {\n    fill: '#aaa',\n    stroke: '#aaa'\n  },\n  playBtnStyle: {\n    fill: '#aaa',\n    stroke: '#aaa',\n    fillOpacity: 0.05\n  },\n  speedControllerStyle: DEFAULT_SPEED_CONTROLLER_STYLE,\n  timeTypeControllerStyle: DEFAULT_TIMETYPE_CONTROLLER_STYLE\n};\nvar SPEED_CONTROLLER_OFFSET = 110;\nvar TOGGLE_MODEL_OFFSET = 50;\n\nvar ControllerBtn =\n/** @class */\nfunction () {\n  function ControllerBtn(cfg) {\n    this.controllerCfg = deepMix({}, DEFAULT_CONTROLLER_CONFIG, cfg);\n    this.group = cfg.group;\n    this.controllerGroup = this.group.addGroup({\n      name: 'controller-group'\n    });\n    this.speedAxisY = [];\n    this.currentSpeed = this.controllerCfg.speed;\n    this.currentType = 'range';\n    this.fontFamily = cfg.fontFamily || 'Arial, sans-serif';\n    this.init();\n  }\n\n  ControllerBtn.prototype.init = function () {\n    this.renderPlayButton();\n  };\n  /** 获取播放键 marker path */\n\n\n  ControllerBtn.prototype.getNextMarkerPath = function (x, y, len) {\n    return [['M', x, y - len], ['L', x + len, y], ['L', x, y + len], ['Z', x, y - len], ['M', x, y], ['L', x - len, y - len], ['L', x - len, y + len], ['Z']];\n  };\n\n  ControllerBtn.prototype.getPreMarkerPath = function (x, y, len) {\n    return [['M', x, y - len], ['L', x - len, y], ['L', x, y + len], ['L', x, y - len], ['M', x, y], ['L', x + len, y - len], ['L', x + len, y + len], ['Z']];\n  };\n\n  ControllerBtn.prototype.renderPlayButton = function () {\n    var controllerCfg = this.controllerCfg;\n    var width = controllerCfg.width,\n        height = controllerCfg.height,\n        x = controllerCfg.x,\n        y = controllerCfg.y,\n        hideTimeTypeController = controllerCfg.hideTimeTypeController,\n        _a = controllerCfg.fill,\n        fill = _a === void 0 ? DEFAULT_RECT_FILL : _a,\n        _b = controllerCfg.stroke,\n        stroke = _b === void 0 ? DEFAULT_RECT_STROKE : _b,\n        _c = controllerCfg.containerStyle,\n        containerStyle = _c === void 0 ? {} : _c;\n\n    var playBtnStyle = __assign(__assign({}, DEFAULT_PLAYBTN_STYLE), controllerCfg.playBtnStyle || {});\n\n    var preBtnStyle = __assign(__assign({}, DEFAULT_PREBTN_STYLE), controllerCfg.preBtnStyle || {});\n\n    var nextBtnStyle = __assign(__assign({}, DEFAULT_NEXTBTN_STYLE), controllerCfg.nextBtnStyle || {});\n\n    var r = height / 2 - 5;\n    var realY = y + 10; // 绘制最外层的矩形包围框\n\n    var container = this.controllerGroup.addShape('rect', {\n      attrs: __assign({\n        x: x,\n        y: realY,\n        width: width,\n        height: height,\n        stroke: stroke,\n        fill: fill\n      }, containerStyle),\n      name: 'container-rect'\n    });\n\n    if (this.playButton) {\n      this.playButton.update({\n        x: width / 2,\n        y: realY,\n        r: r\n      });\n    } else {\n      this.playButton = new Button({\n        group: this.controllerGroup,\n        x: width / 2,\n        y: realY + r + 5,\n        r: r,\n        isPlay: this.isPlay,\n        style: playBtnStyle\n      });\n    } // 后退按钮\n\n\n    var prePaddingX = preBtnStyle.offsetX || 0;\n    var prePaddingY = preBtnStyle.offsetY || 0;\n    var preR = (preBtnStyle.scale || 1) * r;\n    this.controllerGroup.addShape('path', {\n      attrs: __assign({\n        path: this.getPreMarkerPath(width / 2 - 5 * r + prePaddingX, realY + r + 5 + prePaddingY, preR * 0.5)\n      }, preBtnStyle),\n      name: PRE_STEP_BTN\n    }); // 前进按钮\n\n    var nxtPaddingX = nextBtnStyle.offsetX || 0;\n    var nxtPaddingY = nextBtnStyle.offsetY || 0;\n    var nxtR = (nextBtnStyle.scale || 1) * r;\n    this.controllerGroup.addShape('path', {\n      attrs: __assign({\n        path: this.getNextMarkerPath(width / 2 + 5 * r + nxtPaddingX, realY + r + 5 + nxtPaddingY, nxtR * 0.5)\n      }, nextBtnStyle),\n      name: NEXT_STEP_BTN\n    });\n    container.toBack(); // 调节speed的按钮\n\n    this.renderSpeedBtn();\n\n    if (!hideTimeTypeController) {\n      this.renderToggleTime();\n    }\n\n    this.bindEvent(); // 根据配置的 scale、offsetX，offsetY 缩放和移动控制栏\n\n    var _d = this.controllerCfg.scale,\n        scale = _d === void 0 ? 1 : _d;\n    var currentBBox = this.controllerGroup.getCanvasBBox();\n    var centerX = (currentBBox.maxX + currentBBox.minX) / 2;\n    var centerY = (currentBBox.maxY + currentBBox.minY) / 2;\n    var matrix = transform([1, 0, 0, 0, 1, 0, 0, 0, 1], [['t', -centerX, -centerY], ['s', scale, scale], ['t', centerX, centerY]]);\n    this.controllerGroup.setMatrix(matrix);\n  };\n\n  ControllerBtn.prototype.renderSpeedBtn = function () {\n    var _a = this.controllerCfg,\n        y = _a.y,\n        width = _a.width,\n        hideTimeTypeController = _a.hideTimeTypeController;\n\n    var speedControllerStyle = __assign(__assign({}, DEFAULT_SPEED_CONTROLLER_STYLE), this.controllerCfg.speedControllerStyle || {});\n\n    var _b = speedControllerStyle.scroller,\n        scroller = _b === void 0 ? {} : _b,\n        _c = speedControllerStyle.text,\n        text = _c === void 0 ? {} : _c,\n        _d = speedControllerStyle.pointer,\n        pointer = _d === void 0 ? {} : _d,\n        _e = speedControllerStyle.scale,\n        scale = _e === void 0 ? 1 : _e,\n        _f = speedControllerStyle.offsetX,\n        offsetX = _f === void 0 ? 0 : _f,\n        _g = speedControllerStyle.offsetY,\n        offsetY = _g === void 0 ? 0 : _g;\n    var speedGroup = this.controllerGroup.addGroup({\n      name: 'speed-group'\n    });\n    this.speedGroup = speedGroup;\n    var speedNum = [];\n    var maxSpeed = 5;\n    this.speedAxisY = [19, 22, 26, 32, 39]; // 增加speed刻度\n\n    for (var i = 0; i < 5; i++) {\n      var axisY = y + this.speedAxisY[i]; // 灰色刻度\n\n      var startX = width - (!hideTimeTypeController ? SPEED_CONTROLLER_OFFSET : TOGGLE_MODEL_OFFSET);\n      speedGroup.addShape('line', {\n        attrs: __assign({\n          x1: startX,\n          x2: startX + 15,\n          y1: axisY,\n          y2: axisY\n        }, scroller),\n        speed: maxSpeed,\n        name: 'speed-rect'\n      });\n      this.speedAxisY[i] = axisY;\n      speedNum.push(maxSpeed);\n      maxSpeed = maxSpeed - 1;\n    } // 速度文本\n\n\n    this.speedText = speedGroup.addShape('text', {\n      attrs: __assign({\n        x: width - (!hideTimeTypeController ? SPEED_CONTROLLER_OFFSET : TOGGLE_MODEL_OFFSET) + 20,\n        y: this.speedAxisY[0] + 4,\n        text: \"1.0X\",\n        fontFamily: this.fontFamily || 'Arial, sans-serif'\n      }, text),\n      name: 'speed-text'\n    });\n    this.speedPoint = speedGroup.addShape('path', {\n      attrs: __assign({\n        path: this.getPointerPath(width - (!hideTimeTypeController ? SPEED_CONTROLLER_OFFSET : TOGGLE_MODEL_OFFSET), 0),\n        matrix: [1, 0, 0, 0, 1, 0, 0, this.speedAxisY[4], 1]\n      }, pointer),\n      name: 'speed-pointer'\n    }); // 根据配置在 speedControllerStyle 中的 scale offsetX offsetY 缩放和移动速度控制器\n\n    var currentBBox = this.speedGroup.getCanvasBBox();\n    var centerX = (currentBBox.maxX + currentBBox.minX) / 2;\n    var centerY = (currentBBox.maxY + currentBBox.minY) / 2;\n    var matrix = this.speedGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    matrix = transform(matrix, [['t', -centerX, -centerY], ['s', scale, scale], ['t', centerX + offsetX * scale, centerY + offsetY * scale]]);\n    this.speedGroup.setMatrix(matrix);\n  };\n\n  ControllerBtn.prototype.getPointerPath = function (x, y) {\n    return [['M', x, y], ['L', x - 10, y - 4], ['L', x - 10, y + 4], ['Z']];\n  };\n\n  ControllerBtn.prototype.renderToggleTime = function () {\n    var _a;\n\n    var width = this.controllerCfg.width;\n\n    var timeTypeControllerStyle = __assign(__assign({}, DEFAULT_TIMETYPE_CONTROLLER_STYLE), this.controllerCfg.timeTypeControllerStyle || {});\n\n    var _b = timeTypeControllerStyle.scale,\n        scale = _b === void 0 ? 1 : _b,\n        _c = timeTypeControllerStyle.offsetX,\n        offsetX = _c === void 0 ? 0 : _c,\n        _d = timeTypeControllerStyle.offsetY,\n        offsetY = _d === void 0 ? 0 : _d,\n        _e = timeTypeControllerStyle.box,\n        box = _e === void 0 ? {} : _e,\n        _f = timeTypeControllerStyle.check,\n        check = _f === void 0 ? {} : _f,\n        _g = timeTypeControllerStyle.text,\n        text = _g === void 0 ? {} : _g;\n    this.toggleGroup = this.controllerGroup.addGroup({\n      name: 'toggle-group'\n    });\n    this.toggleGroup.addShape('rect', {\n      attrs: __assign({\n        x: width - TOGGLE_MODEL_OFFSET,\n        y: this.speedAxisY[0] + 3.5\n      }, box),\n      isChecked: false,\n      name: 'toggle-model'\n    });\n    this.checkedIcon = this.toggleGroup.addShape('path', {\n      attrs: __assign({\n        path: [['M', width - TOGGLE_MODEL_OFFSET + 3, this.speedAxisY[1] + 6], ['L', width - TOGGLE_MODEL_OFFSET + 7, this.speedAxisY[1] + 10], ['L', width - TOGGLE_MODEL_OFFSET + 12, this.speedAxisY[1] + 4]]\n      }, check),\n      capture: false,\n      name: 'check-icon'\n    });\n    this.checkedIcon.hide();\n    this.checkedText = this.toggleGroup.addShape('text', {\n      attrs: __assign({\n        text: ((_a = this.controllerCfg) === null || _a === void 0 ? void 0 : _a.timePointControllerText) || '单一时间',\n        x: width - TOGGLE_MODEL_OFFSET + 15,\n        y: this.speedAxisY[0] + 4,\n        fontFamily: typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif'\n      }, text),\n      name: 'checked-text'\n    }); // 根据配置在 timeTypeControllerStyle 中的 scale offsetX offsetY 缩放和移动速度控制器\n\n    var currentBBox = this.toggleGroup.getCanvasBBox();\n    var centerX = (currentBBox.maxX + currentBBox.minX) / 2;\n    var centerY = (currentBBox.maxY + currentBBox.minY) / 2;\n    var matrix = this.toggleGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    matrix = transform(matrix, [['t', -centerX, -centerY], ['s', scale, scale], ['t', centerX + offsetX * scale, centerY + offsetY * scale]]);\n    this.toggleGroup.setMatrix(matrix);\n  };\n\n  ControllerBtn.prototype.bindEvent = function () {\n    var _this = this;\n\n    this.speedGroup.on('speed-rect:click', function (evt) {\n      var currentPointerY = evt.target.attr('y1');\n\n      var pointerMatrix = _this.speedPoint.attr('matrix');\n\n      var currentYIdx = _this.speedAxisY.indexOf(pointerMatrix[7] || 0);\n\n      var targetYIdx = _this.speedAxisY.indexOf(currentPointerY);\n\n      var yDiff = _this.speedAxisY[targetYIdx] - _this.speedAxisY[currentYIdx];\n      pointerMatrix = transform(pointerMatrix, [['t', 0, yDiff]]);\n\n      _this.speedPoint.setMatrix(pointerMatrix);\n\n      _this.currentSpeed = _this.speedAxisY.length - targetYIdx;\n\n      _this.speedText.attr('text', \"\".concat(_this.currentSpeed, \".0X\"));\n\n      _this.group.emit(TIMEBAR_CONFIG_CHANGE, {\n        speed: _this.currentSpeed,\n        type: _this.currentType\n      });\n    });\n    this.speedGroup.on('mousewheel', function (evt) {\n      evt.preventDefault();\n      var pointerMatrix = _this.speedPoint.attr('matrix') || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      var currentPointerY = pointerMatrix[7];\n\n      var currentYIdx = _this.speedAxisY.indexOf(currentPointerY);\n\n      if (currentYIdx === -1) {\n        // 找到最近的一个 y\n        var minDist_1 = Infinity;\n\n        _this.speedAxisY.forEach(function (y, idx) {\n          var dist = Math.abs(y - currentPointerY);\n\n          if (minDist_1 > dist) {\n            minDist_1 = dist;\n            currentYIdx = idx;\n          }\n        });\n      }\n\n      if (evt.originalEvent.deltaY > 0) currentYIdx = Math.max(0, currentYIdx - 1);else currentYIdx = Math.min(_this.speedAxisY.length - 1, currentYIdx + 1);\n      var yDiff = _this.speedAxisY[currentYIdx] - currentPointerY;\n      pointerMatrix = transform(pointerMatrix, [['t', 0, yDiff]]);\n\n      _this.speedPoint.setMatrix(pointerMatrix);\n\n      _this.currentSpeed = _this.speedAxisY.length - currentYIdx;\n\n      _this.speedText.attr('text', \"\".concat(_this.currentSpeed, \".0X\"));\n\n      _this.group.emit(TIMEBAR_CONFIG_CHANGE, {\n        speed: _this.currentSpeed,\n        type: _this.currentType\n      });\n    });\n\n    if (this.toggleGroup) {\n      this.toggleGroup.on('toggle-model:click', function (evt) {\n        var _a, _b;\n\n        var isChecked = evt.target.get('isChecked');\n\n        if (!isChecked) {\n          _this.checkedIcon.show();\n\n          _this.checkedText.attr('text', ((_a = _this.controllerCfg) === null || _a === void 0 ? void 0 : _a.timeRangeControllerText) || '时间范围');\n\n          _this.currentType = 'single';\n        } else {\n          _this.checkedIcon.hide();\n\n          _this.checkedText.attr('text', ((_b = _this.controllerCfg) === null || _b === void 0 ? void 0 : _b.timePointControllerText) || '单一时间');\n\n          _this.currentType = 'range';\n        }\n\n        evt.target.set('isChecked', !isChecked);\n\n        _this.group.emit(TIMEBAR_CONFIG_CHANGE, {\n          type: _this.currentType,\n          speed: _this.currentSpeed\n        });\n      });\n    }\n  };\n\n  ControllerBtn.prototype.destroy = function () {\n    this.speedGroup.off('speed-rect:click');\n\n    if (this.toggleGroup) {\n      this.toggleGroup.off('toggle-model:click');\n      this.toggleGroup.destroy();\n    }\n\n    this.speedGroup.destroy();\n  };\n\n  return ControllerBtn;\n}();\n\nexport default ControllerBtn;"],"mappings":"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"},"metadata":{},"sourceType":"module"}