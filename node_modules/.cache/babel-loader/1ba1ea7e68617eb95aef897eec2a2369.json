{"ast":null,"code":"import { toResult } from './util';\nexport const outside = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, false, args);\nexport const outsideOriented = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, true, args);\nexport const inside = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, false, args);\nexport const insideOriented = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, true, args);\n\nfunction outsideLayout(portPosition, elemBBox, autoOrient, args) {\n  const offset = args.offset != null ? args.offset : 15;\n  const angle = elemBBox.getCenter().theta(portPosition);\n  const bboxAngles = getBBoxAngles(elemBBox);\n  let y;\n  let tx;\n  let ty;\n  let textAnchor;\n  let orientAngle = 0;\n\n  if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n    y = '.3em';\n    tx = offset;\n    ty = 0;\n    textAnchor = 'start';\n  } else if (angle < bboxAngles[0]) {\n    y = '0';\n    tx = 0;\n    ty = -offset;\n\n    if (autoOrient) {\n      orientAngle = -90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  } else if (angle < bboxAngles[3]) {\n    y = '.3em';\n    tx = -offset;\n    ty = 0;\n    textAnchor = 'end';\n  } else {\n    y = '.6em';\n    tx = 0;\n    ty = offset;\n\n    if (autoOrient) {\n      orientAngle = 90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  }\n\n  return toResult({\n    position: {\n      x: Math.round(tx),\n      y: Math.round(ty)\n    },\n    angle: orientAngle,\n    attrs: {\n      '.': {\n        y,\n        'text-anchor': textAnchor\n      }\n    }\n  }, args);\n}\n\nfunction insideLayout(portPosition, elemBBox, autoOrient, args) {\n  const offset = args.offset != null ? args.offset : 15;\n  const angle = elemBBox.getCenter().theta(portPosition);\n  const bboxAngles = getBBoxAngles(elemBBox);\n  let y;\n  let tx;\n  let ty;\n  let textAnchor;\n  let orientAngle = 0;\n\n  if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n    y = '.3em';\n    tx = -offset;\n    ty = 0;\n    textAnchor = 'end';\n  } else if (angle < bboxAngles[0]) {\n    y = '.6em';\n    tx = 0;\n    ty = offset;\n\n    if (autoOrient) {\n      orientAngle = 90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  } else if (angle < bboxAngles[3]) {\n    y = '.3em';\n    tx = offset;\n    ty = 0;\n    textAnchor = 'start';\n  } else {\n    y = '0em';\n    tx = 0;\n    ty = -offset;\n\n    if (autoOrient) {\n      orientAngle = -90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  }\n\n  return toResult({\n    position: {\n      x: Math.round(tx),\n      y: Math.round(ty)\n    },\n    angle: orientAngle,\n    attrs: {\n      '.': {\n        y,\n        'text-anchor': textAnchor\n      }\n    }\n  }, args);\n}\n\nfunction getBBoxAngles(elemBBox) {\n  const center = elemBBox.getCenter();\n  const tl = center.theta(elemBBox.getTopLeft());\n  const bl = center.theta(elemBBox.getBottomLeft());\n  const br = center.theta(elemBBox.getBottomRight());\n  const tr = center.theta(elemBBox.getTopRight());\n  return [tl, tr, br, bl];\n}","map":{"version":3,"mappings":"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","names":["toResult","outside","portPosition","elemBBox","args","outsideLayout","outsideOriented","inside","insideLayout","insideOriented","autoOrient","offset","angle","getCenter","theta","bboxAngles","getBBoxAngles","y","tx","ty","textAnchor","orientAngle","position","x","Math","round","attrs","center","tl","getTopLeft","bl","getBottomLeft","br","getBottomRight","tr","getTopRight"],"sourceRoot":"","sources":["../../../src/registry/port-label-layout/inout.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}