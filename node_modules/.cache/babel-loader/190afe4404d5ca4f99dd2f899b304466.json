{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { deepMix, isString } from '@antv/util';\nimport { parsePathString } from '@antv/path-util';\nimport { pathToPoints, getClosedSpline, roundedHull, paddedHull } from '../util/path';\nimport { isPolygonsIntersect } from '../util/math';\nimport { genConvexHull } from '../element/hull/convexHull';\nimport { genBubbleSet } from '../element/hull/bubbleset';\n/**\n * 用于包裹内部的成员的轮廓。\n * convex hull(凸包)：http://geomalgorithms.com/a10-_hull-1.html#Monotone%20Chain\n * bubble: 使用 bubbleset算法，refer: http://vialab.science.uoit.ca/wp-content/papercite-data/pdf/col2009c.pdf\n * 通过配置 padding 可以调节包裹轮廓对节点的松紧程度\n */\n\nvar Hull =\n/** @class */\nfunction () {\n  function Hull(graph, cfg) {\n    this.cfg = deepMix(this.getDefaultCfg(), cfg);\n    this.graph = graph;\n    this.id = this.cfg.id;\n    this.group = this.cfg.group;\n    this.members = this.cfg.members.map(function (item) {\n      return isString(item) ? graph.findById(item) : item;\n    });\n    this.nonMembers = this.cfg.nonMembers.map(function (item) {\n      return isString(item) ? graph.findById(item) : item;\n    });\n    this.setPadding();\n    this.setType();\n    this.path = this.calcPath(this.members, this.nonMembers);\n    this.render();\n  }\n\n  Hull.prototype.getDefaultCfg = function () {\n    return {\n      id: 'g6-hull',\n      type: 'round-convex',\n      members: [],\n      nonMembers: [],\n      style: {\n        fill: 'lightblue',\n        stroke: 'blue',\n        opacity: 0.2\n      },\n      padding: 10\n    };\n  };\n\n  Hull.prototype.setPadding = function () {\n    var nodeSize = this.members.length && this.members[0].getKeyShape().getCanvasBBox().width / 2;\n    this.padding = this.cfg.padding > 0 ? this.cfg.padding + nodeSize : 10 + nodeSize;\n    this.cfg.bubbleCfg = {\n      nodeR0: this.padding - nodeSize,\n      nodeR1: this.padding - nodeSize,\n      morphBuffer: this.padding - nodeSize\n    };\n  };\n\n  Hull.prototype.setType = function () {\n    this.type = this.cfg.type;\n\n    if (this.members.length < 3) {\n      this.type = 'round-convex';\n    }\n\n    if (this.type !== 'round-convex' && this.type !== 'smooth-convex' && this.type !== 'bubble') {\n      console.warn('The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default.');\n      this.type = 'round-convex';\n    }\n  };\n\n  Hull.prototype.calcPath = function (members, nonMembers) {\n    var contour, path, hull;\n\n    switch (this.type) {\n      case 'round-convex':\n        contour = genConvexHull(members);\n        hull = roundedHull(contour.map(function (p) {\n          return [p.x, p.y];\n        }), this.padding);\n        path = parsePathString(hull);\n        break;\n\n      case 'smooth-convex':\n        contour = genConvexHull(members);\n\n        if (contour.length === 2) {\n          hull = roundedHull(contour.map(function (p) {\n            return [p.x, p.y];\n          }), this.padding);\n          path = parsePathString(hull);\n        } else if (contour.length > 2) {\n          hull = paddedHull(contour.map(function (p) {\n            return [p.x, p.y];\n          }), this.padding);\n          path = getClosedSpline(hull);\n        }\n\n        break;\n\n      case 'bubble':\n        contour = genBubbleSet(members, nonMembers, this.cfg.bubbleCfg);\n        path = contour.length >= 2 && getClosedSpline(contour);\n        break;\n\n      default:\n    }\n\n    return path;\n  };\n\n  Hull.prototype.render = function () {\n    this.group.addShape('path', {\n      attrs: __assign({\n        path: this.path\n      }, this.cfg.style),\n      id: this.id,\n      name: this.cfg.id,\n      capture: false\n    });\n    this.group.toBack();\n  };\n  /**\n   * 增加hull的成员，同时如果该成员原先在nonMembers中，则从nonMembers中去掉\n   * @param item 节点实例\n   * @return boolean 添加成功返回 true，否则返回 false\n   */\n\n\n  Hull.prototype.addMember = function (item) {\n    if (!item) return;\n    if (isString(item)) item = this.graph.findById(item);\n    this.members.push(item);\n    var index = this.nonMembers.indexOf(item);\n\n    if (index > -1) {\n      this.nonMembers.splice(index, 1);\n    }\n\n    this.updateData(this.members, this.nonMembers);\n    return true;\n  };\n  /**\n   * 增加hull需要排除的节点，同时如果该成员原先在members中，则从members中去掉\n   * @param item 节点实例\n   * @return boolean 添加成功返回 true，否则返回 false\n   */\n\n\n  Hull.prototype.addNonMember = function (item) {\n    if (!item) return;\n    if (isString(item)) item = this.graph.findById(item);\n    this.nonMembers.push(item);\n    var index = this.members.indexOf(item);\n\n    if (index > -1) {\n      this.members.splice(index, 1);\n    }\n\n    this.updateData(this.members, this.nonMembers);\n    return true;\n  };\n  /**\n   * 移除hull中的成员\n   * @param node 节点实例\n   * @return boolean 移除成功返回 true，否则返回 false\n   */\n\n\n  Hull.prototype.removeMember = function (item) {\n    if (!item) return;\n    if (isString(item)) item = this.graph.findById(item);\n    var index = this.members.indexOf(item);\n\n    if (index > -1) {\n      this.members.splice(index, 1);\n      this.updateData(this.members, this.nonMembers);\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   * @param node 节点实例\n   * @return boolean 移除成功返回 true，否则返回 false\n   */\n\n\n  Hull.prototype.removeNonMember = function (item) {\n    if (!item) return;\n    if (isString(item)) item = this.graph.findById(item);\n    var index = this.nonMembers.indexOf(item);\n\n    if (index > -1) {\n      this.nonMembers.splice(index, 1);\n      this.updateData(this.members, this.nonMembers);\n      return true;\n    }\n\n    return false;\n  };\n\n  Hull.prototype.updateData = function (members, nonMembers) {\n    var _this = this;\n\n    this.group.findById(this.id).remove();\n    if (members) this.members = members.map(function (item) {\n      return isString(item) ? _this.graph.findById(item) : item;\n    });\n    if (nonMembers) this.nonMembers = nonMembers.map(function (item) {\n      return isString(item) ? _this.graph.findById(item) : item;\n    });\n    this.path = this.calcPath(this.members, this.nonMembers);\n    this.render();\n  };\n\n  Hull.prototype.updateStyle = function (cfg) {\n    var path = this.group.findById(this.id);\n    path.attr(__assign({}, cfg));\n  };\n  /**\n   * 更新 hull\n   * @param cfg hull 配置项\n   */\n\n\n  Hull.prototype.updateCfg = function (cfg) {\n    var _this = this;\n\n    this.cfg = deepMix(this.cfg, cfg);\n    this.id = this.cfg.id;\n    this.group = this.cfg.group;\n\n    if (cfg.members) {\n      this.members = this.cfg.members.map(function (item) {\n        return isString(item) ? _this.graph.findById(item) : item;\n      });\n    }\n\n    if (cfg.nonMembers) {\n      this.nonMembers = this.cfg.nonMembers.map(function (item) {\n        return isString(item) ? _this.graph.findById(item) : item;\n      });\n    } // TODO padding 设置太大，会影响到 contain 结果\n\n\n    this.setPadding();\n    this.setType();\n    this.path = this.calcPath(this.members, this.nonMembers);\n    this.render();\n  };\n  /**\n   * 判断是否在hull内部\n   * @param item\n   */\n\n\n  Hull.prototype.contain = function (item) {\n    var _this = this;\n\n    var nodeItem;\n\n    if (isString(item)) {\n      nodeItem = this.graph.findById(item);\n    } else {\n      nodeItem = item;\n    }\n\n    var shapePoints;\n    var shape = nodeItem.getKeyShape();\n\n    if (nodeItem.get('type') === 'path') {\n      shapePoints = pathToPoints(shape.attr('path'));\n    } else {\n      var shapeBBox = shape.getCanvasBBox();\n      shapePoints = [[shapeBBox.minX, shapeBBox.minY], [shapeBBox.maxX, shapeBBox.minY], [shapeBBox.maxX, shapeBBox.maxY], [shapeBBox.minX, shapeBBox.maxY]];\n    }\n\n    shapePoints = shapePoints.map(function (canvasPoint) {\n      var point = _this.graph.getPointByCanvas(canvasPoint[0], canvasPoint[1]);\n\n      return [point.x, point.y];\n    });\n    return isPolygonsIntersect(shapePoints, pathToPoints(this.path));\n  };\n\n  Hull.prototype.destroy = function () {\n    this.group.remove();\n    this.cfg = null;\n  };\n\n  return Hull;\n}();\n\nexport default Hull;","map":{"version":3,"names":["__assign","deepMix","isString","parsePathString","pathToPoints","getClosedSpline","roundedHull","paddedHull","isPolygonsIntersect","genConvexHull","genBubbleSet","Hull","graph","cfg","getDefaultCfg","id","group","members","map","item","findById","nonMembers","setPadding","setType","path","calcPath","render","prototype","type","style","fill","stroke","opacity","padding","nodeSize","length","getKeyShape","getCanvasBBox","width","bubbleCfg","nodeR0","nodeR1","morphBuffer","console","warn","contour","hull","p","x","y","addShape","attrs","name","capture","toBack","addMember","push","index","indexOf","splice","updateData","addNonMember","removeMember","removeNonMember","_this","remove","updateStyle","attr","updateCfg","contain","nodeItem","shapePoints","shape","get","shapeBBox","minX","minY","maxX","maxY","canvasPoint","point","getPointByCanvas","destroy"],"sources":["/Users/wawalike/Desktop/ggProject/node_modules/@antv/g6-core/es/item/hull.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport { deepMix, isString } from '@antv/util';\nimport { parsePathString } from '@antv/path-util';\nimport { pathToPoints, getClosedSpline, roundedHull, paddedHull } from '../util/path';\nimport { isPolygonsIntersect } from '../util/math';\nimport { genConvexHull } from '../element/hull/convexHull';\nimport { genBubbleSet } from '../element/hull/bubbleset';\n/**\n * 用于包裹内部的成员的轮廓。\n * convex hull(凸包)：http://geomalgorithms.com/a10-_hull-1.html#Monotone%20Chain\n * bubble: 使用 bubbleset算法，refer: http://vialab.science.uoit.ca/wp-content/papercite-data/pdf/col2009c.pdf\n * 通过配置 padding 可以调节包裹轮廓对节点的松紧程度\n */\n\nvar Hull =\n/** @class */\nfunction () {\n  function Hull(graph, cfg) {\n    this.cfg = deepMix(this.getDefaultCfg(), cfg);\n    this.graph = graph;\n    this.id = this.cfg.id;\n    this.group = this.cfg.group;\n    this.members = this.cfg.members.map(function (item) {\n      return isString(item) ? graph.findById(item) : item;\n    });\n    this.nonMembers = this.cfg.nonMembers.map(function (item) {\n      return isString(item) ? graph.findById(item) : item;\n    });\n    this.setPadding();\n    this.setType();\n    this.path = this.calcPath(this.members, this.nonMembers);\n    this.render();\n  }\n\n  Hull.prototype.getDefaultCfg = function () {\n    return {\n      id: 'g6-hull',\n      type: 'round-convex',\n      members: [],\n      nonMembers: [],\n      style: {\n        fill: 'lightblue',\n        stroke: 'blue',\n        opacity: 0.2\n      },\n      padding: 10\n    };\n  };\n\n  Hull.prototype.setPadding = function () {\n    var nodeSize = this.members.length && this.members[0].getKeyShape().getCanvasBBox().width / 2;\n    this.padding = this.cfg.padding > 0 ? this.cfg.padding + nodeSize : 10 + nodeSize;\n    this.cfg.bubbleCfg = {\n      nodeR0: this.padding - nodeSize,\n      nodeR1: this.padding - nodeSize,\n      morphBuffer: this.padding - nodeSize\n    };\n  };\n\n  Hull.prototype.setType = function () {\n    this.type = this.cfg.type;\n\n    if (this.members.length < 3) {\n      this.type = 'round-convex';\n    }\n\n    if (this.type !== 'round-convex' && this.type !== 'smooth-convex' && this.type !== 'bubble') {\n      console.warn('The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default.');\n      this.type = 'round-convex';\n    }\n  };\n\n  Hull.prototype.calcPath = function (members, nonMembers) {\n    var contour, path, hull;\n\n    switch (this.type) {\n      case 'round-convex':\n        contour = genConvexHull(members);\n        hull = roundedHull(contour.map(function (p) {\n          return [p.x, p.y];\n        }), this.padding);\n        path = parsePathString(hull);\n        break;\n\n      case 'smooth-convex':\n        contour = genConvexHull(members);\n\n        if (contour.length === 2) {\n          hull = roundedHull(contour.map(function (p) {\n            return [p.x, p.y];\n          }), this.padding);\n          path = parsePathString(hull);\n        } else if (contour.length > 2) {\n          hull = paddedHull(contour.map(function (p) {\n            return [p.x, p.y];\n          }), this.padding);\n          path = getClosedSpline(hull);\n        }\n\n        break;\n\n      case 'bubble':\n        contour = genBubbleSet(members, nonMembers, this.cfg.bubbleCfg);\n        path = contour.length >= 2 && getClosedSpline(contour);\n        break;\n\n      default:\n    }\n\n    return path;\n  };\n\n  Hull.prototype.render = function () {\n    this.group.addShape('path', {\n      attrs: __assign({\n        path: this.path\n      }, this.cfg.style),\n      id: this.id,\n      name: this.cfg.id,\n      capture: false\n    });\n    this.group.toBack();\n  };\n  /**\n   * 增加hull的成员，同时如果该成员原先在nonMembers中，则从nonMembers中去掉\n   * @param item 节点实例\n   * @return boolean 添加成功返回 true，否则返回 false\n   */\n\n\n  Hull.prototype.addMember = function (item) {\n    if (!item) return;\n    if (isString(item)) item = this.graph.findById(item);\n    this.members.push(item);\n    var index = this.nonMembers.indexOf(item);\n\n    if (index > -1) {\n      this.nonMembers.splice(index, 1);\n    }\n\n    this.updateData(this.members, this.nonMembers);\n    return true;\n  };\n  /**\n   * 增加hull需要排除的节点，同时如果该成员原先在members中，则从members中去掉\n   * @param item 节点实例\n   * @return boolean 添加成功返回 true，否则返回 false\n   */\n\n\n  Hull.prototype.addNonMember = function (item) {\n    if (!item) return;\n    if (isString(item)) item = this.graph.findById(item);\n    this.nonMembers.push(item);\n    var index = this.members.indexOf(item);\n\n    if (index > -1) {\n      this.members.splice(index, 1);\n    }\n\n    this.updateData(this.members, this.nonMembers);\n    return true;\n  };\n  /**\n   * 移除hull中的成员\n   * @param node 节点实例\n   * @return boolean 移除成功返回 true，否则返回 false\n   */\n\n\n  Hull.prototype.removeMember = function (item) {\n    if (!item) return;\n    if (isString(item)) item = this.graph.findById(item);\n    var index = this.members.indexOf(item);\n\n    if (index > -1) {\n      this.members.splice(index, 1);\n      this.updateData(this.members, this.nonMembers);\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   * @param node 节点实例\n   * @return boolean 移除成功返回 true，否则返回 false\n   */\n\n\n  Hull.prototype.removeNonMember = function (item) {\n    if (!item) return;\n    if (isString(item)) item = this.graph.findById(item);\n    var index = this.nonMembers.indexOf(item);\n\n    if (index > -1) {\n      this.nonMembers.splice(index, 1);\n      this.updateData(this.members, this.nonMembers);\n      return true;\n    }\n\n    return false;\n  };\n\n  Hull.prototype.updateData = function (members, nonMembers) {\n    var _this = this;\n\n    this.group.findById(this.id).remove();\n    if (members) this.members = members.map(function (item) {\n      return isString(item) ? _this.graph.findById(item) : item;\n    });\n    if (nonMembers) this.nonMembers = nonMembers.map(function (item) {\n      return isString(item) ? _this.graph.findById(item) : item;\n    });\n    this.path = this.calcPath(this.members, this.nonMembers);\n    this.render();\n  };\n\n  Hull.prototype.updateStyle = function (cfg) {\n    var path = this.group.findById(this.id);\n    path.attr(__assign({}, cfg));\n  };\n  /**\n   * 更新 hull\n   * @param cfg hull 配置项\n   */\n\n\n  Hull.prototype.updateCfg = function (cfg) {\n    var _this = this;\n\n    this.cfg = deepMix(this.cfg, cfg);\n    this.id = this.cfg.id;\n    this.group = this.cfg.group;\n\n    if (cfg.members) {\n      this.members = this.cfg.members.map(function (item) {\n        return isString(item) ? _this.graph.findById(item) : item;\n      });\n    }\n\n    if (cfg.nonMembers) {\n      this.nonMembers = this.cfg.nonMembers.map(function (item) {\n        return isString(item) ? _this.graph.findById(item) : item;\n      });\n    } // TODO padding 设置太大，会影响到 contain 结果\n\n\n    this.setPadding();\n    this.setType();\n    this.path = this.calcPath(this.members, this.nonMembers);\n    this.render();\n  };\n  /**\n   * 判断是否在hull内部\n   * @param item\n   */\n\n\n  Hull.prototype.contain = function (item) {\n    var _this = this;\n\n    var nodeItem;\n\n    if (isString(item)) {\n      nodeItem = this.graph.findById(item);\n    } else {\n      nodeItem = item;\n    }\n\n    var shapePoints;\n    var shape = nodeItem.getKeyShape();\n\n    if (nodeItem.get('type') === 'path') {\n      shapePoints = pathToPoints(shape.attr('path'));\n    } else {\n      var shapeBBox = shape.getCanvasBBox();\n      shapePoints = [[shapeBBox.minX, shapeBBox.minY], [shapeBBox.maxX, shapeBBox.minY], [shapeBBox.maxX, shapeBBox.maxY], [shapeBBox.minX, shapeBBox.maxY]];\n    }\n\n    shapePoints = shapePoints.map(function (canvasPoint) {\n      var point = _this.graph.getPointByCanvas(canvasPoint[0], canvasPoint[1]);\n\n      return [point.x, point.y];\n    });\n    return isPolygonsIntersect(shapePoints, pathToPoints(this.path));\n  };\n\n  Hull.prototype.destroy = function () {\n    this.group.remove();\n    this.cfg = null;\n  };\n\n  return Hull;\n}();\n\nexport default Hull;"],"mappings":"AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,OAAT,EAAkBC,QAAlB,QAAkC,YAAlC;AACA,SAASC,eAAT,QAAgC,iBAAhC;AACA,SAASC,YAAT,EAAuBC,eAAvB,EAAwCC,WAAxC,EAAqDC,UAArD,QAAuE,cAAvE;AACA,SAASC,mBAAT,QAAoC,cAApC;AACA,SAASC,aAAT,QAA8B,4BAA9B;AACA,SAASC,YAAT,QAA6B,2BAA7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,IAAI;AACR;AACA,YAAY;EACV,SAASA,IAAT,CAAcC,KAAd,EAAqBC,GAArB,EAA0B;IACxB,KAAKA,GAAL,GAAWZ,OAAO,CAAC,KAAKa,aAAL,EAAD,EAAuBD,GAAvB,CAAlB;IACA,KAAKD,KAAL,GAAaA,KAAb;IACA,KAAKG,EAAL,GAAU,KAAKF,GAAL,CAASE,EAAnB;IACA,KAAKC,KAAL,GAAa,KAAKH,GAAL,CAASG,KAAtB;IACA,KAAKC,OAAL,GAAe,KAAKJ,GAAL,CAASI,OAAT,CAAiBC,GAAjB,CAAqB,UAAUC,IAAV,EAAgB;MAClD,OAAOjB,QAAQ,CAACiB,IAAD,CAAR,GAAiBP,KAAK,CAACQ,QAAN,CAAeD,IAAf,CAAjB,GAAwCA,IAA/C;IACD,CAFc,CAAf;IAGA,KAAKE,UAAL,GAAkB,KAAKR,GAAL,CAASQ,UAAT,CAAoBH,GAApB,CAAwB,UAAUC,IAAV,EAAgB;MACxD,OAAOjB,QAAQ,CAACiB,IAAD,CAAR,GAAiBP,KAAK,CAACQ,QAAN,CAAeD,IAAf,CAAjB,GAAwCA,IAA/C;IACD,CAFiB,CAAlB;IAGA,KAAKG,UAAL;IACA,KAAKC,OAAL;IACA,KAAKC,IAAL,GAAY,KAAKC,QAAL,CAAc,KAAKR,OAAnB,EAA4B,KAAKI,UAAjC,CAAZ;IACA,KAAKK,MAAL;EACD;;EAEDf,IAAI,CAACgB,SAAL,CAAeb,aAAf,GAA+B,YAAY;IACzC,OAAO;MACLC,EAAE,EAAE,SADC;MAELa,IAAI,EAAE,cAFD;MAGLX,OAAO,EAAE,EAHJ;MAILI,UAAU,EAAE,EAJP;MAKLQ,KAAK,EAAE;QACLC,IAAI,EAAE,WADD;QAELC,MAAM,EAAE,MAFH;QAGLC,OAAO,EAAE;MAHJ,CALF;MAULC,OAAO,EAAE;IAVJ,CAAP;EAYD,CAbD;;EAeAtB,IAAI,CAACgB,SAAL,CAAeL,UAAf,GAA4B,YAAY;IACtC,IAAIY,QAAQ,GAAG,KAAKjB,OAAL,CAAakB,MAAb,IAAuB,KAAKlB,OAAL,CAAa,CAAb,EAAgBmB,WAAhB,GAA8BC,aAA9B,GAA8CC,KAA9C,GAAsD,CAA5F;IACA,KAAKL,OAAL,GAAe,KAAKpB,GAAL,CAASoB,OAAT,GAAmB,CAAnB,GAAuB,KAAKpB,GAAL,CAASoB,OAAT,GAAmBC,QAA1C,GAAqD,KAAKA,QAAzE;IACA,KAAKrB,GAAL,CAAS0B,SAAT,GAAqB;MACnBC,MAAM,EAAE,KAAKP,OAAL,GAAeC,QADJ;MAEnBO,MAAM,EAAE,KAAKR,OAAL,GAAeC,QAFJ;MAGnBQ,WAAW,EAAE,KAAKT,OAAL,GAAeC;IAHT,CAArB;EAKD,CARD;;EAUAvB,IAAI,CAACgB,SAAL,CAAeJ,OAAf,GAAyB,YAAY;IACnC,KAAKK,IAAL,GAAY,KAAKf,GAAL,CAASe,IAArB;;IAEA,IAAI,KAAKX,OAAL,CAAakB,MAAb,GAAsB,CAA1B,EAA6B;MAC3B,KAAKP,IAAL,GAAY,cAAZ;IACD;;IAED,IAAI,KAAKA,IAAL,KAAc,cAAd,IAAgC,KAAKA,IAAL,KAAc,eAA9C,IAAiE,KAAKA,IAAL,KAAc,QAAnF,EAA6F;MAC3Fe,OAAO,CAACC,IAAR,CAAa,wGAAb;MACA,KAAKhB,IAAL,GAAY,cAAZ;IACD;EACF,CAXD;;EAaAjB,IAAI,CAACgB,SAAL,CAAeF,QAAf,GAA0B,UAAUR,OAAV,EAAmBI,UAAnB,EAA+B;IACvD,IAAIwB,OAAJ,EAAarB,IAAb,EAAmBsB,IAAnB;;IAEA,QAAQ,KAAKlB,IAAb;MACE,KAAK,cAAL;QACEiB,OAAO,GAAGpC,aAAa,CAACQ,OAAD,CAAvB;QACA6B,IAAI,GAAGxC,WAAW,CAACuC,OAAO,CAAC3B,GAAR,CAAY,UAAU6B,CAAV,EAAa;UAC1C,OAAO,CAACA,CAAC,CAACC,CAAH,EAAMD,CAAC,CAACE,CAAR,CAAP;QACD,CAFkB,CAAD,EAEd,KAAKhB,OAFS,CAAlB;QAGAT,IAAI,GAAGrB,eAAe,CAAC2C,IAAD,CAAtB;QACA;;MAEF,KAAK,eAAL;QACED,OAAO,GAAGpC,aAAa,CAACQ,OAAD,CAAvB;;QAEA,IAAI4B,OAAO,CAACV,MAAR,KAAmB,CAAvB,EAA0B;UACxBW,IAAI,GAAGxC,WAAW,CAACuC,OAAO,CAAC3B,GAAR,CAAY,UAAU6B,CAAV,EAAa;YAC1C,OAAO,CAACA,CAAC,CAACC,CAAH,EAAMD,CAAC,CAACE,CAAR,CAAP;UACD,CAFkB,CAAD,EAEd,KAAKhB,OAFS,CAAlB;UAGAT,IAAI,GAAGrB,eAAe,CAAC2C,IAAD,CAAtB;QACD,CALD,MAKO,IAAID,OAAO,CAACV,MAAR,GAAiB,CAArB,EAAwB;UAC7BW,IAAI,GAAGvC,UAAU,CAACsC,OAAO,CAAC3B,GAAR,CAAY,UAAU6B,CAAV,EAAa;YACzC,OAAO,CAACA,CAAC,CAACC,CAAH,EAAMD,CAAC,CAACE,CAAR,CAAP;UACD,CAFiB,CAAD,EAEb,KAAKhB,OAFQ,CAAjB;UAGAT,IAAI,GAAGnB,eAAe,CAACyC,IAAD,CAAtB;QACD;;QAED;;MAEF,KAAK,QAAL;QACED,OAAO,GAAGnC,YAAY,CAACO,OAAD,EAAUI,UAAV,EAAsB,KAAKR,GAAL,CAAS0B,SAA/B,CAAtB;QACAf,IAAI,GAAGqB,OAAO,CAACV,MAAR,IAAkB,CAAlB,IAAuB9B,eAAe,CAACwC,OAAD,CAA7C;QACA;;MAEF;IA/BF;;IAkCA,OAAOrB,IAAP;EACD,CAtCD;;EAwCAb,IAAI,CAACgB,SAAL,CAAeD,MAAf,GAAwB,YAAY;IAClC,KAAKV,KAAL,CAAWkC,QAAX,CAAoB,MAApB,EAA4B;MAC1BC,KAAK,EAAEnD,QAAQ,CAAC;QACdwB,IAAI,EAAE,KAAKA;MADG,CAAD,EAEZ,KAAKX,GAAL,CAASgB,KAFG,CADW;MAI1Bd,EAAE,EAAE,KAAKA,EAJiB;MAK1BqC,IAAI,EAAE,KAAKvC,GAAL,CAASE,EALW;MAM1BsC,OAAO,EAAE;IANiB,CAA5B;IAQA,KAAKrC,KAAL,CAAWsC,MAAX;EACD,CAVD;EAWA;AACF;AACA;AACA;AACA;;;EAGE3C,IAAI,CAACgB,SAAL,CAAe4B,SAAf,GAA2B,UAAUpC,IAAV,EAAgB;IACzC,IAAI,CAACA,IAAL,EAAW;IACX,IAAIjB,QAAQ,CAACiB,IAAD,CAAZ,EAAoBA,IAAI,GAAG,KAAKP,KAAL,CAAWQ,QAAX,CAAoBD,IAApB,CAAP;IACpB,KAAKF,OAAL,CAAauC,IAAb,CAAkBrC,IAAlB;IACA,IAAIsC,KAAK,GAAG,KAAKpC,UAAL,CAAgBqC,OAAhB,CAAwBvC,IAAxB,CAAZ;;IAEA,IAAIsC,KAAK,GAAG,CAAC,CAAb,EAAgB;MACd,KAAKpC,UAAL,CAAgBsC,MAAhB,CAAuBF,KAAvB,EAA8B,CAA9B;IACD;;IAED,KAAKG,UAAL,CAAgB,KAAK3C,OAArB,EAA8B,KAAKI,UAAnC;IACA,OAAO,IAAP;EACD,CAZD;EAaA;AACF;AACA;AACA;AACA;;;EAGEV,IAAI,CAACgB,SAAL,CAAekC,YAAf,GAA8B,UAAU1C,IAAV,EAAgB;IAC5C,IAAI,CAACA,IAAL,EAAW;IACX,IAAIjB,QAAQ,CAACiB,IAAD,CAAZ,EAAoBA,IAAI,GAAG,KAAKP,KAAL,CAAWQ,QAAX,CAAoBD,IAApB,CAAP;IACpB,KAAKE,UAAL,CAAgBmC,IAAhB,CAAqBrC,IAArB;IACA,IAAIsC,KAAK,GAAG,KAAKxC,OAAL,CAAayC,OAAb,CAAqBvC,IAArB,CAAZ;;IAEA,IAAIsC,KAAK,GAAG,CAAC,CAAb,EAAgB;MACd,KAAKxC,OAAL,CAAa0C,MAAb,CAAoBF,KAApB,EAA2B,CAA3B;IACD;;IAED,KAAKG,UAAL,CAAgB,KAAK3C,OAArB,EAA8B,KAAKI,UAAnC;IACA,OAAO,IAAP;EACD,CAZD;EAaA;AACF;AACA;AACA;AACA;;;EAGEV,IAAI,CAACgB,SAAL,CAAemC,YAAf,GAA8B,UAAU3C,IAAV,EAAgB;IAC5C,IAAI,CAACA,IAAL,EAAW;IACX,IAAIjB,QAAQ,CAACiB,IAAD,CAAZ,EAAoBA,IAAI,GAAG,KAAKP,KAAL,CAAWQ,QAAX,CAAoBD,IAApB,CAAP;IACpB,IAAIsC,KAAK,GAAG,KAAKxC,OAAL,CAAayC,OAAb,CAAqBvC,IAArB,CAAZ;;IAEA,IAAIsC,KAAK,GAAG,CAAC,CAAb,EAAgB;MACd,KAAKxC,OAAL,CAAa0C,MAAb,CAAoBF,KAApB,EAA2B,CAA3B;MACA,KAAKG,UAAL,CAAgB,KAAK3C,OAArB,EAA8B,KAAKI,UAAnC;MACA,OAAO,IAAP;IACD;;IAED,OAAO,KAAP;EACD,CAZD;EAaA;AACF;AACA;AACA;;;EAGEV,IAAI,CAACgB,SAAL,CAAeoC,eAAf,GAAiC,UAAU5C,IAAV,EAAgB;IAC/C,IAAI,CAACA,IAAL,EAAW;IACX,IAAIjB,QAAQ,CAACiB,IAAD,CAAZ,EAAoBA,IAAI,GAAG,KAAKP,KAAL,CAAWQ,QAAX,CAAoBD,IAApB,CAAP;IACpB,IAAIsC,KAAK,GAAG,KAAKpC,UAAL,CAAgBqC,OAAhB,CAAwBvC,IAAxB,CAAZ;;IAEA,IAAIsC,KAAK,GAAG,CAAC,CAAb,EAAgB;MACd,KAAKpC,UAAL,CAAgBsC,MAAhB,CAAuBF,KAAvB,EAA8B,CAA9B;MACA,KAAKG,UAAL,CAAgB,KAAK3C,OAArB,EAA8B,KAAKI,UAAnC;MACA,OAAO,IAAP;IACD;;IAED,OAAO,KAAP;EACD,CAZD;;EAcAV,IAAI,CAACgB,SAAL,CAAeiC,UAAf,GAA4B,UAAU3C,OAAV,EAAmBI,UAAnB,EAA+B;IACzD,IAAI2C,KAAK,GAAG,IAAZ;;IAEA,KAAKhD,KAAL,CAAWI,QAAX,CAAoB,KAAKL,EAAzB,EAA6BkD,MAA7B;IACA,IAAIhD,OAAJ,EAAa,KAAKA,OAAL,GAAeA,OAAO,CAACC,GAAR,CAAY,UAAUC,IAAV,EAAgB;MACtD,OAAOjB,QAAQ,CAACiB,IAAD,CAAR,GAAiB6C,KAAK,CAACpD,KAAN,CAAYQ,QAAZ,CAAqBD,IAArB,CAAjB,GAA8CA,IAArD;IACD,CAF2B,CAAf;IAGb,IAAIE,UAAJ,EAAgB,KAAKA,UAAL,GAAkBA,UAAU,CAACH,GAAX,CAAe,UAAUC,IAAV,EAAgB;MAC/D,OAAOjB,QAAQ,CAACiB,IAAD,CAAR,GAAiB6C,KAAK,CAACpD,KAAN,CAAYQ,QAAZ,CAAqBD,IAArB,CAAjB,GAA8CA,IAArD;IACD,CAFiC,CAAlB;IAGhB,KAAKK,IAAL,GAAY,KAAKC,QAAL,CAAc,KAAKR,OAAnB,EAA4B,KAAKI,UAAjC,CAAZ;IACA,KAAKK,MAAL;EACD,CAZD;;EAcAf,IAAI,CAACgB,SAAL,CAAeuC,WAAf,GAA6B,UAAUrD,GAAV,EAAe;IAC1C,IAAIW,IAAI,GAAG,KAAKR,KAAL,CAAWI,QAAX,CAAoB,KAAKL,EAAzB,CAAX;IACAS,IAAI,CAAC2C,IAAL,CAAUnE,QAAQ,CAAC,EAAD,EAAKa,GAAL,CAAlB;EACD,CAHD;EAIA;AACF;AACA;AACA;;;EAGEF,IAAI,CAACgB,SAAL,CAAeyC,SAAf,GAA2B,UAAUvD,GAAV,EAAe;IACxC,IAAImD,KAAK,GAAG,IAAZ;;IAEA,KAAKnD,GAAL,GAAWZ,OAAO,CAAC,KAAKY,GAAN,EAAWA,GAAX,CAAlB;IACA,KAAKE,EAAL,GAAU,KAAKF,GAAL,CAASE,EAAnB;IACA,KAAKC,KAAL,GAAa,KAAKH,GAAL,CAASG,KAAtB;;IAEA,IAAIH,GAAG,CAACI,OAAR,EAAiB;MACf,KAAKA,OAAL,GAAe,KAAKJ,GAAL,CAASI,OAAT,CAAiBC,GAAjB,CAAqB,UAAUC,IAAV,EAAgB;QAClD,OAAOjB,QAAQ,CAACiB,IAAD,CAAR,GAAiB6C,KAAK,CAACpD,KAAN,CAAYQ,QAAZ,CAAqBD,IAArB,CAAjB,GAA8CA,IAArD;MACD,CAFc,CAAf;IAGD;;IAED,IAAIN,GAAG,CAACQ,UAAR,EAAoB;MAClB,KAAKA,UAAL,GAAkB,KAAKR,GAAL,CAASQ,UAAT,CAAoBH,GAApB,CAAwB,UAAUC,IAAV,EAAgB;QACxD,OAAOjB,QAAQ,CAACiB,IAAD,CAAR,GAAiB6C,KAAK,CAACpD,KAAN,CAAYQ,QAAZ,CAAqBD,IAArB,CAAjB,GAA8CA,IAArD;MACD,CAFiB,CAAlB;IAGD,CAjBuC,CAiBtC;;;IAGF,KAAKG,UAAL;IACA,KAAKC,OAAL;IACA,KAAKC,IAAL,GAAY,KAAKC,QAAL,CAAc,KAAKR,OAAnB,EAA4B,KAAKI,UAAjC,CAAZ;IACA,KAAKK,MAAL;EACD,CAxBD;EAyBA;AACF;AACA;AACA;;;EAGEf,IAAI,CAACgB,SAAL,CAAe0C,OAAf,GAAyB,UAAUlD,IAAV,EAAgB;IACvC,IAAI6C,KAAK,GAAG,IAAZ;;IAEA,IAAIM,QAAJ;;IAEA,IAAIpE,QAAQ,CAACiB,IAAD,CAAZ,EAAoB;MAClBmD,QAAQ,GAAG,KAAK1D,KAAL,CAAWQ,QAAX,CAAoBD,IAApB,CAAX;IACD,CAFD,MAEO;MACLmD,QAAQ,GAAGnD,IAAX;IACD;;IAED,IAAIoD,WAAJ;IACA,IAAIC,KAAK,GAAGF,QAAQ,CAAClC,WAAT,EAAZ;;IAEA,IAAIkC,QAAQ,CAACG,GAAT,CAAa,MAAb,MAAyB,MAA7B,EAAqC;MACnCF,WAAW,GAAGnE,YAAY,CAACoE,KAAK,CAACL,IAAN,CAAW,MAAX,CAAD,CAA1B;IACD,CAFD,MAEO;MACL,IAAIO,SAAS,GAAGF,KAAK,CAACnC,aAAN,EAAhB;MACAkC,WAAW,GAAG,CAAC,CAACG,SAAS,CAACC,IAAX,EAAiBD,SAAS,CAACE,IAA3B,CAAD,EAAmC,CAACF,SAAS,CAACG,IAAX,EAAiBH,SAAS,CAACE,IAA3B,CAAnC,EAAqE,CAACF,SAAS,CAACG,IAAX,EAAiBH,SAAS,CAACI,IAA3B,CAArE,EAAuG,CAACJ,SAAS,CAACC,IAAX,EAAiBD,SAAS,CAACI,IAA3B,CAAvG,CAAd;IACD;;IAEDP,WAAW,GAAGA,WAAW,CAACrD,GAAZ,CAAgB,UAAU6D,WAAV,EAAuB;MACnD,IAAIC,KAAK,GAAGhB,KAAK,CAACpD,KAAN,CAAYqE,gBAAZ,CAA6BF,WAAW,CAAC,CAAD,CAAxC,EAA6CA,WAAW,CAAC,CAAD,CAAxD,CAAZ;;MAEA,OAAO,CAACC,KAAK,CAAChC,CAAP,EAAUgC,KAAK,CAAC/B,CAAhB,CAAP;IACD,CAJa,CAAd;IAKA,OAAOzC,mBAAmB,CAAC+D,WAAD,EAAcnE,YAAY,CAAC,KAAKoB,IAAN,CAA1B,CAA1B;EACD,CA3BD;;EA6BAb,IAAI,CAACgB,SAAL,CAAeuD,OAAf,GAAyB,YAAY;IACnC,KAAKlE,KAAL,CAAWiD,MAAX;IACA,KAAKpD,GAAL,GAAW,IAAX;EACD,CAHD;;EAKA,OAAOF,IAAP;AACD,CArRD,EAFA;;AAyRA,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}