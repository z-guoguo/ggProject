{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { ns } from './elem';\nimport { kebabCase } from '../string/format';\nconst CASE_SENSITIVE_ATTR = ['viewBox', 'attributeName', 'attributeType', 'repeatCount'];\nexport function getAttribute(elem, name) {\n  return elem.getAttribute(name);\n}\nexport function removeAttribute(elem, name) {\n  const qualified = qualifyAttr(name);\n\n  if (qualified.ns) {\n    if (elem.hasAttributeNS(qualified.ns, qualified.local)) {\n      elem.removeAttributeNS(qualified.ns, qualified.local);\n    }\n  } else if (elem.hasAttribute(name)) {\n    elem.removeAttribute(name);\n  }\n}\nexport function setAttribute(elem, name, value) {\n  if (value == null) {\n    return removeAttribute(elem, name);\n  }\n\n  const qualified = qualifyAttr(name);\n\n  if (qualified.ns && typeof value === 'string') {\n    elem.setAttributeNS(qualified.ns, name, value);\n  } else if (name === 'id') {\n    elem.id = `${value}`;\n  } else {\n    elem.setAttribute(name, `${value}`);\n  }\n}\nexport function setAttributes(elem, attrs) {\n  Object.keys(attrs).forEach(name => {\n    setAttribute(elem, name, attrs[name]);\n  });\n}\nexport function attr(elem, name, value) {\n  if (name == null) {\n    const attrs = elem.attributes;\n    const ret = {};\n\n    for (let i = 0; i < attrs.length; i += 1) {\n      ret[attrs[i].name] = attrs[i].value;\n    }\n\n    return ret;\n  }\n\n  if (typeof name === 'string' && value === undefined) {\n    return elem.getAttribute(name);\n  }\n\n  if (typeof name === 'object') {\n    setAttributes(elem, name);\n  } else {\n    setAttribute(elem, name, value);\n  }\n}\nexport function qualifyAttr(name) {\n  if (name.indexOf(':') !== -1) {\n    const combinedKey = name.split(':');\n    return {\n      ns: ns[combinedKey[0]],\n      local: combinedKey[1]\n    };\n  }\n\n  return {\n    ns: null,\n    local: name\n  };\n}\nexport function kebablizeAttrs(attrs) {\n  const result = {};\n  Object.keys(attrs).forEach(key => {\n    const name = CASE_SENSITIVE_ATTR.includes(key) ? key : kebabCase(key);\n    result[name] = attrs[key];\n  });\n  return result;\n}\nexport function styleToObject(styleString) {\n  const ret = {};\n  const styles = styleString.split(';');\n  styles.forEach(item => {\n    const section = item.trim();\n\n    if (section) {\n      const pair = section.split('=');\n\n      if (pair.length) {\n        ret[pair[0].trim()] = pair[1] ? pair[1].trim() : '';\n      }\n    }\n  });\n  return ret;\n}\nexport function mergeAttrs(target, source) {\n  Object.keys(source).forEach(attr => {\n    if (attr === 'class') {\n      target[attr] = target[attr] ? `${target[attr]} ${source[attr]}` : source[attr];\n    } else if (attr === 'style') {\n      const to = typeof target[attr] === 'object';\n      const so = typeof source[attr] === 'object';\n      let tt;\n      let ss;\n\n      if (to && so) {\n        tt = target[attr];\n        ss = source[attr];\n      } else if (to) {\n        tt = target[attr];\n        ss = styleToObject(source[attr]);\n      } else if (so) {\n        tt = styleToObject(target[attr]);\n        ss = source[attr];\n      } else {\n        tt = styleToObject(target[attr]);\n        ss = styleToObject(source[attr]);\n      }\n\n      target[attr] = mergeAttrs(tt, ss);\n    } else {\n      target[attr] = source[attr];\n    }\n  });\n  return target;\n}","map":{"version":3,"mappings":"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","names":["ns","kebabCase","CASE_SENSITIVE_ATTR","getAttribute","elem","name","removeAttribute","qualified","qualifyAttr","hasAttributeNS","local","removeAttributeNS","hasAttribute","setAttribute","value","setAttributeNS","id","setAttributes","attrs","Object","keys","forEach","attr","attributes","ret","i","length","undefined","indexOf","combinedKey","split","kebablizeAttrs","result","key","includes","styleToObject","styleString","styles","item","section","trim","pair","mergeAttrs","target","source","to","so","tt","ss"],"sourceRoot":"","sources":["../../../src/util/dom/attr.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}