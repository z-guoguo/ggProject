{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { FunctionExt } from '../../util';\nimport { View } from '../../view/view';\nimport { Graph } from '../../graph/graph';\nvar ClassName;\n\n(function (ClassName) {\n  ClassName.root = 'widget-minimap';\n  ClassName.viewport = `${ClassName.root}-viewport`;\n  ClassName.zoom = `${ClassName.viewport}-zoom`;\n})(ClassName || (ClassName = {}));\n\nexport class MiniMap extends View {\n  constructor(options) {\n    super();\n    this.options = Object.assign(Object.assign({}, Util.defaultOptions), options);\n    this.updateViewport = FunctionExt.debounce(this.updateViewport.bind(this), 0);\n    this.container = document.createElement('div');\n    this.$container = this.$(this.container).addClass(this.prefixClassName(ClassName.root));\n    const graphContainer = document.createElement('div');\n    this.container.appendChild(graphContainer);\n    this.$viewport = this.$('<div>').addClass(this.prefixClassName(ClassName.viewport));\n\n    if (this.options.scalable) {\n      this.zoomHandle = this.$('<div>').addClass(this.prefixClassName(ClassName.zoom)).appendTo(this.$viewport).get(0);\n    }\n\n    this.$container.append(this.$viewport).css({\n      width: this.options.width,\n      height: this.options.height,\n      padding: this.options.padding\n    });\n\n    if (this.options.container) {\n      this.options.container.appendChild(this.container);\n    }\n\n    this.sourceGraph = this.graph;\n    const targetGraphOptions = Object.assign(Object.assign({}, this.options.graphOptions), {\n      container: graphContainer,\n      model: this.sourceGraph.model,\n      frozen: true,\n      async: this.sourceGraph.isAsync(),\n      interacting: false,\n      grid: false,\n      background: false,\n      rotating: false,\n      resizing: false,\n      embedding: false,\n      selecting: false,\n      snapline: false,\n      clipboard: false,\n      history: false,\n      scroller: false\n    });\n    this.targetGraph = this.options.createGraph ? this.options.createGraph(targetGraphOptions) : new Graph(targetGraphOptions);\n    this.targetGraph.renderer.unfreeze();\n    this.updatePaper(this.sourceGraph.options.width, this.sourceGraph.options.height);\n    this.startListening();\n  }\n\n  get graph() {\n    return this.options.graph;\n  }\n\n  get scroller() {\n    return this.graph.scroller.widget;\n  }\n\n  get graphContainer() {\n    if (this.scroller) {\n      return this.scroller.container;\n    }\n\n    return this.graph.container;\n  }\n\n  get $graphContainer() {\n    if (this.scroller) {\n      return this.scroller.$container;\n    }\n\n    return this.$(this.graph.container);\n  }\n\n  startListening() {\n    if (this.scroller) {\n      this.$graphContainer.on(`scroll${this.getEventNamespace()}`, this.updateViewport);\n    } else {\n      this.sourceGraph.on('translate', this.onTransform, this);\n      this.sourceGraph.on('scale', this.onTransform, this);\n      this.sourceGraph.on('model:updated', this.onModelUpdated, this);\n    }\n\n    this.sourceGraph.on('resize', this.updatePaper, this);\n    this.delegateEvents({\n      mousedown: 'startAction',\n      touchstart: 'startAction',\n      [`mousedown .${this.prefixClassName('graph')}`]: 'scrollTo',\n      [`touchstart .${this.prefixClassName('graph')}`]: 'scrollTo'\n    });\n  }\n\n  stopListening() {\n    if (this.scroller) {\n      this.$graphContainer.off(this.getEventNamespace());\n    } else {\n      this.sourceGraph.off('translate', this.onTransform, this);\n      this.sourceGraph.off('scale', this.onTransform, this);\n      this.sourceGraph.off('model:updated', this.onModelUpdated, this);\n    }\n\n    this.sourceGraph.off('resize', this.updatePaper, this);\n    this.undelegateEvents();\n  }\n\n  onRemove() {\n    this.targetGraph.view.remove();\n    this.stopListening();\n    this.targetGraph.dispose();\n  }\n\n  onTransform(options) {\n    if (options.ui || this.targetGraphTransforming) {\n      this.updateViewport();\n    }\n  }\n\n  onModelUpdated() {\n    this.targetGraph.zoomToFit();\n  }\n\n  updatePaper(w, h) {\n    let width;\n    let height;\n\n    if (typeof w === 'object') {\n      width = w.width;\n      height = w.height;\n    } else {\n      width = w;\n      height = h;\n    }\n\n    const origin = this.sourceGraph.options;\n    const scale = this.sourceGraph.transform.getScale();\n    const maxWidth = this.options.width - 2 * this.options.padding;\n    const maxHeight = this.options.height - 2 * this.options.padding;\n    width /= scale.sx; // eslint-disable-line\n\n    height /= scale.sy; // eslint-disable-line\n\n    this.ratio = Math.min(maxWidth / width, maxHeight / height);\n    const ratio = this.ratio;\n    const x = origin.x * ratio / scale.sx;\n    const y = origin.y * ratio / scale.sy;\n    width *= ratio; // eslint-disable-line\n\n    height *= ratio; // eslint-disable-line\n\n    this.targetGraph.resizeGraph(width, height);\n    this.targetGraph.translate(x, y);\n\n    if (this.scroller) {\n      this.targetGraph.scale(ratio, ratio);\n    } else {\n      this.targetGraph.zoomToFit();\n    }\n\n    this.updateViewport();\n    return this;\n  }\n\n  updateViewport() {\n    const sourceGraphScale = this.sourceGraph.transform.getScale();\n    const targetGraphScale = this.targetGraph.transform.getScale();\n    let origin = null;\n\n    if (this.scroller) {\n      origin = this.scroller.clientToLocalPoint(0, 0);\n    } else {\n      origin = this.graph.graphToLocal(0, 0);\n    }\n\n    const position = this.$(this.targetGraph.container).position();\n    const translation = this.targetGraph.translate();\n    translation.ty = translation.ty || 0;\n    this.geometry = {\n      top: position.top + origin.y * targetGraphScale.sy + translation.ty,\n      left: position.left + origin.x * targetGraphScale.sx + translation.tx,\n      width: this.$graphContainer.innerWidth() * targetGraphScale.sx / sourceGraphScale.sx,\n      height: this.$graphContainer.innerHeight() * targetGraphScale.sy / sourceGraphScale.sy\n    };\n    this.$viewport.css(this.geometry);\n  }\n\n  startAction(evt) {\n    const e = this.normalizeEvent(evt);\n    const action = e.target === this.zoomHandle ? 'zooming' : 'panning';\n    const {\n      tx,\n      ty\n    } = this.sourceGraph.translate();\n    const eventData = {\n      action,\n      clientX: e.clientX,\n      clientY: e.clientY,\n      scrollLeft: this.graphContainer.scrollLeft,\n      scrollTop: this.graphContainer.scrollTop,\n      zoom: this.sourceGraph.zoom(),\n      scale: this.sourceGraph.transform.getScale(),\n      geometry: this.geometry,\n      translateX: tx,\n      translateY: ty\n    };\n    this.targetGraphTransforming = true;\n    this.delegateDocumentEvents(Util.documentEvents, eventData);\n  }\n\n  doAction(evt) {\n    const e = this.normalizeEvent(evt);\n    const clientX = e.clientX;\n    const clientY = e.clientY;\n    const data = e.data;\n\n    switch (data.action) {\n      case 'panning':\n        {\n          const scale = this.sourceGraph.transform.getScale();\n          const rx = (clientX - data.clientX) * scale.sx;\n          const ry = (clientY - data.clientY) * scale.sy;\n\n          if (this.scroller) {\n            this.graphContainer.scrollLeft = data.scrollLeft + rx / this.ratio;\n            this.graphContainer.scrollTop = data.scrollTop + ry / this.ratio;\n          } else {\n            this.sourceGraph.translate(data.translateX - rx / this.ratio, data.translateY - ry / this.ratio);\n          }\n\n          break;\n        }\n\n      case 'zooming':\n        {\n          const startScale = data.scale;\n          const startGeometry = data.geometry;\n          const delta = 1 + (data.clientX - clientX) / startGeometry.width / startScale.sx;\n\n          if (data.frameId) {\n            cancelAnimationFrame(data.frameId);\n          }\n\n          data.frameId = requestAnimationFrame(() => {\n            this.sourceGraph.zoom(delta * data.zoom, {\n              absolute: true,\n              minScale: this.options.minScale,\n              maxScale: this.options.maxScale\n            });\n          });\n          break;\n        }\n\n      default:\n        break;\n    }\n  }\n\n  stopAction() {\n    this.undelegateDocumentEvents();\n    this.targetGraphTransforming = false;\n  }\n\n  scrollTo(evt) {\n    const e = this.normalizeEvent(evt);\n    let x;\n    let y;\n    const ts = this.targetGraph.translate();\n    ts.ty = ts.ty || 0;\n\n    if (e.offsetX == null) {\n      const offset = this.$(this.targetGraph.container).offset();\n      x = e.pageX - offset.left;\n      y = e.pageY - offset.top;\n    } else {\n      x = e.offsetX;\n      y = e.offsetY;\n    }\n\n    const cx = (x - ts.tx) / this.ratio;\n    const cy = (y - ts.ty) / this.ratio;\n    this.sourceGraph.centerPoint(cx, cy);\n  }\n\n  dispose() {\n    this.remove();\n  }\n\n}\n\n__decorate([View.dispose()], MiniMap.prototype, \"dispose\", null);\n\nvar Util;\n\n(function (Util) {\n  Util.defaultOptions = {\n    width: 300,\n    height: 200,\n    padding: 10,\n    scalable: true,\n    minScale: 0.01,\n    maxScale: 16,\n    graphOptions: {},\n    createGraph: options => new Graph(options)\n  };\n  Util.documentEvents = {\n    mousemove: 'doAction',\n    touchmove: 'doAction',\n    mouseup: 'stopAction',\n    touchend: 'stopAction'\n  };\n})(Util || (Util = {}));","map":{"version":3,"mappings":"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","names":["FunctionExt","View","Graph","ClassName","MiniMap","constructor","options","Object","Util","defaultOptions","updateViewport","debounce","bind","container","document","createElement","$container","$","addClass","prefixClassName","root","graphContainer","appendChild","$viewport","viewport","scalable","zoomHandle","zoom","appendTo","get","append","css","width","height","padding","sourceGraph","graph","targetGraphOptions","graphOptions","model","frozen","async","isAsync","interacting","grid","background","rotating","resizing","embedding","selecting","snapline","clipboard","history","scroller","targetGraph","createGraph","renderer","unfreeze","updatePaper","startListening","widget","$graphContainer","on","getEventNamespace","onTransform","onModelUpdated","delegateEvents","mousedown","touchstart","stopListening","off","undelegateEvents","onRemove","view","remove","dispose","ui","targetGraphTransforming","zoomToFit","w","h","origin","scale","transform","getScale","maxWidth","maxHeight","sx","sy","ratio","Math","min","x","y","resizeGraph","translate","sourceGraphScale","targetGraphScale","clientToLocalPoint","graphToLocal","position","translation","ty","geometry","top","left","tx","innerWidth","innerHeight","startAction","evt","e","normalizeEvent","action","target","eventData","clientX","clientY","scrollLeft","scrollTop","translateX","translateY","delegateDocumentEvents","documentEvents","doAction","data","rx","ry","startScale","startGeometry","delta","frameId","cancelAnimationFrame","requestAnimationFrame","absolute","minScale","maxScale","stopAction","undelegateDocumentEvents","scrollTo","ts","offsetX","offset","pageX","pageY","offsetY","cx","cy","centerPoint","__decorate","mousemove","touchmove","mouseup","touchend"],"sourceRoot":"","sources":["../../../src/addon/minimap/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}